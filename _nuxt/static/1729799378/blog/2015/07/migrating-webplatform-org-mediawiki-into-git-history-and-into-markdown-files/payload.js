__NUXT_JSONP__("/blog/2015/07/migrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK){return {data:[{},{},{},{canonical:null,content:{title:"Migrating WebPlatform.org MediaWiki into Git as Markdown files",locale:G,created:"2015-07-30T00:00:00.000Z",updated:"2020-11-18T00:00:00.000Z",status:"publish",revising:H,categories:[X],tags:["archiving","open-source","operations","webplatform"],description:"How to take a full MediaWiki content and edit history into a Git repository keeping the history and author attributions into Markdown",coverImage:{src:Y,text:Z},preamble:{disable:H,text:o},toc:[{id:_,depth:y,text:$},{id:aa,depth:y,text:ab},{id:ac,depth:y,text:ad},{id:I,depth:J,text:ae},{id:af,depth:J,text:z},{id:ag,depth:y,text:K},{id:ah,depth:J,text:L},{id:ai,depth:y,text:aj}],body:{type:M,children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"On July 1st 2015, "},{type:b,tag:l,props:{},children:[{type:a,value:"The WebPlatform project"}]},{type:a,value:" has been discontinued, by having\n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20130328132045\u002Fhttp:\u002F\u002Fwww.webplatform.org\u002Fstewards\u002F",rel:[f,g,h],target:i,title:"WebPlatform Project sponsors"},children:[{type:a,value:"its sponsors"}]},{type:a,value:" retracting from the project."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"I was hired by the W3C solely to maintain the WebPlatform project. Without\nfunding, and no budget at W3C\u002FMIT to transfer me, my contract was going to end."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:N,props:{style:ak},children:[{type:a,value:"\nüëÄ This was written in December 2020 and taken from notes I‚Äôve been sharing around via email.\n"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"With me as the only full-time person on the project with knowledge of the\ninfrastructure, and also as a believer of ‚Äú"},{type:b,tag:e,props:{href:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FLearn\u002FGetting_started_with_the_web\u002FThe_web_and_web_standards#Dont_break_the_web",rel:[f,g,h],target:i},children:[{type:a,value:"don‚Äôt break the\nweb"}]},{type:a,value:"‚Äù, I wanted to keep everything online."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"When "},{type:b,tag:e,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fblog\u002F2013\u002F08\u002Fhi-my-name-s-renoir-ill-be-your-devops-for-the-web-platform\u002F",rel:[f,g,h],target:i},children:[{type:a,value:"I inherited the project"}]},{type:a,value:", I "},{type:b,tag:e,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider\u002F",rel:[f,g,h],target:i,title:"2013 Infrastructure project: Migrating to a new provider"},children:[{type:a,value:"went through migrating\n"},{type:b,tag:l,props:{},children:[{type:a,value:"from one cloud provider to another"}]}]},{type:a,value:" the full\ninfrastructure, "},{type:b,tag:e,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Usage_and_future_state\u002F",rel:[f,g,h],target:i},children:[{type:a,value:"it has been running from about 20 Linux\nVMs"}]},{type:a,value:", worked on a few projects such as an attempt at having\nSingle-SignOn, and better compatibility tables."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Since the project was being closed, most of what I‚Äôve worked lost their use. The\ninfrastructure was also going to become a burden."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"While planning my last weeks, I‚Äôve agreed with the W3C systems team\n\""},{type:b,tag:e,props:{href:al,rel:[f,g,h],target:i},children:[{type:a,value:"w3t-systeam"}]},{type:a,value:"\" to convert as much as possible as a static site."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The following are notes about the software I‚Äôve written to migrate a WordPress\nblog and multiple MediaWiki namespaces into a Git repository."}]},{type:a,value:c},{type:b,tag:A,props:{id:_},children:[{type:b,tag:e,props:{href:"#priorities",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:$}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The priorities were to keep the documentation pages up, preserve the\ncontribution history and attributions, also keep the blog contents, and have\neverything to be served as static HTML hosted on GitHub pages."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"I wanted to have this done before "},{type:b,tag:E,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fleaving-w3c\u002F"},children:[{type:a,value:"I leave the W3C"}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Since the "},{type:b,tag:e,props:{href:al,rel:[f,g,h],target:i},children:[{type:a,value:"SysTeam"}]},{type:a,value:" would keep control of the "},{type:b,tag:k,props:{},children:[{type:a,value:"webplatform.org"}]},{type:a,value:"\ndomain, they‚Äôve decided to support some redirect from the original domain to\n"},{type:b,tag:e,props:{href:am,rel:[f,g,h],target:i,title:an},children:[{type:a,value:F}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Once everything was migrated, we‚Äôve added a note;"}]},{type:a,value:c},{type:b,tag:"blockquote",props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The WebPlatform project, supported by various stewards between 2012 and 2015,\nhas been discontinued"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:"sup",props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Source: "},{type:b,tag:e,props:{href:am,rel:[f,g,h],target:i,title:an},children:[{type:a,value:F}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:A,props:{id:aa},children:[{type:b,tag:e,props:{href:"#outcome",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:ab}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The conversion work took the "},{type:b,tag:l,props:{},children:[{type:a,value:"two last months"}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"All links to pages showing the "},{type:b,tag:l,props:{},children:[{type:a,value:"WebPlatform"}]},{type:a,value:" logo from this article is the\nresult of what I‚Äôm describing here, as the migration and all servers were shut\ndown and decommissioned in 2016."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The source of the site was generated from\n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs",rel:[f,g,h],target:i},children:[{type:a,value:"webplatform\u002Fgenerator-docs"}]},{type:a,value:", and we‚Äôve created\n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fwebplatform.github.io\u002F",rel:[f,g,h],target:i},children:[{type:a,value:"webplatform\u002Fwebplatform.github.io"}]},{type:a,value:"\nto host the site on GitHub pages. Eventualy, the W3C SysTeam set the repository\nas read-only."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"There were other things that we‚Äôve initially planned, but couldn‚Äôt (see\n"},{type:b,tag:E,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements-we-couldnt-meet"},children:[{type:a,value:L}]},{type:a,value:"):"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Here is what I could migrate"}]},{type:a,value:c},{type:b,tag:ao,props:{style:"font-size:small",className:["table-parent","table-auto"]},children:[{type:a,value:c},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:"table",props:{},children:[{type:b,tag:"thead",props:{},children:[{type:b,tag:B,props:{},children:[{type:b,tag:w,props:{},children:[{type:a,value:"From"}]},{type:b,tag:w,props:{},children:[{type:a,value:"To"}]},{type:b,tag:w,props:{},children:[{type:a,value:"Repository"}]},{type:b,tag:w,props:{},children:[{type:a,value:"Comment"}]},{type:b,tag:w,props:{},children:[{type:a,value:"Commits"}]},{type:b,tag:w,props:{},children:[{type:a,value:"Documents"}]},{type:b,tag:w,props:{},children:[{type:a,value:"Deleted"}]}]}]},{type:b,tag:"tbody",props:{},children:[{type:b,tag:B,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002F*"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002F*"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:ap,rel:[f,g,h],target:i,title:aq},children:[{type:a,value:"webplatform\u002Fdocs"}]}]},{type:b,tag:m,props:{},children:[{type:a,value:"The main docs pages"}]},{type:b,tag:m,props:{},children:[{type:a,value:"37,000"}]},{type:b,tag:m,props:{},children:[{type:a,value:"4,675"}]},{type:b,tag:m,props:{},children:[{type:a,value:"418"}]}]},{type:b,tag:B,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002FMeta:*"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002FMeta\u002F*"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:ar,rel:[f,g,h],target:i,title:as},children:[{type:a,value:"webplatform\u002Fdocs-meta"}]}]},{type:b,tag:m,props:{},children:[{type:a,value:"Archived content that needed to be moved during initial mass imports."}]},{type:b,tag:m,props:{},children:[{type:a,value:"300"}]},{type:b,tag:m,props:{},children:[{type:a,value:"58"}]},{type:b,tag:m,props:{},children:[{type:a,value:"170"}]}]},{type:b,tag:B,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002FWPD:*"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002FWPD\u002F*"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:O,rel:[f,g,h],target:i,title:P},children:[{type:a,value:at}]}]},{type:b,tag:m,props:{},children:[{type:a,value:"Community and notes section. Example "},{type:b,tag:e,props:{href:"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160722084044\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure",rel:[f,g,h],target:i},children:[{type:a,value:"\u002Fwiki\u002FWPD:Infrastructure"}]},{type:a,value:" into "},{type:b,tag:e,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002F",rel:[f,g,h],target:i},children:[{type:a,value:"\u002Fdocs\u002FWPD\u002FInfrastructure"}]},{type:a,value:" ("},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd\u002Fblob\u002Fmanual-edits\u002FInfrastructure\u002Findex.md",rel:[f,g,h],target:i},children:[{type:a,value:"source"}]},{type:a,value:Q}]},{type:b,tag:m,props:{},children:[{type:a,value:"5,700"}]},{type:b,tag:m,props:{},children:[{type:a,value:"358"}]},{type:b,tag:m,props:{},children:[{type:a,value:"323"}]}]},{type:b,tag:B,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"blog.webplatform.org"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"webplatform.github.io\u002Fblog\u002F*"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:au,rel:[f,g,h],target:i},children:[{type:a,value:"webplatform\u002Fblog"}]}]},{type:b,tag:m,props:{},children:[{type:a,value:"The blog content"}]},{type:b,tag:m,props:{},children:[{type:a,value:"2"}]},{type:b,tag:m,props:{},children:[{type:a,value:"53"}]},{type:b,tag:m,props:{},children:[{type:a,value:"N\u002FA"}]}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:A,props:{id:ac},children:[{type:b,tag:e,props:{href:"#migration",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:ad}]},{type:a,value:c},{type:b,tag:N,props:{style:ak},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"üëÄ During this migration project, I was hoping to find a way to take any web\npage, from any CMS, and get a full copy (including images) of it into Markdown.\nThere was none. In 2017, I‚Äôve created\n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Farchivator",rel:[f,g,h],target:i},children:[{type:b,tag:l,props:{},children:[{type:a,value:av}]}]},{type:a,value:aw},{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Farchivator",rel:[f,g,h],target:i},children:[{type:a,value:"npm"}]},{type:a,value:") to help with such work.\nInstead of using the last step described here, anyone could use "},{type:b,tag:l,props:{},children:[{type:a,value:av}]},{type:a,value:" to\nretrieve a copy of their web pages."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"While building the solution, a few requirements emerged, they‚Äôre listed in\n"},{type:b,tag:E,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements"},children:[{type:a,value:K}]}]},{type:a,value:c},{type:b,tag:R,props:{id:I},children:[{type:b,tag:e,props:{href:"#blog",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:ae}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For migrating the "},{type:b,tag:e,props:{href:au,rel:[f,g,h],target:i},children:[{type:a,value:I}]},{type:a,value:", it was made manually, I‚Äôve just\nconverted the HTML into Markdown using Pandoc."}]},{type:a,value:c},{type:b,tag:R,props:{id:af},children:[{type:b,tag:e,props:{href:"#mediawiki",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For migrating MediaWiki, the proces was a bit more complex."}]},{type:a,value:c},{type:b,tag:N,props:{title:"Want to migrate your own MediaWiki?"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"ü§≤üèº If you‚Äôre looking for an HowTo to migrate your own MediaWiki installation,\n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion#use",rel:[f,g,h],target:i},children:[{type:a,value:"the procedure is written in ‚û°Ô∏è "},{type:b,tag:C,props:{},children:[{type:a,value:S}]},{type:a,value:"‚Äôs README"}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"To migrate, we needed an history of each pages, from creation to the last edit."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"With MediaWiki, we have "},{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:DumpBackup.php",rel:[f,g,h],target:i,title:"dumpBackup.php file creates an XML dump for export or backup. XML dumps contain the content of the wiki"},children:[{type:b,tag:C,props:{},children:[{type:a,value:"Manual:DumpBackup.php"}]}]},{type:a,value:", that creates\nan XML file (\""},{type:b,tag:l,props:{},children:[{type:a,value:ax}]},{type:a,value:"\") of all history of all pages. One per\n"},{type:b,tag:e,props:{href:ay,rel:[f,g,h],target:i},children:[{type:a,value:"namespace"}]},{type:a,value:", for WebPlatform Docs‚Äô wikis, we had:\n"},{type:b,tag:e,props:{href:ar,rel:[f,g,h],target:i,title:as},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fwiki\u002FMeta:*"}]}]},{type:a,value:", "},{type:b,tag:e,props:{href:O,rel:[f,g,h],target:i,title:P},children:[{type:b,tag:k,props:{},children:[{type:a,value:az}]}]},{type:a,value:",\n"},{type:b,tag:e,props:{href:ap,rel:[f,g,h],target:i,title:aq},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fwiki\u002F*"}]}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"A big part of processing and converting history is about the data model so we\ncould read from one format and use the data model as data-source for conversion."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For this, I‚Äôve created "},{type:b,tag:e,props:{href:aA,rel:[f,g,h],target:i,title:aB},children:[{type:a,value:aC}]},{type:a,value:", an\nabstract library specialized for data manipulation to help \""},{type:b,tag:l,props:{},children:[{type:a,value:"Transform CMS\ncontent from a format into another"}]},{type:a,value:" [format]\". It‚Äôs written in PHP, and might\nstill work even though it hasn‚Äôt been touched since 2015."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aA,rel:[f,g,h],target:i,title:aB},children:[{type:a,value:aC}]},{type:a,value:" takes care of manipulating\ndata for:"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Date of contribution and author information"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Content management systems like "},{type:b,tag:l,props:{},children:[{type:a,value:z}]},{type:a,value:" has a way to tell the user and\ndate of an edition."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Take each edit contents as they were"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Do not change any of the contents for each edits, even though they are in a\nformat understood by the original engine, here being "},{type:b,tag:l,props:{},children:[{type:a,value:z}]},{type:a,value:p}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"To convert each page history edit into "},{type:b,tag:C,props:{},children:[{type:a,value:"Git commits"}]},{type:a,value:", I‚Äôve created\n"},{type:b,tag:e,props:{href:T,rel:[f,g,h],target:i,title:U},children:[{type:a,value:S}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"This is the utility that takes care of making the conversion "},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\u002Fblob\u002Fmaster\u002Fsrc\u002FWebPlatform\u002FImporter\u002FCommands\u002FRunCommand.php#L48",rel:[f,g,h],target:i,title:"Comments describing mediawiki-conversion"},children:[{type:a,value:"see comments made\nhere"}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:V,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Handle deleted pages"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For each edit create a git revisions commit until the final file delete. At\nthe end of that step, the Git repository should have an history, but no\naparent files. At this step, we can also use the entries and make a redirect\nmap."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Handle pages that weren‚Äôt deleted in history"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Do the same as above. At this step, we should have a repository with text\nfiles where each file has exactly the same content as the source history. So\nwe can add them on top of the deleted pages following the same process as\nabove. We can also use those as a list of current pages we‚Äôll want to be\nconverted into Markdown."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Convert content"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For all pages "},{type:b,tag:l,props:{},children:[{type:a,value:"that weren‚Äôt deleted in history"}]},{type:a,value:". Query "},{type:b,tag:l,props:{},children:[{type:a,value:z}]},{type:a,value:" API to\nretrieve the full HTML, including "},{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FTransclusion",rel:[f,g,h],target:i},children:[{type:a,value:"Transclusions"}]},{type:a,value:" pass it to\nPandoc, so we get it converted into Markdown. Commit the rewritten file\ncontents with Markdown."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"By design "},{type:b,tag:e,props:{href:T,rel:[f,g,h],target:i,title:U},children:[{type:a,value:S}]},{type:a,value:" allows to\nre-run the 3rd step so we could always get all edits until we\n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:Lock_the_database",rel:[f,g,h],target:i},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Lock the database"}]},{type:a,value:" (i.e. cut-off)"}]},{type:a,value:"\nso we could keep the production site active until a cut-off date."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:A,props:{id:ag},children:[{type:b,tag:e,props:{href:"#requirements",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:K}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Along with what's described in the\n"},{type:b,tag:E,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#migration-steps"},children:[{type:a,value:"Migration steps"}]},{type:a,value:",\nwe wanted also to ensure we properly support the following."}]},{type:a,value:c},{type:b,tag:V,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Keep author attributions but have them anonymized"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"We didn‚Äôt want to leak all contributor‚Äôs accounts email addresses to be\npublished without their consent. So, I‚Äôve setup a "},{type:b,tag:e,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs\u002Fblob\u002Fmanual-edits\u002F.mailmap",rel:[f,g,h],target:i},children:[{type:b,tag:k,props:{},children:[{type:a,value:".mailmap"}]},{type:a,value:" so that\ncontributors could add a PR to advertize publicly on GitHub"}]},{type:a,value:p}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Keep code examples in Markdown so we can colourize them"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Golden standard pages should look the same"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The \"Golden Standard\" pages were ones we were regularly referring to see how\nthey would look and see if things are broken."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Also, since we were removing infrastructure, we should see features that were\nenabled at the time of "},{type:b,tag:l,props:{},children:[{type:a,value:"Web.Archive.org"}]},{type:a,value:" snapshot, but would be omitted in\nthe "},{type:b,tag:l,props:{},children:[{type:a,value:"Static version"}]},{type:a,value:" (i.e. "},{type:b,tag:k,props:{},children:[{type:a,value:F}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Compatibility data"}]},{type:a,value:" was removed"}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Contents"}]},{type:a,value:" on the right should be removed"}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"Overview table"}]},{type:a,value:" should look different"}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"On "},{type:b,tag:l,props:{},children:[{type:a,value:"static version"}]},{type:a,value:" code blocks should be more colorized differently (it's\nusing a different process)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Examples:"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fborder-radius"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fdisplay"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002Ffunctions","web-archive-date":"20140626071828"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FArray\u002Ffilter"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FDate"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FBeginners\u002Fhtml","web-archive-date":aD},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fcanvas_notearsgame","web-archive-date":aD},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fsvg_clipping_and_masking","web-archive-date":"20150905205843"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:D}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"MediaWiki is pretty relax about what it allows in its URLs."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Since we‚Äôre migrating into a filesystem, we wanted to have only valid\nfilesystem file names and decided to normalize all paths into ASCII\ncharacters."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For example, the "},{type:b,tag:e,props:{href:ay,rel:[f,g,h],target:i},children:[{type:a,value:"Namespaces"}]},{type:a,value:" (e.g. "},{type:b,tag:k,props:{},children:[{type:a,value:az}]},{type:a,value:") adds a\ncolumn character, that would be URLEncoded into "},{type:b,tag:k,props:{},children:[{type:a,value:"%3A"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"There were many other discrepancies like:"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"Case insensitivity ‚Äî Because some URLs in pages were not in the same casing"}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"Supporting spaces ‚Äî Sometimes with underscore \""},{type:b,tag:k,props:{},children:[{type:a,value:"_"}]},{type:a,value:"\", other times with "},{type:b,tag:k,props:{},children:[{type:a,value:"%20"}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"Normalize\n"},{type:b,tag:e,props:{href:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FURL\u002Fpathname",rel:[f,g,h],target:i},children:[{type:a,value:"URL Path"}]},{type:a,value:aw},{type:b,tag:e,props:{href:"https:\u002F\u002Furl.spec.whatwg.org\u002F#concept-url-path",rel:[f,g,h],target:i},children:[{type:a,value:"spec"}]},{type:a,value:") (e.g. anything that\nwould be URLEncoded such as "},{type:b,tag:k,props:{},children:[{type:a,value:"()!@:"}]},{type:a,value:Q}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:D}]},{type:a,value:": A page in another language should\nbe migrated"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fja","web-archive-date":"20160613060459"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fko"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:D}]},{type:a,value:": A Page with "},{type:b,tag:k,props:{},children:[{type:a,value:"()"}]},{type:a,value:" in URL should be\nnormalized"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Ffunctions\u002Ftranslate()"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002FanimVal_(SVGAnimatedPreserveAspectRatio)"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002Fcx_(SVGRadialGradientElement)"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:D}]},{type:a,value:": Pages within WPD namespace should\nbe migrated"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002FMonitoring\u002FMonit"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The image comes from "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002FWPD\u002Fassets\u002F"}]},{type:a,value:" which means the image is hosted in the\n"},{type:b,tag:e,props:{href:O,rel:[f,g,h],target:i,title:P},children:[{type:a,value:at}]},{type:a,value:" in the assets\u002F folder."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:D}]},{type:a,value:": Pages in Meta namespace should be\nmigrated"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:HTML\u002FElements\u002Fstyle"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:web_platform_wednesday"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:Editors_Guide"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:R,props:{id:ah},children:[{type:b,tag:e,props:{href:"#requirements-we-couldnt-meet",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:L}]},{type:a,value:c},{type:a,value:c},{type:b,tag:V,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Ensure ALL assets uploads are displayed properly"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Before, we would use GlusterFS to store images for MediaWiki. There has been\nwork made to store on "},{type:b,tag:k,props:{},children:[{type:a,value:W}]},{type:a,value:", all the pages uses the link,\nbut the SysTeam decided not to keep the redirects."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Now that the site is archived, I‚Äôm unsure this can be fixed."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"If you want to see them, add this bookmarklet to your bookmarks bar\n"},{type:b,tag:e,props:{style:"text-decoration:none;display:inline-block;padding: 1px 6px;color: #fff;background: #32a0eb;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;",href:"javascript:(function()%7B%5B%5D.forEach.call(document.querySelectorAll('img')%2Cfunction(img)%7Bif%20('src'%20in%20img)%20%7Bsrc%20%3D%20img.src%3Bsrc%20%3D%20src.replace('static.webplatform.org'%2C%20'webplatform.github.io%2Fdocs-assets')%3Bimg.src%3Dsrc%3B%7D%7D)%7D)()"},children:[{type:a,value:"WebPlatform.github.io\nShow images"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The project "},{type:b,tag:e,props:{href:aE,rel:[f,g,h],target:i},children:[{type:a,value:aE}]},{type:a,value:" was meant to be used as\nan origin for "},{type:b,tag:k,props:{},children:[{type:a,value:W}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:C,props:{},children:[{type:a,value:"Should we want to fix the issue"}]},{type:a,value:", we could setup an HTTP redirect from\n"},{type:b,tag:k,props:{},children:[{type:a,value:W}]},{type:a,value:" to "},{type:b,tag:k,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs-assets\u002F"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The following (should be) the same file;"}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:e,props:{href:aF,rel:[f,g,h],target:i},children:[{type:a,value:aF}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:e,props:{href:aG,rel:[f,g,h],target:i},children:[{type:a,value:aG}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:e,props:{href:aH,rel:[f,g,h],target:i},children:[{type:a,value:aH}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Make sure page links "},{type:b,tag:l,props:{},children:[{type:a,value:"with different casing"}]},{type:a,value:" are redirected properly"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"For example the page for \""},{type:b,tag:k,props:{},children:[{type:a,value:"Internet_and_Web"}]},{type:a,value:"\" is sometimes linked with\ndifferent casing, e.g. at \""},{type:b,tag:k,props:{},children:[{type:a,value:"Internet_and_Web\u002FThe_History_of_the_Web"}]},{type:a,value:"\" or\n\""},{type:b,tag:k,props:{},children:[{type:a,value:"internet_and_web\u002FThe_History_of_the_Web"}]},{type:a,value:"\", it is migrated once;\n"},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fconcepts\u002FInternet_and_Web\u002FThe_History_of_the_Web"},children:[]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Some page has links to with different casing \""},{type:b,tag:k,props:{},children:[{type:a,value:"internet_and_web"}]},{type:a,value:"\", we can see\nfrom\n"},{type:b,tag:n,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fconcepts"},children:[]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"MediaWiki would redirect, but on GitHub pages, nothing has been put in place\nfor those. If we wanted to support, we could have used the same entries used\nto create "},{type:b,tag:e,props:{href:aI,rel:[f,g,h],target:i},children:[{type:a,value:"NGINX rewrite rules"}]},{type:a,value:", and add empty HTML pages\nlike GitHub pages would. In the case of WebPlatform project, it's been\ndecided to leave as-is."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Enforce all redirects from "},{type:b,tag:k,props:{},children:[{type:a,value:"*.webplatform.org"}]},{type:a,value:" to properly redirect to\n"},{type:b,tag:k,props:{},children:[{type:a,value:F}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"This migration process supported creating "},{type:b,tag:e,props:{href:aI,rel:[f,g,h],target:i},children:[{type:a,value:"NGINX rewrite\nrules"}]},{type:a,value:", I‚Äôm unsure if they‚Äôve been used."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:"hr",props:{},children:[]},{type:a,value:c},{type:b,tag:A,props:{id:ai},children:[{type:b,tag:e,props:{href:"#screenshots",ariaHidden:r,tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:aj}]},{type:a,value:c},{type:b,tag:ao,props:{style:"overflow:hidden;clear:both;",className:["thumbnails","gallery"]},children:[{type:a,value:c},{type:b,tag:x,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-conversion.png"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:T,rel:[f,g,h],target:i,title:U},children:[{type:a,value:"WebPlatform\u002Fmediawiki-conversion"}]},{type:a,value:" is made to run in 3\nsteps, here we see it running at the 3rd step. Where we would take the latest\nversion, get the HTML version from the MediaWiki API, and pass to Pandoc to get\nMarkdown."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:x,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-output.png"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Making sure during development that the conversion was effectively the same"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:x,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-github.png"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"We can see directly on GitHub.com the converted page's Git history"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:x,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-markdown.png"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"We can see directly on GitHub.com the converted Markdown contents."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:x,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-view-syntaxhighlight.png"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The final output should support code blocks with"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:x,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-log.png",alt:"MediaWiki history converted into Git Commits"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"The end result is that for each "},{type:b,tag:l,props:{},children:[{type:a,value:ax}]},{type:a,value:" can be converted into text\nfiles where each edits are made as Git commits keeping author and date of edit."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:x,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-onsite.png"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:C,props:{},children:[{type:a,value:"Not implemented"}]},{type:a,value:" Screenshot of an experiment to display the page's Git\nhistory calling GitHub API. There is no trace of this to my recollection, and It\nwas effectively the first time I used Vue.js."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},text:"---\ntitle: Migrating WebPlatform.org MediaWiki into Git as Markdown files\nlocale: en-CA\ncreated: 2015-07-30\nupdated: 2020-11-18\nstatus: publish\nrevising: true\ncategories:\n  - projects\ntags:\n  - archiving\n  - open-source\n  - operations\n  - webplatform\ndescription:\n  How to take a full MediaWiki content and edit history into a Git repository\n  keeping the history and author attributions into Markdown\ncoverImage:\n  src: ~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmonit_dashboard_201502_status.png\n  text: |\n    The WebPlatform project was running from a about 20 VMs\n    and the availability, in part, managed by Monit.\n    At the end of the project, the infrastructure \"had to go away\"\npreamble:\n  disable: true\n  text: ' '\n---\n\u003C!-- #TODO Review how to manage images and breaking points under other modes --\u003E\n\n[wpd-stewards]:\n  https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20130328132045\u002Fhttp:\u002F\u002Fwww.webplatform.org\u002Fstewards\u002F\n  'WebPlatform Project sponsors'\n[wpd-blog-i-am-renoir]:\n  https:\u002F\u002Fwebplatform.github.io\u002Fblog\u002F2013\u002F08\u002Fhi-my-name-s-renoir-ill-be-your-devops-for-the-web-platform\u002F\n[dont-break-the-web]:\n  https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FLearn\u002FGetting_started_with_the_web\u002FThe_web_and_web_standards#Dont_break_the_web\n[wpd-infra-summary]:\n  https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Usage_and_future_state\u002F\n[wpd-infra-migration-2013]:\n  https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider\u002F\n  '2013 Infrastructure project: Migrating to a new provider'\n[w3t-systeam]: https:\u002F\u002Fwww.w3.org\u002FPeople\u002Ffunctions\u002Fsysteam\n[gh-mailmap]: https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs\u002Fblob\u002Fmanual-edits\u002F.mailmap\n[wpd-home]: https:\u002F\u002Fwebplatform.github.io\u002F 'WebPlatform Docs Home Page'\n\nOn July 1st 2015, _The WebPlatform project_ has been discontinued, by having\n[its sponsors][wpd-stewards] retracting from the project.\n\nI was hired by the W3C solely to maintain the WebPlatform project. Without\nfunding, and no budget at W3C\u002FMIT to transfer me, my contract was going to end.\n\n\u003C!-- #XXX from app-alert-box to rb-notice-box --\u003E\n\u003Capp-alert-box style=\"display:flex\"\u003E\nüëÄ This was written in December 2020 and taken from notes I‚Äôve been sharing around via email.\n\u003C\u002Fapp-alert-box\u003E\n\nWith me as the only full-time person on the project with knowledge of the\ninfrastructure, and also as a believer of ‚Äú[don‚Äôt break the\nweb][dont-break-the-web]‚Äù, I wanted to keep everything online.\n\nWhen [I inherited the project][wpd-blog-i-am-renoir], I [went through migrating\n_from one cloud provider to another_][wpd-infra-migration-2013] the full\ninfrastructure, [it has been running from about 20 Linux\nVMs][wpd-infra-summary], worked on a few projects such as an attempt at having\nSingle-SignOn, and better compatibility tables.\n\nSince the project was being closed, most of what I‚Äôve worked lost their use. The\ninfrastructure was also going to become a burden.\n\nWhile planning my last weeks, I‚Äôve agreed with the W3C systems team\n\"[w3t-systeam][w3t-systeam]\" to convert as much as possible as a static site.\n\nThe following are notes about the software I‚Äôve written to migrate a WordPress\nblog and multiple MediaWiki namespaces into a Git repository.\n\n## Priorities\n\nThe priorities were to keep the documentation pages up, preserve the\ncontribution history and attributions, also keep the blog contents, and have\neverything to be served as static HTML hosted on GitHub pages.\n\nI wanted to have this done before [I leave the W3C][leaving-w3c].\n\nSince the [SysTeam][w3t-systeam] would keep control of the `webplatform.org`\ndomain, they‚Äôve decided to support some redirect from the original domain to\n[webplatform.github.io][wpd-home].\n\nOnce everything was migrated, we‚Äôve added a note;\n\n\u003E The WebPlatform project, supported by various stewards between 2012 and 2015,\n\u003E has been discontinued\n\n\u003Csup\u003E\n\nSource: [webplatform.github.io][wpd-home]\n\n\u003C\u002Fsup\u003E\n\n## Outcome\n\nThe conversion work took the _two last months_.\n\nAll links to pages showing the _WebPlatform_ logo from this article is the\nresult of what I‚Äôm describing here, as the migration and all servers were shut\ndown and decommissioned in 2016.\n\nThe source of the site was generated from\n[webplatform\u002Fgenerator-docs][converted-static-site-generator], and we‚Äôve created\n[webplatform\u002Fwebplatform.github.io](https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fwebplatform.github.io\u002F)\nto host the site on GitHub pages. Eventualy, the W3C SysTeam set the repository\nas read-only.\n\nThere were other things that we‚Äôve initially planned, but couldn‚Äôt (see\n[Requirements we couldn‚Äôt meet](\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements-we-couldnt-meet)):\n\nHere is what I could migrate\n\n\u003Cdiv style=\"font-size:small\" class=\"table-parent table-auto\"\u003E\n\n\u003C!--\n\nFind deleted files:\n\n  git log --diff-filter=D --summary \u003E deleted.txt\n  g!\u002Fdelete mode\u002Fd\n\n--\u003E\n\n| From                               | To                                  | Repository                                   | Comment                                                                                                                                                               | Commits | Documents | Deleted |\n| ---------------------------------- | ----------------------------------- | -------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------- | --------- | ------- |\n| `docs.webplatform.org\u002Fwiki\u002F*`      | `webplatform.github.io\u002Fdocs\u002F*`      | [webplatform\u002Fdocs][converted-docs]           | The main docs pages                                                                                                                                                   | 37,000  | 4,675     | 418     |\n| `docs.webplatform.org\u002Fwiki\u002FMeta:*` | `webplatform.github.io\u002Fdocs\u002FMeta\u002F*` | [webplatform\u002Fdocs-meta][converted-docs-meta] | Archived content that needed to be moved during initial mass imports.                                                                                                 | 300     | 58        | 170     |\n| `docs.webplatform.org\u002Fwiki\u002FWPD:*`  | `webplatform.github.io\u002Fdocs\u002FWPD\u002F*`  | [webplatform\u002Fdocs-wpd][converted-docs-wpd]   | Community and notes section. Example [\u002Fwiki\u002FWPD:Infrastructure][ex-wpd-internetarchive] into [\u002Fdocs\u002FWPD\u002FInfrastructure][ex-wpd-gh-pages] ([source][ex-wpd-gh-source]) | 5,700   | 358       | 323     |\n| `blog.webplatform.org`             | `webplatform.github.io\u002Fblog\u002F*`      | [webplatform\u002Fblog][converted-blog]           | The blog content                                                                                                                                                      | 2       | 53        | N\u002FA     |\n\n\u003C\u002Fdiv\u003E\n\n[leaving-w3c]: \u002Fblog\u002F2015\u002F07\u002Fleaving-w3c\u002F\n[converted-static-site-generator]: https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs\n[nginx-rewrite-map]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs\u002Fblob\u002Fmaster\u002Fconfig\u002Fnginx\u002Fmaps\u002Fmain.map\n[converted-blog]: https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fblog\n[converted-page]: https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fcss\u002Fproperties\u002Fposition\u002F\n[converted-docs]: https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs 'What was under \u002Fwiki\u002F...'\n[converted-docs-wpd]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd\n  'What was under \u002Fwiki\u002FWPD:...'\n[converted-docs-meta]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-meta\n  'What was under \u002Fwiki\u002FMeta:...'\n[ex-wpd-internetarchive]:\n  https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160722084044\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\n[ex-wpd-gh-pages]: https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002F\n[ex-wpd-gh-source]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd\u002Fblob\u002Fmanual-edits\u002FInfrastructure\u002Findex.md\n\n## Migration\n\n\u003Capp-alert-box style=\"display:flex\"\u003E\n\nüëÄ During this migration project, I was hoping to find a way to take any web\npage, from any CMS, and get a full copy (including images) of it into Markdown.\nThere was none. In 2017, I‚Äôve created\n[_Archivator_](https:\u002F\u002Fgithub.com\u002Frenoirb\u002Farchivator)\n([npm](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Farchivator)) to help with such work.\nInstead of using the last step described here, anyone could use _Archivator_ to\nretrieve a copy of their web pages.\n\n\u003C\u002Fapp-alert-box\u003E\n\nWhile building the solution, a few requirements emerged, they‚Äôre listed in\n[Requirements](\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements)\n\n### Blog\n\nFor migrating the [blog][converted-blog], it was made manually, I‚Äôve just\nconverted the HTML into Markdown using Pandoc.\n\n### MediaWiki\n\nFor migrating MediaWiki, the proces was a bit more complex.\n\n\u003Capp-alert-box title=\"Want to migrate your own MediaWiki?\"\u003E\n\nü§≤üèº If you‚Äôre looking for an HowTo to migrate your own MediaWiki installation,\n[the procedure is written in ‚û°Ô∏è **webplatform\u002Fmediawiki-conversion**‚Äôs README](https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion#use)\n\n\u003C\u002Fapp-alert-box\u003E\n\nTo migrate, we needed an history of each pages, from creation to the last edit.\n\nWith MediaWiki, we have [**Manual:DumpBackup.php**][mw-dumpbackup], that creates\nan XML file (\"_MediaWiki XML dump_\") of all history of all pages. One per\n[namespace][mw-namespaces], for WebPlatform Docs‚Äô wikis, we had:\n[`\u002Fwiki\u002FMeta:*`][converted-docs-meta], [`\u002Fwiki\u002FWPD:*`][converted-docs-wpd],\n[`\u002Fwiki\u002F*`][converted-docs].\n\nA big part of processing and converting history is about the data model so we\ncould read from one format and use the data model as data-source for conversion.\n\nFor this, I‚Äôve created [webplatform\u002Fcontent-converter][content-converter], an\nabstract library specialized for data manipulation to help \"_Transform CMS\ncontent from a format into another_ \\[format\\]\". It‚Äôs written in PHP, and might\nstill work even though it hasn‚Äôt been touched since 2015.\n\n[webplatform\u002Fcontent-converter][content-converter] takes care of manipulating\ndata for:\n\n- Date of contribution and author information\n\n  Content management systems like _MediaWiki_ has a way to tell the user and\n  date of an edition.\n\n- Take each edit contents as they were\n\n  Do not change any of the contents for each edits, even though they are in a\n  format understood by the original engine, here being _MediaWiki_.\n\nTo convert each page history edit into **Git commits**, I‚Äôve created\n[webplatform\u002Fmediawiki-conversion][mediawiki-conversion].\n\nThis is the utility that takes care of making the conversion [see comments made\nhere][mediawiki-conversion-steps].\n\n1. _Handle deleted pages_\n\n   For each edit create a git revisions commit until the final file delete. At\n   the end of that step, the Git repository should have an history, but no\n   aparent files. At this step, we can also use the entries and make a redirect\n   map.\n\n1. _Handle pages that weren‚Äôt deleted in history_\n\n   Do the same as above. At this step, we should have a repository with text\n   files where each file has exactly the same content as the source history. So\n   we can add them on top of the deleted pages following the same process as\n   above. We can also use those as a list of current pages we‚Äôll want to be\n   converted into Markdown.\n\n1. _Convert content_\n\n   For all pages _that weren‚Äôt deleted in history_. Query _MediaWiki_ API to\n   retrieve the full HTML, including [Transclusions][mw-transclusion] pass it to\n   Pandoc, so we get it converted into Markdown. Commit the rewritten file\n   contents with Markdown.\n\nBy design [webplatform\u002Fmediawiki-conversion][mediawiki-conversion] allows to\nre-run the 3rd step so we could always get all edits until we\n[_Lock the database_ (i.e. cut-off)](https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:Lock_the_database)\nso we could keep the production site active until a cut-off date.\n\n[content-converter]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fcontent-converter\n  'Transform CMS content from a format into another'\n[mediawiki-conversion]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\n  'Export MediaWiki wiki pages and history into a git repository'\n[mediawiki-conversion-steps]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\u002Fblob\u002Fmaster\u002Fsrc\u002FWebPlatform\u002FImporter\u002FCommands\u002FRunCommand.php#L48\n  'Comments describing mediawiki-conversion'\n[mw-dumpbackup]:\n  https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:DumpBackup.php\n  'dumpBackup.php file creates an XML dump for export or backup. XML dumps contain the content of the wiki'\n[mw-transclusion]: https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FTransclusion\n[mw-namespaces]: https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FHelp:Namespaces\n\n\u003C!--\n#### MediaWiki and special characters\n\nI wasn‚Äôt certain GitHub pages would, so normalized their names to be valid ASCII\nstrings.\n\nThe migration process allowed building up an [NGINX rewrite\nmap][nginx-rewrite-map] for all those possibilities.\n\nFor example, the original URL\n[\u002Fwiki\u002Fcss\u002Ffunctions\u002Ftranslate()][ex-css-function-internetarchive],\nnotice the `()` part in the URL would be URLEncoded as `%28%29`, and I didn't\nwant such characters in the file names. Is now accessible as\n[\u002Fdocs\u002Fcss\u002Ffunctions\u002Ftranslate][ex-css-function-gh-pages].\n\nThe conversion was successful, and we could reproduce (from the earlier example)\n[css\u002Ffunctions\u002Ftranslate][ex-css-function-gh-pages]‚Äôs\n[into Markdown][ex-css-function-gh-source] and maintain its\n[page history][ex-css-function-gh-history].\n\n[ex-css-function-internetarchive]:\n  https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fcss\u002Ffunctions\u002Ftranslate()\n[ex-css-function-gh-pages]:\n  https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fcss\u002Ffunctions\u002Ftranslate\n[ex-css-function-gh-source]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs\u002Fblob\u002Fmaster\u002Fcss\u002Ffunctions\u002Ftranslate\u002Findex.md\n[ex-css-function-gh-history]:\n  https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs\u002Fcommits\u002Fmaster\u002Fcss\u002Ffunctions\u002Ftranslate\u002Findex.md\n--\u003E\n\n## Requirements\n\nAlong with what's described in the\n[Migration steps](\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#migration-steps),\nwe wanted also to ensure we properly support the following.\n\n1. Keep author attributions but have them anonymized\n\n   We didn‚Äôt want to leak all contributor‚Äôs accounts email addresses to be\n   published without their consent. So, I‚Äôve setup a [`.mailmap` so that\n   contributors could add a PR to advertize publicly on GitHub][gh-mailmap].\n\n1. Keep code examples in Markdown so we can colourize them\n\n1. Golden standard pages should look the same\n\n   The \"Golden Standard\" pages were ones we were regularly referring to see how\n   they would look and see if things are broken.\n\n   Also, since we were removing infrastructure, we should see features that were\n   enabled at the time of _Web.Archive.org_ snapshot, but would be omitted in\n   the _Static version_ (i.e. `webplatform.github.io`)\n\n   - _Compatibility data_ was removed\n   - _Contents_ on the right should be removed\n   - _Overview table_ should look different\n   - On _static version_ code blocks should be more colorized differently (it's\n     using a different process)\n\n   Examples:\n\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fborder-radius\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fdisplay\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002Ffunctions\"  web-archive-date=\"20140626071828\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FArray\u002Ffilter\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FDate\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FBeginners\u002Fhtml\"  web-archive-date=\"20150513130014\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fcanvas_notearsgame\"  web-archive-date=\"20150513130014\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fsvg_clipping_and_masking\"  web-archive-date=\"20150905205843\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n\n1. Support MediaWiki special URL patterns\n\n   MediaWiki is pretty relax about what it allows in its URLs.\n\n   Since we‚Äôre migrating into a filesystem, we wanted to have only valid\n   filesystem file names and decided to normalize all paths into ASCII\n   characters.\n\n   For example, the [Namespaces][mw-namespaces] (e.g. `\u002Fwiki\u002FWPD:*`) adds a\n   column character, that would be URLEncoded into `%3A`\n\n   There were many other discrepancies like:\n\n   - Case insensitivity ‚Äî Because some URLs in pages were not in the same casing\n   - Supporting spaces ‚Äî Sometimes with underscore \"`_`\", other times with `%20`\n   - Normalize\n     [URL Path](https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FURL\u002Fpathname)\n     ([spec](https:\u002F\u002Furl.spec.whatwg.org\u002F#concept-url-path)) (e.g. anything that\n     would be URLEncoded such as `()!@:`)\n\n1. _Support MediaWiki special URL patterns_: A page in another language should\n   be migrated\n\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fja\" web-archive-date=\"20160613060459\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fko\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n\n1. _Support MediaWiki special URL patterns_: A Page with `()` in URL should be\n   normalized\n\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fcss\u002Ffunctions\u002Ftranslate()\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002FanimVal_(SVGAnimatedPreserveAspectRatio)\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002Fcx_(SVGRadialGradientElement)\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n\n1. _Support MediaWiki special URL patterns_: Pages within WPD namespace should\n   be migrated\n\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002FMonitoring\u002FMonit\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n\n   The image comes from `\u002FWPD\u002Fassets\u002F` which means the image is hosted in the\n   [webplatform\u002Fdocs-wpd][converted-docs-wpd] in the assets\u002F folder.\n\n1. _Support MediaWiki special URL patterns_: Pages in Meta namespace should be\n   migrated\n\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FMeta:HTML\u002FElements\u002Fstyle\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FMeta:web_platform_wednesday\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n   - \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002FMeta:Editors_Guide\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n\n### Requirements we couldn‚Äôt meet\n\n\u003C!--\n\nSNIPPET: Ensure ALL assets uploads are displayed properly\n\n```\n[].forEach.call(document.querySelectorAll('img'),function(img){\n  if ('src' in img) {\n    var src = img.src;\n    src = src.replace('static.webplatform.org', 'webplatform.github.io\u002Fdocs-assets');\n    img.src=src;\n  }\n});\n```\n--\u003E\n\n1. Ensure ALL assets uploads are displayed properly\n\n   Before, we would use GlusterFS to store images for MediaWiki. There has been\n   work made to store on `static.webplatform.org`, all the pages uses the link,\n   but the SysTeam decided not to keep the redirects.\n\n   Now that the site is archived, I‚Äôm unsure this can be fixed.\n\n   If you want to see them, add this bookmarklet to your bookmarks bar\n   \u003Ca style=\"text-decoration:none;display:inline-block;padding: 1px 6px;color: #fff;background: #32a0eb;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;\" href=\"javascript:(function()%7B%5B%5D.forEach.call(document.querySelectorAll('img')%2Cfunction(img)%7Bif%20('src'%20in%20img)%20%7Bsrc%20%3D%20img.src%3Bsrc%20%3D%20src.replace('static.webplatform.org'%2C%20'webplatform.github.io%2Fdocs-assets')%3Bimg.src%3Dsrc%3B%7D%7D)%7D)()\"\u003EWebPlatform.github.io\n   Show images\u003C\u002Fa\u003E\n\n   The project http:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002F was meant to be used as\n   an origin for `static.webplatform.org`\n\n   **Should we want to fix the issue**, we could setup an HTTP redirect from\n   `static.webplatform.org` to `webplatform.github.io\u002Fdocs-assets\u002F`\n\n   The following (should be) the same file;\n\n   - https:\u002F\u002Fstatic.webplatform.org\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg\n   - https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-assets\u002Fblob\u002Fgh-pages\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg\n   - https:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg\n\n1. Make sure page links _with different casing_ are redirected properly\n\n   For example the page for \"`Internet_and_Web`\" is sometimes linked with\n   different casing, e.g. at \"`Internet_and_Web\u002FThe_History_of_the_Web`\" or\n   \"`internet_and_web\u002FThe_History_of_the_Web`\", it is migrated once;\n   \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fconcepts\u002FInternet_and_Web\u002FThe_History_of_the_Web\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n\n   Some page has links to with different casing \"`internet_and_web`\", we can see\n   from\n   \u003Capp-link-compare-item slug=\"docs.webplatform.org\u002Fwiki\u002Fconcepts\"\u003E\u003C\u002Fapp-link-compare-item\u003E\n\n   MediaWiki would redirect, but on GitHub pages, nothing has been put in place\n   for those. If we wanted to support, we could have used the same entries used\n   to create [NGINX rewrite rules][nginx-rewrite-map], and add empty HTML pages\n   like GitHub pages would. In the case of WebPlatform project, it's been\n   decided to leave as-is.\n\n1. Enforce all redirects from `*.webplatform.org` to properly redirect to\n   `webplatform.github.io`.\n\n   This migration process supported creating [NGINX rewrite\n   rules][nginx-rewrite-map], I‚Äôm unsure if they‚Äôve been used.\n\n---\n\n## Screenshots\n\n\u003Cdiv style=\"overflow:hidden;clear:both;\" class=\"thumbnails gallery\"\u003E\n\u003Capp-image figcaption=\" \" src=\"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-conversion.png\"\u003E\n\n[WebPlatform\u002Fmediawiki-conversion][mediawiki-conversion] is made to run in 3\nsteps, here we see it running at the 3rd step. Where we would take the latest\nversion, get the HTML version from the MediaWiki API, and pass to Pandoc to get\nMarkdown.\n\n\u003C\u002Fapp-image\u003E\n\u003Capp-image figcaption=\" \" src=\"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-output.png\"\u003E\n\nMaking sure during development that the conversion was effectively the same\n\n\u003C\u002Fapp-image\u003E\n\u003Capp-image figcaption=\" \" src=\"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-github.png\"\u003E\n\nWe can see directly on GitHub.com the converted page's Git history\n\n\u003C\u002Fapp-image\u003E\n\u003Capp-image figcaption=\" \" src=\"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-markdown.png\"\u003E\n\nWe can see directly on GitHub.com the converted Markdown contents.\n\n\u003C\u002Fapp-image\u003E\n\u003Capp-image figcaption=\" \" src=\"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-view-syntaxhighlight.png\"\u003E\n\nThe final output should support code blocks with\n\n\u003C\u002Fapp-image\u003E\n\u003Capp-image figcaption=\" \" src=\"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-log.png\" alt=\"MediaWiki history converted into Git Commits\"\u003E\n\nThe end result is that for each _MediaWiki XML dump_ can be converted into text\nfiles where each edits are made as Git commits keeping author and date of edit.\n\n\u003C\u002Fapp-image\u003E\n\u003Capp-image figcaption=\" \" src=\"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-onsite.png\"\u003E\n\n**Not implemented** Screenshot of an experiment to display the page's Git\nhistory calling GitHub API. There is no trace of this to my recollection, and It\nwas effectively the first time I used Vue.js.\n\n\u003C\u002Fapp-image\u003E\n\u003C\u002Fdiv\u003E\n\n\u003C!--\n## Needs to be done\n\n- https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fops\u002Fissues\u002F41\n- https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\u002Fissues\u002F16\n- https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\u002Fissues\u002F12 (parts of it,\n  TBD)\n- https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\u002Fissues\u002F13\n\n\n## Random pages to compare\n\n- [docs.webplatform.org\u002Fwiki\u002Fhtml\u002Fattributes\u002FcellPadding](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fhtml\u002Fattributes\u002FcellPadding)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fhtml\u002Fattributes\u002FcellPadding\n- [docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fwriting-mode](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fwriting-mode)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fcss\u002Fproperties\u002Fwriting-mode\n- [docs.webplatform.org\u002Fwiki\u002Fapis\u002Fquota_management\u002FStorageQuota](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fapis\u002Fquota_management\u002FStorageQuota)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fapis\u002Fquota_management\u002FStorageQuota\u002F\n- [docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fborder-radius](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fborder-radius)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fcss\u002Fproperties\u002Fborder-radius\u002F\n- [docs.webplatform.org\u002Fwiki\u002FBeginners\u002Fhtml](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002FBeginners\u002Fhtml)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FBeginners\u002Fhtml\u002F\n- [docs.webplatform.org\u002Fwiki\u002FBeginners\u002Fes](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002FBeginners\u002Fes]\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FBeginners\u002Fes.html\n- [docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FMath\u002Fround](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fjavascript\u002FMath\u002Fround)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fjavascript\u002FMath\u002Fround\u002F\n- [docs.webplatform.org\u002Fwiki\u002Fsvg\u002Ftutorials\u002Fsmarter_svg_filters](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fsvg\u002Ftutorials\u002Fsmarter_svg_filters)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fsvg\u002Ftutorials\u002Fsmarter_svg_filters\n- [\u002Fdocs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fcss_transforms](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fcss_transforms)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Ftutorials\u002Fcss_transforms\n- [docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fperspective-origin](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fperspective-origin)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fcss\u002Fproperties\u002Fperspective-origin\n- [docs.webplatform.org\u002Fwiki\u002Fsvg\u002Ftutorials\u002Fsmarter_svg_overview](https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160421193144\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002Fsvg\u002Ftutorials\u002Fsmarter_svg_overview)\n  to https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002Fsvg\u002Ftutorials\u002Fsmarter_svg_overview\n\n[wpd-ops-ticket-177]: https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fops\u002Fissues\u002F177\n[gist-useful-mw-sql-queries]:\n  https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F048eaee1d6aec3afa2e7\n  'MediaWiki useful queries'\n\n--\u003E\n",dir:"\u002Fblog\u002F2015\u002F07",path:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files",extension:".md",slug:aJ,createdAt:aK,updatedAt:aK,category:X},coverImage:{toc:[],body:{type:M,children:[{type:b,tag:d,props:{},children:[{type:a,value:"The WebPlatform project was running from a about 20 VMs\nand the availability, in part, managed by Monit.\nAt the end of the project, the infrastructure \"had to go away\""}]}]},text:Z,src:Y},month:"07",next:{title:"Leaving W3C",locale:G,path:"\u002Fblog\u002F2015\u002F07\u002Fleaving-w3c",slug:"leaving-w3c"},preamble:{toc:[],body:{type:M,children:[]},text:o,disable:H},prettyfiedTemporalDate:{prettified:"Thursday, July 30, 2015",temporalDate:"2015-07-30"},prev:{title:"Add OpenStack instance meta-data info in your salt grains",locale:G,path:"\u002Fblog\u002F2015\u002F05\u002Fadd-openstack-instance-meta-data-info-salt-grains",slug:"add-openstack-instance-meta-data-info-salt-grains"},slug:aJ,year:"2015"}],fetch:[],mutations:void 0}}("text","element","\n","p","a","nofollow","noopener","noreferrer","_blank","li","code","em","td","app-link-compare-item"," ",".","ul","true",-1,"span","icon","icon-link","th","app-image",2,"MediaWiki","h2","tr","strong","Support MediaWiki special URL patterns","nuxt-link","webplatform.github.io","en-CA",true,"blog",3,"Requirements","Requirements we couldn‚Äôt meet","root","app-alert-box","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd","What was under \u002Fwiki\u002FWPD:...",")","h3","webplatform\u002Fmediawiki-conversion","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion","Export MediaWiki wiki pages and history into a git repository","ol","static.webplatform.org","projects","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmonit_dashboard_201502_status.png","The WebPlatform project was running from a about 20 VMs\nand the availability, in part, managed by Monit.\nAt the end of the project, the infrastructure \"had to go away\"\n","priorities","Priorities","outcome","Outcome","migration","Migration","Blog","mediawiki","requirements","requirements-we-couldnt-meet","screenshots","Screenshots","display:flex","https:\u002F\u002Fwww.w3.org\u002FPeople\u002Ffunctions\u002Fsysteam","https:\u002F\u002Fwebplatform.github.io\u002F","WebPlatform Docs Home Page","div","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs","What was under \u002Fwiki\u002F...","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-meta","What was under \u002Fwiki\u002FMeta:...","webplatform\u002Fdocs-wpd","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fblog","Archivator","\n(","MediaWiki XML dump","https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FHelp:Namespaces","\u002Fwiki\u002FWPD:*","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fcontent-converter","Transform CMS content from a format into another","webplatform\u002Fcontent-converter","20150513130014","http:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002F","https:\u002F\u002Fstatic.webplatform.org\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-assets\u002Fblob\u002Fgh-pages\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs\u002Fblob\u002Fmaster\u002Fconfig\u002Fnginx\u002Fmaps\u002Fmain.map","migrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files","2024-10-24T19:43:51.728Z")));