__NUXT_JSONP__("/blog/tag/open-source", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh){return {data:[{},{},{contents:[{title:"Migrating WebPlatform.org MediaWiki into Git as Markdown files",locale:a_,created:"2015-07-30T00:00:00.000Z",updated:"2020-11-18T00:00:00.000Z",status:ap,revising:$,categories:[aJ],tags:["archiving",ai,a$,bD],description:"How to take a full MediaWiki content and edit history into a Git repository keeping the history and author attributions into Markdown",coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmonit_dashboard_201502_status.png",text:"The WebPlatform project was running from a about 20 VMs\nand the availability, in part, managed by Monit.\nAt the end of the project, the infrastructure \"had to go away\"\n"},preamble:{disable:$,text:o},toc:[{id:bE,depth:V,text:bF},{id:bG,depth:V,text:bH},{id:bI,depth:V,text:bJ},{id:ba,depth:af,text:bK},{id:bL,depth:af,text:at},{id:bM,depth:V,text:bb},{id:bN,depth:af,text:bc},{id:aK,depth:V,text:aL}],body:{type:W,children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"On July 1st 2015, "},{type:b,tag:v,props:{},children:[{type:a,value:"The WebPlatform project"}]},{type:a,value:" has been discontinued, by having\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20130328132045\u002Fhttp:\u002F\u002Fwww.webplatform.org\u002Fstewards\u002F",rel:[j,k,l],target:m,title:"WebPlatform Project sponsors"},children:[{type:a,value:"its sponsors"}]},{type:a,value:" retracting from the project."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"I was hired by the W3C solely to maintain the WebPlatform project. Without\nfunding, and no budget at W3C\u002FMIT to transfer me, my contract was going to end."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:bd,props:{style:bO},children:[{type:a,value:"\nüëÄ This was written in December 2020 and taken from notes I‚Äôve been sharing around via email.\n"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"With me as the only full-time person on the project with knowledge of the\ninfrastructure, and also as a believer of ‚Äú"},{type:b,tag:g,props:{href:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FLearn\u002FGetting_started_with_the_web\u002FThe_web_and_web_standards#Dont_break_the_web",rel:[j,k,l],target:m},children:[{type:a,value:"don‚Äôt break the\nweb"}]},{type:a,value:"‚Äù, I wanted to keep everything online."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"When "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fblog\u002F2013\u002F08\u002Fhi-my-name-s-renoir-ill-be-your-devops-for-the-web-platform\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"I inherited the project"}]},{type:a,value:", I "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider\u002F",rel:[j,k,l],target:m,title:"2013 Infrastructure project: Migrating to a new provider"},children:[{type:a,value:"went through migrating\n"},{type:b,tag:v,props:{},children:[{type:a,value:"from one cloud provider to another"}]}]},{type:a,value:" the full\ninfrastructure, "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Usage_and_future_state\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"it has been running from about 20 Linux\nVMs"}]},{type:a,value:", worked on a few projects such as an attempt at having\nSingle-SignOn, and better compatibility tables."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Since the project was being closed, most of what I‚Äôve worked lost their use. The\ninfrastructure was also going to become a burden."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"While planning my last weeks, I‚Äôve agreed with the W3C systems team\n\""},{type:b,tag:g,props:{href:bP,rel:[j,k,l],target:m},children:[{type:a,value:"w3t-systeam"}]},{type:a,value:"\" to convert as much as possible as a static site."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The following are notes about the software I‚Äôve written to migrate a WordPress\nblog and multiple MediaWiki namespaces into a Git repository."}]},{type:a,value:c},{type:b,tag:X,props:{id:bE},children:[{type:b,tag:g,props:{href:"#priorities",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:bF}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The priorities were to keep the documentation pages up, preserve the\ncontribution history and attributions, also keep the blog contents, and have\neverything to be served as static HTML hosted on GitHub pages."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"I wanted to have this done before "},{type:b,tag:au,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fleaving-w3c\u002F"},children:[{type:a,value:"I leave the W3C"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Since the "},{type:b,tag:g,props:{href:bP,rel:[j,k,l],target:m},children:[{type:a,value:"SysTeam"}]},{type:a,value:" would keep control of the "},{type:b,tag:h,props:{},children:[{type:a,value:"webplatform.org"}]},{type:a,value:"\ndomain, they‚Äôve decided to support some redirect from the original domain to\n"},{type:b,tag:g,props:{href:bQ,rel:[j,k,l],target:m,title:bR},children:[{type:a,value:aM}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Once everything was migrated, we‚Äôve added a note;"}]},{type:a,value:c},{type:b,tag:bS,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The WebPlatform project, supported by various stewards between 2012 and 2015,\nhas been discontinued"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:"sup",props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Source: "},{type:b,tag:g,props:{href:bQ,rel:[j,k,l],target:m,title:bR},children:[{type:a,value:aM}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:X,props:{id:bG},children:[{type:b,tag:g,props:{href:"#outcome",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:bH}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The conversion work took the "},{type:b,tag:v,props:{},children:[{type:a,value:"two last months"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"All links to pages showing the "},{type:b,tag:v,props:{},children:[{type:a,value:"WebPlatform"}]},{type:a,value:" logo from this article is the\nresult of what I‚Äôm describing here, as the migration and all servers were shut\ndown and decommissioned in 2016."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The source of the site was generated from\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs",rel:[j,k,l],target:m},children:[{type:a,value:"webplatform\u002Fgenerator-docs"}]},{type:a,value:", and we‚Äôve created\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fwebplatform.github.io\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"webplatform\u002Fwebplatform.github.io"}]},{type:a,value:"\nto host the site on GitHub pages. Eventualy, the W3C SysTeam set the repository\nas read-only."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"There were other things that we‚Äôve initially planned, but couldn‚Äôt (see\n"},{type:b,tag:au,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements-we-couldnt-meet"},children:[{type:a,value:bc}]},{type:a,value:"):"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Here is what I could migrate"}]},{type:a,value:c},{type:b,tag:p,props:{style:"font-size:small",className:["table-parent","table-auto"]},children:[{type:a,value:c},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:"table",props:{},children:[{type:b,tag:"thead",props:{},children:[{type:b,tag:av,props:{},children:[{type:b,tag:al,props:{},children:[{type:a,value:"From"}]},{type:b,tag:al,props:{},children:[{type:a,value:"To"}]},{type:b,tag:al,props:{},children:[{type:a,value:"Repository"}]},{type:b,tag:al,props:{},children:[{type:a,value:"Comment"}]},{type:b,tag:al,props:{},children:[{type:a,value:"Commits"}]},{type:b,tag:al,props:{},children:[{type:a,value:"Documents"}]},{type:b,tag:al,props:{},children:[{type:a,value:"Deleted"}]}]}]},{type:b,tag:"tbody",props:{},children:[{type:b,tag:av,props:{},children:[{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002F*"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002F*"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:g,props:{href:bT,rel:[j,k,l],target:m,title:bU},children:[{type:a,value:"webplatform\u002Fdocs"}]}]},{type:b,tag:z,props:{},children:[{type:a,value:"The main docs pages"}]},{type:b,tag:z,props:{},children:[{type:a,value:"37,000"}]},{type:b,tag:z,props:{},children:[{type:a,value:"4,675"}]},{type:b,tag:z,props:{},children:[{type:a,value:"418"}]}]},{type:b,tag:av,props:{},children:[{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002FMeta:*"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002FMeta\u002F*"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:g,props:{href:bV,rel:[j,k,l],target:m,title:bW},children:[{type:a,value:"webplatform\u002Fdocs-meta"}]}]},{type:b,tag:z,props:{},children:[{type:a,value:"Archived content that needed to be moved during initial mass imports."}]},{type:b,tag:z,props:{},children:[{type:a,value:"300"}]},{type:b,tag:z,props:{},children:[{type:a,value:"58"}]},{type:b,tag:z,props:{},children:[{type:a,value:"170"}]}]},{type:b,tag:av,props:{},children:[{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002FWPD:*"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002FWPD\u002F*"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:g,props:{href:be,rel:[j,k,l],target:m,title:bf},children:[{type:a,value:bX}]}]},{type:b,tag:z,props:{},children:[{type:a,value:"Community and notes section. Example "},{type:b,tag:g,props:{href:"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160722084044\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure",rel:[j,k,l],target:m},children:[{type:a,value:"\u002Fwiki\u002FWPD:Infrastructure"}]},{type:a,value:" into "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"\u002Fdocs\u002FWPD\u002FInfrastructure"}]},{type:a,value:bY},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd\u002Fblob\u002Fmanual-edits\u002FInfrastructure\u002Findex.md",rel:[j,k,l],target:m},children:[{type:a,value:"source"}]},{type:a,value:aj}]},{type:b,tag:z,props:{},children:[{type:a,value:"5,700"}]},{type:b,tag:z,props:{},children:[{type:a,value:"358"}]},{type:b,tag:z,props:{},children:[{type:a,value:"323"}]}]},{type:b,tag:av,props:{},children:[{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"blog.webplatform.org"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"webplatform.github.io\u002Fblog\u002F*"}]}]},{type:b,tag:z,props:{},children:[{type:b,tag:g,props:{href:bZ,rel:[j,k,l],target:m},children:[{type:a,value:"webplatform\u002Fblog"}]}]},{type:b,tag:z,props:{},children:[{type:a,value:"The blog content"}]},{type:b,tag:z,props:{},children:[{type:a,value:b_}]},{type:b,tag:z,props:{},children:[{type:a,value:"53"}]},{type:b,tag:z,props:{},children:[{type:a,value:"N\u002FA"}]}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:X,props:{id:bI},children:[{type:b,tag:g,props:{href:"#migration",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:bJ}]},{type:a,value:c},{type:b,tag:bd,props:{style:bO},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"üëÄ During this migration project, I was hoping to find a way to take any web\npage, from any CMS, and get a full copy (including images) of it into Markdown.\nThere was none. In 2017, I‚Äôve created\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Farchivator",rel:[j,k,l],target:m},children:[{type:b,tag:v,props:{},children:[{type:a,value:b$}]}]},{type:a,value:ca},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Farchivator",rel:[j,k,l],target:m},children:[{type:a,value:"npm"}]},{type:a,value:") to help with such work.\nInstead of using the last step described here, anyone could use "},{type:b,tag:v,props:{},children:[{type:a,value:b$}]},{type:a,value:" to\nretrieve a copy of their web pages."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"While building the solution, a few requirements emerged, they‚Äôre listed in\n"},{type:b,tag:au,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements"},children:[{type:a,value:bb}]}]},{type:a,value:c},{type:b,tag:ag,props:{id:ba},children:[{type:b,tag:g,props:{href:"#blog",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:bK}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For migrating the "},{type:b,tag:g,props:{href:bZ,rel:[j,k,l],target:m},children:[{type:a,value:ba}]},{type:a,value:", it was made manually, I‚Äôve just\nconverted the HTML into Markdown using Pandoc."}]},{type:a,value:c},{type:b,tag:ag,props:{id:bL},children:[{type:b,tag:g,props:{href:"#mediawiki",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:at}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For migrating MediaWiki, the proces was a bit more complex."}]},{type:a,value:c},{type:b,tag:bd,props:{title:"Want to migrate your own MediaWiki?"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"ü§≤üèº If you‚Äôre looking for an HowTo to migrate your own MediaWiki installation,\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion#use",rel:[j,k,l],target:m},children:[{type:a,value:"the procedure is written in ‚û°Ô∏è "},{type:b,tag:K,props:{},children:[{type:a,value:bg}]},{type:a,value:"‚Äôs README"}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"To migrate, we needed an history of each pages, from creation to the last edit."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"With MediaWiki, we have "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:DumpBackup.php",rel:[j,k,l],target:m,title:"dumpBackup.php file creates an XML dump for export or backup. XML dumps contain the content of the wiki"},children:[{type:b,tag:K,props:{},children:[{type:a,value:"Manual:DumpBackup.php"}]}]},{type:a,value:", that creates\nan XML file (\""},{type:b,tag:v,props:{},children:[{type:a,value:cb}]},{type:a,value:"\") of all history of all pages. One per\n"},{type:b,tag:g,props:{href:cc,rel:[j,k,l],target:m},children:[{type:a,value:"namespace"}]},{type:a,value:", for WebPlatform Docs‚Äô wikis, we had:\n"},{type:b,tag:g,props:{href:bV,rel:[j,k,l],target:m,title:bW},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\u002Fwiki\u002FMeta:*"}]}]},{type:a,value:am},{type:b,tag:g,props:{href:be,rel:[j,k,l],target:m,title:bf},children:[{type:b,tag:h,props:{},children:[{type:a,value:cd}]}]},{type:a,value:ce},{type:b,tag:g,props:{href:bT,rel:[j,k,l],target:m,title:bU},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\u002Fwiki\u002F*"}]}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"A big part of processing and converting history is about the data model so we\ncould read from one format and use the data model as data-source for conversion."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For this, I‚Äôve created "},{type:b,tag:g,props:{href:cf,rel:[j,k,l],target:m,title:cg},children:[{type:a,value:ch}]},{type:a,value:", an\nabstract library specialized for data manipulation to help \""},{type:b,tag:v,props:{},children:[{type:a,value:"Transform CMS\ncontent from a format into another"}]},{type:a,value:" [format]\". It‚Äôs written in PHP, and might\nstill work even though it hasn‚Äôt been touched since 2015."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:cf,rel:[j,k,l],target:m,title:cg},children:[{type:a,value:ch}]},{type:a,value:" takes care of manipulating\ndata for:"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Date of contribution and author information"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Content management systems like "},{type:b,tag:v,props:{},children:[{type:a,value:at}]},{type:a,value:" has a way to tell the user and\ndate of an edition."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Take each edit contents as they were"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Do not change any of the contents for each edits, even though they are in a\nformat understood by the original engine, here being "},{type:b,tag:v,props:{},children:[{type:a,value:at}]},{type:a,value:Q}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"To convert each page history edit into "},{type:b,tag:K,props:{},children:[{type:a,value:"Git commits"}]},{type:a,value:", I‚Äôve created\n"},{type:b,tag:g,props:{href:bh,rel:[j,k,l],target:m,title:bi},children:[{type:a,value:bg}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"This is the utility that takes care of making the conversion "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\u002Fblob\u002Fmaster\u002Fsrc\u002FWebPlatform\u002FImporter\u002FCommands\u002FRunCommand.php#L48",rel:[j,k,l],target:m,title:"Comments describing mediawiki-conversion"},children:[{type:a,value:"see comments made\nhere"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:"Handle deleted pages"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For each edit create a git revisions commit until the final file delete. At\nthe end of that step, the Git repository should have an history, but no\naparent files. At this step, we can also use the entries and make a redirect\nmap."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:"Handle pages that weren‚Äôt deleted in history"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Do the same as above. At this step, we should have a repository with text\nfiles where each file has exactly the same content as the source history. So\nwe can add them on top of the deleted pages following the same process as\nabove. We can also use those as a list of current pages we‚Äôll want to be\nconverted into Markdown."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:"Convert content"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For all pages "},{type:b,tag:v,props:{},children:[{type:a,value:"that weren‚Äôt deleted in history"}]},{type:a,value:". Query "},{type:b,tag:v,props:{},children:[{type:a,value:at}]},{type:a,value:" API to\nretrieve the full HTML, including "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FTransclusion",rel:[j,k,l],target:m},children:[{type:a,value:"Transclusions"}]},{type:a,value:" pass it to\nPandoc, so we get it converted into Markdown. Commit the rewritten file\ncontents with Markdown."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"By design "},{type:b,tag:g,props:{href:bh,rel:[j,k,l],target:m,title:bi},children:[{type:a,value:bg}]},{type:a,value:" allows to\nre-run the 3rd step so we could always get all edits until we\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:Lock_the_database",rel:[j,k,l],target:m},children:[{type:b,tag:v,props:{},children:[{type:a,value:"Lock the database"}]},{type:a,value:" (i.e. cut-off)"}]},{type:a,value:"\nso we could keep the production site active until a cut-off date."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:X,props:{id:bM},children:[{type:b,tag:g,props:{href:"#requirements",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:bb}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Along with what's described in the\n"},{type:b,tag:au,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#migration-steps"},children:[{type:a,value:"Migration steps"}]},{type:a,value:",\nwe wanted also to ensure we properly support the following."}]},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Keep author attributions but have them anonymized"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We didn‚Äôt want to leak all contributor‚Äôs accounts email addresses to be\npublished without their consent. So, I‚Äôve setup a "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs\u002Fblob\u002Fmanual-edits\u002F.mailmap",rel:[j,k,l],target:m},children:[{type:b,tag:h,props:{},children:[{type:a,value:".mailmap"}]},{type:a,value:" so that\ncontributors could add a PR to advertize publicly on GitHub"}]},{type:a,value:Q}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Keep code examples in Markdown so we can colourize them"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Golden standard pages should look the same"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The \"Golden Standard\" pages were ones we were regularly referring to see how\nthey would look and see if things are broken."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Also, since we were removing infrastructure, we should see features that were\nenabled at the time of "},{type:b,tag:v,props:{},children:[{type:a,value:"Web.Archive.org"}]},{type:a,value:" snapshot, but would be omitted in\nthe "},{type:b,tag:v,props:{},children:[{type:a,value:"Static version"}]},{type:a,value:" (i.e. "},{type:b,tag:h,props:{},children:[{type:a,value:aM}]},{type:a,value:aj}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:"Compatibility data"}]},{type:a,value:" was removed"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:"Contents"}]},{type:a,value:" on the right should be removed"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:"Overview table"}]},{type:a,value:" should look different"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"On "},{type:b,tag:v,props:{},children:[{type:a,value:"static version"}]},{type:a,value:" code blocks should be more colorized differently (it's\nusing a different process)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Examples:"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fborder-radius"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fdisplay"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002Ffunctions","web-archive-date":"20140626071828"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FArray\u002Ffilter"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FDate"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FBeginners\u002Fhtml","web-archive-date":ci},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fcanvas_notearsgame","web-archive-date":ci},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fsvg_clipping_and_masking","web-archive-date":"20150905205843"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:aw}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"MediaWiki is pretty relax about what it allows in its URLs."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Since we‚Äôre migrating into a filesystem, we wanted to have only valid\nfilesystem file names and decided to normalize all paths into ASCII\ncharacters."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For example, the "},{type:b,tag:g,props:{href:cc,rel:[j,k,l],target:m},children:[{type:a,value:"Namespaces"}]},{type:a,value:" (e.g. "},{type:b,tag:h,props:{},children:[{type:a,value:cd}]},{type:a,value:") adds a\ncolumn character, that would be URLEncoded into "},{type:b,tag:h,props:{},children:[{type:a,value:"%3A"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"There were many other discrepancies like:"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Case insensitivity ‚Äî Because some URLs in pages were not in the same casing"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Supporting spaces ‚Äî Sometimes with underscore \""},{type:b,tag:h,props:{},children:[{type:a,value:"_"}]},{type:a,value:"\", other times with "},{type:b,tag:h,props:{},children:[{type:a,value:"%20"}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Normalize\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FURL\u002Fpathname",rel:[j,k,l],target:m},children:[{type:a,value:"URL Path"}]},{type:a,value:ca},{type:b,tag:g,props:{href:"https:\u002F\u002Furl.spec.whatwg.org\u002F#concept-url-path",rel:[j,k,l],target:m},children:[{type:a,value:"spec"}]},{type:a,value:") (e.g. anything that\nwould be URLEncoded such as "},{type:b,tag:h,props:{},children:[{type:a,value:"()!@:"}]},{type:a,value:aj}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:aw}]},{type:a,value:": A page in another language should\nbe migrated"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fja","web-archive-date":"20160613060459"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fko"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:aw}]},{type:a,value:": A Page with "},{type:b,tag:h,props:{},children:[{type:a,value:"()"}]},{type:a,value:" in URL should be\nnormalized"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Ffunctions\u002Ftranslate()"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002FanimVal_(SVGAnimatedPreserveAspectRatio)"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002Fcx_(SVGRadialGradientElement)"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:aw}]},{type:a,value:": Pages within WPD namespace should\nbe migrated"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002FMonitoring\u002FMonit"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The image comes from "},{type:b,tag:h,props:{},children:[{type:a,value:"\u002FWPD\u002Fassets\u002F"}]},{type:a,value:" which means the image is hosted in the\n"},{type:b,tag:g,props:{href:be,rel:[j,k,l],target:m,title:bf},children:[{type:a,value:bX}]},{type:a,value:" in the assets\u002F folder."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:v,props:{},children:[{type:a,value:aw}]},{type:a,value:": Pages in Meta namespace should be\nmigrated"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:HTML\u002FElements\u002Fstyle"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:web_platform_wednesday"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:Editors_Guide"},children:[{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:ag,props:{id:bN},children:[{type:b,tag:g,props:{href:"#requirements-we-couldnt-meet",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:bc}]},{type:a,value:c},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ensure ALL assets uploads are displayed properly"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Before, we would use GlusterFS to store images for MediaWiki. There has been\nwork made to store on "},{type:b,tag:h,props:{},children:[{type:a,value:bj}]},{type:a,value:", all the pages uses the link,\nbut the SysTeam decided not to keep the redirects."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Now that the site is archived, I‚Äôm unsure this can be fixed."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If you want to see them, add this bookmarklet to your bookmarks bar\n"},{type:b,tag:g,props:{style:"text-decoration:none;display:inline-block;padding: 1px 6px;color: #fff;background: #32a0eb;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;",href:"javascript:(function()%7B%5B%5D.forEach.call(document.querySelectorAll('img')%2Cfunction(img)%7Bif%20('src'%20in%20img)%20%7Bsrc%20%3D%20img.src%3Bsrc%20%3D%20src.replace('static.webplatform.org'%2C%20'webplatform.github.io%2Fdocs-assets')%3Bimg.src%3Dsrc%3B%7D%7D)%7D)()"},children:[{type:a,value:"WebPlatform.github.io\nShow images"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The project "},{type:b,tag:g,props:{href:cj,rel:[j,k,l],target:m},children:[{type:a,value:cj}]},{type:a,value:" was meant to be used as\nan origin for "},{type:b,tag:h,props:{},children:[{type:a,value:bj}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:K,props:{},children:[{type:a,value:"Should we want to fix the issue"}]},{type:a,value:", we could setup an HTTP redirect from\n"},{type:b,tag:h,props:{},children:[{type:a,value:bj}]},{type:a,value:" to "},{type:b,tag:h,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs-assets\u002F"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The following (should be) the same file;"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:g,props:{href:ck,rel:[j,k,l],target:m},children:[{type:a,value:ck}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:g,props:{href:cl,rel:[j,k,l],target:m},children:[{type:a,value:cl}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:g,props:{href:cm,rel:[j,k,l],target:m},children:[{type:a,value:cm}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Make sure page links "},{type:b,tag:v,props:{},children:[{type:a,value:"with different casing"}]},{type:a,value:" are redirected properly"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For example the page for \""},{type:b,tag:h,props:{},children:[{type:a,value:"Internet_and_Web"}]},{type:a,value:"\" is sometimes linked with\ndifferent casing, e.g. at \""},{type:b,tag:h,props:{},children:[{type:a,value:"Internet_and_Web\u002FThe_History_of_the_Web"}]},{type:a,value:"\" or\n\""},{type:b,tag:h,props:{},children:[{type:a,value:"internet_and_web\u002FThe_History_of_the_Web"}]},{type:a,value:"\", it is migrated once;\n"},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fconcepts\u002FInternet_and_Web\u002FThe_History_of_the_Web"},children:[]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Some page has links to with different casing \""},{type:b,tag:h,props:{},children:[{type:a,value:"internet_and_web"}]},{type:a,value:"\", we can see\nfrom\n"},{type:b,tag:N,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fconcepts"},children:[]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"MediaWiki would redirect, but on GitHub pages, nothing has been put in place\nfor those. If we wanted to support, we could have used the same entries used\nto create "},{type:b,tag:g,props:{href:cn,rel:[j,k,l],target:m},children:[{type:a,value:"NGINX rewrite rules"}]},{type:a,value:", and add empty HTML pages\nlike GitHub pages would. In the case of WebPlatform project, it's been\ndecided to leave as-is."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Enforce all redirects from "},{type:b,tag:h,props:{},children:[{type:a,value:"*.webplatform.org"}]},{type:a,value:" to properly redirect to\n"},{type:b,tag:h,props:{},children:[{type:a,value:aM}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"This migration process supported creating "},{type:b,tag:g,props:{href:cn,rel:[j,k,l],target:m},children:[{type:a,value:"NGINX rewrite\nrules"}]},{type:a,value:", I‚Äôm unsure if they‚Äôve been used."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:"hr",props:{},children:[]},{type:a,value:c},{type:b,tag:X,props:{id:aK},children:[{type:b,tag:g,props:{href:co,ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:aL}]},{type:a,value:c},{type:b,tag:p,props:{style:bk,className:[bl,bm]},children:[{type:a,value:c},{type:b,tag:F,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-conversion.png"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:bh,rel:[j,k,l],target:m,title:bi},children:[{type:a,value:"WebPlatform\u002Fmediawiki-conversion"}]},{type:a,value:" is made to run in 3\nsteps, here we see it running at the 3rd step. Where we would take the latest\nversion, get the HTML version from the MediaWiki API, and pass to Pandoc to get\nMarkdown."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-output.png"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Making sure during development that the conversion was effectively the same"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-github.png"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We can see directly on GitHub.com the converted page's Git history"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-markdown.png"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We can see directly on GitHub.com the converted Markdown contents."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-view-syntaxhighlight.png"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The final output should support code blocks with"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-log.png",alt:"MediaWiki history converted into Git Commits"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The end result is that for each "},{type:b,tag:v,props:{},children:[{type:a,value:cb}]},{type:a,value:" can be converted into text\nfiles where each edits are made as Git commits keeping author and date of edit."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{figcaption:o,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-onsite.png"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:K,props:{},children:[{type:a,value:"Not implemented"}]},{type:a,value:" Screenshot of an experiment to display the page's Git\nhistory calling GitHub API. There is no trace of this to my recollection, and It\nwas effectively the first time I used Vue.js."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},dir:"\u002Fblog\u002F2015\u002F07",path:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files",extension:aq,slug:"migrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files",createdAt:cp,updatedAt:cp,category:aJ,prettyfiedTemporalDate:{prettified:"Thursday, July 30, 2015",temporalDate:"2015-07-30"}},{title:"Run a NodeJS process through forever from within a Docker container",locale:a_,created:"2015-05-12T00:00:00.000Z",updated:"2023-02-18T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F05\u002Frun-nodejs-process-forever-within-docker-container\u002F",status:ap,revising:$,migrateLinks:$,categories:[aJ],tags:[bn,an,ai,a$,cq,bD],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-spec-rangefinder.png",alt:"Screen capture of the RangeFinder API using Publican",text:"Specification Document for RangeFinder API\n"},excerpt:"I‚Äôve recently been through the steps to make a NodeJS web app to run from inside a Docker container. The objective of this project was to simplify the deployment of a web app that had many moving parts by making it a re-deployable service that is self-contained.",preamble:{disable:$,text:o},toc:[{id:cr,depth:V,text:"Run publican inside Docker"},{id:cs,depth:af,text:ct},{id:cu,depth:af,text:cv},{id:aK,depth:af,text:aL}],body:{type:W,children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"One of the components that I worked on "},{type:b,tag:au,props:{to:"\u002Fblog\u002Ftag\u002Fwebplatform-docs"},children:[{type:a,value:"during my time on the WebPlatform\nproject"}]},{type:a,value:am},{type:b,tag:g,props:{href:bo,rel:[j,k,l],target:m},children:[{type:a,value:bp}]},{type:a,value:", that I had to manage has many moving parts. The\nend product of that component is basically static HTML documents that ends up on\n"},{type:b,tag:g,props:{href:"https:\u002F\u002Fspecs.webplatform.org\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"specs.webplatform.org"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Since we need to have many packages installed in very specific version, and\nautomating the installation wouldn't bring any more benefit than being\nself-contained, I thought it would be best to go through the steps of converting\nit into a Docker container."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The following is a procedure I wrote to teach "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.w3.org\u002Fstaff\u002Falumni\u002F#robin-berjon",rel:[j,k,l],target:m},children:[{type:a,value:"my colleague"}]},{type:a,value:am},{type:b,tag:g,props:{href:"https:\u002F\u002Fberjon.com\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"Robin\nBerjon"}]},{type:a,value:", how to run his system called "},{type:b,tag:g,props:{href:bo,rel:[j,k,l],target:m},children:[{type:a,value:bp}]},{type:a,value:" from within a Docker\ncontainer. Publican is basically a GitHub hook listener that generates specs\nwritten to be parsed by "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fw3c\u002Frespec",rel:[j,k,l],target:m},children:[{type:a,value:"ReSpec"}]},{type:a,value:bq},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Ftabatkins\u002Fbikeshed",rel:[j,k,l],target:m},children:[{type:a,value:"Bikeshed"}]}]},{type:a,value:c},{type:b,tag:X,props:{id:cr},children:[{type:b,tag:g,props:{href:"#run-publican-inside-docker",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:"Run "},{type:b,tag:v,props:{},children:[{type:a,value:"publican"}]},{type:a,value:" inside Docker"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"What this'll do is basically build a VM that'll run a Docker container. The\ncontainer will write in files outside of it."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"You'll quickly notice that the paths will look the same, its confusing, sorry\nabout that. Fortunately for us, the paths in the procedure are the ones that\nwill be mounted through Docker Volume (the "},{type:b,tag:h,props:{},children:[{type:a,value:ax}]},{type:a,value:" option when you call "},{type:b,tag:h,props:{},children:[{type:a,value:an}]},{type:a,value:")\nand will, in the end, be the same files."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Once you have a Docker container running on a VM, it'll replicate how a\nproduction VM will run the tasks. Since we know where the container will write\nfiles, we'll have our frontend servers to forward requests to publican, and\nserve files it generated."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Doing all this removes the need to do any rsync. NGINX within the VM that'll run\nDocker will take care of serving static files, and frontend server will expose\nit to the public."}]},{type:a,value:c},{type:b,tag:ag,props:{id:cs},children:[{type:b,tag:g,props:{href:"#steps",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:ct}]},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Have "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.vagrantup.com\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"Vagrant"}]},{type:a,value:" and "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.virtualbox.org\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"VirtualBox"}]},{type:a,value:" installed"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Follow what's in "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Fsalt-basesystem",rel:[j,k,l],target:m},children:[{type:a,value:"renoirb\u002Fsalt-basesystem README.md"}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Make sure you follow "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Fsalt-basesystem#vagrant-sandbox-utilities",rel:[j,k,l],target:m},children:[{type:a,value:"Vagrant Sandbox utilities"}]},{type:a,value:" part"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:cw},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:cx}]},{type:a,value:cy},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aN}]},{type:a,value:" salt-call state.highstate\n "},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aN}]},{type:a,value:" salt-call state.sls vagrantsandbox.docker\n "},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:br}]},{type:a,value:c}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Reboot the VM by doing "},{type:b,tag:h,props:{},children:[{type:a,value:"vagrant reload"}]}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:" vagrant reload\n"}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:K,props:{},children:[{type:a,value:"No need"}]},{type:a,value:" to follow what's in "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fpublican\u002Fblob\u002Ftask-based-docker\u002FDOCKER.md",rel:[j,k,l],target:m},children:[{type:a,value:"webplatform\u002Fpublican DOCKER.md file"}]},{type:a,value:".\nThose are notes to show how to build a container. For this time, we'll "},{type:b,tag:g,props:{href:"https:\u002F\u002Fregistry.hub.docker.com\u002Fu\u002Fwebspecs\u002Fpublican\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"use a\ncontainer I already built and pushed on "},{type:b,tag:K,props:{},children:[{type:a,value:"Docker hub"}]}]},{type:a,value:"!"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Setup what's required to run the container"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:cw},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:cx}]},{type:a,value:c}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Prepare the folders;"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:o},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aN}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:cz}]},{type:a,value:cy},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:cA}]},{type:a,value:" webapps\n "},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:"id"}]},{type:a,value:c}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"You should see"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,cB]},children:[{type:b,tag:h,props:{},children:[{type:a,value:" uid=990(webapps) gid=990(webapps) groups=990(webapps),33(www-data),998(docker)\n"}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Prepare the folders"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:o},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:ay}]},{type:a,value:" \u002Fsrv\u002Fwebapps "},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:bs}]},{type:a,value:" publican\u002Fdata "},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:ay}]},{type:a,value:" publican\n"}]}]}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If all went well so far; you should be able to do "},{type:b,tag:h,props:{},children:[{type:a,value:"docker ps"}]},{type:a,value:" as the\n"},{type:b,tag:h,props:{},children:[{type:a,value:"webapps"}]},{type:a,value:" user. Otherwise reboot and\u002For run "},{type:b,tag:h,props:{},children:[{type:a,value:"salt-call"}]},{type:a,value:" with both\n"},{type:b,tag:h,props:{},children:[{type:a,value:"state.highstate"}]},{type:a,value:o},{type:b,tag:h,props:{},children:[{type:a,value:"state.sls vagrantsandbox.docker"}]},{type:a,value:" states. There should be\nnothing left to do."}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:an}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:"ps"}]},{type:a,value:"\n\nCONTAINER ID IMAGE COMMAND CREATED\n"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:".."}]},{type:a,value:".\n"}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Pull the publican Docker image I built (it'll take about 10 minutes)"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:o},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:an}]},{type:a,value:" pull webspecs\u002Fpublican:wip\n"}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Copy the other files in this Gist in your local coputer where you cloned the\n"},{type:b,tag:K,props:{},children:[{type:a,value:"salt-basesystem"}]},{type:a,value:" repository. From that folder you can move them inside the\nVagrant VM where you need."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Copy publican config"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:o},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:"cp"}]},{type:a,value:" \u002Fvagrant\u002Fconfig.json data\u002F\n"}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:cC,props:{},children:[{type:a,value:"Download Bikeshed stuff that i didn't figure out yet what's important to\nkeep, extract it in "},{type:b,tag:h,props:{},children:[{type:a,value:"\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fspec-data\u002F"}]}]},{type:a,value:Q}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:az,props:{className:[aA],variant:aO},children:[{type:a,value:c},{type:b,tag:K,props:{slot:aB},children:[{type:a,value:"Archive mentioned no longer exists"}]},{type:a,value:"\nThe archive used in the initial procedure no longer exists, it was a series of W3C specification Git repository working copies that Publican was expecting.\n"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"You can open up another terminal session and connect to the Vagrant VM\n"},{type:b,tag:h,props:{},children:[{type:a,value:"vagrant ssh"}]},{type:a,value:" (e.g. if you don't use "},{type:b,tag:h,props:{},children:[{type:a,value:"tmux"}]},{type:a,value:bq},{type:b,tag:h,props:{},children:[{type:a,value:"screen"}]},{type:a,value:aj}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:bs}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:aC}]},{type:a,value:" spec-data\u002Freadonly\u002F\n"},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:bs}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:aC}]},{type:a,value:" data\u002F"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aD}]},{type:a,value:"gits,logs,publish,queue,temp"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aE}]},{type:a,value:c}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Run the container"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:an}]},{type:a,value:bt},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:bu}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:bv}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:ax}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:aP},{type:b,tag:d,props:{className:[e,u]},children:[{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aQ}]},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:aR}]},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aj}]}]},{type:a,value:cD}]},{type:a,value:cE},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:aS},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:ax}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:aP},{type:b,tag:d,props:{className:[e,u]},children:[{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aQ}]},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:aR}]},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aj}]}]},{type:a,value:cF}]},{type:a,value:cG},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:aS},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:aC}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:bw}]},{type:a,value:cH}]}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If you see the following, you're in the Docker container!!"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"webapps@2f33f5c6e183:~$\n"}]}]}]},{type:a,value:c},{type:b,tag:F,props:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-init.png",alt:"A terminal window with a few commands and a build process status and green lines, no errors",figcaption:o},children:[{type:a,value:"\n  Launching the container\n"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Initiate the empty shell we just created (it'll create stuff in the "},{type:b,tag:h,props:{},children:[{type:a,value:"data\u002F"}]},{type:a,value:"\nfolder "},{type:b,tag:v,props:{},children:[{type:a,value:cI}]},{type:a,value:" of the container)"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"publican.js init\n"}]}]}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:cJ},{type:b,tag:v,props:{},children:[{type:a,value:"Launching the container"}]},{type:a,value:cK}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Once done, exit the container. Notice that by doing this, you lose the state\nof the VM and anything that has been written in the container. But, since we\nuse volumes (notice the "},{type:b,tag:h,props:{},children:[{type:a,value:"-v \u002Fhost\u002Fpath:\u002Fcontainer\u002Fpath"}]},{type:a,value:"), we actually wrote\n"},{type:b,tag:v,props:{},children:[{type:a,value:cI}]},{type:a,value:" of the container."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We can "},{type:b,tag:K,props:{},children:[{type:a,value:"exit the container"}]}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:o},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:br}]},{type:a,value:c}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"At this stage, we had publican and bikeshed to generate files (we may call\nthis a \"cache warmup\" of softs). Now, let's prepare the Vagrant VM to serve\nthe static content. Notice that the next commands are there only for the\npurpose of a local workspace, in production this step will also be managed\nautomatically."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Let's get back as the "},{type:b,tag:K,props:{},children:[{type:a,value:W}]},{type:a,value:" user, and create a quick web server;"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:br}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aT}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:"-yqq"}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aU}]},{type:a,value:"\nnginx "},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:"mv"}]},{type:a,value:" \u002Fvagrant\u002Fdefault.conf \u002Fetc\u002Fnginx\u002Fsites-available\u002Fdefault\n"},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:"service"}]},{type:a,value:" restart nginx\n"}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Let's return back to "},{type:b,tag:K,props:{},children:[{type:a,value:"as the webapps user and launch the runner"}]}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:cA}]},{type:a,value:" webapps "},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:ay}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican\u002F\n"}]}]}]},{type:a,value:c},{type:b,tag:F,props:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-run-hook.png",alt:"A terminal window with a build process status and green lines, no errors",figcaption:o},children:[{type:a,value:"\nStarting a build process\n"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:K,props:{},children:[{type:a,value:cL}]},{type:a,value:"; this will also be managed automatically in\nproduction."}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,"language-shell"]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:an}]},{type:a,value:bt},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:bu}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:bv}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:ax}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:aP},{type:b,tag:d,props:{className:[e,u]},children:[{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aQ}]},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:aR}]},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aj}]}]},{type:a,value:cD}]},{type:a,value:cE},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:cM},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:ax}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:aP},{type:b,tag:d,props:{className:[e,u]},children:[{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aQ}]},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:aR}]},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:aj}]}]},{type:a,value:cF}]},{type:a,value:cG},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:cM},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:aC}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:bw}]},{type:a,value:cH}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:cJ},{type:b,tag:v,props:{},children:[{type:a,value:cL}]},{type:a,value:cK}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"get your Vagrant VM IP address"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:"ifconfig"}]},{type:a,value:c}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Should start by "},{type:b,tag:h,props:{},children:[{type:a,value:"172..."}]},{type:a,value:bq},{type:b,tag:h,props:{},children:[{type:a,value:"192..."}]},{type:a,value:"; visit a browser to that address"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:ag,props:{id:cu},children:[{type:b,tag:g,props:{href:"#gists",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:cv}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Here are the files mentioned in this post"}]},{type:a,value:c},{type:a,value:c},{type:b,tag:bx,props:{id:"configjson"},children:[{type:b,tag:g,props:{href:"#configjson",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:"config.json"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:bo,rel:[j,k,l],target:m},children:[{type:a,value:bp}]},{type:a,value:" expects this file as "},{type:b,tag:h,props:{},children:[{type:a,value:"data\u002Fconfig.json"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,"language-json"]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aD}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"bikeshed\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"\u002Fopt\u002Fbikeshed\u002Fbikeshed.py\""}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"rsyncPath\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"\u002Fsrv\u002Fwebapps\u002Fpublican\u002F\""}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"python\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"python2\""}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"logFile\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"logs\u002Fall.log\""}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"email\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aD}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"to\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:cN}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"from\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:cN}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"host\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"localhost\""}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"level\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"error\""}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"handleExceptions\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,"boolean"]},children:[{type:a,value:A}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aE}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"purgeAllURL\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"https:\u002F\u002Fapi.fastly.com\u002Fservice\u002Ffooo\u002Fpurge_all\""}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:ae}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,aa]},children:[{type:a,value:"\"purgeAllKey\""}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:r}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"baar\""}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aE}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:bx,props:{id:"defaultconf"},children:[{type:b,tag:g,props:{href:"#defaultconf",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:"default.conf"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"A minimal NGINX web server digging for static content that Publican generates."}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,"language-nginx"]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# file: \u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fdefault"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,ao]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"server"}]}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aD}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,ao]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"listen"}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:"80"}]},{type:a,value:" default_server"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aF}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,ao]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:W}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata\u002Fpublish"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aF}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,ao]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"index"}]},{type:a,value:" index.html index.htm"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aF}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,ao]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"server_name"}]},{type:a,value:" localhost"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aF}]},{type:a,value:S},{type:b,tag:d,props:{className:[e,ao]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"location"}]},{type:a,value:" \u002F"}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aD}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,ao]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"try_files"}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:cO}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:cO}]},{type:a,value:"\u002F =404"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aF}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aE}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:aE}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:"h5",props:{id:"dockerfile"},children:[{type:b,tag:g,props:{href:"#dockerfile",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:"Dockerfile"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Here is the project's Dockerfile I created. I think it should be smaller, but\nPublican works with the following script."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Each step in a Dockerfile creates a \"commit\", make sure you have as few of them\nas possible, and also make sure that you clean after yourself. Remember that a\nDocker container is re-deployable and smallest the size of the container, the\nbetter!"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Notice a few details;"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"ENV DEBIAN_FRONTEND=noninteractive"}]},{type:a,value:" helps with dialogs"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"USER webapps"}]},{type:a,value:" tells \"where\" the rest of the script will make commands as a\ndifferent user than root. Make sure what's required by root to be done before!"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"COPY ..."}]},{type:a,value:" this is basically how you import content inside the container (i.e.\nmake the container heavier)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,"language-dockerfile"]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:cP}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Publican Docker runner"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:cP}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# See also:"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"#   * https:\u002F\u002Fgithub.com\u002Fnodesource\u002Fdocker-node\u002Fblob\u002Fmaster\u002Fubuntu\u002Ftrusty\u002Fnode\u002F0.10.36\u002FDockerfile"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"FROM"}]},{type:a,value:" nodesource\u002Ftrusty:0.10.36"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"MAINTAINER"}]},{type:a,value:" Renoir Boulanger \u003Crenoir@w3.org\u003E"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:ar}]},{type:a,value:" DEBIAN_FRONTEND=noninteractive"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Dependencies: Bikeshed, PhantomJS, Bikshed‚Äôs lxml"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:by}]},{type:a,value:" apt-get update && apt-get -y upgrade && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    apt-get install -yqq git python2.7 python-dev python-pip libxslt1-dev libxml2-dev zlib1g-dev && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    apt-get install -yqq libfontconfig1 libfreetype6 curl && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    apt-get autoremove -yqq --purge && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    pip install --upgrade lxml"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Copy everything we have locally into the container"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# REMINDER: Make sure you run `make clone-bikeshed`, we prefer to keep a copy locally outside"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# of the data volume. Otherwise it would make problems saying that bikeshed clone is not in the"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# same filesystem."}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"COPY"}]},{type:a,value:" . \u002Fsrv\u002Fwebapps\u002Fpublican\u002F"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Make sure we have a \"non root\" user and"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# delete any local workbench data\u002F directory"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:by}]},{type:a,value:" \u002Fusr\u002Fsbin\u002Fgroupadd --system --gid 990 webapps && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    \u002Fusr\u002Fsbin\u002Fuseradd --system --gid 990 --uid 990 -G sudo --home-dir \u002Fsrv\u002Fwebapps --shell \u002Fbin\u002Fbash webapps && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    sed -i "},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"'\u002F^%sudo\u002Fd'"}]},{type:a,value:" \u002Fetc\u002Fsudoers && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    echo "},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"'%sudo ALL=NOPASSWD: ALL'"}]},{type:a,value:" \u003E\u003E \u002Fetc\u002Fsudoers && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    mv \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbikeshed \u002Fopt && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    rm -rf data && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    mkdir -p data\u002Ftemp && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    rm -rf Dockerfile Makefile .git .gitignore DOCKER.md && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    chown -R webapps:webapps \u002Fsrv\u002Fwebapps\u002Fpublican && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    chown -R webapps:webapps \u002Fopt\u002Fbikeshed"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Switch from root to webapps system user"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# It **HAS to be** the SAME uid\u002Fgid as the owner on the host from which we‚Äôll use as volume"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"USER"}]},{type:a,value:" webapps"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Where the session will start from"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"WORKDIR"}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Environment variables"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:ar}]},{type:a,value:" PATH \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fnode_modules\u002F.bin:\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbin:\u002Fsrv\u002Fwebapps\u002Fpublican\u002F.local\u002Fbin:"},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:"$PATH"}]}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:ar}]},{type:a,value:" HOME \u002Fsrv\u002Fwebapps\u002Fpublican"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:ar}]},{type:a,value:" TMPDIR \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata\u002Ftemp"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:ar}]},{type:a,value:" NODE_ENV production"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:ar}]},{type:a,value:" GIT_DISCOVERY_ACROSS_FILESYSTEM true"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Run what `make deps` would do"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:by}]},{type:a,value:" pip install --upgrade --user --editable \u002Fopt\u002Fbikeshed && "},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:M}]},{type:a,value:"\n    mkdir -p node_modules && npm install"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Declare which port we expect to expose"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"EXPOSE"}]},{type:a,value:" 7002"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Allow cli entry for debug, but make sure docker-compose.yml uses \"command: bin\u002Frun.sh\""}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,R]},children:[{type:b,tag:d,props:{className:[e,I]},children:[{type:a,value:"ENTRYPOINT"}]},{type:a,value:" ["},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"\u002Fbin\u002Fbash\""}]},{type:a,value:"]"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Note leftover: Ideally, it should exclusively run"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"#ENTRYPOINT [\"\u002Fbin\u002Fbash\", \"\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbin\u002Frun.sh\"]"}]},{type:a,value:U},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"# Note leftover: What it ends up doing"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,H]},children:[{type:a,value:"#CMD [\"node_modules\u002Fforever\u002Fbin\u002Fforever\", \"--fifo\", \"logs\", \"0\"]"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:bx,props:{id:"forever-start-script"},children:[{type:b,tag:g,props:{href:"#forever-start-script",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:"Forever start script"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If you notice in the Docker run command, I call a file "},{type:b,tag:h,props:{},children:[{type:a,value:"bin\u002Frun.sh"}]},{type:a,value:", here it is."}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:an}]},{type:a,value:bt},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:bu}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:aS},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:bv}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:aS},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:aC}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:bw}]},{type:a,value:":7002 "},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:"\n       webspecs\u002Fpublican:latest "},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:M}]},{type:a,value:"\n       bin\u002Frun.sh\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Publican runs its process using "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fforeverjs\u002Fforever",rel:[j,k,l],target:m},children:[{type:a,value:"Forever"}]},{type:a,value:". The objective of forever is to\nkeep a process to run at all times."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"While this isn't ideal for NodeJS services, in the present use-case of a Docker\ncontainer who has the only purpose to run a process; Forever apt for the job!"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,"shebang","important"]},children:[{type:a,value:"#!\u002Fbin\u002Fbash"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:"export"}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,"assign-left",u]},children:[{type:a,value:"RUNDIR"}]},{type:b,tag:d,props:{className:[e,B]},children:[{type:a,value:"="}]},{type:b,tag:d,props:{className:[e,P]},children:[{type:a,value:"\"\u002Fsrv\u002Fwebapps\u002Fpublican\""}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:ay}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:cQ}]},{type:a,value:"\nnode_modules\u002Fforever\u002Fbin\u002Fforever start "},{type:b,tag:d,props:{className:[e,u]},children:[{type:a,value:cQ}]},{type:a,value:"\u002Fbin\u002Fserver.js\nnode_modules\u002Fforever\u002Fbin\u002Fforever "},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:"--fifo"}]},{type:a,value:" logs "},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:cR}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"That‚Äôs it, it‚Äôs all I had."}]},{type:a,value:c},{type:b,tag:ag,props:{id:aK},children:[{type:b,tag:g,props:{href:co,ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:aL}]},{type:a,value:c},{type:a,value:c},{type:b,tag:p,props:{style:bk,className:[bl,bm,cS,cT,cU]},children:[{type:a,value:c},{type:b,tag:F,props:{className:[aV],src:cV,alt:"A W3C Specification preview where we can see on the left the specification, and on the right the source highlighting changes in the source",figcaption:o},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"W3C Publican prototype build process helping with specification change tracking during review process"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{className:[aV],src:cW,figcaption:o},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:cX}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{style:bk,className:[bl,bm,cS,cT,cU]},children:[{type:a,value:c},{type:b,tag:F,props:{className:[aV],src:cV,alt:bz,figcaption:o},children:[{type:a,value:"\n...\n"}]},{type:a,value:c},{type:b,tag:F,props:{className:[aV],src:cW,figcaption:o},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:cX}]},{type:a,value:c}]},{type:a,value:c}]}]},dir:cY,path:"\u002Fblog\u002F2015\u002F05\u002Frun-nodejs-process-forever-within-docker-container",extension:aq,slug:"run-nodejs-process-forever-within-docker-container",createdAt:cZ,updatedAt:"2024-10-24T19:43:51.727Z",category:aJ,prettyfiedTemporalDate:{prettified:"Tuesday, May 12, 2015",temporalDate:"2015-05-12"}},{title:"Add OpenStack instance meta-data info in your salt grains",locale:a_,created:"2015-05-22T00:00:00.000Z",updated:"2023-11-17T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F05\u002Fadd-openstack-instance-meta-data-info-salt-grains\u002F",status:ap,revising:ad,migrateLinks:$,migrateImages:ad,gallery:ad,caption:ad,categories:[c_],tags:[bn,a$,"salt-stack","cloud-computing",ai],keywords:["Ansible","Infrastructure as Code"],preamble:{text:"It is possible the code shown here no longer works.\nThis was written at the time before VMWare aquired SaltStack and maybe\ncode shown uses parts of Salt Stack that no longer exists.\n"},coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fwebplatform-openstack-cluster-2014-10-06.png",alt:"A terminal window showing Open Stack nova client output",text:"Open Stack NOVA client is leveraging an internal HTTP API to display data we can\nconsume from the CLI.\nThe present article shows how to add data from OpenStack into Salt Stack.\n"},excerpt:"Ever wanted to target salt states based on data only the underlying OpenStack cluster knows. Here‚Äôs how I did it.",toc:[{id:c$,depth:V,text:da},{id:db,depth:V,text:dc},{id:dd,depth:V,text:de},{id:aU,depth:V,text:df}],body:{type:W,children:[{type:b,tag:f,props:{},children:[{type:a,value:"During a work session on my salt-states for WebPlatform.org I wanted to shape be\nable to query the OpenStack cluster meta-data so that I can adjust more\nefficiently my salt configuration."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"What are grains? Grains are structured data that describes what a minion has\nsuch as which version of GNU\u002FLinux its running, what are the network adapters,\netc."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The following is a Python script that adds data in Salt Stack' internal database\ncalled grains."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"I have to confess that I didn't write the script but adapted it to work within\nan OpenStack cluster. More precisely on DreamHost's DreamCompute cluster. The\noriginal script came from "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fsaltstack\u002Fsalt-contrib",rel:[j,k,l],target:m},children:[{type:a,value:"saltstack\u002Fsalt-contrib"}]},{type:a,value:" and the original file was\n"},{type:b,tag:g,props:{href:dg,rel:[j,k,l],target:m},children:[{type:a,value:"ec2_info.py"}]},{type:a,value:" to read data from EC2."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The "},{type:b,tag:g,props:{href:dg,rel:[j,k,l],target:m},children:[{type:a,value:"original script"}]},{type:a,value:" wasn't getting any data in the cluster. Most likely due\nto API changes and that EC2 API exposes dynamic meta-data that the\nDreamCompute\u002FOpenStack cluster don't."}]},{type:a,value:c},{type:b,tag:az,props:{variant:aO,className:[aA]},children:[{type:a,value:c},{type:b,tag:K,props:{slot:aB},children:[{type:a,value:"Script source"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The article‚Äôs source script is available on GitHub as a Python script we can\ninsert into SaltStack as a grain"}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fblob\u002Fmaster\u002F_grains\u002Fdreamcompute.py",rel:[j,k,l],target:m},children:[{type:a,value:"github.com\u002Fwebplatform\u002Fsalt-states"}]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"In the end, I edited the file to make it work on DreamCompute and also truncated\nsome data that the grains subsystem already has."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"My original objective was to get a list of "},{type:b,tag:h,props:{},children:[{type:a,value:dh}]},{type:a,value:" the VM was\nassigned. Unfortunately the API doesn't give that information yet. Hopefully\nI'll find a way to get that information some day."}]},{type:a,value:c},{type:b,tag:X,props:{id:c$},children:[{type:b,tag:g,props:{href:"#get-openstack-instance-detail-using-salt",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:da}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Locally"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"salt-call grains.get dreamcompute:uuid\n"}]}]}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,aW]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"local"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n    10a4f390"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:di},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:dj},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:bA},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:dk}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Or for another machine"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"salt app1 grains.get dreamcompute:uuid\n"}]}]}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,aW]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:dl}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n    510f5f24"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:"217b"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:"4fd2"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:bA},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:"f00000000000\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"What size did we create a particular VM?"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"salt app1 grains.get dreamcompute:instance_type\n"}]}]}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,aW]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:dl}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n    lightspeed\n"}]}]}]},{type:a,value:c},{type:b,tag:X,props:{id:db},children:[{type:b,tag:g,props:{href:"#what-data-you-can-get",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:dc}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Here is a sample of the grain data that will be added to every salt minion you\nmanage."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"You might notice that some data will be repeated such as the 'hostname', but the\nrest can be very useful if you want to use the data within your configuration\nmanag"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,aW]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"dreamcompute"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:dm}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        iad"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:dn}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"block_device_mapping"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"ami"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:do0},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"ebs0"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n            \u002Fdev\u002Fvdb\n        "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"ebs1"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:do0},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:W}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n            \u002Fdev\u002Fvda\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"hostname"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        salt.novalocal\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"instance_action"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        none\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"instance_id"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        i"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:"00000000"}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"instance_type"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        lightspeed\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"launch_index"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:cR}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"local_ipv4"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        10.10.10.11\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:dp}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        salt\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"network_config"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"content_path"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n            \u002Fcontent\u002F0000\n        "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:dp}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n            network_config\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"placement"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:dm}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n            iad"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:dn}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"public_ipv4"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        203.0.113.11\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"public_keys"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:T}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:ah},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"someuser"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n            ssh"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:"rsa "},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:bz}]},{type:a,value:"an rsa public key"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:bz}]},{type:a,value:" someuser"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:"comment@example.org\n    "},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"ramdisk_id"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:dq},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"reservation_id"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        r"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:"33333333"}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:dh}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:dq},{type:b,tag:d,props:{className:[e,x,y]},children:[{type:a,value:"uuid"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:r}]},{type:a,value:"\n        10a4f390"},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:di},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:dj},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:bA},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:dk}]}]}]},{type:a,value:c},{type:b,tag:X,props:{id:dd},children:[{type:b,tag:g,props:{href:"#what-does-the-script-do",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:de}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"The script basically scrapes OpenStack meta-data service and serializes into\nsaltstack grains system the data it gets."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:dr,rel:[j,k,l],target:m},children:[{type:a,value:"OpenStack's meta-data service"}]},{type:a,value:" is similar to what you'd get from AWS, but\ndoesn't expose exactly the same data. This is why I had to adapt the original\nscript."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"To get data from an instance you simply (really!) need to make an HTTP call to\nan "},{type:b,tag:g,props:{href:dr,rel:[j,k,l],target:m},children:[{type:a,value:"internal IP address that OpenStack nova"}]},{type:a,value:" answers. (that‚Äôs what the IPv4\naddress starting by "},{type:b,tag:h,props:{},children:[{type:a,value:"169."}]},{type:a,value:" is)"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"For example, from an AWS\u002FOpenStack VM, you can know the instance hostname by\ndoing"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:ds}]},{type:a,value:" http:\u002F\u002F169.254.169.254\u002Flatest\u002Fmeta-data\u002Fhostname\n\nsalt.novalocal\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"To know what the script calls, "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fcommit\u002F821ca803#diff-6eea2056af3e939361a559b84665c1d97fc9e062f7b7f79910567fc688881056R33",rel:[j,k,l],target:m},children:[{type:a,value:"you can add a line at "},{type:b,tag:h,props:{},children:[{type:a,value:"_call_aws(url)"}]},{type:a,value:"\nmethod"}]},{type:a,value:bY},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fcommit\u002F821ca803#diff-6eea2056af3e939361a559b84665c1d97fc9e062f7b7f79910567fc688881056R32-R34",rel:[j,k,l],target:m},children:[{type:a,value:"lines 32-34"}]},{type:a,value:"), like so;"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,"language-diff"]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"diff --git a\u002F_grains\u002Fdreamcompute.py b\u002F_grains\u002Fdreamcompute.py\nindex 682235d..c3af659 100644\n"},{type:b,tag:d,props:{className:[e,dt]},children:[{type:a,value:"--- a\u002F_grains\u002Fdreamcompute.py"}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,dt]},children:[{type:a,value:"+++ b\u002F_grains\u002Fdreamcompute.py"}]},{type:a,value:"\n@@ -25,6 +25,7 @@ def _call_aws(url):\n\n"},{type:b,tag:d,props:{className:[e,as]},children:[{type:b,tag:d,props:{className:[e,aG,as]},children:[{type:a,value:o}]},{type:b,tag:d,props:{className:[e,aH]},children:[{type:a,value:"    \"\"\"\n"}]},{type:b,tag:d,props:{className:[e,aG,as]},children:[{type:a,value:o}]},{type:b,tag:d,props:{className:[e,aH]},children:[{type:a,value:"    conn = httplib.HTTPConnection(\"169.254.169.254\", 80, timeout=1)\n"}]}]},{type:b,tag:d,props:{className:[e,"inserted-sign",du]},children:[{type:b,tag:d,props:{className:[e,aG,du]},children:[{type:a,value:"+"}]},{type:b,tag:d,props:{className:[e,aH]},children:[{type:a,value:"    LOG.info('API call to ' + url )\n"}]}]},{type:b,tag:d,props:{className:[e,as]},children:[{type:b,tag:d,props:{className:[e,aG,as]},children:[{type:a,value:o}]},{type:b,tag:d,props:{className:[e,aH]},children:[{type:a,value:"    conn.request('GET', url)\n"}]},{type:b,tag:d,props:{className:[e,aG,as]},children:[{type:a,value:o}]},{type:b,tag:d,props:{className:[e,aH]},children:[{type:a,value:"    return conn.getresponse()\n"}]}]}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"When you "},{type:b,tag:h,props:{},children:[{type:a,value:"saltutil.sync_all"}]},{type:a,value:" (i.e. refresh grains and other data), the log will\ntell you which endpoints it queried."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"In my case they were:"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,"language-shellsession"]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,"output"]},children:[{type:a,value:"[INFO    ] API call to \u002Fopenstack\u002F2012-08-10\u002Fmeta_data.json\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Fami\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs0\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs1\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Froot\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fhostname\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-action\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-type\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Flocal-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002Favailability-zone\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fpublic-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Framdisk-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Freservation-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fsecurity-groups\n[INFO    ] API call to \u002Fopenstack\u002F2012-08-10\u002Fmeta_data.json\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Fami\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs0\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs1\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Froot\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fhostname\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-action\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-type\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Flocal-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002Favailability-zone\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fpublic-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Framdisk-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Freservation-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fsecurity-groups\n"}]}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Its quite heavy."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Hopefully the script respects HTTP headers and don't bypass "},{type:b,tag:h,props:{},children:[{type:a,value:"304 Not Modified"}]},{type:a,value:"\nresponses. Otherwise it'll add load to nova. Maybe I should check that\n(note-to-self)."}]},{type:a,value:c},{type:b,tag:X,props:{id:aU},children:[{type:b,tag:g,props:{href:"#install",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:df}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"You can add this feature by adding a file in your salt states repository in the\n"},{type:b,tag:h,props:{},children:[{type:a,value:"_grains\u002F"}]},{type:a,value:" folder. The file can have any name ending by "},{type:b,tag:h,props:{},children:[{type:a,value:".py"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"You can grab the grain python code "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F6b26b67321fe15870aa0",rel:[j,k,l],target:m,title:"Gist where you can add openstack meta-data in your grains"},children:[{type:a,value:"in this gist"}]},{type:a,value:Q}]},{type:a,value:c},{type:a,value:c},{type:a,value:c}]},dir:cY,path:"\u002Fblog\u002F2015\u002F05\u002Fadd-openstack-instance-meta-data-info-salt-grains",extension:aq,slug:"add-openstack-instance-meta-data-info-salt-grains",createdAt:"2024-10-24T19:43:51.725Z",updatedAt:cZ,category:c_,prettyfiedTemporalDate:{prettified:"Friday, May 22, 2015",temporalDate:"2015-05-22"}},{title:"HHVM et Hack; ce qui les distingue de PHP",locale:bB,created:"2015-02-03T00:00:00.000Z",updated:"2023-11-16T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F02\u002Fhhvm-et-hack-ce-qui-les-distingue-de-php\u002F",status:ap,revising:$,caption:ad,caracteresBizzares:ad,gallery:ad,migrateCode:$,migrateImages:ad,migrateLinks:ad,categories:[dv],tags:[ai],excerpt:"C‚Äôest une r√©√©criture compl√®te de PHP, qui a apport√© aussi une syntaxe qui permet d‚Äôannoter les signatures des arguments d‚Äôentr√©e et de sortie, et plus.",toc:[],body:{type:W,children:[{type:b,tag:f,props:{},children:[{type:a,value:"Il y a:"}]},{type:a,value:c},{type:b,tag:ak,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fwiki.php.net\u002Fphpng",rel:[j,k,l],target:m},children:[{type:a,value:"php-ng"}]},{type:a,value:" (PHP Nouvelle G√©n√©ration) qui est une r√©√©criture par la communau√©"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Ffacebook\u002Fhhvm",rel:[j,k,l],target:m},children:[{type:a,value:"HHVM"}]},{type:a,value:" (et ¬´ "},{type:b,tag:g,props:{href:"http:\u002F\u002Fhacklang.org\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"Hack"}]},{type:a,value:"¬ª, et "},{type:b,tag:g,props:{href:"https:\u002F\u002Fdocs.hhvm.com\u002Fhack\u002FXHP\u002Fintroduction",rel:[j,k,l],target:m},children:[{type:a,value:dw}]},{type:a,value:", des extension du language) celle r√©√©crite par Facebook pour optimiser la performance"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"PHP, comme Python, stockent en quelque part une version qu‚Äôelle seule comprendra (a.k.a. bytecode) et r√©utilise cette version.  En Python tu va voir des fichiers \".pyc\" dans le m√™me dossier que l‚Äôoriginal \".py\".  Pour PHP, c‚Äôest ailleurs. Parfois √ßa peut √™tre dans APC ou d‚Äôautres composantes."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"PHP est comme un noyau Linux. Il y a un core, et des modules √† cot√©. C‚Äôest ce que PECL est en fait. Une librairie d‚Äôextensions PHP en C."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Donc, ce que Facebook a fait c‚Äôest de r√©√©crire pour enlever ce qui ralentit l‚Äôex√©cution et utiliser des concepts diff√©rents de ce que PHP fait en ce moment."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Il y a quelques incompatibilit√©s avec PHP, "},{type:b,tag:g,props:{href:"http:\u002F\u002Fdocs.hhvm.com\u002Fmanual\u002Fen\u002Fhack.unsupported.php"},children:[{type:a,value:"mais c‚Äôest pas impossible √† utiliser"}]},{type:a,value:".  Pour te dire c‚Äôest possible d‚Äôutiliser maintenant, pour preuve la Wikimedia Foundation (wikipedia.org) l‚Äôutilise d√©ja dans ses datacenters et "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FMediaWiki-Vagrant"},children:[{type:a,value:"leur VM de d√©veloppement ¬´Vagrant¬ª l‚Äôutilise aussi"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"L‚Äôune des diff√©rences avec PHP avec Hack (a.k.a. XHP) est la possibilit√© d‚Äôint√©grer directement du XML dans le code. Sans fermer les balises"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Donc, pas..."}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\u003Cxml\u003E\u003C?php \u002F* ... *\u002F ?\u003E\u003C\u002Fxml\u003E\n"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"... ni..."}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\u003C?php   $foo = \"\u003Cxml attrib=\"value\" \u002F\u003E\"; echo $foo; ?\u003E\n"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Mais plut√¥t..."}]},{type:a,value:c},{type:b,tag:q,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\u003C?hh\n$foo = \u003Cbootstrap:page-header title={$title} \u002F\u003E;\n"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"√âtrange non?"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Note le "},{type:b,tag:h,props:{},children:[{type:a,value:"\u003C?hh"}]},{type:a,value:" et qu‚Äôil n‚Äôy a besoin de faire une string qui ressemble a du XML."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ce qui fait √ßa c‚Äôest la partie appel√©s XHP de Hack, qui fait partie de HHVM. L‚Äôexemple que je donne ici "},{type:b,tag:g,props:{href:"https:\u002F\u002Fgithub.com\u002Fhhvm\u002Fxhp-bootstrap\u002F"},children:[{type:a,value:"provient de  XHP Bootstrap"}]},{type:a,value:" qui permet d‚Äôutiliser les patterns "},{type:b,tag:g,props:{href:"http:\u002F\u002Fgetbootstrap.com\u002F"},children:[{type:a,value:"HTML\u002FCSS provenant de la librairie connue sous le nom de Twitter Bootstrap"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:K,props:{},children:[{type:a,value:dw}]},{type:a,value:" est donc un ¬´layer¬ª qui permet d‚Äôabstraire les patterns HTML dans le code backend... mais de pr√©ciser quand m√™me o√π ils sont requis."}]}]},dir:"\u002Fblog\u002F2015\u002F02",path:"\u002Fblog\u002F2015\u002F02\u002Fhhvm-et-hack-ce-qui-les-distingue-de-php",extension:aq,slug:"hhvm-et-hack-ce-qui-les-distingue-de-php",createdAt:dx,updatedAt:dx,category:dv,prettyfiedTemporalDate:{prettified:"mardi 3 f√©vrier 2015",temporalDate:"2015-02-03"}},{title:"Traduction libre de l‚Äôarticle ¬´Why the @&*# is Microsoft doing all this?¬ª",locale:bB,created:"2010-05-30T00:00:00.000Z",updated:"2023-11-15T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F05\u002Ftraduction-libre-de-larticle-why-the-is-microsoft-doing-all-this\u002F",status:ap,revising:$,gallery:$,caption:$,migrateImages:ad,migrateLinks:$,categories:[dy],tags:[ai,"published"],webarchiveSnapshots:[{key:"port25-original",orig:aX},{key:"port25-ca",orig:dz},{key:"mwnw",orig:aY},{key:"port25-traduction",orig:dA},{key:"microsoft-opensource",orig:dB},{key:"microsoft-web-gallery",orig:dC},{key:"php-iis",orig:dD},{key:"wordpress-azure",orig:dE},{key:"microsoft-bizspark",orig:dF},{key:"vanilla-forums-blog",orig:dG},{key:"php-quebec",orig:dH},{key:"impresscms",orig:"http:\u002F\u002Fimpresscms.org\u002F",snapshots:[dI]},{key:"tikiwiki",orig:dJ},{key:"vanilla-forums",orig:dK},{key:"status-net",orig:dL},{key:"phug",orig:dM},{key:"port25-team",orig:dN}],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2010\u002F05\u002FMWNW-sponsor-banner1.jpg",alt:"Make Web Not War banni√®re de commanditaires",text:"Banni√®re des commanditaires de l‚Äô√©v√©nement Make Web Not War\n"},excerpt:"Ceci est une traduction libre du billet originalement √©crit en anglais, par Microsoft Canada sur leur blogue Port25.ca (qui est maintenant hors-ligne) et j‚Äôai eu envie de le traduire.",preamble:{text:"Dans le cas de cet article, les initiatives Port25 et Make Web Not War de Microsoft n‚Äôexistent plus depuis quelques ann√©es. En tant que partisan du logiciel libre, je suis heureux de voir que Microsoft a pris un tel virage."},toc:[{id:dO,depth:af,text:dP},{id:dQ,depth:af,text:dR},{id:dS,depth:af,text:dT}],body:{type:W,children:[{type:b,tag:f,props:{},children:[{type:a,value:"Ceci est une traduction libre du "},{type:b,tag:g,props:{href:aX,rel:[j,k,l],target:m},children:[{type:a,value:"billet originalement √©crit en\nanglais"}]},{type:a,value:", par "},{type:b,tag:g,props:{href:"http:\u002F\u002Ftwitter.com\u002FNik_G",rel:[j,k,l],target:m},children:[{type:a,value:"Nik G."}]},{type:a,value:" de Microsoft\nCanada sur le "},{type:b,tag:g,props:{href:dz,rel:[j,k,l],target:m},children:[{type:a,value:"blogue Port25"},{type:b,tag:K,props:{},children:[{type:a,value:".ca"}]}]},{type:a,value:" et j‚Äôai eu envie de le traduire\npour la post√©rit√©."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je le traduis car Microsoft tente de faire un changement radical vis a vis son\napproche avec la comp√©tition et le Logiciel Libre et je pense que √ßa vaut la\npeine d‚Äôen parler."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"√âtant premi√®rement un francophone et que Microsoft ne traduit pas n√©cessairement\ntout ses billets, je d√©sire traduire et vous afficher mon point de vue. Ce\nmouvement est si radical que je pense qu‚Äôils pourraient profiter de mon opinion;\nle point de vue d‚Äôun partisan du Logiciel Libre. tout ceci dans le but qu‚Äôils\npuissent, √©ventuellement, mieux nous comprendre."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je n‚Äôai tir√© aucun b√©n√©fice financier de la part de Microsoft pour faire cette\ntraduction et de parler de leur strat√©gie."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Cette intervention fait suite au "},{type:b,tag:g,props:{href:aY,rel:[j,k,l],target:m},children:[{type:a,value:bC}]},{type:a,value:" ma rencontre avec une\n√©quipe passionn√©e et a l‚Äô√©coute qui semble d√©termin√©e a comprendre notre\ndiff√©rence et pouvoir appliquer chez Microsoft. Seul l‚Äôhistoire nous dira s‚Äôils\nr√©ussiront leur tentative."}]},{type:a,value:c},{type:b,tag:ag,props:{id:dO},children:[{type:b,tag:g,props:{href:"#a-propos-de-la-traduction",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:dP}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"J‚Äôaimerai rappeler que je ne suis pas un traducteur professionnel; d‚Äôo√π la\nmention de \"traduction libre\". Je me suis donn√© comme mission sur mon blogue de\ncontribuer qu‚Äôen Fran√ßais pour faire profiter mes pairs francophones qui ne\ncomprennent pas l‚Äôanglais. Si j‚Äôy ai fait des fautes, vous pouvez me le faire\nsavoir dans les commentaires, j‚Äôajusterai ;)"}]},{type:a,value:c},{type:a,value:c},{type:b,tag:ag,props:{id:dQ},children:[{type:b,tag:g,props:{href:"#article-traduit",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:dR}]},{type:a,value:c},{type:b,tag:az,props:{variant:aO,className:[aA]},children:[{type:a,value:c},{type:b,tag:K,props:{slot:aB},children:[{type:a,value:"Article publi√© aussi sur Port25.ca"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"L‚Äôarticle avait √©t√© publi√© aussi sur le blogue de Microsoft "},{type:b,tag:v,props:{},children:[{type:a,value:"Canada"}]},{type:a,value:c},{type:b,tag:g,props:{href:dA,rel:[j,k,l],target:m},children:[{type:a,value:"Port25.ca\u002F...\u002Ftraduction-libre-de-l-article-..."}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Microsoft "},{type:b,tag:g,props:{href:dB,rel:[j,k,l],target:m},children:[{type:a,value:"qui contribue a des projets de Logiciels\nLibres"}]},{type:a,value:"? Distribuer des "},{type:b,tag:g,props:{href:dC,rel:[j,k,l],target:m},children:[{type:a,value:"applications\nPHP"}]},{type:a,value:" avec sa propre plateforme? Supporter "},{type:b,tag:g,props:{href:dD,rel:[j,k,l],target:m},children:[{type:a,value:"PHP sous\nWindows"}]},{type:a,value:"? Permettre de d√©ployer "},{type:b,tag:g,props:{href:dE,rel:[j,k,l],target:m},children:[{type:a,value:"WordPress sur Azure"}]},{type:a,value:"?\nOrganiser "},{type:b,tag:g,props:{href:aY,rel:[j,k,l],target:m},children:[{type:a,value:bC}]},{type:a,value:" et √† la "},{type:b,tag:v,props:{},children:[{type:a,value:"la semaine du Logiciel Libre\nMonDev"}]},{type:a,value:"?"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Est-ce que l‚Äô¬´empire¬ª s‚Äôadoucit? Est-ce un plan diabolique de conqu√©rir le\nmonde."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Alors C‚Äôest quoi le vrai objectif de Microsoft de faire tout ceci."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Quelques uns disent que c‚Äôest pour l‚Äôamour de la technologie, pour aider les\nprogrammeurs et les designers web\n("},{type:b,tag:aI,props:{title:dU},children:[{type:a,value:dV}]},{type:a,value:": parlant de "},{type:b,tag:g,props:{href:dF,rel:[j,k,l],target:m},children:[{type:a,value:"Microsoft\nBizSpark"}]},{type:a,value:"). D‚Äôautres pensent que "},{type:b,tag:g,props:{href:dG,rel:[j,k,l],target:m},children:[{type:a,value:"Microsoft est\n"},{type:b,tag:v,props:{},children:[{type:a,value:"d√©sesp√©r√©"}]}]},{type:a,value:", et qu‚Äôils sont forc√© sur le chemin du\nLogiciel Libre. D‚Äôautres comme les gens de la communaut√© des Logiciels Libre\ncomme ceux avec qui Microsoft Canada contribue: "},{type:b,tag:g,props:{href:dH,rel:[j,k,l],target:m},children:[{type:a,value:"PHP Quebec"}]},{type:a,value:ce},{type:b,tag:g,props:{href:dI,rel:[j,k,l],target:m},children:[{type:a,value:"Impress CMS"}]},{type:a,value:am},{type:b,tag:g,props:{href:dJ,rel:[j,k,l],target:m},children:[{type:a,value:"TikiWiki"}]},{type:a,value:am},{type:b,tag:g,props:{href:dK,rel:[j,k,l],target:m},children:[{type:a,value:"Vanilla\nForums"}]},{type:a,value:am},{type:b,tag:g,props:{href:dL,rel:[j,k,l],target:m},children:[{type:a,value:"Status.net"}]},{type:a,value:am},{type:b,tag:g,props:{href:dM,rel:[j,k,l],target:m},children:[{type:a,value:"PHUG"}]},{type:a,value:" et plusieurs\nautres, disent que c‚Äôest bon pour leur projets et leur permet un nouveau spectre\nd‚Äôexposition. Particuli√®rement dans les bo√Ætes pro-Microsoft."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Tout ceci fait que du bon sens d‚Äôun point de vue Affaires. On ne peut contredire\nson bienfait."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"La r√©alit√© d‚Äôaujourd‚Äôhui avec les environnements informatique h√©t√©rog√®nes et les\nconsommateurs qui d√©sirent avoir la meilleure exp√©rience possible. Les gens\nveulent pouvoir trouver, d√©ployer et g√©rer leur logiciels a leur fa√ßon,\nrapidement et facilement. Les Logiciels Libres pr√¥nent principalement le\npartage, la collaboration, et le travail d‚Äô√©quipe en regard du b√©n√©fice de\nl‚Äôusager final. C‚Äôest pour cela que Microsoft d√©sire participer en collaborant\nsur les projets comme d‚Äôautres organisations et compagnies le font d√©j√†. √áa\najoute simplement de la valeur √† la plateforme, rend les consommateurs heureux,\net cr√©e de liens avec des partenaires int√©ressants. Tout le monde gagne."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"C‚Äôest aussi pour √ßa que Microsoft a lib√©r√© certains de ses produits sour la\nbanni√®re BizSpark. Pour aider a faire grandir les communaut√©s de d√©veloppement\net permettre de pouvoir faire plus d‚Äôaffaires pour les d√©veloppeurs qui gagnent\nleur vie avec le d√©veloppement et l‚Äôusage de logiciels libres.\n("},{type:b,tag:aI,props:{title:"Note de la R√©daction (auteur)"},children:[{type:a,value:"N.D.L.R"}]},{type:a,value:": dire,\npersonnellement, que j‚Äôutiliserait tout leur produits pour d√©velopper serait\npousser loin. Mais j‚Äôaime qu‚Äôils en fassent l‚Äôeffort)."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"C‚Äôest pour toutes ces raisons que Microsoft Canada a form√© une "},{type:b,tag:g,props:{href:dN,rel:[j,k,l],target:m},children:[{type:a,value:"petite √©quipe\nmais \"Agile\""}]},{type:a,value:" qui travaille √† construire des relations avec les\nd√©veloppeurs de Logiciels Libres et leur communaut√©e. L‚Äôid√©e est d‚Äôapprendre et\nde compl√©ter l‚Äôoffre de chacun. Tout ceci dans le but d‚Äôam√©liorer l‚Äôexp√©rience\nutilisateur et de permettre l‚ÄôInter-op√©rabilit√© entre les plateformes."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\"Ouvert\" signifie aussi d‚Äô√™tre ouverts aux commentaires provenant de la\ncommunaut√© et Microsoft s‚Äôengage a √™tre honn√™te et franc avec leur r√©ponse."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"(...) ("},{type:b,tag:aI,props:{title:dU},children:[{type:a,value:dV}]},{type:a,value:": Le reste de l‚Äôarticle\nest cibl√© aux gens qui √©taient pr√©sents durant le "},{type:b,tag:g,props:{href:aY,rel:[j,k,l],target:m},children:[{type:a,value:bC}]},{type:a,value:" pour\ndiscuter en personne avec eux et sur Twitter. J‚Äôai moi m√™me discut√© avec eux et\nappr√©ci√© les √©changes.)"}]},{type:a,value:c},{type:b,tag:ag,props:{id:dS},children:[{type:b,tag:g,props:{href:"#mon-commentaire-sur-leur-blogue",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:dT}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"J‚Äôai r√©pondu a leur demande de commentaire "},{type:b,tag:g,props:{href:aX,rel:[j,k,l],target:m},children:[{type:a,value:"sur leur blogue\npublic"}]},{type:a,value:" de la fa√ßon qui suit:"}]},{type:a,value:c},{type:b,tag:bS,props:{},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Publi√© sur "},{type:b,tag:g,props:{href:aX,rel:[j,k,l],target:m},children:[{type:a,value:"Port25.ca"}]},{type:a,value:" le "},{type:b,tag:"time",props:{dateTime:"2010-05-27"},children:[{type:a,value:"27 Mai\n2010"}]},{type:a,value:", par moi m√™me."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Soyons franc d√®s le d√©part. J‚Äôutilise Linux dans ma vie de tout les jours\ndepuis 2003. Pour moi, mes machines sous Windows (virtuelles ou physiques) ont\nmajoritairement √©t√© ferm√©s et non utilis√©s (mis a part pour les tests de\nnavigateurs). J‚Äôai fait ce choixcar j‚Äôaime que mon ordinateur agisse (assume)\nque je suis intelligent, par d√©faut."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Mis √† part de cela, j‚Äôai fait une quantit√© consid√©rable de sites web et j‚Äôai\neu beaucoup de difficult√© et perdu beaucoup de temps a faire des conditions\nsp√©cifiques pour les navigateurs Microsoft. Tout ceci pour des raisons\nhistoriques et d√©plorables."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je ne suis pas le seul qui a pass√© a travers cet enfer."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je pense que √ßa illustre la relation sentimentale que j‚Äôai envers les produits\nMicrosoft."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je pense que Microsoft fait, enfin (!), cette initiative pour nous √©couter,\nnous, ces gens qui savent comment utiliser les ordinateurs. Mes exp√©riences du\npass√© et mon opinion (comme celle de plusieurs autres partisans du logiciel\nlibre) pourrait faire grandement b√©n√©ficier Microsoft."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Parceque le logiciel libre c‚Äôest justement a propos du partage."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Les industries et les grands noms ont avantage d‚Äô√©couter la communaut√©\nparceque c‚Äôest elle qui permet de cr√©er les standards pour pousser\nl‚Äôinnovation et faire fonctionner toutes sortes de choses ensemble."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Sans √ßa..."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Les trains n‚Äôauraient pas pu traverser les pays."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le web n‚Äôaurait pas exist√© sous cette forme... Si il aurait √©t√© propri√©taire,\nla communaut√© en aurait d√©velopp√© un √©quivalent libre de toute fa√ßon (!)."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"... Je crois que vous comprenez mon id√©e."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Nous nous devons de \"Faire marcher les choses ensemble\" pour atteindre un plus\ngrand objectif qui d√©passe le b√©n√©fice d‚Äôune seule entit√©e. √áa permet un acc√®s\nharmonis√© des donn√©es, cr√©e une comp√©tition qui pousse a l‚Äôam√©lioration, et\nainsi de suite."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Alors, je pense que l‚Äôinitiative de "},{type:b,tag:K,props:{},children:[{type:a,value:"Port25"}]},{type:a,value:" et "},{type:b,tag:K,props:{},children:[{type:a,value:"Make Web not War"}]},{type:a,value:" de "},{type:b,tag:K,props:{},children:[{type:a,value:"Microsoft"}]},{type:a,value:"\nest d‚Äôatteindre tout ceci. (Enfin, je l‚Äôesp√®re)"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Alors, sant√©! et faison la paix ;)"}]},{type:a,value:c}]}]},dir:"\u002Fblog\u002F2010\u002F05",path:"\u002Fblog\u002F2010\u002F05\u002Ftraduction-libre-de-larticle-why-the-is-microsoft-doing-all-this",extension:aq,slug:"traduction-libre-de-larticle-why-the-is-microsoft-doing-all-this",createdAt:dW,updatedAt:dW,category:dy,prettyfiedTemporalDate:{prettified:"dimanche 30 mai 2010",temporalDate:"2010-05-30"}},{title:"Installer VMWare sur Ubuntu server avec le repositoire de Canonical",locale:bB,created:"2006-12-21T00:00:00.000Z",updated:"2006-12-25T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2006\u002F12\u002Finstaller-vmware-sur-ubuntu-server-avec-le-repositoire-de-canonical\u002F",status:ap,revising:ad,categories:[dX],tags:[bn,ai,cq],keywords:["VMWare Server","Ubuntu 7.04","Fiesty Fawn","Canonical Repository"],excerpt:"",description:"Procedure pour installer Ubuntu 7.04 Fiesty Fawn pour faire rouler VMWare Server",preamble:{text:"Dans le temps o√π le ¬´cloud computing¬ª n‚Äô√©tait pas tr√®s fr√©quent, ni\nl‚Äôautomatisation avec Puppet, SaltStack, Ansible. Aussi, les images qui\n√©taient originalement incluses dans cet article ne sont plus disponibles, ce\nqui rend cet article peu utilisable. J‚Äôai d√©cid√© de conserver quand-m√™me,\ncomme preuve qu‚Äôavant d‚Äôavoir pris l‚Äôhabitude de tout automatiser, les\nproc√©dures avec captures d‚Äô√©cran sont √©ph√©m√®res et perdent tout leur sens sans\nimages.\nD‚Äôailleurs, pour que les services soient r√©silients, comme par exemple\nles relais SMTP ou DNS qui sont faits pour s‚Äôentra√Æder, ces services sont\npens√©s pour √™tre compos√© de plusieurs ¬´nodes¬ª qui ont la m√™me responsabilit√©\net qu‚Äôil est possible de rapidement appliquer la m√™me configuration rapidement.\n"},toc:[{id:dY,depth:V,text:dZ},{id:d_,depth:V,text:d$},{id:ea,depth:V,text:eb}],body:{type:W,children:[{type:b,tag:f,props:{},children:[{type:a,value:"L‚Äôid√©e c‚Äôest de d‚Äôavoir un serveur rack-mount minimal fait pour h√©berger les VM\nd‚Äôinfrastructure du r√©seau. Actuellement plusieurs de nos serveurs "},{type:b,tag:v,props:{},children:[{type:a,value:"physiques"}]},{type:a,value:"\nont d√©j√† X-Windows sur leur h√¥tes (SuSE v10, RHEL 4 U5, Gentoo 2007.0, Ubuntu,\netc.) Mais ce sont des installations qui ont √©t√© faites avec tout ce qu‚Äôil\nsortait sans r√©fl√©chir ou se pencher sur l‚Äô√©conomie de ressources. Ce serveur\nsera minimal cot√© installation, et maximis√© sur VMWare... voici les √©tapes que\nj‚Äôai fait."}]},{type:a,value:c},{type:b,tag:X,props:{id:dY},children:[{type:b,tag:g,props:{href:"#t%C3%A9l%C3%A9charger-ubuntu",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:dZ}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"L'id√©e c'est d'installer le serveur en minimal... donc une visite sur\n"},{type:b,tag:g,props:{href:ec,rel:[j,k,l],target:m},children:[{type:a,value:ec}]},{type:a,value:" s'impose."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"La derni√®re mouture en version server suffit."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Actuellement, celle utilis√©e a √©t√© la Ubuntu server 7.04 Feisty Fawn de son nom."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Il ne reste qu'a br√ªler le "},{type:b,tag:aI,props:{},children:[{type:a,value:"ISO"}]},{type:a,value:" sur un "},{type:b,tag:aI,props:{},children:[{type:a,value:"CD"}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:X,props:{id:d_},children:[{type:b,tag:g,props:{href:"#booter-le-m%C3%A9dium-dinstallation",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:d$}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Une fois le d√©marrage fait, un √©cran de la sorte appara√Æt."}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"S√©lectionner le premier choix, on fait une installation."}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Choisir la langue d'installation, personnellement je suis anglophone pour ce qui\ntouche a mon OS, c'est √† votre choix."}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"On choisit \"Canada\" (contrairement a l'image), choisir son pays... √ßa aide :)"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ensuite on demande le clavier. Ma combinaison de clavier pr√©f√©r√© c'est \"Canadien\nFran√ßais\" (cf) ou Canadien tout court... c'est pas toujours clair mais le\nlogiciel nous permet de faire nos propres choix et de le tester."}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Setter un nom c‚Äôt‚Äôimportant. Fiez vous aux normes de votre data-center."}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Setter son username habituel, car ensuite faire on peut copier sa cl√© SSH\npublique direct dans le nouveau serveur"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:ed}]},{type:a,value:" ~\u002F.ssh\u002Fid_dsa.pub ubuntu:~\u002F.ssh\u002Fauthorized_keys\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"et pouvoir vivre sans entrer son password a chaque fois :) (hors du sujet mais\nj'ai mis la commande au cas o√π)"}]},{type:a,value:c},{type:b,tag:az,props:{variant:aO,className:[aA],dataDate:ee},children:[{type:a,value:S},{type:b,tag:K,props:{slot:aB},children:[{type:a,value:"M√©thode alternative"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Plut√¥t que d‚Äôutiliser "},{type:b,tag:h,props:{},children:[{type:a,value:ed}]},{type:a,value:", nous pouvons aussi utiliser la commande\n"},{type:b,tag:h,props:{},children:[{type:a,value:"ssh-copy-id"}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Personnellement je ne s√©lectionne rien ici, √† moins de m'en servir... mais je\nn'aime pas √ßa que le serveur LAMP soit installable et upgradable\nautomatiquement... Les applications web ne \"s'upgradent\" pas automatiquement,\nelles."}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Installation compl√©t√©e!"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Installation des services Voici les √©tapes faites pour installer le reste."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Se logguer apr√®s le red√©marrage avec les cr√©dentiels fournis lors de\nl'installation."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Utiliser "},{type:b,tag:h,props:{},children:[{type:a,value:"sudo su --"}]},{type:a,value:" (ou \""},{type:b,tag:h,props:{},children:[{type:a,value:"sudo -s"}]},{type:a,value:"\") pour s'√©lever au commandes d'un shell\nroot."}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,ef]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aN}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:cz}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:"vi"}]},{type:a,value:" \u002Fetc\u002Fapt\u002Fsources.list\n"}]}]}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ajoutez la ligne suivante:"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:q,props:{className:[t,cB]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"deb http:\u002F\u002Farchive.canonical.com\u002Fubuntu feisty\u002Fcommercial main\n"}]}]}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ensuite un update et un upgrade s'impose... question de garder √† jour le\nserveur."}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:d,props:{className:[aZ]},children:[{type:a,value:W}]},{type:b,tag:q,props:{className:[t,ef]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aT}]},{type:a,value:" update\n"},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aT}]},{type:a,value:" upgrade\n"}]}]}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Puis, installer les kernel-modules"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:d,props:{className:[aZ]},children:[{type:a,value:W}]},{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aT}]},{type:a,value:o},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:aU}]},{type:a,value:" vmware-server vmware-tools-kernel-modules\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"R√©pondre oui a toutes les questions et entrer le num√©ro de s√©rie VMWare sur le\nsite "},{type:b,tag:g,props:{href:"https:\u002F\u002Fwww.vmware.com\u002F",rel:[j,k,l],target:m},children:[{type:a,value:"http:\u002F\u002Fwww.vmware.com"}]},{type:a,value:", obligatoire."}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"La console VMWare V√π qu'on a pas de XWindows pour g√©rer, on utilise une console\nvmware-server √† partir d'une autre machine sur notre LAN."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:az,props:{variant:"error",className:[aA],dataDate:ee},children:[{type:a,value:S},{type:b,tag:K,props:{slot:aB},children:[{type:a,value:"Apr√®s re-lecture (et 18 ans plus tard(!!))"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je r√©alise √† me relire que cette proc√©dure recommande de t√©l√©charger un binaire\n("},{type:b,tag:h,props:{},children:[{type:a,value:eg}]},{type:a,value:") d‚Äôun autre blogue. Ne faites pas √ßa!"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ne suivez pas aveugl√©ment ce type de conseil! Assurez-vous de seulement\ninstaller des binaires de sources que vous faites confiance, comme celles\nprovenant du vendeur. Pas d‚Äôun blogue au hasard! A moins que vous puissiez lire\nle code, et compiler vous-m√™me."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:d,props:{className:[aZ]},children:[{type:a,value:W}]},{type:b,tag:q,props:{className:[t,G],dataLine:b_},children:[{type:b,tag:h,props:{},children:[{type:b,tag:d,props:{className:[e,Y,Z]},children:[{type:a,value:ay}]},{type:a,value:" \u002Flib\u002Fsecurity\n"},{type:b,tag:d,props:{className:[e,w]},children:[{type:a,value:ds}]},{type:a,value:" https:\u002F\u002Fwww.matthewbrowne.com\u002Fblog\u002Fwp-content\u002Fuploads\u002Fpam_unix_vm.so "},{type:b,tag:d,props:{className:[e,O,u]},children:[{type:a,value:"-o"}]},{type:a,value:" pam_unix_vm.so\n"}]}]}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le blogeur de qui je prend mes sources avait fait une librairie "},{type:b,tag:h,props:{},children:[{type:a,value:eg}]},{type:a,value:"\npour remplacer "},{type:b,tag:h,props:{},children:[{type:a,value:"pam_unix2.so"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"De toute fa√ßon il lorsque j'√©ditait le fichier "},{type:b,tag:h,props:{},children:[{type:a,value:"\u002Fetc\u002Fpam.d\u002Fvmware-authd"}]},{type:a,value:" (celui\nauto-g√©n√©r√© par notre installation) Sortait avec des liens absolus qui\nsemblaient bogus."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Alors j'ai suivi, r√©crit le fichier comme suit"}]},{type:a,value:c},{type:b,tag:F,props:{src:_},children:[{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ensuite on red√©marre la machine"}]},{type:a,value:c},{type:b,tag:p,props:{className:[s]},children:[{type:b,tag:d,props:{className:[aZ]},children:[{type:a,value:W}]},{type:b,tag:q,props:{className:[t,G]},children:[{type:b,tag:h,props:{},children:[{type:a,value:"init "},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:"6"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"G√©n√©ralement, sur la console, tu pourrait te connecter sur \"Remote host\" avec\ntes cr√©dentiels et ton host et g√©rer tes VM :)"}]},{type:a,value:c},{type:b,tag:X,props:{id:ea},children:[{type:b,tag:g,props:{href:"#references",ariaHidden:A,tabIndex:C},children:[{type:b,tag:d,props:{className:[D,E]},children:[]}]},{type:a,value:eb}]},{type:a,value:c},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Les notes tr√®s utiles et les screenshots de "},{type:b,tag:cC,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"matthewbrowne.com"}]}]},{type:a,value:" est non\ndisponible et l‚ÄôInternet Archive n‚Äôa rien. Je n'ai plus les images localement\nalors ce post est l√† pour des raisons historiques."}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Mon exp√©rience, car en fait j'ai traduit son blog-post. Mais je conaissait\npourtant d√©ja les √©tapes, son post m'a principalement donn√© une structure pour\nla traduction."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:L,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Last.fm et la musique et le caf√© :PpP"}]},{type:a,value:c}]},{type:a,value:c}]},dir:"\u002Fblog\u002F2006\u002F12",path:"\u002Fblog\u002F2006\u002F12\u002Finstaller-vmware-sur-ubuntu-server-avec-le-repositoire-de-canonical",extension:aq,slug:"installer-vmware-sur-ubuntu-server-avec-le-repositoire-de-canonical",createdAt:eh,updatedAt:eh,category:dX,prettyfiedTemporalDate:{prettified:"jeudi 21 d√©cembre 2006",temporalDate:"2006-12-21"}}],taxonomyKey:ai,taxonomy:{key:ai}}],fetch:[],mutations:void 0}}("text","element","\n","span","token","p","a","code","punctuation","nofollow","noopener","noreferrer","_blank","li"," ","div","pre",":","nuxt-content-highlight","line-numbers","variable","em","function","key","atrule","td","true","operator",-1,"icon","icon-link","app-image","language-bash","comment","keyword","-","strong","ul","\\","app-link-compare-item","parameter","string",".","instruction","\n  ","---","\n\n",2,"root","h2","builtin","class-name","lost-image",true,"property","\n    ","number",false,",",3,"h3","\n        ","open-source",")","ol","th",", ","docker","directive","publish",".md","ENV","unchanged","MediaWiki","nuxt-link","tr","Support MediaWiki special URL patterns","-v","cd","rb-notice-box","my-5","header","-p","{","}",";","prefix","line","abbr","projects","screenshots","Screenshots","webplatform.github.io","sudo","info","\"","$(","pwd","\n       ","apt-get","install","w-1\u002F3","language-yaml","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20100601083657\u002Fhttp:\u002F\u002Fport25.ca\u002Farchive\u002F2010\u002F05\u002F27\u002Fwhy-the-amp-is-microsoft-doing-this.aspx","http:\u002F\u002Fwww.webnotwar.ca\u002F","filename","en-CA","operations","blog","Requirements","Requirements we couldn‚Äôt meet","app-alert-box","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd","What was under \u002Fwiki\u002FWPD:...","webplatform\u002Fmediawiki-conversion","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion","Export MediaWiki wiki pages and history into a git repository","static.webplatform.org","overflow:hidden;clear:both;","thumbnails","gallery","linux","https:\u002F\u002Fgithub.com\u002Fwebspecs\u002Fpublican","Publican"," or ","exit","mkdir"," run ","-it","--rm","7002","h4","RUN","...","0000","fr-CA","Make Web Not War","webplatform","priorities","Priorities","outcome","Outcome","migration","Migration","Blog","mediawiki","requirements","requirements-we-couldnt-meet","display:flex","https:\u002F\u002Fwww.w3.org\u002FPeople\u002Ffunctions\u002Fsysteam","https:\u002F\u002Fwebplatform.github.io\u002F","WebPlatform Docs Home Page","blockquote","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs","What was under \u002Fwiki\u002F...","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-meta","What was under \u002Fwiki\u002FMeta:...","webplatform\u002Fdocs-wpd"," (","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fblog","2","Archivator","\n(","MediaWiki XML dump","https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FHelp:Namespaces","\u002Fwiki\u002FWPD:*",",\n","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fcontent-converter","Transform CMS content from a format into another","webplatform\u002Fcontent-converter","20150513130014","http:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002F","https:\u002F\u002Fstatic.webplatform.org\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-assets\u002Fblob\u002Fgh-pages\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs\u002Fblob\u002Fmaster\u002Fconfig\u002Fnginx\u002Fmaps\u002Fmain.map","#screenshots","2024-10-24T19:43:51.728Z","procedure","run-publican-inside-docker","steps","Steps","gists","Gists"," vagrant ","ssh","\n ","-s","su","language-text","del","\u002Fdata\"",":\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata ","\u002Fspec-data\"",":\u002Fopt\u002Fbikeshed\u002Fbikeshed\u002Fspec-data ",":7002 webspecs\u002Fpublican:wip\n","outside","It should look like the screenshot with caption \"","\".","Starting a build process","\n           ","\"jdoe@example.org\"","$uri","#","$RUNDIR","0","flex","flex-row","flex-wrap","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-preview.png","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-deleted-spec-regeneration-question.png","Annotated screenshot, when changing a file a hook is called and regenerates the specification","\u002Fblog\u002F2015\u002F05","2024-10-24T19:43:51.726Z","snippet","get-openstack-instance-detail-using-salt","Get OpenStack instance detail using Salt","what-data-you-can-get","What data you can get","what-does-the-script-do","What does the script do?","Install","https:\u002F\u002Fgithub.com\u002Fsaltstack\u002Fsalt-contrib\u002Fblob\u002Fmaster\u002Fgrains\u002Fec2_info.py","security-groups","7c55","4dd3","a00000000000\n","app1","availability_zone","1","\n            vda\n        ","name","\n        None\n    ","http:\u002F\u002Fdocs.openstack.org\u002Fadmin-guide-cloud\u002Fcontent\u002Fsection_metadata-service.html","curl","coord","inserted","tranche-de-vie","XHP","2024-10-24T19:43:51.723Z","events","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20100604060922\u002Fhttp:\u002F\u002Fport25.ca\u002F","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20100721000731\u002Fhttp:\u002F\u002Fport25.ca\u002Farchive\u002F2010\u002F06\u002F02\u002Ftraduction-libre-de-l-article-171-why-the-amp-is-microsoft-doing-all-this-187.aspx","http:\u002F\u002Fwww.microsoft.com\u002Fopensource\u002Fproject-highlights.aspx","http:\u002F\u002Fwww.microsoft.com\u002Fweb\u002Fgallery\u002FCategories.aspx?sorting=alphabetical","https:\u002F\u002Fphp.iis.net\u002F","http:\u002F\u002Fwordpress.visitmix.com\u002F","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20100328124942\u002Fhttp:\u002F\u002Fwww.microsoft.com\u002Fbizspark\u002F","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20100527021607\u002Fhttp:\u002F\u002Fvanillaforums.org\u002Fblog\u002Fmake-web-not-war-ftw-competition\u002F","https:\u002F\u002Fwww.phpquebec.org\u002F","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20100612184105\u002Fhttp:\u002F\u002Fimpresscms.org\u002F","http:\u002F\u002Ftikiwiki.org","http:\u002F\u002Fvanillaforums.org\u002F","http:\u002F\u002Fstatus.net\u002F","http:\u002F\u002Fphug.ca","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20100701204815\u002Fhttp:\u002F\u002Fport25.ca\u002Farchive\u002F2010\u002F04\u002F05\u002Fport-25-canada-contributors.aspx","a-propos-de-la-traduction","A propos de la traduction","article-traduit","Article traduit","mon-commentaire-sur-leur-blogue","Mon commentaire sur leur blogue","Note de la Traduction","N.D.L.T","2024-10-24T19:43:51.701Z","experiments","t√©l√©charger-ubuntu","T√©l√©charger Ubuntu","booter-le-m√©dium-dinstallation","Booter le m√©dium d'installation","references","References","http:\u002F\u002Fwww.ubuntu.com\u002Fgetubuntu\u002Fdownload\u002F","scp","2024-09-30","language-sh","pam_unix_vm.so","2024-10-24T19:43:51.666Z")));