__NUXT_JSONP__("/blog/tag/procedures", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q){return {data:[{},{},{contents:[{title:"A few useful GNU\u002FLinux truth tests while creating salt states",locale:"en-CA",created:"2015-03-10T00:00:00.000Z",updated:"2023-02-18T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F03\u002Fuseful-gnulinux-truth-tests\u002F",status:"publish",revising:A,caption:k,caracteresBizzares:k,gallery:k,migrateCode:A,migrateImages:k,migrateLinks:k,categories:[B],tags:["linux","salt-stack","cloud-computing",q],keywords:["GNU","usermod"],description:C,excerpt:C,toc:[{id:D,depth:E,text:F},{id:G,depth:E,text:"Change ownership on a folder only if its not what we expect"}],body:{type:"root",children:[{type:b,tag:r,props:{},children:[{type:a,value:"Nothing amazing here, just that in some situations I want to run commands in\nsalt stack only in some situations that should be enforced."}]},{type:a,value:f},{type:b,tag:r,props:{},children:[{type:a,value:"Those tests are written within Salt stack states and YAML, but the test are\nplain GNU\u002FLinux "},{type:b,tag:m,props:{},children:[{type:a,value:"tests"}]},{type:a,value:"."}]},{type:a,value:f},{type:b,tag:H,props:{id:D},children:[{type:b,tag:I,props:{ariaHidden:J,href:"#add-group-additional-membership-to-user",tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:F}]},{type:a,value:f},{type:b,tag:s,props:{className:[t]},children:[{type:b,tag:u,props:{className:[v,w]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'grep \"^amavis\" \u002Fetc\u002Fgroup | grep -q -e clamav'"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:r,props:{},children:[{type:a,value:"A similar alternate could also be"}]},{type:a,value:f},{type:b,tag:s,props:{className:[t]},children:[{type:b,tag:u,props:{className:[v,w]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:" grep "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"q "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"e '^amavis."},{type:b,tag:c,props:{className:[d,"important"]},children:[{type:a,value:"*clamav$'"}]},{type:a,value:" \u002Fetc\u002Fgroup\n"}]}]}]},{type:a,value:f},{type:b,tag:H,props:{id:G},children:[{type:b,tag:I,props:{ariaHidden:J,href:"#change-ownership-on-a-folder-only-if-its-not-what-we-expect",tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"Change ownership on a folder "},{type:b,tag:"strong",props:{},children:[{type:a,value:"only if"}]},{type:a,value:" its not what we expect"}]},{type:a,value:f},{type:b,tag:s,props:{className:[t]},children:[{type:b,tag:u,props:{className:[v,w]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"% for es_folder in "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"["}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'\u002Fusr\u002Fshare\u002Felasticsearch\u002Fdata'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:","}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'\u002Fvar\u002Flib\u002Felasticsearch'"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"]"}]},{type:a,value:" %"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:"\nchown "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"R app"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"user"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:"app"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"user "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" es_folder "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:y}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,h,i]},children:[{type:a,value:"onlyif"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:g}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"test `stat -c %G {{ es_folder }}` != app-user\""}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:"% endfor %"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:p}]},{type:a,value:f}]}]}]}]},dir:"\u002Fblog\u002F2015\u002F03",path:"\u002Fblog\u002F2015\u002F03\u002Fuseful-gnulinux-truth-tests",extension:".md",slug:"useful-gnulinux-truth-tests",createdAt:Q,updatedAt:Q,category:B,prettyfiedTemporalDate:{prettified:"Tuesday, March 10, 2015",temporalDate:"2015-03-10"}}],taxonomyKey:q,taxonomy:{key:q}}],fetch:[],mutations:void 0}}("text","element","span","token","punctuation","\n",":","key","atrule","-",false," ","code","string","{","}","procedures","p","div","nuxt-content-highlight","pre","language-yaml","line-numbers","\n  ","cmd.run","\n    ",true,"snippet","A common task while writing server configuration management manifests is to make sure that some enforcements are run in specific situations.","add-group-additional-membership-to-user",2,"Add group additional membership to user","change-ownership-on-a-folder-only-if-its-not-what-we-expect","h2","a","true",-1,"icon","icon-link","usermod -a -G amavis clamav","unless","\n      ","2024-10-24T19:43:51.724Z")));