__NUXT_JSONP__("/blog/tag/linux", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ,f_,f$,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs,gt,gu,gv,gw,gx,gy,gz,gA,gB,gC,gD,gE,gF,gG,gH,gI,gJ,gK,gL,gM,gN,gO,gP,gQ,gR,gS,gT,gU,gV,gW,gX,gY,gZ,g_,g$,ha,hb,hc,hd,he,hf,hg,hh,hi,hj,hk,hl,hm,hn,ho,hp,hq,hr,hs,ht,hu,hv,hw,hx,hy,hz,hA,hB,hC,hD,hE,hF,hG,hH,hI,hJ,hK,hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU,hV,hW,hX,hY,hZ,h_,h$,ia,ib,ic,id,ie,if0,ig,ih,ii,ij,ik,il,im,in0,io,ip,iq,ir,is,it,iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH,iI,iJ,iK,iL,iM,iN,iO,iP,iQ,iR,iS,iT,iU,iV,iW,iX,iY,iZ,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx,jy,jz,jA,jB,jC,jD,jE,jF,jG,jH,jI,jJ,jK,jL,jM,jN,jO,jP,jQ,jR,jS,jT,jU,jV,jW,jX,jY,jZ,j_,j$,ka,kb,kc,kd,ke,kf,kg,kh,ki,kj,kk,kl,km,kn,ko,kp,kq,kr,ks,kt,ku,kv,kw,kx,ky,kz,kA,kB,kC,kD,kE,kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,kY,kZ,k_,k$,la,lb,lc,ld,le,lf,lg,lh,li,lj,lk,ll,lm,ln,lo,lp,lq,lr,ls,lt,lu,lv,lw,lx,ly,lz,lA,lB,lC,lD,lE,lF,lG,lH,lI,lJ,lK,lL,lM,lN,lO,lP,lQ,lR,lS,lT,lU,lV,lW,lX,lY,lZ,l_,l$,ma,mb,mc,md,me,mf,mg,mh,mi,mj,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,mA,mB,mC,mD,mE,mF,mG,mH,mI,mJ,mK,mL,mM,mN,mO,mP,mQ,mR,mS,mT,mU,mV,mW,mX,mY,mZ,m_,m$,na,nb,nc,nd,ne,nf,ng,nh,ni,nj,nk,nl,nm,nn,no,np,nq,nr,ns,nt,nu,nv,nw,nx,ny,nz,nA,nB,nC,nD,nE,nF,nG,nH,nI,nJ,nK,nL,nM,nN,nO,nP,nQ,nR,nS,nT,nU,nV,nW,nX,nY,nZ,n_,n$,oa,ob,oc,od,oe,of,og,oh,oi,oj,ok,ol,om,on,oo,op,oq,or,os,ot,ou,ov,ow,ox,oy,oz,oA,oB,oC,oD,oE,oF,oG,oH,oI,oJ,oK,oL,oM,oN,oO,oP,oQ,oR,oS,oT,oU,oV,oW,oX,oY,oZ,o_,o$,pa,pb,pc,pd,pe,pf,pg,ph,pi,pj,pk,pl,pm,pn,po,pp,pq,pr,ps,pt,pu,pv,pw,px,py,pz,pA,pB,pC,pD,pE,pF,pG,pH,pI,pJ,pK,pL,pM,pN,pO,pP,pQ,pR,pS,pT,pU,pV,pW,pX,pY,pZ,p_,p$,qa,qb,qc,qd,qe,qf,qg,qh,qi,qj,qk,ql,qm,qn){return {data:[{},{},{contents:[{title:"Managing my PGP\u002FOpenPGP keys and share across many machines",locale:bn,created:"2015-08-06T00:00:00.000Z",updated:bS,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F08\u002Fmanaging-pgp-private-keys-share-across-machines\u002F",status:av,revising:ai,migrateLinks:T,migrateImages:ai,gallery:ai,caption:ai,categories:[bo],tags:[as,"vulgarization",bT,"security",dl],keywords:["PGP","subkey","OpenPGP"],excerpt:"A solution to the idea of sharing PGP private keys without risking to lose everything if one of the machines you shared it had been accessed.",preamble:{disable:T,text:g},toc:[],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"With "},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fleaving-w3c\u002F"},children:[{type:a,value:"my previous position just finished"}]},{type:a,value:", I'm cleaning up my credential data\nI've stored on my computer. While doing so, I needed to update my PGP keys and I\nlearned something that I'm glad existed."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"When you use PGP to encrypt and\u002For sign your messages, you can only read\nmessages sent to you from the machine you have the private key. Right?"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The obvious solution would be to copy that private key everywhere; You mobile,\nservers, laptops."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"WRONG!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The problem is that security experts would say that you shouldn't do that unless\nyou are certain things are \"safe\". But what is safe anyway, once somebody else,\nor a zombie process, accessed your machine, it's possible somebody gained access\nto your keys."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"OpenPGP has a way to address this issue and it's called \"SubKeys\". Quoting\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.gnupg.org\u002Fgph\u002Fen\u002Fmanual.html#AEN526",rel:[C,G,H],target:A},children:[{type:a,value:"gnupg.org manual"}]}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"By default, a DSA master signing key and an ElGamal encryption subkey are\ngenerated when you create a new keypair. This is convenient, because the roles\nof the two keys are different, (...). The master signing key is used to make\ndigital signatures (...). The encryption key is used only for decrypting\nencrypted documents sent to you."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"This made me think I should make sure that I create a subkey, backup my main\nidentity, erase any traces of it from my main computer, then import the new\nsubkey."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"That way, I would only need to use the main key to update the data on key\nservers and to edit my keys."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"A nice effect of this way of working is that we can revoke a subkey. Since\nsubkeys, signatures and revocation are part of the public key that you sync with\nkey on keyservers, you can make the compromised subkey invalid."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The compromised key will be able to decrypt messages sent for that private\nsubkey, provided the attacker can also gain access to where the messages are\nstored, but you won't lose the most important part of the identity system.\nYou'll be able to create another subkey and keep the same identity."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"I hope I got it right. If I'm wrong, don't hesitate to tell me and I'll adjust!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"I got to read more about all of this, but I am glad I learned about subkeys."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Here are some notes I found that helped me understand this all better."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Falexcabal.com\u002Fcreating-the-perfect-gpg-keypair\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"AlexCabal: Creating the perfect GPG keypair"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fwiki.debian.org\u002FSubkeys",rel:[C,G,H],target:A},children:[{type:a,value:"Debian Wiki: Using OpenPGP subkeys"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Firtfweb.ifa.hawaii.edu\u002F~lockhart\u002Fgpg\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"GPG quick cheat sheet"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fsuperuser.com\u002Fquestions\u002F466396\u002Fhow-to-manage-gpg-keys-across-multiple-systems",rel:[C,G,H],target:A},children:[{type:a,value:"SuperUser: How to manage GPG keys across multiple systems"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fhelp.riseup.net\u002Fen\u002Fsecurity\u002Fmessage-security\u002Fopenpgp\u002Fbest-practices",rel:[C,G,H],target:A},children:[{type:a,value:"OpenPGP best practices"}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2015\u002F08",path:"\u002Fblog\u002F2015\u002F08\u002Fmanaging-pgp-private-keys-share-across-machines",extension:aw,slug:"managing-pgp-private-keys-share-across-machines",createdAt:gN,updatedAt:gN,category:bo,prettyfiedTemporalDate:{prettified:"Thursday, August 6, 2015",temporalDate:"2015-08-06"}},{title:"Run a NodeJS process through forever from within a Docker container",locale:bn,created:"2015-05-12T00:00:00.000Z",updated:bS,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F05\u002Frun-nodejs-process-forever-within-docker-container\u002F",status:av,revising:T,migrateLinks:T,categories:[aQ],tags:[as,bU,eM,bT,bo,dl],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-spec-rangefinder.png",alt:"Screen capture of the RangeFinder API using Publican",text:"Specification Document for RangeFinder API\n"},excerpt:"I’ve recently been through the steps to make a NodeJS web app to run from inside a Docker container. The objective of this project was to simplify the deployment of a web app that had many moving parts by making it a re-deployable service that is self-contained.",preamble:{disable:T,text:g},toc:[{id:gO,depth:aj,text:"Run publican inside Docker"},{id:dm,depth:K,text:dn},{id:gP,depth:K,text:gQ},{id:do0,depth:K,text:dp}],body:{type:am,children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"One of the components that I worked on "},{type:b,tag:aE,props:{to:"\u002Fblog\u002Ftag\u002Fwebplatform-docs"},children:[{type:a,value:"during my time on the WebPlatform\nproject"}]},{type:a,value:aO},{type:b,tag:l,props:{href:eN,rel:[C,G,H],target:A},children:[{type:a,value:eO}]},{type:a,value:", that I had to manage has many moving parts. The\nend product of that component is basically static HTML documents that ends up on\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fspecs.webplatform.org\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"specs.webplatform.org"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Since we need to have many packages installed in very specific version, and\nautomating the installation wouldn't bring any more benefit than being\nself-contained, I thought it would be best to go through the steps of converting\nit into a Docker container."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The following is a procedure I wrote to teach "},{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.w3.org\u002Fstaff\u002Falumni\u002F#robin-berjon",rel:[C,G,H],target:A},children:[{type:a,value:"my colleague"}]},{type:a,value:aO},{type:b,tag:l,props:{href:"https:\u002F\u002Fberjon.com\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"Robin\nBerjon"}]},{type:a,value:", how to run his system called "},{type:b,tag:l,props:{href:eN,rel:[C,G,H],target:A},children:[{type:a,value:eO}]},{type:a,value:" from within a Docker\ncontainer. Publican is basically a GitHub hook listener that generates specs\nwritten to be parsed by "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fw3c\u002Frespec",rel:[C,G,H],target:A},children:[{type:a,value:"ReSpec"}]},{type:a,value:dq},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Ftabatkins\u002Fbikeshed",rel:[C,G,H],target:A},children:[{type:a,value:"Bikeshed"}]}]},{type:a,value:e},{type:b,tag:an,props:{id:gO},children:[{type:b,tag:l,props:{href:"#run-publican-inside-docker",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Run "},{type:b,tag:u,props:{},children:[{type:a,value:"publican"}]},{type:a,value:" inside Docker"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"What this'll do is basically build a VM that'll run a Docker container. The\ncontainer will write in files outside of it."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You'll quickly notice that the paths will look the same, its confusing, sorry\nabout that. Fortunately for us, the paths in the procedure are the ones that\nwill be mounted through Docker Volume (the "},{type:b,tag:k,props:{},children:[{type:a,value:bz}]},{type:a,value:" option when you call "},{type:b,tag:k,props:{},children:[{type:a,value:bU}]},{type:a,value:")\nand will, in the end, be the same files."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Once you have a Docker container running on a VM, it'll replicate how a\nproduction VM will run the tasks. Since we know where the container will write\nfiles, we'll have our frontend servers to forward requests to publican, and\nserve files it generated."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Doing all this removes the need to do any rsync. NGINX within the VM that'll run\nDocker will take care of serving static files, and frontend server will expose\nit to the public."}]},{type:a,value:e},{type:b,tag:L,props:{id:dm},children:[{type:b,tag:l,props:{href:gR,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:dn}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Have "},{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.vagrantup.com\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"Vagrant"}]},{type:a,value:dr},{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.virtualbox.org\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"VirtualBox"}]},{type:a,value:" installed"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Follow what's in "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Fsalt-basesystem",rel:[C,G,H],target:A},children:[{type:a,value:"renoirb\u002Fsalt-basesystem README.md"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Make sure you follow "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Fsalt-basesystem#vagrant-sandbox-utilities",rel:[C,G,H],target:A},children:[{type:a,value:"Vagrant Sandbox utilities"}]},{type:a,value:" part"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:gS},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bV}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:" salt-call state.highstate\n "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:" salt-call state.sls vagrantsandbox.docker\n "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Reboot the VM by doing "},{type:b,tag:k,props:{},children:[{type:a,value:"vagrant reload"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:" vagrant reload\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"No need"}]},{type:a,value:" to follow what's in "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fpublican\u002Fblob\u002Ftask-based-docker\u002FDOCKER.md",rel:[C,G,H],target:A},children:[{type:a,value:"webplatform\u002Fpublican DOCKER.md file"}]},{type:a,value:".\nThose are notes to show how to build a container. For this time, we'll "},{type:b,tag:l,props:{href:"https:\u002F\u002Fregistry.hub.docker.com\u002Fu\u002Fwebspecs\u002Fpublican\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"use a\ncontainer I already built and pushed on "},{type:b,tag:s,props:{},children:[{type:a,value:"Docker hub"}]}]},{type:a,value:bq}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Setup what's required to run the container"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:gS},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bV}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Prepare the folders;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eP}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:gT}]},{type:a,value:" webapps\n "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:eQ}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You should see"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:" uid=990(webapps) gid=990(webapps) groups=990(webapps),33(www-data),998(docker)\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Prepare the folders"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:" \u002Fsrv\u002Fwebapps "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:" publican\u002Fdata "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:" publican\n"}]}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"If all went well so far; you should be able to do "},{type:b,tag:k,props:{},children:[{type:a,value:"docker ps"}]},{type:a,value:" as the\n"},{type:b,tag:k,props:{},children:[{type:a,value:"webapps"}]},{type:a,value:" user. Otherwise reboot and\u002For run "},{type:b,tag:k,props:{},children:[{type:a,value:"salt-call"}]},{type:a,value:" with both\n"},{type:b,tag:k,props:{},children:[{type:a,value:gU}]},{type:a,value:g},{type:b,tag:k,props:{},children:[{type:a,value:"state.sls vagrantsandbox.docker"}]},{type:a,value:" states. There should be\nnothing left to do."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"ps"}]},{type:a,value:"\n\nCONTAINER ID IMAGE COMMAND CREATED\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:bW}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pull the publican Docker image I built (it'll take about 10 minutes)"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bU}]},{type:a,value:" pull webspecs\u002Fpublican:wip\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Copy the other files in this Gist in your local coputer where you cloned the\n"},{type:b,tag:s,props:{},children:[{type:a,value:"salt-basesystem"}]},{type:a,value:" repository. From that folder you can move them inside the\nVagrant VM where you need."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Copy publican config"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ds}]},{type:a,value:" \u002Fvagrant\u002Fconfig.json data\u002F\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:eR,props:{},children:[{type:a,value:"Download Bikeshed stuff that i didn't figure out yet what's important to\nkeep, extract it in "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fspec-data\u002F"}]}]},{type:a,value:Q}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:dt,props:{className:[du],variant:eS},children:[{type:a,value:e},{type:b,tag:s,props:{slot:cG},children:[{type:a,value:"Archive mentioned no longer exists"}]},{type:a,value:"\nThe archive used in the initial procedure no longer exists, it was a series of W3C specification Git repository working copies that Publican was expecting.\n"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You can open up another terminal session and connect to the Vagrant VM\n"},{type:b,tag:k,props:{},children:[{type:a,value:"vagrant ssh"}]},{type:a,value:" (e.g. if you don't use "},{type:b,tag:k,props:{},children:[{type:a,value:gV}]},{type:a,value:dq},{type:b,tag:k,props:{},children:[{type:a,value:dv}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:" spec-data\u002Freadonly\u002F\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:" data\u002F"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:"gits,logs,publish,queue,temp"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Run the container"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bU}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:dw}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:dx}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:$}]}]},{type:a,value:gW}]},{type:a,value:gX},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:dy},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:dw}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:dx}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:$}]}]},{type:a,value:gY}]},{type:a,value:gZ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:dy},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eW}]},{type:a,value:g_}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"If you see the following, you're in the Docker container!!"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"webapps@2f33f5c6e183:~$\n"}]}]}]},{type:a,value:e},{type:b,tag:ay,props:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-init.png",alt:"A terminal window with a few commands and a build process status and green lines, no errors",figcaption:g},children:[{type:a,value:"\n  Launching the container\n"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Initiate the empty shell we just created (it'll create stuff in the "},{type:b,tag:k,props:{},children:[{type:a,value:"data\u002F"}]},{type:a,value:"\nfolder "},{type:b,tag:u,props:{},children:[{type:a,value:g$}]},{type:a,value:" of the container)"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"publican.js init\n"}]}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:ha},{type:b,tag:u,props:{},children:[{type:a,value:"Launching the container"}]},{type:a,value:cH}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Once done, exit the container. Notice that by doing this, you lose the state\nof the VM and anything that has been written in the container. But, since we\nuse volumes (notice the "},{type:b,tag:k,props:{},children:[{type:a,value:"-v \u002Fhost\u002Fpath:\u002Fcontainer\u002Fpath"}]},{type:a,value:"), we actually wrote\n"},{type:b,tag:u,props:{},children:[{type:a,value:g$}]},{type:a,value:" of the container."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"We can "},{type:b,tag:s,props:{},children:[{type:a,value:"exit the container"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"At this stage, we had publican and bikeshed to generate files (we may call\nthis a \"cache warmup\" of softs). Now, let's prepare the Vagrant VM to serve\nthe static content. Notice that the next commands are there only for the\npurpose of a local workspace, in production this step will also be managed\nautomatically."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Let's get back as the "},{type:b,tag:s,props:{},children:[{type:a,value:am}]},{type:a,value:" user, and create a quick web server;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-yqq"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bB}]},{type:a,value:"\nnginx "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"mv"}]},{type:a,value:" \u002Fvagrant\u002Fdefault.conf \u002Fetc\u002Fnginx\u002Fsites-available\u002Fdefault\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:hb}]},{type:a,value:" restart nginx\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Let's return back to "},{type:b,tag:s,props:{},children:[{type:a,value:"as the webapps user and launch the runner"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:gT}]},{type:a,value:" webapps "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican\u002F\n"}]}]}]},{type:a,value:e},{type:b,tag:ay,props:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-run-hook.png",alt:"A terminal window with a build process status and green lines, no errors",figcaption:g},children:[{type:a,value:"\nStarting a build process\n"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:hc}]},{type:a,value:"; this will also be managed automatically in\nproduction."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,"language-shell"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bU}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:dw}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:dx}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:$}]}]},{type:a,value:gW}]},{type:a,value:gX},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:hd},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:dw}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:dx}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:$}]}]},{type:a,value:gY}]},{type:a,value:gZ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:hd},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eW}]},{type:a,value:g_}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:ha},{type:b,tag:u,props:{},children:[{type:a,value:hc}]},{type:a,value:cH}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"get your Vagrant VM IP address"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"ifconfig"}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Should start by "},{type:b,tag:k,props:{},children:[{type:a,value:"172..."}]},{type:a,value:dq},{type:b,tag:k,props:{},children:[{type:a,value:"192..."}]},{type:a,value:"; visit a browser to that address"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:gP},children:[{type:b,tag:l,props:{href:"#gists",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:gQ}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Here are the files mentioned in this post"}]},{type:a,value:e},{type:a,value:e},{type:b,tag:ax,props:{id:"configjson"},children:[{type:b,tag:l,props:{href:"#configjson",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"config.json"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:eN,rel:[C,G,H],target:A},children:[{type:a,value:eO}]},{type:a,value:" expects this file as "},{type:b,tag:k,props:{},children:[{type:a,value:"data\u002Fconfig.json"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,"language-json"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"bikeshed\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"\u002Fopt\u002Fbikeshed\u002Fbikeshed.py\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"rsyncPath\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"\u002Fsrv\u002Fwebapps\u002Fpublican\u002F\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"python\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"python2\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"logFile\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"logs\u002Fall.log\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"email\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"to\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:he}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"from\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:he}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"host\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dz}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"level\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"error\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"handleExceptions\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:J}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"purgeAllURL\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"https:\u002F\u002Fapi.fastly.com\u002Fservice\u002Ffooo\u002Fpurge_all\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bb]},children:[{type:a,value:"\"purgeAllKey\""}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"baar\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:ax,props:{id:"defaultconf"},children:[{type:b,tag:l,props:{href:"#defaultconf",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"default.conf"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"A minimal NGINX web server digging for static content that Publican generates."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,eX]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# file: \u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fdefault"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cI}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:hf}]},{type:a,value:" default_server"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:am}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata\u002Fpublish"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"index"}]},{type:a,value:" index.html index.htm"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dB}]},{type:a,value:" localhost"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hg}]},{type:a,value:hh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"try_files"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:hi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:hi}]},{type:a,value:"\u002F =404"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:cf,props:{id:"dockerfile"},children:[{type:b,tag:l,props:{href:"#dockerfile",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Dockerfile"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Here is the project's Dockerfile I created. I think it should be smaller, but\nPublican works with the following script."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Each step in a Dockerfile creates a \"commit\", make sure you have as few of them\nas possible, and also make sure that you clean after yourself. Remember that a\nDocker container is re-deployable and smallest the size of the container, the\nbetter!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Notice a few details;"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"ENV DEBIAN_FRONTEND=noninteractive"}]},{type:a,value:" helps with dialogs"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"USER webapps"}]},{type:a,value:" tells \"where\" the rest of the script will make commands as a\ndifferent user than root. Make sure what's required by root to be done before!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"COPY ..."}]},{type:a,value:" this is basically how you import content inside the container (i.e.\nmake the container heavier)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,"language-dockerfile"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Publican Docker runner"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# See also:"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#   * https:\u002F\u002Fgithub.com\u002Fnodesource\u002Fdocker-node\u002Fblob\u002Fmaster\u002Fubuntu\u002Ftrusty\u002Fnode\u002F0.10.36\u002FDockerfile"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"FROM"}]},{type:a,value:" nodesource\u002Ftrusty:0.10.36"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"MAINTAINER"}]},{type:a,value:" Renoir Boulanger \u003Crenoir@w3.org\u003E"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cg}]},{type:a,value:" DEBIAN_FRONTEND=noninteractive"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Dependencies: Bikeshed, PhantomJS, Bikshed’s lxml"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dC}]},{type:a,value:" apt-get update && apt-get -y upgrade && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    apt-get install -yqq git python2.7 python-dev python-pip libxslt1-dev libxml2-dev zlib1g-dev && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    apt-get install -yqq libfontconfig1 libfreetype6 curl && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    apt-get autoremove -yqq --purge && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    pip install --upgrade lxml"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Copy everything we have locally into the container"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# REMINDER: Make sure you run `make clone-bikeshed`, we prefer to keep a copy locally outside"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# of the data volume. Otherwise it would make problems saying that bikeshed clone is not in the"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# same filesystem."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"COPY"}]},{type:a,value:" . \u002Fsrv\u002Fwebapps\u002Fpublican\u002F"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Make sure we have a \"non root\" user and"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# delete any local workbench data\u002F directory"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dC}]},{type:a,value:" \u002Fusr\u002Fsbin\u002Fgroupadd --system --gid 990 webapps && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    \u002Fusr\u002Fsbin\u002Fuseradd --system --gid 990 --uid 990 -G sudo --home-dir \u002Fsrv\u002Fwebapps --shell \u002Fbin\u002Fbash webapps && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    sed -i "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'\u002F^%sudo\u002Fd'"}]},{type:a,value:" \u002Fetc\u002Fsudoers && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    echo "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'%sudo ALL=NOPASSWD: ALL'"}]},{type:a,value:" \u003E\u003E \u002Fetc\u002Fsudoers && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    mv \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbikeshed \u002Fopt && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    rm -rf data && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    mkdir -p data\u002Ftemp && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    rm -rf Dockerfile Makefile .git .gitignore DOCKER.md && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    chown -R webapps:webapps \u002Fsrv\u002Fwebapps\u002Fpublican && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    chown -R webapps:webapps \u002Fopt\u002Fbikeshed"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Switch from root to webapps system user"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# It **HAS to be** the SAME uid\u002Fgid as the owner on the host from which we’ll use as volume"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"USER"}]},{type:a,value:" webapps"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Where the session will start from"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"WORKDIR"}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Environment variables"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cg}]},{type:a,value:" PATH \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fnode_modules\u002F.bin:\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbin:\u002Fsrv\u002Fwebapps\u002Fpublican\u002F.local\u002Fbin:"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$PATH"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cg}]},{type:a,value:" HOME \u002Fsrv\u002Fwebapps\u002Fpublican"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cg}]},{type:a,value:" TMPDIR \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata\u002Ftemp"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cg}]},{type:a,value:" NODE_ENV production"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cg}]},{type:a,value:" GIT_DISCOVERY_ACROSS_FILESYSTEM true"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Run what `make deps` would do"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dC}]},{type:a,value:" pip install --upgrade --user --editable \u002Fopt\u002Fbikeshed && "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:af}]},{type:a,value:"\n    mkdir -p node_modules && npm install"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Declare which port we expect to expose"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"EXPOSE"}]},{type:a,value:" 7002"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Allow cli entry for debug, but make sure docker-compose.yml uses \"command: bin\u002Frun.sh\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aR]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"ENTRYPOINT"}]},{type:a,value:" ["},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"\u002Fbin\u002Fbash\""}]},{type:a,value:W}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Note leftover: Ideally, it should exclusively run"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#ENTRYPOINT [\"\u002Fbin\u002Fbash\", \"\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbin\u002Frun.sh\"]"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Note leftover: What it ends up doing"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#CMD [\"node_modules\u002Fforever\u002Fbin\u002Fforever\", \"--fifo\", \"logs\", \"0\"]"}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:ax,props:{id:"forever-start-script"},children:[{type:b,tag:l,props:{href:"#forever-start-script",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Forever start script"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"If you notice in the Docker run command, I call a file "},{type:b,tag:k,props:{},children:[{type:a,value:"bin\u002Frun.sh"}]},{type:a,value:", here it is."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bU}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:dy},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:dy},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eW}]},{type:a,value:":7002 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n       webspecs\u002Fpublican:latest "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n       bin\u002Frun.sh\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Publican runs its process using "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fforeverjs\u002Fforever",rel:[C,G,H],target:A},children:[{type:a,value:"Forever"}]},{type:a,value:". The objective of forever is to\nkeep a process to run at all times."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"While this isn't ideal for NodeJS services, in the present use-case of a Docker\ncontainer who has the only purpose to run a process; Forever apt for the job!"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,hj,bs]},children:[{type:a,value:hk}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"export"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"RUNDIR"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"\u002Fsrv\u002Fwebapps\u002Fpublican\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:hl}]},{type:a,value:"\nnode_modules\u002Fforever\u002Fbin\u002Fforever start "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:hl}]},{type:a,value:"\u002Fbin\u002Fserver.js\nnode_modules\u002Fforever\u002Fbin\u002Fforever "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"--fifo"}]},{type:a,value:" logs "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"That’s it, it’s all I had."}]},{type:a,value:e},{type:b,tag:L,props:{id:do0},children:[{type:b,tag:l,props:{href:hm,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:dp}]},{type:a,value:e},{type:a,value:e},{type:b,tag:w,props:{style:eY,className:[eZ,e_,e$,fa,fb]},children:[{type:a,value:e},{type:b,tag:ay,props:{className:[ch],src:hn,alt:"A W3C Specification preview where we can see on the left the specification, and on the right the source highlighting changes in the source",figcaption:g},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"W3C Publican prototype build process helping with specification change tracking during review process"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ay,props:{className:[ch],src:ho,figcaption:g},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:hp}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{style:eY,className:[eZ,e_,e$,fa,fb]},children:[{type:a,value:e},{type:b,tag:ay,props:{className:[ch],src:hn,alt:cJ,figcaption:g},children:[{type:a,value:"\n...\n"}]},{type:a,value:e},{type:b,tag:ay,props:{className:[ch],src:ho,figcaption:g},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:hp}]},{type:a,value:e}]},{type:a,value:e}]}]},dir:fc,path:"\u002Fblog\u002F2015\u002F05\u002Frun-nodejs-process-forever-within-docker-container",extension:aw,slug:"run-nodejs-process-forever-within-docker-container",createdAt:dD,updatedAt:"2024-10-24T19:43:51.727Z",category:aQ,prettyfiedTemporalDate:{prettified:"Tuesday, May 12, 2015",temporalDate:"2015-05-12"}},{title:"Make Discourse “long polling” work behind Fastly or Varnish",locale:bn,created:"2015-05-03T00:00:00.000Z",updated:bS,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F05\u002Fmake-discourse-long-polling-work-behind-fastly\u002F",status:av,revising:T,caption:ai,caracteresBizzares:ai,gallery:ai,migrateCode:T,migrateImages:T,migrateLinks:T,categories:[aQ],tags:[as,bT,dl,bJ],keywords:[hq,hr,bX,"Long Polling behind Varnish",hs],excerpt:"In the Discourse forums, if you’ve seen something saying that you have to provide a different origin to make long polling work, maybe you didn’t understand what you have to do. Here are the details of why and how to do it correctly.",coverImage:{src:ht,text:hu},preamble:{text:hv},toc:[{id:hw,depth:aj,text:hx}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"While working on deploying Discourse, "},{type:b,tag:l,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Ffull-site-cdn-acceleration-for-discourse\u002F21467\u002F4",rel:[C,G,H],target:A},children:[{type:a,value:"I've came across a statement that took\ntime for me to understand"}]},{type:a,value:". Discourse has a subsystem that's similar to\nWebSocket and Server Sent events which takes care to automatically update the\npage asynchronously. Note that this post "},{type:b,tag:l,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Ffull-site-cdn-acceleration-for-discourse\u002F21467",rel:[C,G,H],target:A},children:[{type:a,value:"is canonical version of my answer"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The confusing part was;"}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:hy,rel:[C,G,H],target:A},children:[{type:a,value:hz}]},{type:a,value:" To server \"long polling\" requests from a different domain, set the\nSite Setting long polling base url to the origin server. For example, if your\nCDN is pulling from \""},{type:b,tag:k,props:{},children:[{type:a,value:"http:\u002F\u002Fexample.org"}]},{type:a,value:"\" be sure to plug in\n"},{type:b,tag:k,props:{},children:[{type:a,value:hA}]},{type:a,value:" into the site setting. If you don't your site will be\nbroken."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"This post is about clarifying why and how to work around this particular\nproblem."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The confusing part is that if \""},{type:b,tag:k,props:{},children:[{type:a,value:hA}]},{type:a,value:"\". If you are behind Fastly,\nyou have to use a CNAME entry and then you have to have a sub domain name and\nnot the top level."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Background:"}]},{type:a,value:" In DNS, a top level domain name (i.e. \"example.org\") can "},{type:b,tag:u,props:{},children:[{type:a,value:"only"}]},{type:a,value:"\nhave "},{type:b,tag:k,props:{},children:[{type:a,value:dE}]},{type:a,value:" records. Since Fastly requires we use a "},{type:b,tag:k,props:{},children:[{type:a,value:dF}]},{type:a,value:" entry, we have no\nchoice but to use a sub domain name."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Let's say that we will then use \""},{type:b,tag:k,props:{},children:[{type:a,value:"http:\u002F\u002Fdiscourse.example.org\u002F"}]},{type:a,value:"\" to serve our\nDiscourse forum so we can use Fastly."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Now there's this thing called \"long polling\" which is basically an "},{type:b,tag:k,props:{},children:[{type:a,value:"OPTION"}]},{type:a,value:" HTTP\nrequest with a long time before returning anything. If we use the Fastly or\nVarnish address, as Discourse would by default, Varnish will time out and \"long\npolling\" won't work."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"More background:"}]},{type:a,value:" Varnish has this option to bypass in known contexts through\n"},{type:b,tag:k,props:{},children:[{type:a,value:"vcl_pipe"}]},{type:a,value:" which is roughly a raw TCP socket. But Fastly doesn't offer it\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fcommunity.fastly.com\u002Ft\u002Fvcl-pipe-heads-up\u002F163",rel:[C,G,H],target:A},children:[{type:a,value:"because of the "},{type:b,tag:u,props:{},children:[{type:a,value:"size"}]},{type:a,value:" of their setup"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:an,props:{id:hw},children:[{type:b,tag:l,props:{href:"#proposed-setup",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:hx}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Let's enable long polling and expose our site under Fastly. We'll need two\nnames, one pointing to Fastly's and the other to the IP addresses we give within\nthe service dashboard."}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"discourse.example.org"}]},{type:a,value:" that's our desired Discourse site domain name"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:hB}]},{type:a,value:" (pick any name) that we'll configure in\nDiscourse to access directly to our public facing frontend web server"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In my case, I generally have many web apps running that are only accessible from\nmy internal network. I refer to them as \"upstream\"; the same term NGINX uses in\ntheir config. Since this number of web apps you would host on a site can\nfluctuate, you might still want the number public IP address to remain stable.\nThat's why I setup a NGINX server in front that proxies to internal web app\nserver. I refer to them as \"frontends\"."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Let's say you have two public facing frontends running NGINX."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Those would be the ones you setup in Fastly like this."}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:hC,figcaption:g},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:hD}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Here we see two "},{type:b,tag:u,props:{},children:[{type:a,value:"Backends"}]},{type:a,value:" in Fastly pannel at "},{type:b,tag:k,props:{},children:[{type:a,value:hE}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Notice that in this example i'm using "},{type:b,tag:k,props:{},children:[{type:a,value:dG}]},{type:a,value:" port because my backends are\nconfigured to communicate between Fastly and my frontends through TLS. But you\ndon't need to."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Quoting again @sam;"}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:hy,rel:[C,G,H],target:A},children:[{type:a,value:hz}]},{type:a,value:" To server \"long polling\" requests from a different domain, set the\nSite Setting long polling base url to the origin server."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Really means here is that we would have to put one of those IP addresses in\nDiscourse settings."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"What I'd recommend is to create a list of "},{type:b,tag:k,props:{},children:[{type:a,value:dE}]},{type:a,value:" entries for all your frontends."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In the end we need three things:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"What's the public name that Fastly will serve"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Which IPs are the frontends"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Which hostname we want to use for long polling and we'll add it to our\nVirtualHost"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The zone file would look like this;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,hF]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"# The public facing URL\ndiscourse.example.org.  "},{type:b,tag:c,props:{className:[d,cK,r]},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cM,r]},children:[{type:a,value:dF}]},{type:a,value:" global.prod.fastly.net.\n\n# The list of IP addresses you’d give to Fastly as origins\u002Fbackends\nfrontends.example.org.  "},{type:b,tag:c,props:{className:[d,cK,r]},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cM,r]},children:[{type:a,value:dE}]},{type:a,value:" 8.8.8.113\nfrontends.example.org.  "},{type:b,tag:c,props:{className:[d,cK,r]},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cM,r]},children:[{type:a,value:dE}]},{type:a,value:" 8.8.8.115\n\n# The long polling URL entry\ndiscoursepolling.example.org.  "},{type:b,tag:c,props:{className:[d,cK,r]},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cM,r]},children:[{type:a,value:dF}]},{type:a,value:" frontends.example.org.\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"That way you can setup the \"long polling base url\" correctly without setting a\nsingle point of failure."}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fdiscourse-polling-ui.png",figcaption:"In Discourse admin, adjust long polling base url setting"},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Then, we can go in Discourse admin zone and adjust the \"long polling base url\"\nto our other domain name."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,eX]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# \u002Fetc\u002Fnginx\u002Fsites-enabled\u002F10-discourse"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Let’s redirect to SSL, in case somebody tries to access the direct IP with"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# host header."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cI}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dA}]},{type:a,value:cN},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:hf}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dB}]},{type:a,value:hG}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dH}]},{type:a,value:"     common_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"return"}]},{type:a,value:cN},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"301"}]},{type:a,value:" https:\u002F\u002F"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$server_name"}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$request_uri"}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cI}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dA}]},{type:a,value:cN},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dG}]},{type:a,value:hH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dB}]},{type:a,value:hG}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Rest of NGINX server block"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Also, I would make a condition if we are in discoursepolling but not"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# under using anything specific to polling."}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# #TODO; find paths specific to polling"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"To see if it works; look at your web browser developer tool \"Network inspector\"\nfor "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fpoll"}]},{type:a,value:" calls on "},{type:b,tag:k,props:{},children:[{type:a,value:hB}]},{type:a,value:", and see if you have\n"},{type:b,tag:k,props:{},children:[{type:a,value:"200 OK"}]},{type:a,value:" status code."}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fdiscourse-polling.png",figcaption:"Use your web browser developer tools and inspect network traffic to see if requests made to discoursepolling worked"},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note that this screenshot is showing "},{type:b,tag:k,props:{},children:[{type:a,value:hI}]},{type:a,value:" but that's beside the\npoint i'm trying to illustrate."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Hope this helped."}]}]},dir:fc,path:"\u002Fblog\u002F2015\u002F05\u002Fmake-discourse-long-polling-work-behind-fastly",extension:aw,slug:"make-discourse-long-polling-work-behind-fastly",createdAt:dD,updatedAt:dD,category:aQ,prettyfiedTemporalDate:{prettified:"Sunday, May 3, 2015",temporalDate:"2015-05-03"}},{title:"Add OpenStack instance meta-data info in your salt grains",locale:bn,created:"2015-05-22T00:00:00.000Z",updated:"2023-11-17T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F05\u002Fadd-openstack-instance-meta-data-info-salt-grains\u002F",status:av,revising:ai,migrateLinks:T,migrateImages:ai,gallery:ai,caption:ai,categories:[dI],tags:[as,bT,cO,bJ,eM],keywords:["Ansible","Infrastructure as Code"],preamble:{text:"It is possible the code shown here no longer works.\nThis was written at the time before VMWare aquired SaltStack and maybe\ncode shown uses parts of Salt Stack that no longer exists.\n"},coverImage:{src:hJ,alt:"A terminal window showing Open Stack nova client output",text:"Open Stack NOVA client is leveraging an internal HTTP API to display data we can\nconsume from the CLI.\nThe present article shows how to add data from OpenStack into Salt Stack.\n"},excerpt:"Ever wanted to target salt states based on data only the underlying OpenStack cluster knows. Here’s how I did it.",toc:[{id:hK,depth:aj,text:hL},{id:hM,depth:aj,text:hN},{id:hO,depth:aj,text:hP},{id:bB,depth:aj,text:hQ}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"During a work session on my salt-states for WebPlatform.org I wanted to shape be\nable to query the OpenStack cluster meta-data so that I can adjust more\nefficiently my salt configuration."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"What are grains? Grains are structured data that describes what a minion has\nsuch as which version of GNU\u002FLinux its running, what are the network adapters,\netc."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The following is a Python script that adds data in Salt Stack' internal database\ncalled grains."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"I have to confess that I didn't write the script but adapted it to work within\nan OpenStack cluster. More precisely on DreamHost's DreamCompute cluster. The\noriginal script came from "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fsaltstack\u002Fsalt-contrib",rel:[C,G,H],target:A},children:[{type:a,value:"saltstack\u002Fsalt-contrib"}]},{type:a,value:" and the original file was\n"},{type:b,tag:l,props:{href:hR,rel:[C,G,H],target:A},children:[{type:a,value:"ec2_info.py"}]},{type:a,value:" to read data from EC2."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The "},{type:b,tag:l,props:{href:hR,rel:[C,G,H],target:A},children:[{type:a,value:"original script"}]},{type:a,value:" wasn't getting any data in the cluster. Most likely due\nto API changes and that EC2 API exposes dynamic meta-data that the\nDreamCompute\u002FOpenStack cluster don't."}]},{type:a,value:e},{type:b,tag:dt,props:{variant:eS,className:[du]},children:[{type:a,value:e},{type:b,tag:s,props:{slot:cG},children:[{type:a,value:"Script source"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The article’s source script is available on GitHub as a Python script we can\ninsert into SaltStack as a grain"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fblob\u002Fmaster\u002F_grains\u002Fdreamcompute.py",rel:[C,G,H],target:A},children:[{type:a,value:"github.com\u002Fwebplatform\u002Fsalt-states"}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In the end, I edited the file to make it work on DreamCompute and also truncated\nsome data that the grains subsystem already has."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"My original objective was to get a list of "},{type:b,tag:k,props:{},children:[{type:a,value:hS}]},{type:a,value:" the VM was\nassigned. Unfortunately the API doesn't give that information yet. Hopefully\nI'll find a way to get that information some day."}]},{type:a,value:e},{type:b,tag:an,props:{id:hK},children:[{type:b,tag:l,props:{href:"#get-openstack-instance-detail-using-salt",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:hL}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Locally"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt-call grains.get dreamcompute:uuid\n"}]}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:bY}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n    10a4f390"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:hT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:hU},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:fd},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:hV}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Or for another machine"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt app1 grains.get dreamcompute:uuid\n"}]}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:hW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n    510f5f24"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"217b"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"4fd2"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:fd},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"f00000000000\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"What size did we create a particular VM?"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt app1 grains.get dreamcompute:instance_type\n"}]}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:hW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n    lightspeed\n"}]}]}]},{type:a,value:e},{type:b,tag:an,props:{id:hM},children:[{type:b,tag:l,props:{href:"#what-data-you-can-get",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:hN}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Here is a sample of the grain data that will be added to every salt minion you\nmanage."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You might notice that some data will be repeated such as the 'hostname', but the\nrest can be very useful if you want to use the data within your configuration\nmanag"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"dreamcompute"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:hX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        iad"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"block_device_mapping"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"ami"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:hY},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"ebs0"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n            \u002Fdev\u002Fvdb\n        "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"ebs1"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:hY},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:am}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n            \u002Fdev\u002Fvda\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"hostname"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        salt.novalocal\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"instance_action"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        none\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"instance_id"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        i"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"00000000"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"instance_type"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        lightspeed\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"launch_index"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"local_ipv4"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        10.10.10.11\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:hZ}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        salt\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"network_config"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"content_path"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n            \u002Fcontent\u002F0000\n        "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:hZ}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n            network_config\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"placement"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:hX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n            iad"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"public_ipv4"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        203.0.113.11\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"public_keys"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"someuser"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n            ssh"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"rsa "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:cJ}]},{type:a,value:"an rsa public key"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:cJ}]},{type:a,value:" someuser"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"comment@example.org\n    "},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"ramdisk_id"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:h_},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"reservation_id"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        r"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"33333333"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:hS}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:h_},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"uuid"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\n        10a4f390"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:hT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:hU},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:fd},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:hV}]}]}]},{type:a,value:e},{type:b,tag:an,props:{id:hO},children:[{type:b,tag:l,props:{href:"#what-does-the-script-do",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:hP}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The script basically scrapes OpenStack meta-data service and serializes into\nsaltstack grains system the data it gets."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:h$,rel:[C,G,H],target:A},children:[{type:a,value:"OpenStack's meta-data service"}]},{type:a,value:" is similar to what you'd get from AWS, but\ndoesn't expose exactly the same data. This is why I had to adapt the original\nscript."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"To get data from an instance you simply (really!) need to make an HTTP call to\nan "},{type:b,tag:l,props:{href:h$,rel:[C,G,H],target:A},children:[{type:a,value:"internal IP address that OpenStack nova"}]},{type:a,value:" answers. (that’s what the IPv4\naddress starting by "},{type:b,tag:k,props:{},children:[{type:a,value:"169."}]},{type:a,value:" is)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"For example, from an AWS\u002FOpenStack VM, you can know the instance hostname by\ndoing"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:dJ}]},{type:a,value:" http:\u002F\u002F169.254.169.254\u002Flatest\u002Fmeta-data\u002Fhostname\n\nsalt.novalocal\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"To know what the script calls, "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fcommit\u002F821ca803#diff-6eea2056af3e939361a559b84665c1d97fc9e062f7b7f79910567fc688881056R33",rel:[C,G,H],target:A},children:[{type:a,value:"you can add a line at "},{type:b,tag:k,props:{},children:[{type:a,value:"_call_aws(url)"}]},{type:a,value:"\nmethod"}]},{type:a,value:dK},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fcommit\u002F821ca803#diff-6eea2056af3e939361a559b84665c1d97fc9e062f7b7f79910567fc688881056R32-R34",rel:[C,G,H],target:A},children:[{type:a,value:"lines 32-34"}]},{type:a,value:"), like so;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,"language-diff"]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"diff --git a\u002F_grains\u002Fdreamcompute.py b\u002F_grains\u002Fdreamcompute.py\nindex 682235d..c3af659 100644\n"},{type:b,tag:c,props:{className:[d,ia]},children:[{type:a,value:"--- a\u002F_grains\u002Fdreamcompute.py"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,ia]},children:[{type:a,value:"+++ b\u002F_grains\u002Fdreamcompute.py"}]},{type:a,value:"\n@@ -25,6 +25,7 @@ def _call_aws(url):\n\n"},{type:b,tag:c,props:{className:[d,ci]},children:[{type:b,tag:c,props:{className:[d,cP,ci]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,cQ]},children:[{type:a,value:"    \"\"\"\n"}]},{type:b,tag:c,props:{className:[d,cP,ci]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,cQ]},children:[{type:a,value:"    conn = httplib.HTTPConnection(\"169.254.169.254\", 80, timeout=1)\n"}]}]},{type:b,tag:c,props:{className:[d,"inserted-sign",ib]},children:[{type:b,tag:c,props:{className:[d,cP,ib]},children:[{type:a,value:fe}]},{type:b,tag:c,props:{className:[d,cQ]},children:[{type:a,value:"    LOG.info('API call to ' + url )\n"}]}]},{type:b,tag:c,props:{className:[d,ci]},children:[{type:b,tag:c,props:{className:[d,cP,ci]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,cQ]},children:[{type:a,value:"    conn.request('GET', url)\n"}]},{type:b,tag:c,props:{className:[d,cP,ci]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,cQ]},children:[{type:a,value:"    return conn.getresponse()\n"}]}]}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"When you "},{type:b,tag:k,props:{},children:[{type:a,value:"saltutil.sync_all"}]},{type:a,value:" (i.e. refresh grains and other data), the log will\ntell you which endpoints it queried."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In my case they were:"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,"language-shellsession"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,"output"]},children:[{type:a,value:"[INFO    ] API call to \u002Fopenstack\u002F2012-08-10\u002Fmeta_data.json\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Fami\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs0\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs1\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Froot\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fhostname\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-action\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-type\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Flocal-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002Favailability-zone\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fpublic-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Framdisk-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Freservation-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fsecurity-groups\n[INFO    ] API call to \u002Fopenstack\u002F2012-08-10\u002Fmeta_data.json\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Fami\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs0\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Febs1\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fblock-device-mapping\u002Froot\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fhostname\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-action\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Finstance-type\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Flocal-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002F\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fplacement\u002Favailability-zone\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fpublic-ipv4\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Framdisk-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Freservation-id\n[INFO    ] API call to \u002Flatest\u002Fmeta-data\u002Fsecurity-groups\n"}]}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Its quite heavy."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Hopefully the script respects HTTP headers and don't bypass "},{type:b,tag:k,props:{},children:[{type:a,value:"304 Not Modified"}]},{type:a,value:"\nresponses. Otherwise it'll add load to nova. Maybe I should check that\n(note-to-self)."}]},{type:a,value:e},{type:b,tag:an,props:{id:bB},children:[{type:b,tag:l,props:{href:"#install",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:hQ}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You can add this feature by adding a file in your salt states repository in the\n"},{type:b,tag:k,props:{},children:[{type:a,value:"_grains\u002F"}]},{type:a,value:" folder. The file can have any name ending by "},{type:b,tag:k,props:{},children:[{type:a,value:".py"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You can grab the grain python code "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F6b26b67321fe15870aa0",rel:[C,G,H],target:A,title:"Gist where you can add openstack meta-data in your grains"},children:[{type:a,value:"in this gist"}]},{type:a,value:Q}]},{type:a,value:e},{type:a,value:e},{type:a,value:e}]},dir:fc,path:"\u002Fblog\u002F2015\u002F05\u002Fadd-openstack-instance-meta-data-info-salt-grains",extension:aw,slug:"add-openstack-instance-meta-data-info-salt-grains",createdAt:ff,updatedAt:dD,category:dI,prettyfiedTemporalDate:{prettified:"Friday, May 22, 2015",temporalDate:"2015-05-22"}},{title:"Setting up Discourse with Fastly as a CDN provider and TLS",locale:bn,created:"2015-04-29T00:00:00.000Z",updated:bS,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F04\u002Fsetting-discourse-fastly-cdn-provider-ssl\u002F",status:av,revising:T,caption:ai,caracteresBizzares:ai,gallery:ai,migrateCode:T,migrateImages:T,migrateLinks:ai,categories:[aQ],tags:[bT,bJ,dl,as,"caching","varnish"],keywords:[hq,hr,bX,"TLS","NGINX",hs],preamble:{text:hv},coverImage:{src:ht,text:hu},excerpt:"Here’s how I setup a Discourse web application so that I can scale it by adding more Docker instances while keeping a low number of exposed web servers",description:"Allow horizontal scaling by separating internal app servers from exposed frontend web servers",title_alternate:ic,toc:[{id:id,depth:aj,text:ie},{id:dm,depth:aj,text:dn}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"The following is a copy of what I published in a question on\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Fenable-a-cdn-for-your-discourse\u002F14857\u002F26?u=renoirb",rel:[C,G,H],target:A},children:[{type:b,tag:u,props:{},children:[{type:a,value:"meta.discourse.org"}]},{type:a,value:" about \""},{type:b,tag:s,props:{},children:[{type:a,value:ic}]},{type:a,value:I}]},{type:a,value:" while\nworking on "},{type:b,tag:u,props:{},children:[{type:a,value:"discuss.webplatform.org"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:an,props:{id:id},children:[{type:b,tag:l,props:{href:"#setup-detail",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:ie}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Our setup uses "},{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.fastly.com\u002F",rel:[C,G,H],target:A},children:[{type:a,value:bX}]},{type:a,value:", and leverage "},{type:b,tag:l,props:{href:if0,rel:[C,G,H],target:A},children:[{type:a,value:"their SSL feature"}]},{type:a,value:". Note that in\norder for you to use SSL too, you'll have to contact them to have it onto your\naccount."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"SEE ALSO"}]},{type:a,value:" this "},{type:b,tag:aE,props:{to:ig},children:[{type:a,value:"post about "},{type:b,tag:u,props:{},children:[{type:a,value:ih}]}]},{type:a,value:". This step is "},{type:b,tag:s,props:{},children:[{type:a,value:"required"}]},{type:a,value:" and is a logical next step to this\nprocedure."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In summary;"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:ii},{type:b,tag:u,props:{},children:[{type:a,value:"users"}]},{type:a,value:dr},{type:b,tag:u,props:{},children:[{type:a,value:bX}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:ii},{type:b,tag:u,props:{},children:[{type:a,value:bX}]},{type:a,value:" and \""},{type:b,tag:u,props:{},children:[{type:a,value:fg}]},{type:a,value:"\" servers. (That's the IP we put into\nFastly hosts configuration, and are also refered to as \"origins\" or \"backends\"\nin CDN-speak)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Docker Discourse instance (\""},{type:b,tag:u,props:{},children:[{type:a,value:dL}]},{type:a,value:"\") which listens only on private network\nand port (e.g. "},{type:b,tag:u,props:{},children:[{type:a,value:"10.10.10.3:8000"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"More than two publicly exposed web servers (\""},{type:b,tag:u,props:{},children:[{type:a,value:fg}]},{type:a,value:"\"), with SSL, that we\nuse as \""},{type:b,tag:u,props:{},children:[{type:a,value:"backends"}]},{type:a,value:"\" in "},{type:b,tag:u,props:{},children:[{type:a,value:bX}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:fg}]},{type:a,value:" server running NGINX with an "},{type:b,tag:l,props:{href:"https:\u002F\u002Fnginx.org\u002Fen\u002Fdocs\u002Fhttp\u002Fngx_http_upstream_module.html",rel:[C,G,H],target:A},children:[{type:b,tag:u,props:{},children:[{type:a,value:dL}]},{type:a,value:" block"}]},{type:a,value:" proxying\ninternal "},{type:b,tag:u,props:{},children:[{type:a,value:dL}]},{type:a,value:" web servers that the Discourse Docker provides."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"We use NGINX's "},{type:b,tag:k,props:{},children:[{type:a,value:ij}]},{type:a,value:" HTTP header in the frontend to make sure we\nminimize connections"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Using this method, if we need to scale, we only need add more internal\n"},{type:b,tag:u,props:{},children:[{type:a,value:"Discourse Docker instances"}]},{type:a,value:", we can add more NGINX upstream entries."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note that I recommend to use direct private IP addresses instead of internal\nnames. It removes complexity and the need to rewrite "},{type:b,tag:k,props:{},children:[{type:a,value:"Hosts:"}]},{type:a,value:" HTTP headers."}]},{type:a,value:e},{type:b,tag:an,props:{id:dm},children:[{type:b,tag:l,props:{href:gR,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:dn}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Everything is the same as basic Fastly configuration, refer to "},{type:b,tag:l,props:{href:"https:\u002F\u002Fdocs.fastly.com\u002Fguides\u002Fgetting-started\u002Fsign-up-and-create-your-first-service",rel:[C,G,H],target:A},children:[{type:a,value:"setup your\ndomain"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Here are the differences;"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Setup your domain name with the CNAME Fastly will provide you ("},{type:b,tag:l,props:{href:if0,rel:[C,G,H],target:A},children:[{type:a,value:"you will have\nto contact them for your account though"}]},{type:a,value:"), ours is like that ;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,hF]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"discuss.webplatform.org. "},{type:b,tag:c,props:{className:[d,cK,r]},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cM,r]},children:[{type:a,value:dF}]},{type:a,value:" webplatform.map.fastly.net.\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In Fastly pannel at "},{type:b,tag:k,props:{},children:[{type:a,value:hE}]},{type:a,value:", we tell which publicly available\n"},{type:b,tag:u,props:{},children:[{type:a,value:ik}]},{type:a,value:" IPs"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Notice we use port "},{type:b,tag:k,props:{},children:[{type:a,value:dG}]},{type:a,value:aO},{type:b,tag:l,props:{href:"https:\u002F\u002Fdocs.fastly.com\u002Fguides\u002Fssl\u002Fcan-i-use-ssl-to-communicate-to-my-backend-servers",rel:[C,G,H],target:A},children:[{type:a,value:"so SSL is between "},{type:b,tag:u,props:{},children:[{type:a,value:bX}]},{type:a,value:" and our "},{type:b,tag:u,props:{},children:[{type:a,value:ik}]}]},{type:a,value:".\nAlso, you "},{type:b,tag:s,props:{},children:[{type:a,value:"can"}]},{type:a,value:" setup "},{type:b,tag:u,props:{},children:[{type:a,value:"Shielding"}]},{type:a,value:" (which is how you activate the CDN behavior\nwithin Fastly) by enabling it on only one. I typically set it on the one I call\n\"first\"."}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:hC,figcaption:hD},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:ab,props:{start:K},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In Fastly pannel "},{type:b,tag:k,props:{},children:[{type:a,value:"Configure -\u003E Settings -\u003E Request Settings"}]},{type:a,value:"; we make sure we\nforward "},{type:b,tag:k,props:{},children:[{type:a,value:"X-Forwarded-For"}]},{type:a,value:" header. You "},{type:b,tag:s,props:{},children:[{type:a,value:"DONT"}]},{type:a,value:" need this; you can remove it."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F04\u002Fdiscuss-fastly-XFF.png",figcaption:"Fastly service configuration, at Settings tab"},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:ab,props:{start:fh},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Frontend NGINX server has a block similar to this."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In our case, we use "},{type:b,tag:l,props:{href:"https:\u002F\u002Fsaltstack.com\u002Fcommunity\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"Salt Stack"}]},{type:a,value:" as the configuration management system, it\nbasically generates the Virtual Hosts for us as using "},{type:b,tag:l,props:{href:"https:\u002F\u002Fdocs.saltstack.com\u002Fen\u002Flatest\u002Ftopics\u002Freactor\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"Salt reactor"}]},{type:a,value:" system.\nEvery time a Docker instance would become available, the configuration will be\nrewritten using this template."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"{{ upstream_port }}"}]},{type:a,value:" would be at "},{type:b,tag:k,props:{},children:[{type:a,value:"8000"}]},{type:a,value:" in this example"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"{{ upstreams }}"}]},{type:a,value:" would be an array of current internal Docker instances, e.g.\n"},{type:b,tag:k,props:{},children:[{type:a,value:"['10.10.10.3','10.10.10.4']"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"{{ tld }}"}]},{type:a,value:" would be "},{type:b,tag:u,props:{},children:[{type:a,value:hI}]},{type:a,value:" in production, but can be anything else\nwe need in other deployment, it gives great flexibility."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Notice the use of "},{type:b,tag:k,props:{},children:[{type:a,value:"discoursepolling"}]},{type:a,value:" alongside the "},{type:b,tag:k,props:{},children:[{type:a,value:"discourse"}]},{type:a,value:" subdomain name.\nRefer to "},{type:b,tag:aE,props:{to:ig},children:[{type:a,value:"this post about "},{type:b,tag:u,props:{},children:[{type:a,value:ih}]}]},{type:a,value:" to understand its purpose"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,eX]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dL}]},{type:a,value:" upstream_discourse"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:"%- for b in upstreams %"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cI}]}]},{type:a,value:"    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:" b "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:P},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:" upstream_port "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:"%- endfor %"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ij}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"16"}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cI}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dA}]},{type:a,value:cN},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dG}]},{type:a,value:hH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dB}]},{type:a,value:" discoursepolling."}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:il},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"discourse."}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:il},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:am}]},{type:a,value:"    \u002Fvar\u002Fwww\u002Fhtml"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dH}]},{type:a,value:" common_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dH}]},{type:a,value:" ssl_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:im}]},{type:a,value:in0},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:io}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"ssl_certificate"}]},{type:a,value:"     \u002Fetc\u002Fssl\u002F2015\u002Fdiscuss.pem"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"ssl_certificate_key"}]},{type:a,value:" \u002Fetc\u002Fssl\u002F2015\u002F201503.key"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Use internal Docker runner instance exposed port"}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:hg}]},{type:a,value:hh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"proxy_pass"}]},{type:a,value:"             http:\u002F\u002Fupstream_discourse"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:dH}]},{type:a,value:"                proxy_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"proxy_intercept_errors"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:io}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:"\n\n        "},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Backend keepalive"}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# ref: http:\u002F\u002Fnginx.org\u002Fen\u002Fdocs\u002Fhttp\u002Fngx_http_upstream_module.html#keepalive"}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"proxy_http_version"}]},{type:a,value:" 1.1"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,at]},children:[{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"proxy_set_header"}]},{type:a,value:" Connection "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cR}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note that I removed the "},{type:b,tag:k,props:{},children:[{type:a,value:"include proxy_params;"}]},{type:a,value:" line. If you have lines similar\nto "},{type:b,tag:k,props:{},children:[{type:a,value:"proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"}]},{type:a,value:", you don't\nneed them (!)"}]}]},dir:"\u002Fblog\u002F2015\u002F04",path:"\u002Fblog\u002F2015\u002F04\u002Fsetting-discourse-fastly-cdn-provider-ssl",extension:aw,slug:"setting-discourse-fastly-cdn-provider-ssl",createdAt:ff,updatedAt:ff,category:aQ,prettyfiedTemporalDate:{prettified:"Wednesday, April 29, 2015",temporalDate:"2015-04-29"}},{title:"A few useful GNU\u002FLinux truth tests while creating salt states",locale:bn,created:"2015-03-10T00:00:00.000Z",updated:bS,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F03\u002Fuseful-gnulinux-truth-tests\u002F",status:av,revising:T,caption:ai,caracteresBizzares:ai,gallery:ai,migrateCode:T,migrateImages:ai,migrateLinks:ai,categories:[dI],tags:[as,cO,bJ,"procedures"],keywords:[ip,iq],description:ir,excerpt:ir,toc:[{id:is,depth:aj,text:it},{id:iu,depth:aj,text:"Change ownership on a folder only if its not what we expect"}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Nothing amazing here, just that in some situations I want to run commands in\nsalt stack only in some situations that should be enforced."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Those tests are written within Salt stack states and YAML, but the test are\nplain GNU\u002FLinux "},{type:b,tag:k,props:{},children:[{type:a,value:"tests"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:an,props:{id:is},children:[{type:b,tag:l,props:{ariaHidden:J,href:"#add-group-additional-membership-to-user",tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:it}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[bh,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:iv}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:fi}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:iw}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'grep \"^amavis\" \u002Fetc\u002Fgroup | grep -q -e clamav'"}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"A similar alternate could also be"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[bh,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:iv}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:fi}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:iw}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:dM},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"e '^amavis."},{type:b,tag:c,props:{className:[d,bs]},children:[{type:a,value:"*clamav$'"}]},{type:a,value:" \u002Fetc\u002Fgroup\n"}]}]}]},{type:a,value:e},{type:b,tag:an,props:{id:iu},children:[{type:b,tag:l,props:{ariaHidden:J,href:"#change-ownership-on-a-folder-only-if-its-not-what-we-expect",tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Change ownership on a folder "},{type:b,tag:s,props:{},children:[{type:a,value:"only if"}]},{type:a,value:" its not what we expect"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[bh,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:"% for es_folder in "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'\u002Fusr\u002Fshare\u002Felasticsearch\u002Fdata'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'\u002Fvar\u002Flib\u002Felasticsearch'"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:" %"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:"\nchown "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"R app"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:cS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"app"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"user "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:" es_folder "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:fi}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"onlyif"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"test `stat -c %G {{ es_folder }}` != app-user\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:"% endfor %"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e}]}]}]}]},dir:ix,path:"\u002Fblog\u002F2015\u002F03\u002Fuseful-gnulinux-truth-tests",extension:aw,slug:"useful-gnulinux-truth-tests",createdAt:dO,updatedAt:dO,category:dI,prettyfiedTemporalDate:{prettified:"Tuesday, March 10, 2015",temporalDate:"2015-03-10"}},{title:"Creating a new Ubuntu Salt master from the terminal using Cloud-Init",locale:bn,created:"2015-03-09T00:00:00.000Z",updated:bS,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F03\u002Fcreating-new-ubuntu-salt-master-terminal-using-cloud-init\u002F",status:av,revising:T,caption:ai,caracteresBizzares:ai,gallery:ai,migrateCode:T,migrateImages:ai,migrateLinks:ai,categories:[aQ],tags:[bT,as,cO,bJ],keywords:[ip,"OpenStack","Cloud Init"],excerpt:"Cloud-Init is made in a way that it handles distribution specific package installation details automatically. With it, you can create a new salt master in a few commands.",coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F03\u002Fopenstack-cloudinit-screenshot.jpg",text:"[Open Stack Cloud-Init](https:\u002F\u002Fcloudinit.readthedocs.io\u002Fen\u002Flatest\u002F) documentation.\n"},description:"Creating new Salt master in a few commands with Cloud-Init",toc:[{id:iy,depth:aj,text:iz}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"If you run on Virtual Machines on a provider that runs OpenStack you can also\nleverage a component that’s made to automatically install softwares at creation\ntime. With this, you can any new node in your cluster, including the salt-master\nin a few terminal commands."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Before starting out, you need to make sure your cloud provider runs Open Stack\nand has "},{type:b,tag:l,props:{href:dP,rel:[C,G,H],target:A,title:dQ},children:[{type:a,value:cj}]},{type:a,value:" enabled. To check it out, look in the \"Launch instance\"\ndialog to create a new VM a tab titled \"Post-Creation\", it might just simply\nwork."}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F03\u002Fopenstack-cloudinit-launchinstance-dialog.png",alt:dR},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:dP,rel:[C,G,H],target:A,title:dQ},children:[{type:a,value:cj}]},{type:a,value:" is basically reading a manifest that declares what’s the\nspecifics of the new VM and is part of the conversion from the initial image\nOpenStack into the specific instance you will be using. You can follow those\n"},{type:b,tag:l,props:{href:dS,rel:[C,G,H],target:A,title:iA},children:[{type:a,value:"two"}]},{type:a,value:g},{type:b,tag:l,props:{href:dS,rel:[C,G,H],target:A,title:fj},children:[{type:a,value:"articles"}]},{type:a,value:" that describes well how "},{type:b,tag:u,props:{},children:[{type:a,value:cj}]},{type:a,value:" works."}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:dP,rel:[C,G,H],target:A,title:dQ},children:[{type:a,value:cj}]},{type:a,value:" is made in a way that it handles distribution specific\npackage installation details automatically."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The following is specific to an "},{type:b,tag:u,props:{},children:[{type:a,value:"Ubuntu server"}]},{type:a,value:" VM, but you might need to adjust\nthe package names to match your current server distribution as those tools are\ngetting more and more popular in the industry."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Before testing out on a new VM, you could also check from an existing instance\nand ask through an HTTP request what was the current instance’ post-creation\nscript using cURL."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note that the IP address you see below is a virtual interface provided by\nOpenStack but can be navigated through HTTP, try it out like this;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[Z,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:dJ}]},{type:a,value:" http:\u002F\u002F169.254.169.254\u002Fopenstack\u002F\n\n  "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2012"}]},{type:a,value:"-08-10\n  "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:iB}]},{type:a,value:"-04-04\n  "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:iB}]},{type:a,value:"-10-17\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"If you see a similar output, you can ask what was the post-creation\nconfiguration (\"userdata\") it used at creation time. You can dig the tree,\nhere’s how you can find it in an OpenStack (CURRENT VERSION NICKNAME) cluster."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"For instance, my a salt master would have the following configuration;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[Z,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:dJ}]},{type:a,value:" http:\u002F\u002F169.254.169.254\u002Fopenstack\u002F2013-10-17\u002Fuser_data\n\n  "},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:iC}]},{type:a,value:"\n  manage_etc_hosts: "},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:dT}]},{type:a,value:"\n  manage-resolv-conf: "},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:dT}]},{type:a,value:"\n  locale: en_US.UTF-8\n  timezone: America\u002FNew_York\n  package_upgrade: "},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:J}]},{type:a,value:"\n  package_update: "},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:J}]},{type:a,value:"\n  package_reboot_if_required: "},{type:b,tag:c,props:{className:[d,aY]},children:[{type:a,value:J}]},{type:a,value:"\n\n  ssh_import_id: "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:"saltstack"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\n  apt_sources:\n    - source: "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"ppa:saltstack\u002Fsalt\""}]},{type:a,value:"\n\n  packages:\n    - salt-minion\n    - salt-common\n    - salt-master\n    - python-software-properties\n    - software-properties-common\n    - python-novaclient\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"To boot an instance from the terminal, you can use the \"nova\" command like this;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[Z,z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:iD},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fk}]},{type:a,value:fl},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n     --user-data \u002Fsrv\u002Fcloudconfig.yml "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fm}]},{type:a,value:" keyname "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fn}]},{type:a,value:" subsonic "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:iE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n     salt\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"This assumes that you have the following available in your OpenStack dashboard:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"An SSH public key called \"keyname\" in your tenant"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"A flavor called \"subsonic\" that has a predefined configuration of vCPU, vRAM,\netc."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"A security group called \"default\", you could use more than one by separating\nthem by comas; e.g. default,foo,bar"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"A text file in "},{type:b,tag:k,props:{},children:[{type:a,value:iF}]},{type:a,value:" in YAML format that holds your\n"},{type:b,tag:l,props:{href:dP,rel:[C,G,H],target:A,title:dQ},children:[{type:a,value:cj}]},{type:a,value:" (a.k.a. \"userdata\") configuration."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You have your nova configuration available (look in your cloud provider\ndashboard \"Download OpenStack RC File\" link in \"Access & Security\" and \"API\naccess\") and available in your server’s "},{type:b,tag:k,props:{},children:[{type:a,value:iG}]},{type:a,value:" profile folder."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You have \""},{type:b,tag:k,props:{},children:[{type:a,value:iH}]},{type:a,value:"\" (or its equivalent) installed"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"To test it out yourself, you could use the block I gave earlier and create a\nfile in "},{type:b,tag:k,props:{},children:[{type:a,value:iF}]},{type:a,value:" and give the the "},{type:b,tag:u,props:{},children:[{type:a,value:fo}]},{type:a,value:" command a try."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In this case, you might want to call the new VM \"salt\" as the default Salt stack\nconfiguration will try to communicate to it to make it its salt master. In this\ncase, it’ll be itself."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The creation of the salt master could also contain a few git repositories to be\ncloned at the salt master creation time making your salt master as easily\nreplaceable as any other components in your \"cloud\"."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"A set of sample scripts I use to create a new salt master off of a few\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F01c09df78f05612c281f",rel:[C,G,H],target:A},children:[{type:a,value:"git repositories can be found in the following Gist"}]}]},{type:a,value:e},{type:b,tag:an,props:{id:iy},children:[{type:b,tag:l,props:{href:"#read-more",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:iz}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The following articles was found to be describing in more detail what I\nintroduced in this article."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:dS,rel:[C,G,H],target:A,title:iA},children:[{type:a,value:"Easily automate The provisioning of your DigitalOcean Droplets"}]},{type:a,value:". Don’t be\nfooled by the name, the article is actually describing "},{type:b,tag:u,props:{},children:[{type:a,value:cj}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:dS,rel:[C,G,H],target:A,title:fj},children:[{type:a,value:fj}]}]},{type:a,value:e}]}]},dir:ix,path:"\u002Fblog\u002F2015\u002F03\u002Fcreating-new-ubuntu-salt-master-terminal-using-cloud-init",extension:aw,slug:"creating-new-ubuntu-salt-master-terminal-using-cloud-init",createdAt:dO,updatedAt:dO,category:aQ,prettyfiedTemporalDate:{prettified:"Monday, March 9, 2015",temporalDate:"2015-03-09"}},{title:"Install PHP5 Memcached PECL extension and have it support igbinary",locale:bn,created:"2015-02-18T00:00:00.000Z",updated:bS,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F02\u002Finstall-php5-memcached-pecl-extension-support-igbinary\u002F",status:av,revising:ai,migrateLinks:T,migrateImages:ai,gallery:ai,caption:ai,categories:[aQ],tags:[as,bJ,bo],keywords:["Memcached","PECL","Ubuntu","dpkg","PHP5","php-fpm"],coverImage:{src:"~\u002Fassets\u002Fimages\u002Flogos\u002Fphp-igbinary.png",text:"[Igbinary][igbinary-github] is a drop in replacement for the standard *PHP serializer*.\nInstead of the time and space consuming textual representation used by PHP’s serialize, *igbinary* stores PHP data structures in a compact binary form.\n[igbinary-github]: https:\u002F\u002Fgithub.com\u002Figbinary\u002Figbinary\n"},excerpt:"Main part of my job is to make sure that its easy to reinstall a VM. Sometimes you need to build a package from source. How do you distribute it? Here’s one way",toc:[{id:iI,depth:aj,text:iJ},{id:iK,depth:aj,text:iL},{id:iM,depth:aj,text:iN},{id:do0,depth:aj,text:dp}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"I was trying to figure out why my PHP setup would never have both "},{type:b,tag:k,props:{},children:[{type:a,value:iO}]},{type:a,value:" to\nbe used to serialize sessions in Memcached using current Memcached PECL\nextension."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"After some research I found a procedure in an answer on StackOverflow."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"But it didn't solve my main requirement: "},{type:b,tag:s,props:{},children:[{type:a,value:"Since I do automated deployment, I\nMUST be able to move packages around"}]},{type:a,value:". Since all my VMs are using the same\ndistribution and that I already have my own "},{type:b,tag:u,props:{},children:[{type:a,value:iP}]},{type:a,value:" repo, I could just add "},{type:b,tag:u,props:{},children:[{type:a,value:"one\nmore"}]},{type:a,value:" deb file."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"My objective was then now to package it for deployment. To do this, I discovered\n"},{type:b,tag:l,props:{href:iQ,rel:[C,G,H],target:A},children:[{type:a,value:"Jordan Sissel's project called "},{type:b,tag:s,props:{},children:[{type:a,value:iR}]}]},{type:a,value:" which stands for \""},{type:b,tag:u,props:{},children:[{type:a,value:"Freaking Package\nManager"}]},{type:a,value:"\" (sic)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"My target deployment runs on Ubuntu 14.04 LTS and I want it to replace upstream\n"},{type:b,tag:k,props:{},children:[{type:a,value:"php5-memcached"}]},{type:a,value:" package as a simple "},{type:b,tag:u,props:{},children:[{type:a,value:iS}]},{type:a,value:" file."}]},{type:a,value:e},{type:b,tag:an,props:{id:iI},children:[{type:b,tag:l,props:{href:"#build-from-pecl-source",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:iJ}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:"NOTE"}]},{type:a,value:" The following was run on an Ubuntu 14.04 VM with "},{type:b,tag:l,props:{href:iT,rel:[C,G,H],target:A},children:[{type:a,value:"@rynop's procedure"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Setting the machine up to make a package."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:iU},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:iU},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cT}]},{type:a,value:" php5-dev pkg-config php-pear\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:aj},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Follow steps from the procedure. Those were taken from the "},{type:b,tag:u,props:{},children:[{type:b,tag:l,props:{href:iT,rel:[C,G,H],target:A},children:[{type:a,value:"Original procedure"}]}]},{type:a,value:", just before issuing "},{type:b,tag:k,props:{},children:[{type:a,value:".\u002Fconfigure"}]},{type:a,value:Q}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"pecl_memcached_ver"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"2.2.0\""}]},{type:a,value:"\npecl download memcached-"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fp}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:iV}]},{type:a,value:" xzvf memcached-"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fp}]},{type:a,value:".tgz\n"},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:" memcached-"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fp}]},{type:a,value:"\u002F\nphpize\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:K},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I realized that under Ubuntu 14.04 we also needed to "},{type:b,tag:u,props:{},children:[{type:a,value:"disable Memcached SASL"}]},{type:a,value:"\nso I had to do it differently"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:".\u002Fconfigure "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n    --enable-memcached-igbinary "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n    --disable-memcached-sasl\n"}]}]}]},{type:a,value:e},{type:b,tag:an,props:{id:iK},children:[{type:b,tag:l,props:{href:"#make-a-deb-package",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:iL}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Install "},{type:b,tag:l,props:{href:iQ,rel:[C,G,H],target:A},children:[{type:a,value:"jordansissel\u002Ffpm"}]},{type:a,value:". Ideally this should be done on a machine or VM\nimage you're OK building things on and you can re-use."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cT}]},{type:a,value:" ruby-dev gcc\n\n"},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Install fpm gem globally."}]},{type:a,value:"\ngem "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bB}]},{type:a,value:" fpm\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:aj},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Check the package contents you want to replace and let's replicate for our\nown purposes."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:iW},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"--list"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:iX}]},{type:a,value:" php5-memcached\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"find"}]},{type:a,value:" \u002Fvar\u002Fcache\u002Fapt "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-type"}]},{type:a,value:" f "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-name"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'*php5-memcached*'"}]},{type:a,value:"\ndpkg "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:iY}]},{type:a,value:" \u002Fvar\u002Fcache\u002Fapt\u002Farchives\u002Fphp5-memcached_2.1.0-6build1_amd64.deb\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:K},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I figured out in the output that I only needed a few folders,\n"},{type:b,tag:k,props:{},children:[{type:a,value:"etc\u002Fphp5\u002Fmods-available\u002F"}]},{type:a,value:dr},{type:b,tag:k,props:{},children:[{type:a,value:"usr\u002Flib\u002Fphp5\u002Ffoo"}]},{type:a,value:", so I created them\nmanually."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:" etc\u002Fphp5\u002Fmods-available\u002F\n\n"},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Adjust memcached.ini to suit your tastes, then prepare it for packaging"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ds}]},{type:a,value:" memcached.ini etc\u002Fphp5\u002Fmods-available\u002F\n\n"},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Make sure the usr\u002Flib\u002Fphp5\u002Ffoo path matches in"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# the result of `dpkg -c` you issued"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:" usr\u002Flib\u002Fphp5\u002F20121212\u002F\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ds}]},{type:a,value:" modules\u002Fmemcached.so usr\u002Flib\u002Fphp5\u002F20121212\u002F\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:fh},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Magic will happen"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"fpm "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"dir"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-t"}]},{type:a,value:" deb "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:" php5-memcached "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2.2"}]},{type:a,value:".0-wpd "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-m"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'\u003Cyour@email.org\u003E'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"--description"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'PHP 5.5 PECL igbinary + memcached support'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-d"}]},{type:a,value:" libmemcached10 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n    etc\u002F usr\u002F\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"I could have used "},{type:b,tag:k,props:{},children:[{type:a,value:"--replaces REPLACES"}]},{type:a,value:" in "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fjordansissel\u002Ffpm\u002Fwiki",rel:[C,G,H],target:A},children:[{type:b,tag:k,props:{},children:[{type:a,value:iR}]},{type:a,value:" options"}]},{type:a,value:", but when I did\nthis package, I didn't know which syntax to use. Its an optional argument\nanyway."}]},{type:a,value:e},{type:b,tag:ab,props:{start:5},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Test if the package works"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:iW},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-i"}]},{type:a,value:" \u002Fsrv\u002Fwebplatform\u002Fapt\u002Fphp5-memcached_2.2.0-wpd_amd64.deb\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The output ..."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"  (Reading database ... 118781 files and directories currently installed.)\n  Preparing to unpack ...\u002Fphp5-memcached_2.2.0-wpd_amd64.deb ...\n  Unpacking php5-memcached (2.2.0-wpd) over (2.1.0-6build1) ...\n  Setting up php5-memcached (2.2.0-wpd) ...\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Success!"}]},{type:a,value:e},{type:b,tag:ab,props:{start:iZ},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Look at the "},{type:b,tag:k,props:{},children:[{type:a,value:"phpinfo"}]},{type:a,value:" output"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F02\u002Fsessions_memcached_after.png",alt:dR},children:[{type:a,value:"\nAter: registered session handlers\n"}]},{type:a,value:e},{type:b,tag:an,props:{id:iM},children:[{type:b,tag:l,props:{href:"#update-your-private-apt-repository-or-create-one",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:iN}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Then, in your own apt repository (if you do have one) here's how I rebuild\nthe index. If you only have a handful of packages, it can simply be a folder\nwith a bunch of deb files."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bH}]},{type:a,value:" \u002Fsrv\u002Fapt\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ds}]},{type:a,value:" php5-memcached_2.2.0-wpd_amd64.deb \u002Fsrv\u002Fapt\n"},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:"  \u002Fsrv\u002Fapt\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cT}]},{type:a,value:" dpkg-dev\ndpkg-scanpackages "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:" \u002Fdev\u002Fnull "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:i_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-9c"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" Packages.gz\n"},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'deb file:\u002Fsrv\u002Fapt .\u002F'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" \u002Fetc\u002Fapt\u002Fsources.list.d\u002Ffoo.list\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"If you want something more scalable than a directory with a bunch of "},{type:b,tag:k,props:{},children:[{type:a,value:iS}]},{type:a,value:" and\na "},{type:b,tag:k,props:{},children:[{type:a,value:"Package.gz"}]},{type:a,value:" that you rsync around, there are other procedures available\nonline."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Done!"}]},{type:a,value:e},{type:b,tag:an,props:{id:do0},children:[{type:b,tag:l,props:{href:hm,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:dp}]},{type:a,value:e},{type:b,tag:w,props:{style:eY,className:[eZ,e_,e$,fa,fb]},children:[{type:a,value:e},{type:b,tag:ay,props:{className:[ch],src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F02\u002Fsessions_memcached_before2.png",alt:dR},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Session handlers shows memcached"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ay,props:{className:[ch],src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F02\u002Fsessions_memcached_before.png",alt:dR},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:iO}]},{type:a,value:" support no?"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},dir:"\u002Fblog\u002F2015\u002F02",path:"\u002Fblog\u002F2015\u002F02\u002Finstall-php5-memcached-pecl-extension-support-igbinary",extension:aw,slug:"install-php5-memcached-pecl-extension-support-igbinary",createdAt:i$,updatedAt:i$,category:aQ,prettyfiedTemporalDate:{prettified:"Wednesday, February 18, 2015",temporalDate:"2015-02-18"}},{title:ja,locale:bn,created:"2015-01-28T00:00:00.000Z",updated:"2015-02-03T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F01\u002Fcreate-mariadb-cluster-replication-ssl-salt-stack\u002F",status:av,revising:ai,migrateLinks:T,migrateImages:ai,gallery:ai,caption:ai,categories:[aQ],tags:[as,bZ,cO,bJ],keywords:["replication","database-server","cluster","configuration",dU,"MariaDB"],description:ja,excerpt:"Some notes on how I created our updated MariaDB database cluster with replication.",preamble:{text:"The following might still work if all software versions are still available in the exact versions ranges they were when initially published.\nPart of this article was written while maintaining WebPlatform’s Infrastructure maintenance. Mostly [in *WPD\u002FInfrastructure\u002Fprocedures\u002F* **Replacing a VM**](https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fprocedures\u002FReplacing_a_VM\u002F), and [*WPD\u002FInfrastructure\u002Fprocedures\u002F* **Managing  MariaDB replication**](https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fprocedures\u002FManaging_MySQL_replication\u002F)\n"},toc:[{id:jb,depth:aj,text:jc},{id:bo,depth:aj,text:jd},{id:je,depth:K,text:jf},{id:jg,depth:K,text:jh},{id:ji,depth:K,text:jj},{id:jk,depth:K,text:jl},{id:jm,depth:K,text:jn},{id:dV,depth:K,text:dW}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"While reworking WebPlatform infrastructure I had to rebuild a new database\ncluster."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The objective of the cluster is to have more than one database server so that\nour web applications can make reads on any node in the cluster."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"While the system has replication, and I can send reads on any nodes on the\ncluster. There is a flaw in it too, any nodes can "},{type:b,tag:u,props:{},children:[{type:a,value:"also"}]},{type:a,value:" make writes; nothing is\nblocking it."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"My plan is to change this so that it would be OK to send writes to anybody in\nthe cluster. There is now something called \"Galera\" that would allow me that.\nBut that's outside of the scope of this article."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In the current configuration, I'm purposefully not fixing it because my\nconfiguration management makes sure only the current master. So in this setup, I\ndecided that the VM that gets writes has a specific mention of \"masterdb\" in the\nhostname."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"That way, its easy to see and it gives me the ability to change master at\nanytime if an emergency requires me to."}]},{type:a,value:e},{type:b,tag:an,props:{id:jb},children:[{type:b,tag:l,props:{href:"#changing-mariadb-replication-master",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:jc}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Changing master could be done in the following order:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Lock writes on masterdb databases"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Wait replication to catch up"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On secondary database servers; remove replication configuration"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Tell all web apps to use new database master"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Remove database lock"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Setup new replication configuration to use new master"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Thanks to the fact that I manage "},{type:b,tag:s,props:{},children:[{type:a,value:"everything"}]},{type:a,value:" through configruation management\n--including the web app configuration files-- its only a matter of applying the\nstates everywhere in the cluster. That makes it fairly easy to do such an heavy\nmove, even under stress."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"This post will be updated once I have completed the multi writes setup."}]},{type:a,value:e},{type:b,tag:an,props:{id:bo},children:[{type:b,tag:l,props:{href:"#procedure",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:jd}]},{type:a,value:e},{type:b,tag:L,props:{id:je},children:[{type:b,tag:l,props:{href:"#assumptions",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:jf}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The rest of this article will assume the following:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You are running VMs on OpenStack, and do have credentials to make API calls\nto it"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You have a Salt master already running"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Your salt master has at least "},{type:b,tag:k,props:{},children:[{type:a,value:iH}]},{type:a,value:dK},{type:b,tag:k,props:{},children:[{type:a,value:fo}]},{type:a,value:" commands) available\non it"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You have your Open Stack credentials already loaded in your salt master's\n"},{type:b,tag:k,props:{},children:[{type:a,value:iG}]},{type:a,value:" so you can use "},{type:b,tag:k,props:{},children:[{type:a,value:fo}]},{type:a,value:" directly"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:jg},children:[{type:b,tag:l,props:{href:"#from-the-salt-master-initiate-a-few-vms-to-use-for-your-database-cluster",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:jh}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Before booting, ensure you have the following details in your OpenStack\ncluster and salt master;"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You have a SSH key in your OpenStack cluster. Mine is called\n\"renoirb-production\" and my salt master user has the private key preinstalled"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You have a "},{type:b,tag:k,props:{},children:[{type:a,value:jo}]},{type:a,value:" file that has settings that points to your salt\nmaster"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cU}]},{type:a,value:" \u002Fsrv\u002Fopsconfigs\u002Fuserdata.txt\n"}]}]}]},{type:a,value:e},{type:a,value:e},{type:b,tag:fq,props:{title:jp},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"I've noticed that this "},{type:b,tag:k,props:{},children:[{type:a,value:jo}]},{type:a,value:" file I've initially written for this\narticle has then been part of "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fops\u002Fblob\u002Ff6e0390a\u002Fsalt-master",rel:[C,G,H],target:A,title:"salt-master\u002F* on GitHub.com\u002Fwebplatform\u002Fops as of 2015-06-08"},children:[{type:a,value:"WebPlatform’s \"ops\" repository"}]},{type:a,value:"\nfrom which I was (2015) using to work locally. In this repo, there was the\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fops\u002Fblob\u002Ff6e0390a\u002Fsalt-master\u002Fsalt-userdata.yml",rel:[C,G,H],target:A,title:"salt-master\u002Fsalt-userdata.yml on GitHub.com\u002Fwebplatform\u002Fops as of 2015-06-08"},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt-master\u002Fsalt-userdata.yml"}]}]},{type:a,value:Q}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:iC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"manage_etc_hosts"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aY,bs]},children:[{type:a,value:dT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Has to be set to false for everybody. Otherwise we need a DNS"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"manage-resolv-conf"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aY,bs]},children:[{type:a,value:dT}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"locale"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:" en_US.UTF"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"8"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"timezone"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:" America\u002FNew_York\n"},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"package_upgrade"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aY,bs]},children:[{type:a,value:J}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"package_update"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aY,bs]},children:[{type:a,value:J}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"package_reboot_if_required"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aY,bs]},children:[{type:a,value:J}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# This is run at EVERY boot, good to ensure things are at the right place"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# IMPORTANT, make sure that `10.10.10.22` is a valid local DNS server."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"bootcmd"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dM},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"e 'nameserver' \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fhead "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:" printf\n    \"nameserver 10.10.10.22\\n\" "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ae}]},{type:a,value:" \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fhead\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dM},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"e 'wpdn' \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fbase "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:" printf \"search\n    production.wpdn\\ndomain production.wpdn\\nnameserver 8.8.8.8\" "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ae}]},{type:a,value:"\n    \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fbase\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dM},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dN},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"e 'wpdn' \u002Fetc\u002Fresolv.conf "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:" resolvconf "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"u\n\n"},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"runcmd"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:" sed "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"i \"s\u002F127.0.0.1 localhost\u002F127.0.1.1 $(hostname).production.wpdn\n    $(hostname)\\n127.0.0.1 localhost\u002F\" \u002Fetc\u002Fhosts\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"get install software"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"properties"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"common python"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"software"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"properties\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:" add"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:iP},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"repository "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"y ppa"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"saltstack\u002Fsalt\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"get update\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:jq},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"y upgrade\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:dX},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:jq},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"y autoremove\n\n"},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"packages"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"minion\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"common\n"},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# vim: et ts=2 sw=2 ft=yaml syntax=yaml"}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ab,props:{start:aj},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Create two "},{type:b,tag:k,props:{},children:[{type:a,value:fr}]},{type:a,value:"-type VMs"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:iD},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fk}]},{type:a,value:fl},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n     --user-data \u002Fsrv\u002Fopsconfigs\u002Fuserdata.txt "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fm}]},{type:a,value:jr},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ck},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fn}]},{type:a,value:" lightspeed "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:iE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n     db1-masterdb\n\n nova boot "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fk}]},{type:a,value:fl},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n      --user-data \u002Fsrv\u002Fopsconfigs\u002Fuserdata.txt "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fm}]},{type:a,value:jr},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:fn}]},{type:a,value:" supersonic "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n      --security-groups default "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n      db2\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Accept them to the salt"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt-key "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:js}]},{type:a,value:" db1-masterdb\nsalt-key "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:js}]},{type:a,value:" db2\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"As an aside. Imagine you want to run dependencies automatically once a VM is\npart of your salt-master. For example, adding its private IP address in a local\n"},{type:b,tag:u,props:{},children:[{type:a,value:"Redis"}]},{type:a,value:dq},{type:b,tag:u,props:{},children:[{type:a,value:"Etcd"}]},{type:a,value:" live configuration object. One could create a "},{type:b,tag:l,props:{href:"https:\u002F\u002Fdocs.saltproject.io\u002Fen\u002Flatest\u002Ftopics\u002Freactor\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"Salt\n\""},{type:b,tag:u,props:{},children:[{type:a,value:"Reactor"}]},{type:a,value:I}]},{type:a,value:" and make "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F563cb12326b92b22a452",rel:[C,G,H],target:A},children:[{type:a,value:"sure the data is refreshed. This gist is a good\nstarting point"}]},{type:a,value:" 4. Wait the VM build to finish and get their private IP\naddresses"}]},{type:a,value:e},{type:b,tag:ab,props:{start:fh},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Wait the VM build to finish and get their private IP addresses"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"nova list "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:iX}]},{type:a,value:" db\n\n  "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:jt},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:" db1-masterdb "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:ju},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:jv},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:jw},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:fs}]},{type:a,value:".10.73 "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:jt},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:" db2          "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:ju},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:jv},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:jw},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:fs}]},{type:a,value:".10.74 "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:ay,props:{style:bK,src:hJ,alt:"OpenStack nova command",figcaption:g},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Command output when issuing "},{type:b,tag:k,props:{},children:[{type:a,value:"nova list"}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Add them to the pillars. Note that the part of the name \"masterdb\" is what\nSalt states uses to know which one will get the writes to. Note that in the\nend, the web apps configs will use the private IP address. Its quicker to\ngenerate pages if the backend doesn't need to make name resolution each time\nit makes database queries. This is why we have to reflect the pillars. Ensure\nthe following structure exists in the file."}]},{type:a,value:e},{type:b,tag:fq,props:{title:jp},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The following file is now "},{type:b,tag:s,props:{},children:[{type:a,value:"GitHub.com\u002FWebPlatform\u002Fsalt-pillar"}]},{type:a,value:" project,\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-pillar\u002Ftree\u002F3d718578\u002Finfra",rel:[C,G,H],target:A,title:"infra\u002F* on GitHub.com\u002Fwebplatform\u002Fsalt-pillar as of 2015-06-08"},children:[{type:a,value:"and looked like this"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Edit \u002Fsrv\u002Fpillar\u002Finfra\u002Finit.sls at the following blocks"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"infra"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:jx}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:" 10.10.10.73\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Refer to the right IP address in the configuration file with a similar salt\n"},{type:b,tag:k,props:{},children:[{type:a,value:"pillar.get"}]},{type:a,value:" reference ("},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fblob\u002F20150608\u002Fcode\u002Ffiles\u002Fblog\u002Flocal.php.jinja",rel:[C,G,H],target:A,title:"code\u002Ffiles\u002Fblog\u002Flocal.php.jinja on GitHub.com\u002Fwebplatform\u002Fsalt-states as of 2015-06-08"},children:[{type:a,value:"config template"}]},{type:a,value:aO},{type:b,tag:l,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fblob\u002F20150608\u002Fcode\u002Fblog.sls#L48-L55",rel:[C,G,H],target:A,title:"code\u002Fblog.sls on GitHub.com\u002Fwebplatform\u002Fsalt-states as of 2015-06-08"},children:[{type:a,value:"state to write\nconfig template to filesystem"}]},{type:a,value:jy}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"\u002Fsrv\u002Fwebplatform\u002Fblog\u002Fwp-config.php"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"file.managed"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:jz}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"\u002F\u002Fcode\u002Ffiles\u002Fblog\u002Fwp"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"config.php.jinja\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"template"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:" jinja\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:jA},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:jB},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"group"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:jA},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:jB},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"context"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"db_creds"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:jC}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"('accounts"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"wiki"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"db') "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"masterdb_ip"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:cV},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:jC}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"('infra"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:jx},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:"masterdb') "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"require"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"cmd"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:" rsync"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"blog\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"... and the "},{type:b,tag:k,props:{},children:[{type:a,value:"wp-config.php.jinja"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,fu]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,cl,fu]},children:[{type:b,tag:c,props:{className:[d,"delimiter",bs]},children:[{type:a,value:"\u003C?php"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"## Managed by Salt Stack, please DO NOT TOUCH, or ALL CHANGES WILL be LOST!"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"## source {{ source }}"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'DB_CHARSET'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n,co]},children:[{type:a,value:"\"utf8\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'DB_COLLATE'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n,co]},children:[{type:a,value:cR}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'DB_HOST'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,n,co]},children:[{type:a,value:"\"{{ masterdb_ip|default('127.0.0.1')    }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'DB_NAME'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,n,co]},children:[{type:a,value:"\"{{ db_creds.database|default('wpblog') }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'DB_USER'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,n,co]},children:[{type:a,value:"\"{{ db_creds.username|default('root')   }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'DB_PASSWORD'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,co]},children:[{type:a,value:"\"{{ db_creds.password|default('')       }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e}]}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:7},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Refresh the pillars, rebuild the salt master "},{type:b,tag:k,props:{},children:[{type:a,value:gU}]},{type:a,value:", and test it\nout."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt-call saltutil.sync_all\nsalt salt state.highstate\n\nsalt-call pillar.get infra:hosts_entries:masterdb\n"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" local:\n"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:"   "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:fs}]},{type:a,value:".10.73\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Make sure the VMs has the same version of salt as you do"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:" salt-call test.version\n "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" local:\n "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:fv}]},{type:a,value:".0\n\n salt db"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"* test.version\n "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" db2:\n "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:fv}]},{type:a,value:".0\n "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" db1-masterdb:\n "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:fv}]},{type:a,value:".0\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Kick the VMs installation"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt db"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"* state.highstate\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Highstate takes a while to run, but once you are done, you should be able to\nwork with them with the remaining of this tutorial"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:fw},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:dY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:jD}]},{type:a,value:" mysql.version\n"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:jF}]},{type:a,value:jG},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jH},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:bM},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:jF}]},{type:a,value:jG}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Each db-type VM MySQL\u002FMariaDB\u002FPercona server will have a "},{type:b,tag:u,props:{},children:[{type:a,value:"different"}]},{type:a,value:" database\nmaintenance users defined in "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fdebian.cnf"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Make sure you don't overwrite them unless you import everything all at once,\nincluding the users and their grants. 11. Check that each db VMs has their SSL\ncertificate generated by Salt"}]},{type:a,value:e},{type:b,tag:ab,props:{start:11},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Check that each db VMs has their SSL certificate generated by Salt"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:fw},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:dY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:jD}]},{type:a,value:" cmd.run "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'ls \u002Fetc\u002Fmysql | grep pem'"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jI},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jJ},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jK},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jL},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jM},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jN},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jO},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jP},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jH},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jI},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jJ},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jK},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jL},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jM},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jN},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jO},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:jP}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Each file is a certificate so they can use to make replication through SSL."}]},{type:a,value:e},{type:b,tag:L,props:{id:ji},children:[{type:b,tag:l,props:{href:"#now-on-each-database-server",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:jj}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Connect to both db nodes using the salt as a Jump Host"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bV}]},{type:a,value:" masterdb.production.wpdn\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bV}]},{type:a,value:" db2.production.wpdn\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Get to the MySQL\u002FMariaDB\u002FPercona prompt on each VMs."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"If you are used with terminal screens that allows to keep sessions running even\nif you get disconnected, that would be ideal. We never know if the connection\nhangs."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"On WebPlatform system we do have "},{type:b,tag:k,props:{},children:[{type:a,value:dv}]},{type:a,value:" but "},{type:b,tag:k,props:{},children:[{type:a,value:gV}]},{type:a,value:" can do too."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"mysql\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:K},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Check if SSL is enabled on both MySQL\u002FMariaDB\u002FPercona servers"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u003E MariaDB [(none)]\u003E SHOW VARIABLES like '%ssl%';\n\u003E +---------------+----------------------------+\n\u003E | Variable_name | Value                      |\n\u003E +---------------+----------------------------+\n\u003E | have_openssl  | YES                        |\n\u003E | have_ssl      | YES                        |\n\u003E | ssl_ca        | \u002Fetc\u002Fmysql\u002Fca-cert.pem     |\n\u003E | ssl_capath    |                            |\n\u003E | ssl_cert      | \u002Fetc\u002Fmysql\u002Fserver-cert.pem |\n\u003E | ssl_cipher    | DHE-RSA-AES256-SHA         |\n\u003E | ssl_crl       |                            |\n\u003E | ssl_crlpath   |                            |\n\u003E | ssl_key       | \u002Fetc\u002Fmysql\u002Fserver-key.pem  |\n\u003E +---------------+----------------------------+\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Generate SSL certificates for MySQL\u002FMariaDB\u002FPercona server, see "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002Fdee3c76a88b3c44da564",rel:[C,G,H],target:A},children:[{type:a,value:"this\ngist"}]},{type:a,value:" on how to do it."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Places to double check; To see which config keys sets what's shown in the\nprevious screen, take a look in the VMs "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fconf.d\u002F"}]},{type:a,value:" folders with\nsimilar entries."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:fx}]},{type:a,value:" is what allows us to communicate between servers, before MySQL\n5.5 we had "},{type:b,tag:k,props:{},children:[{type:a,value:"skip-networking"}]},{type:a,value:" but now only a "},{type:b,tag:k,props:{},children:[{type:a,value:fx}]},{type:a,value:" is sufficient. Make\nsure that your security groups allows only local network connections though."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:jQ}]},{type:a,value:" MUST be with a different number for each nodes. Make sure no\nserver has the same number."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,"language-ini"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,jR]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,jS,jT]},children:[{type:a,value:"mysqld"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:fx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"0.0.0.0"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:"log-basename"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"mariadbrepl"}]},{type:a,value:"\nlog-bin\n"},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:"binlog-format"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"row"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:jQ}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:bi}]},{type:a,value:jU},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:"ssl-cipher"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"DHE-RSA-AES256-SHA"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:"ssl-ca"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fca-cert.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:jV}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fserver-cert.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:jW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fserver-key.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,jR]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,jS,jT]},children:[{type:a,value:jX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]}]},{type:a,value:jU},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:jV}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fclient-cert.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,V,bt]},children:[{type:a,value:jW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,bu,bv]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fclient-key.pem"}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ab,props:{start:iZ},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"From the database master"}]},{type:a,value:" (a.k.a \"masterdb\"), Get the replication log\nposition; We'll need the "},{type:b,tag:k,props:{},children:[{type:a,value:"File"}]},{type:a,value:dr},{type:b,tag:k,props:{},children:[{type:a,value:"Position"}]},{type:a,value:" values to setup the\nreplication node."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"MariaDB [(none)]\u003E show master status;\n\u003E +------------------------+----------+--------------+------------------+\n\u003E | File                   | Position | Binlog_Do_DB | Binlog_Ignore_DB |\n\u003E +------------------------+----------+--------------+------------------+\n\u003E | mariadbrepl-bin.000002 |      644 |              |                  |\n\u003E +------------------------+----------+--------------+------------------+\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Configure the "},{type:b,tag:k,props:{},children:[{type:a,value:ft}]},{type:a,value:" to accept replication users. "},{type:b,tag:s,props:{},children:[{type:a,value:"From the salt\nmaster"}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:fw},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:dY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'roles:masterdb'"}]},{type:a,value:" mysql.user_create replication_user "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'%'"}]},{type:a,value:" foobarbaz\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"NOTE: My salt states script creates a grain in "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fetc\u002Fsalt\u002Fgrains"}]},{type:a,value:" with the\nfollowing data;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,bh]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,V,_]},children:[{type:a,value:"roles"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:P}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:" masterdb\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Alternatively, you could call the VM "},{type:b,tag:k,props:{},children:[{type:a,value:"db1-masterdb"}]},{type:a,value:", use a "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002Fb2e0222ad52e5d453298",rel:[C,G,H],target:A},children:[{type:a,value:"small python script\nthat'll parse the information for you and make it a "},{type:b,tag:s,props:{},children:[{type:a,value:"grain"}]},{type:a,value:"\nautomatically"}]},{type:a,value:". 8. "},{type:b,tag:s,props:{},children:[{type:a,value:"Back to the masterdb VM"}]},{type:a,value:", check if the user exists,\nensure SSL is required"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"MariaDB [(none)]\u003E show grants for 'replication_user';\n\u003E +---------------------------------------------------------------------------------------+\n\u003E | Grants for replication_user@%                                                         |\n\u003E +---------------------------------------------------------------------------------------+\n\u003E | GRANT REPLICATION SLAVE ON *.* TO 'replication_user'@'%' IDENTIFIED BY PASSWORD '...' |\n\u003E +---------------------------------------------------------------------------------------+\n\nMariaDB [(none)]\u003E GRANT REPLICATION SLAVE ON *.* TO 'replication_user'@'%.local.wpdn' REQUIRE SSL;\nMariaDB [(none)]\u003E GRANT USAGE ON *.* TO 'replication_user'@'%' REQUIRE SSL;\n\nMariaDB [(none)]\u003E SELECT User,Host,Repl_slave_priv,Repl_client_priv,ssl_type,ssl_cipher from mysql.user where User = 'replication_user';\n\u003E +------------------+--------------+-----------------+------------------+----------+\n\u003E | User             | Host         | Repl_slave_priv | Repl_client_priv | ssl_type |\n\u003E +------------------+--------------+-----------------+------------------+----------+\n\u003E | replication_user | %.local.wpdn | Y               | N                | ANY      |\n\u003E +------------------+--------------+-----------------+------------------+----------+\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{start:9},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"On the secondary db VM, in mysql prompt, setup the initial "},{type:b,tag:k,props:{},children:[{type:a,value:"CHANGE MASTER"}]},{type:a,value:"\nstatement;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"CHANGE MASTER TO\n  MASTER_HOST='masterdb.local.wpdn',\n  MASTER_USER='replication_user',\n  MASTER_PASSWORD='foobarbaz',\n  MASTER_PORT=3306,\n  MASTER_LOG_FILE='mariadbrepl-bin.000002',\n  MASTER_LOG_POS=644,\n  MASTER_CONNECT_RETRY=10,\n  MASTER_SSL=1,\n  MASTER_SSL_CA='\u002Fetc\u002Fmysql\u002Fca-cert.pem',\n  MASTER_SSL_CERT='\u002Fetc\u002Fmysql\u002Fclient-cert.pem',\n  MASTER_SSL_KEY='\u002Fetc\u002Fmysql\u002Fclient-key.pem';\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:jk},children:[{type:b,tag:l,props:{href:"#checking-if-it-worked",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:jl}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"From one of the secondary servers, look for success indicators:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"Seconds_Behind_Master"}]},{type:a,value:jY},{type:b,tag:s,props:{},children:[{type:a,value:aW}]},{type:a,value:ao}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"Slave_IO_State"}]},{type:a,value:jY},{type:b,tag:s,props:{},children:[{type:a,value:"Waiting for master to send event"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"MariaDB [wpstats]\u003E show slave status\\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: masterdb.local.wpdn\n                  Master_User: replication_user\n                  Master_Port: 3306\n                Connect_Retry: 10\n              Master_Log_File: mariadbrepl-bin.000066\n          Read_Master_Log_Pos: 19382112\n               Relay_Log_File: mariadbrepl-relay-bin.000203\n                Relay_Log_Pos: 19382405\n        Relay_Master_Log_File: mariadbrepl-bin.000066\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB:\n          Replicate_Ignore_DB:\n           Replicate_Do_Table:\n       Replicate_Ignore_Table:\n      Replicate_Wild_Do_Table:\n  Replicate_Wild_Ignore_Table:\n                   Last_Errno: 0\n                   Last_Error:\n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 19382112\n              Relay_Log_Space: 19382757\n              Until_Condition: None\n               Until_Log_File:\n                Until_Log_Pos: 0\n           Master_SSL_Allowed: Yes\n           Master_SSL_CA_File: \u002Fetc\u002Fmysql\u002Fca-cert.pem\n           Master_SSL_CA_Path:\n              Master_SSL_Cert: \u002Fetc\u002Fmysql\u002Fclient-cert.pem\n            Master_SSL_Cipher:\n               Master_SSL_Key: \u002Fetc\u002Fmysql\u002Fclient-key.pem\n        Seconds_Behind_Master: 0\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error:\n               Last_SQL_Errno: 0\n               Last_SQL_Error:\n  Replicate_Ignore_Server_Ids:\n             Master_Server_Id: 1\n               Master_SSL_Crl: \u002Fetc\u002Fmysql\u002Fca-cert.pem\n           Master_SSL_Crlpath:\n                   Using_Gtid: No\n                  Gtid_IO_Pos:\n      Replicate_Do_Domain_Ids:\n  Replicate_Ignore_Domain_Ids:\n1 row in set (0.00 sec)\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:jm},children:[{type:b,tag:l,props:{href:"#managing-users",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:jn}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"In the end, since replication is active, you can add users to your system and\nall nodes will get the privileges."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The way I work is that I can use Salt stack states to add privileges in my\nstates (more details soon) or I can use a few salt commands from my salt master\nand send them to the database "},{type:b,tag:k,props:{},children:[{type:a,value:ft}]},{type:a,value:" VM."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"salt -G 'roles:masterdb' mysql.db_create 'accounts_oauth' 'utf8' 'utf8_general_ci'\nsalt -G 'roles:masterdb' mysql.user_create 'accounts' '%' 'barfoo'\nsalt -G 'roles:masterdb' mysql.grant_add 'ALL PRIVILEGES' 'accounts_oauth.*' 'accounts' ‘%’\n"}]}]}]},{type:a,value:e},{type:b,tag:L,props:{id:dV},children:[{type:b,tag:l,props:{href:jZ,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:dW}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:j_,rel:[C,G,H],target:A},children:[{type:a,value:j_}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:j$,rel:[C,G,H],target:A},children:[{type:a,value:j$}]}]},{type:a,value:e}]},{type:a,value:e}]},dir:"\u002Fblog\u002F2015\u002F01",path:"\u002Fblog\u002F2015\u002F01\u002Fcreate-mariadb-cluster-replication-ssl-salt-stack",extension:aw,slug:"create-mariadb-cluster-replication-ssl-salt-stack",createdAt:ka,updatedAt:ka,category:aQ,prettyfiedTemporalDate:{prettified:"Wednesday, January 28, 2015",temporalDate:"2015-01-28"}},{locale:bn,title:"Project idea: Creating a home made OpenStack cluster for development purposes",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2013\u002F10\u002Fproject-idea-creating-a-home-made-openstack-cluster-for-development-purposes\u002F",status:av,revising:T,created:"2013-10-24",updated:"2014-02-04",tags:[bJ,"development",kb,as,cO],categories:[dZ],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2013\u002F10\u002Fcomputercloud-218x300.jpg",srcset:["~\u002Fassets\u002Fcontent\u002Fblog\u002F2013\u002F10\u002Fcomputercloud-218x300.jpg 218w","~\u002Fassets\u002Fcontent\u002Fblog\u002F2013\u002F10\u002Fcomputercloud.jpg 462w"],sizes:"(max-width: 218px) 100vw, 218px",alt:"Decorative image of a laptop floating in front of a cloudy sky."},description:"The idea of the project is to give an alternate life to a mostly unused laptops a second life.",excerpt:"At work, I use an OpenStack environment and a few Salt states to manage a set of virtual machines. I'd like to give another life to two old laptops that spend most of their time shut down, but without changing or using their local hard drives.",toc:[{depth:K,text:kc},{depth:K,text:kd},{depth:K,text:ke},{depth:K,text:kf},{depth:K,text:kg}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Think about it. How about using spare computers to create a homemade OpenStack cluster for development."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"We can do that from our cloud provider, or create a separate project or even use Wikimedia's OpenStack infrastructure allowance for the project."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"With such setup, one could work locally with his Salt stack (or Puppet, or Ansible) deployment schemes, try them, trash "},{type:b,tag:bD,props:{},children:[{type:a,value:"VMs"}]},{type:a,value:", rebuild."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The beauty of it would be that it could be made in a fashion that would not even modify the computer running the VMs. The cluster member running OpenStack hypervisor would be installed seeded through net boot. Not booting from the network would revert the computer back as if it never been used."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Here is what I think would require to make this happen."}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kc}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Not use Computer\u002FLaptop local hard drive"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Rely only on net boot"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kd}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"1..n Computers\u002Flaptop supporting netboot"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"1 Storage device supporting one or more storage protocol ("},{type:b,tag:bD,props:{},children:[{type:a,value:"nfs"}]},{type:a,value:", samba, "},{type:b,tag:bD,props:{},children:[{type:a,value:kh}]},{type:a,value:$}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:ke}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:ki},{type:b,tag:bD,props:{},children:[{type:a,value:kj}]},{type:a,value:" providing tftp, dhcp, dns to serve as net boot server that should run outide of the cluster (\"Networking node\")"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:ki},{type:b,tag:bD,props:{},children:[{type:a,value:kj}]},{type:a,value:" image of OpenStack controller (\"OpS controller\")"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"1 LiveCD+persistent image with OpenStack preinstalled, configured to use storage device credentials as it's root filesystem (\"OpS Hypervisor\")"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kf}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Networking node can be the smallest Linux possible, on a RaspberryPI, or a modified Router or Network Attached storage device?"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"OpS Hypervisor to be among the supported OpenStack distributions (I think a Ubuntu precise 12.04 "},{type:b,tag:bD,props:{},children:[{type:a,value:"LTS"}]},{type:a,value:" or a variant such as Puppy Linux might work too)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kg}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"I will keep you posted whenever possible on the outcome of my research."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Did you ever do this in your infra. Leave a comment."}]}]},dir:"\u002Fblog\u002F2013\u002F10",path:"\u002Fblog\u002F2013\u002F10\u002Fproject-idea-creating-a-home-made-openstack-cluster-for-development-purposes",extension:aw,slug:"project-idea-creating-a-home-made-openstack-cluster-for-development-purposes",createdAt:d_,updatedAt:d_,category:dZ,prettyfiedTemporalDate:{prettified:"Thursday, October 24, 2013",temporalDate:"2013-10-24"}},{locale:aG,title:"Procedure to create a re-usable configuration export script to move a virtual machine configuration to a new one",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2013\u002F08\u002Fprocedure-to-create-a-re-usable-configuration-export-script-to-move-virtual-machine-configuration-to-a-new-one\u002F",status:av,revising:T,migrateCode:T,created:kk,updated:kk,tags:[as,cW],categories:[],excerpt:"This procedure guides you through some steps on a way to commission or decomission your web app. At least to move essential configuration files.",toc:[{depth:K,text:kl},{depth:K,text:"2. Clone the New VM that will replace the Old"},{depth:K,text:km},{depth:K,text:"3. Prepare the New VM to use the Original VM"},{depth:K,text:kn}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"The following procedure is about deprecating an old Linux server, and \nmove crucial configuration to a new fresh install that has the desired \nconfiguration by cloning it, then applying the "},{type:b,tag:u,props:{},children:[{type:a,value:ko}]},{type:a,value:"'s configuration."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The steps will go as follows:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Grab the original machine's configuration"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Clone the "},{type:b,tag:u,props:{},children:[{type:a,value:fy}]},{type:a,value:kp}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Disable the "},{type:b,tag:u,props:{},children:[{type:a,value:ko}]},{type:a,value:" web application"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kl}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"The steps will create a tar file with the configurations."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Connect to the production vm (morpheus) through the cloud provider console (e.g. vSphere client, or VCloud director webapp or Open Stack console)\n"},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Connect through Putty, or your local development VM terminal the follwing lines (the console do not share the clipboard)"}]},{type:a,value:e}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"ssh username@morpheus.networkname.net\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Create this file"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"vi ~\u002Fmake-migrate.sh\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Enter in vim paste mode"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:":set paste\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Paste this content"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"#!\u002Fbin\u002Fbash \ncd ~ \nmkdir -p ~\u002Fmigrate\u002Fetc\u002Fnetwork \nsudo cp \u002Fetc\u002Fnetwork\u002Finterfaces ~\u002Fmigrate\u002Fetc\u002Fnetwork\u002F \nsudo cp \u002Fetc\u002Fhostname ~\u002Fmigrate\u002Fetc\u002F \nsudo cp \u002Fetc\u002Fresolv.conf ~\u002Fmigrate\u002Fetc\u002F \nmkdir -p ~\u002Fmigrate\u002Fetc\u002Fssh \nsudo cp \u002Fetc\u002Fssh\u002Fssh_host* ~\u002Fmigrate\u002Fetc\u002Fssh\u002F \nmkdir -p ~\u002Fmigrate\u002Fhome\u002Fusername\u002F.ssh \ncp ~\u002F.ssh\u002F* ~\u002Fmigrate\u002Fhome\u002Fusername\u002F.ssh\u002F \nmkdir -p ~\u002Fmigrate\u002Fhome\u002Fusername\u002F_prod\u002Fapp\u002Fconfig \ncp ~\u002F_prod\u002Fapp\u002Fconfig\u002Fparameters.ini ~\u002Fmigrate\u002Fhome\u002Fusername\u002F_prod\u002Fapp\u002Fconfig \nmkdir -p ~\u002Fmigrate\u002Fetc\u002Fapache2\u002Fsites-available \nsudo cp \u002Fetc\u002Fapache2\u002Fsites-available\u002F* ~\u002Fmigrate\u002Fetc\u002Fapache2\u002Fsites-available\u002F \nsudo cp \u002Fetc\u002Fresolv.conf ~\u002Fmigrate\u002Fetc\u002F \nsudo chown -R username:username ~\u002Fmigrate \ntar cfz ~\u002Fmigrate.tar.gz ~\u002Fmigrate \nmv migrate.tar.gz _prod\u002Fweb\u002F\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Execute it"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fbin\u002Fbash ~\u002Fmake-migrate.sh\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The latter moves into the "}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Download https:\u002F\u002Fmorpheus.networkname.net\u002Fmigrate.tar.gz"}]},{type:a,value:e}]},{type:a,value:e},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:"2. Clone the "},{type:b,tag:u,props:{},children:[{type:a,value:fy}]},{type:a,value:kp}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"This step is about cloning the functionnal VM."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Since it is specific to your cloud management system, I will not describe any way to do so."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Important points to consider while doing so, ensure that you:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"disable or isolate networking"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"have access to an alternate console"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Otherwise you might just create conflicts."}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:km}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You should have a copy of the original VM (e.g. morpheus-stg) with the config working the way you want."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"This step is specific to the way you might commission or decomission your web app."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"You may even not need to decomission it if you have multiple database servers not on the same host."}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:"3. Prepare the "},{type:b,tag:u,props:{},children:[{type:a,value:fy}]},{type:a,value:" to use the "},{type:b,tag:u,props:{},children:[{type:a,value:"Original VM"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Start the cloned VM"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Connect through the vCenter console"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Download the file, sorry, no cut in paste in the cloud provider console :("}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Assuming you are in "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fhome\u002Fusername"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"pwd\n\u002Fhome\u002Fusername\nwget --no-check-certificate https:\u002F\u002Fmorpheus.networkname.net\u002Fmigrate.tar.gz\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Get the migrate folder from the extracted archive (it will be in a 'home' folder after extracting)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"tar xfz migrate.tar.gz\nmv home\u002Fusername\u002Fmigrate .\nrm -rf home\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Disable the network configuration"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"  sudo \u002Fetc\u002Finit.d\u002Fnetworking stop\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Run the following commands:\n"},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Echo the content of the files inside the "},{type:b,tag:k,props:{},children:[{type:a,value:"migrate\u002F"}]},{type:a,value:" folder, into their original locations"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"See the file  listing:"}]},{type:a,value:e}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"find migrate\u002F -type f\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Create the migrate file original contents"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"cd migrate\nfind . -type f \u003E prepare.sh\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Warning, the following commands we will be using vim to prepare our import script, follow the keyboard types in that sequence:"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"vim prepare.sh\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"(in the top left corner, where it starts), do:"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"NOTE: "},{type:b,tag:u,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:"FOLLOW BLINDLY THOSE VIM COMMANDS"}]}]},{type:a,value:" ... they written in the form of {modifier key}+{letter}, such as: CTRL+v, SHIFT+A, means the key combination like you would on a Graphical user interface, the + in this list is only to mean together."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"dd\nCTRL+v\n100j\n$\ny\nSHIFT+A\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Add a few spaces, to make the cursor go further than the longest line"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"ESC\np\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The following commands, you have to be in ESC mode, and press ENTER when finished:"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:":%s\u002F  \\.\u002F \u002F\n:%s\u002F\\.\u002Fcp \\.\u002F\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"All is done, write and quit"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:":wq\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Check the file"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"cat prepare.sh\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You will end up with a file similar to"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"cp .\u002Fhome\u002Fusername\u002F_prod\u002Fapp\u002Fconfig\u002Fparameters.ini    \u002Fhome\u002Fusername\u002F_prod\u002Fapp\u002Fconfig\u002Fparameters.ini  \ncp .\u002Fhome\u002Fusername\u002F.ssh\u002Fid_rsa                        \u002Fhome\u002Fusername\u002F.ssh\u002Fid_rsa  \ncp .\u002Fhome\u002Fusername\u002F.ssh\u002Fgeritt_dsa.pub                \u002Fhome\u002Fusername\u002F.ssh\u002Fgeritt_dsa.pub  \ncp .\u002Fhome\u002Fusername\u002F.ssh\u002Fgeritt_dsa                    \u002Fhome\u002Fusername\u002F.ssh\u002Fgeritt_dsa  \ncp .\u002Fhome\u002Fusername\u002F.ssh\u002Fauthorized_keys2              \u002Fhome\u002Fusername\u002F.ssh\u002Fauthorized_keys2  \ncp .\u002Fhome\u002Fusername\u002F.ssh\u002Fconfig                        \u002Fhome\u002Fusername\u002F.ssh\u002Fconfig  \ncp .\u002Fhome\u002Fusername\u002F.ssh\u002Fknown_hosts                   \u002Fhome\u002Fusername\u002F.ssh\u002Fknown_hosts \ncp .\u002Fhome\u002Fusername\u002F.ssh\u002Fid_rsa.pub                    \u002Fhome\u002Fusername\u002F.ssh\u002Fid_rsa.pub \ncp .\u002Fetc\u002Fssh\u002Fssh_host_rsa_key.pub                     \u002Fetc\u002Fssh\u002Fssh_host_rsa_key.pub  \ncp .\u002Fetc\u002Fssh\u002Fssh_host_dsa_key                         \u002Fetc\u002Fssh\u002Fssh_host_dsa_key \ncp .\u002Fetc\u002Fssh\u002Fssh_host_dsa_key.pub                     \u002Fetc\u002Fssh\u002Fssh_host_dsa_key.pub  \ncp .\u002Fetc\u002Fssh\u002Fssh_host_ecdsa_key.pub                   \u002Fetc\u002Fssh\u002Fssh_host_ecdsa_key.pub \ncp .\u002Fetc\u002Fssh\u002Fssh_host_rsa_key                         \u002Fetc\u002Fssh\u002Fssh_host_rsa_key  \ncp .\u002Fetc\u002Fssh\u002Fssh_host_ecdsa_key                       \u002Fetc\u002Fssh\u002Fssh_host_ecdsa_key \ncp .\u002Fetc\u002Fhostname                                     \u002Fetc\u002Fhostname  \ncp .\u002Fetc\u002Fresolv.conf                                  \u002Fetc\u002Fresolv.conf  \ncp .\u002Fetc\u002Fnetwork\u002Finterfaces                           \u002Fetc\u002Fnetwork\u002Finterfaces\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Execute that newly created script, first check you are in "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fhome\u002Fusername\u002Fmigrate"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"pwd\n\u002Fhome\u002Fusername\u002Fmigrate\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"We'll run as root"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"sudo -s\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Echo a file or two, to test BEFORE-\u003EAFTER"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"cat \u002Fetc\u002Fnetwork\u002Finterfaces\n...\ncat \u002Fetc\u002Fhostname\nmorpheus-stg\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Now, run the file"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fbin\u002Fbash .\u002Fprepare.sh\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"they should be different :)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"cat \u002Fetc\u002Fnetwork\u002Finterfaces\n...\ncat \u002Fetc\u002Fhostname\nmorpheus.networkname.net\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Make sure the "},{type:b,tag:k,props:{},children:[{type:a,value:kq}]},{type:a,value:" file reflects, and points at "},{type:b,tag:k,props:{},children:[{type:a,value:"127.0.0.1"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"127.0.0.1   localhost morpheus.networkname.net morpheus\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You can use vim regex like so:"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"sudo vim \u002Fetc\u002Fhosts\n:%s\u002Fmorpheus-stg\u002Fmorpheus\u002F\n:wq\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Use apache command tools to disable the old site and enable the prod ones:"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"sudo ll \u002Fetc\u002Fapache\u002Fsites-available\n...\n-rw-r--r-- 1 root root 1052 Feb 20 19:19 \u002Fetc\u002Fapache2\u002Fsites-available\u002Fdefault\n-rw-r--r-- 1 root root 7469 Feb  6  2012 \u002Fetc\u002Fapache2\u002Fsites-available\u002Fdefault-ssl\n-rw-r--r-- 1 root root 1917 Feb 20 15:48 \u002Fetc\u002Fapache2\u002Fsites-available\u002Fssl\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Enable only "},{type:b,tag:k,props:{},children:[{type:a,value:im}]},{type:a,value:fz},{type:b,tag:k,props:{},children:[{type:a,value:"default"}]},{type:a,value:" (NOT '"},{type:b,tag:k,props:{},children:[{type:a,value:"default-ssl"}]},{type:a,value:"')"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"sudo a2dissite\n10-project.local.conf\nsudo a2ensite\ndefault ssl\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Restart the server"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"sudo service apache2 restart\n"}]}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kn}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"This is, again, specific to the way you might commission or decomission your web app"}]}]},dir:"\u002Fblog\u002F2013\u002F08",path:"\u002Fblog\u002F2013\u002F08\u002Fprocedure-to-create-a-re-usable-configuration-export-script-to-move-virtual-machine-configuration-to-a-new-one",extension:aw,slug:"procedure-to-create-a-re-usable-configuration-export-script-to-move-virtual-machine-configuration-to-a-new-one",createdAt:d_,updatedAt:d_,category:aF,prettyfiedTemporalDate:{prettified:"mercredi 7 août 2013",temporalDate:kk}},{locale:aG,title:"Procédure pour avoir un environnement de dévelopement local facile à configurer avec Apache",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2013\u002F05\u002Fprocedure-environnement-developement-local-facile-a-entretenir-avec-apache\u002F",status:av,revising:T,caption:ai,caracteresBizzares:ai,gallery:ai,migrateCode:T,migrateImages:ai,migrateLinks:ai,created:"2013-05-23",updated:"2013-05-24",tags:["best-practices",kb,as,cl,bZ,bc],categories:[dZ],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2013\u002F04\u002Fapache-et-virtual-document-root-logo-300x300.png",alt:"Image décorative d’une plume rapellant le logo du logiciel Apache.\n",srcset:["~\u002Fassets\u002Fcontent\u002Fblog\u002F2013\u002F04\u002Fapache-et-virtual-document-root-logo.png 300w","~\u002Fassets\u002Fcontent\u002Fblog\u002F2013\u002F04\u002Fapache-et-virtual-document-root-logo-150x150.png 150w"],sizes:"(max-width: 300px) 100vw, 300px"},excerpt:"Mon environment de développement est sous Linux depuis plusieurs années. Avec le temps j'ai traîné dans mes portails privé de documentation cette procédure. Elle utilise des variables utilisés dans l'URL qui pointe vers votre hôte local de votre espace de travail où l'on peut héberger les fichiers de travail. Tout ceci, sans avoir à configurer pour chaque projet client.",toc:[{depth:aj,text:bN},{depth:K,text:kr},{depth:K,text:ks},{depth:K,text:bN},{depth:aj,text:cp}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Je ne sais pour vous, mais je ne peut plus programmer sans avoir l'environement serveur localement sur ma machine. Changer ou ajouter un fichier "},{type:b,tag:k,props:{},children:[{type:a,value:"VirtualHost"}]},{type:a,value:" pour chaque nouveau projet est assez répétitif. Il doit y avoir une façon automatique de le faire?"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Oui."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ça s'appelle "},{type:b,tag:k,props:{},children:[{type:a,value:kt}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"J'ai ce tutoriel qui traîne dans mon Wiki personnel depuis des lustres, et c'est maintenant que je commence a migrer mes projets sous NGINX que je décide de le mettre en ligne. Il n'est jamais trop tard pour publier."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Cette méthode de configuration répond exactement au besoin précis de ne pas avoir a configurer un hôte virtuel apache pour chaque projet."}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:ag},{type:b,tag:h,props:{},children:[{type:a,value:"Avec cette procédure, vous n'aurez qu'a maintenir votre fichier "},{type:b,tag:k,props:{},children:[{type:a,value:"hosts"}]},{type:a,value:", le reste suivra tout seul."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Vous pouvez appliquer cette technique avec n'importe quelle version du serveur http \"Apache\". Cette procédure peut même être faite si vous développez sous Windows ou Mac OS avec les distributions du serveur HTTP Apache sous Windows telles que MAMP, XAMPP, et EasyPHP."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pourtant avec un serveur web local, ce type de configuration est possible depuis longtemps, il faut simplement savoir comment ça s'appelle: "},{type:b,tag:k,props:{},children:[{type:a,value:kt}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Voici comment je configure mon environnement LAMP depuis quelques temps."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:an,props:{},children:[{type:a,value:bN}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kr}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Tout commence par une certaine convention. Avec celle-ci, tout devrait suivre automatiquement."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"L'idée est de pouvoir accéder a un l'espace de travail du projet A du client B sur ma machine locale. L'adresse locale n'est plus "},{type:b,tag:k,props:{},children:[{type:a,value:ku}]},{type:a,value:", mais quelque chose de plus explicite."}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:ag},{type:b,tag:h,props:{},children:[{type:a,value:"Ce que j'apprécie le plus de cette méthode car elle permet de conserver dans un dossier parent tout ce qui est spécifique pour le projet et le client. Le code a exécuter qui soit dans un sous-dossier ne feait que du sens."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Par exemple, un projet appelé "},{type:b,tag:k,props:{},children:[{type:a,value:"projectname"}]},{type:a,value:" du client "},{type:b,tag:k,props:{},children:[{type:a,value:jX}]},{type:a,value:" serait classé dans un dossier sous le chemin "},{type:b,tag:k,props:{},children:[{type:a,value:kv}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le code du projet web serait accessible via le serveur web à l'adresse "},{type:b,tag:k,props:{},children:[{type:a,value:"http:\u002F\u002Fprojectname.client.dev\u002F"}]},{type:a,value:" qui pointe vers l'adresse IP de la station de travail locale."}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:ks}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:ag},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"IMPORTANT"}]},{type:a,value:"\n  Il faut que les noms de dossiers "},{type:b,tag:u,props:{},children:[{type:a,value:"soient en minuscule"}]},{type:a,value:d$},{type:b,tag:u,props:{},children:[{type:a,value:"aucun espace"}]},{type:a,value:", ni "},{type:b,tag:u,props:{},children:[{type:a,value:"caractères accentués"}]},{type:a,value:", sinon le serveur Apache risque de ne pas trouver le dossier. Principalement parce que l'adresse entrée dans le navigateur est convertie en bas de case, et que généralement un "},{type:b,tag:u,props:{},children:[{type:a,value:"système d'exploitation qui se respecte"}]},{type:a,value:" fait une différence entre, par exemple 'Allo' et 'allo'."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La convention suggérée va comme suit:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"chaque projet est classé dans un chemin prévisible, similaire à "},{type:b,tag:k,props:{},children:[{type:a,value:kv}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"le projet a un dossier "},{type:b,tag:k,props:{},children:[{type:a,value:kw}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"les autres dossiers au même niveau que "},{type:b,tag:k,props:{},children:[{type:a,value:kw}]},{type:a,value:" peuvent être n'importe quoi d'autre."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Idéalement, la logique applicative ne devrait pas être visible publiquement de toute façon. Seulement le fichier principal appelle l'\"autoloader\" en dehors du "},{type:b,tag:u,props:{},children:[{type:a,value:kx}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"De cette façon le vous pouvez classer tout vos projets du même client, et séparer par projets."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:"La procédure tient aussi en compte"}]},{type:a,value:"\n* L'utilisateur courrant puisse écrire dans son dossier "},{type:b,tag:k,props:{},children:[{type:a,value:"workspace\u002F"}]},{type:a,value:" avec Apache2 comme s'il était son propre utilisateur avec "},{type:b,tag:k,props:{},children:[{type:a,value:"mpm-itk"}]},{type:a,value:"\n* Le nom de domaine utilisé définit dans quel dossier de l'utilisateur chercher"}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:bN}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Assurer que les modules sont chargés"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"     sudo a2enmod vhost_alias\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ajouter le fichier default a la config de apache"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"     sudo vi \u002Fetc\u002Fapache2\u002Fports.conf\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Vérifier qu'il y a ceci:"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"    NameVirtualHost *:80\n    Listen 80\n    UseCanonicalName Off\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Modifier le fichier de config du VirtualHost par défaut"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Fichier de configuration par magique"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"    sudo vi \u002Fetc\u002Fapache2\u002Fsites-available\u002Fdefault\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Verifier qu'il y a ce bloc dans "},{type:b,tag:k,props:{},children:[{type:a,value:"\u003CVirtualHost ...\u003E"}]},{type:a,value:P}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"    \u003CIfModule mpm_itk_module\u003E\n        AssignUserId renoirb users\n    \u003C\u002FIfModule\u003E\n"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Remplacer la mention "},{type:b,tag:k,props:{},children:[{type:a,value:kx}]},{type:a,value:" par ce format:"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"    VirtualDocumentRoot \u002Fhome\u002Frenoirb\u002Fworkspaces\u002F%1\u002F%0\u002Fweb\n"}]}]},{type:a,value:e},{type:b,tag:an,props:{},children:[{type:a,value:cp}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Apache 2.2 documentation on "},{type:b,tag:l,props:{href:"http:\u002F\u002Fhttpd.apache.org\u002Fdocs\u002F2.2\u002Fmod\u002Fmod_vhost_alias.html"},children:[{type:a,value:"vhost_alias"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"J'attribue le crédit a mon ex-associé "},{type:b,tag:l,props:{href:"http:\u002F\u002Fstephanchampagne.com"},children:[{type:a,value:ky}]},{type:a,value:", qui a trouvé la méthode et qui me l'a enseignée."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fgroups.drupal.org\u002Fnode\u002F6266"},children:[{type:a,value:"How To Setup an Ubuntu LAMP Server for Development Purposes Only on Drupal groups"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fserverfault.com\u002Fquestions\u002F278406\u002Fapache2-automatic-subdomains"},children:[{type:a,value:"ServerFault \"Apache2 automatic Subdomains\" thread"}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2013\u002F05",path:"\u002Fblog\u002F2013\u002F05\u002Fprocedure-environnement-developement-local-facile-a-entretenir-avec-apache",extension:aw,slug:"procedure-environnement-developement-local-facile-a-entretenir-avec-apache",createdAt:kz,updatedAt:kz,category:dZ,prettyfiedTemporalDate:{prettified:"jeudi 23 mai 2013",temporalDate:"2013-05-23"}},{locale:aG,title:"Créer un tunnel SSH inverse pour pouvoir supporter à distance un ami utilisant Linux",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2012\u002F02\u002Fcreer-un-tunnel-ssh-inverse-pour-pouvoir-supporter-a-distance-un-ami-utilisant-linux\u002F",status:av,revising:T,migrateCode:T,migrateLinks:T,created:"2012-02-29",updated:ea,tags:[as,cW,b_,cX],categories:[],excerpt:aF,toc:[{depth:K,text:kA},{depth:K,text:kB},{depth:K,text:kC},{depth:K,text:kD},{depth:K,text:kE},{depth:K,text:kF},{depth:K,text:kG},{depth:K,text:cp}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Avez-vous déjà voulu accéder a votre ordinateur Unix\u002FLinux\u002FMacOS d'un ami, chez ou ailleurs, et que vous avez besoin de l'aider a distance?   En tant qu'utilisateur de Linux, si vous aider quelqu'un d'autre qui n'Est pas habitué, il peut vouloir votre aide. Cette procédure peut vous aider a l'aider, a distance."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ça vient de m'arriver. Je vais vous montrer comment j'ai fait."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ce que j'ai utilisé:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Une machine avec OpenSSH que chaque personne à accès (une instance Amazon EC2?)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Créer un nouvel utilisateur temporaire pour la personne a aider"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ordinateur a réparer roulant Linux\u002FUnix\u002FMacOS\u002FCygwin (qui a OpenSSH serveur et client)"}]},{type:a,value:e}]},{type:a,value:"\nCe que j'avait fait avec, en plus de cette procédure, c'est "},{type:b,tag:l,props:{href:"https:\u002F\u002Fhelp.ubuntu.com\u002Fcommunity\u002FUbuntuBootupHowto"},children:[{type:a,value:"un script RC"}]},{type:a,value:" qui créait une connection permanente, avec "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.debian-administration.org\u002Farticles\u002F152"},children:[{type:a,value:"une connection SSH qui ne requiert pas de mot de passe"}]},{type:a,value:bW},{type:b,tag:h,props:{},children:[{type:a,value:"L'idée étaait que peu importe le lieu ou mon ami se trouve, dès qu'il\u002Felle a un lien à Internet, j'ai accès a son ordinateur portable."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ma procédure décrit comment créer un lien entre ces deux machines."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kA}]},{type:a,value:"\nIl y a quelques années j'ai fait le cadeau a ma mère d'un vieil ordinateur portable. Étant donné qu'il était vieux et qu'elle n'a jamais vraiment utilisé d'ordinateur dans sa vie, j'ai pensé lui configurer un Ubuntu qui avait tout ce qui est nécessaire.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Elle l'a utilisée pendant environ 3 ans. Je crois que ma maman sait maintenant qu'un navigateur web n'est pas nécessairement Internet Explorer. Qu'un document n'est pas obligatoirement un fichier \"Word\".  Aujourd'hui elle roule sous Windows. Parce que quelqu'un d'autre lui a fait le cadeau et qu'il n'est pas porté a utiliser Linux comme moi."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Toujours est-il que pour l'aider j'utilisait ce processus pour entretenir son ordinateur sans qu'elle ait rien a faire."}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kB}]},{type:a,value:"\nSurnommons cette machine \""},{type:b,tag:u,props:{},children:[{type:a,value:cY}]},{type:a,value:"\".\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Il faut que vous et votre ami ayez accès a cette machine sur le port 22. Si c'est votre machine, vous pouvez forcément créer un nouveau compte pour votre ami qu'il utilisera pour initier le tunnel entre sa machine et cet machine."}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kC}]},{type:a,value:"\nDans mon exemple, son compte est \""},{type:b,tag:u,props:{},children:[{type:a,value:cS}]},{type:a,value:"\", sa machine s'appelle \""},{type:b,tag:u,props:{},children:[{type:a,value:eb}]},{type:a,value:"\".﻿\n"},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Prérequis"}]}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"OpenSSH"}]},{type:a,value:" qui est installé et qui roule.\nEn Mac OS, c'est dans Préférences, Partage, il y a une option Accès a distance \u003Crant rel=\"windows\"\u003E... ah ces changements de noms pour la même chose\u003C\u002Frant\u003E."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Un compte utilisateur"}]},{type:a,value:" pour vos propres besoins\n... Ou le même que votre ami, s'il vous donne un mot de passe \u003Ctruc\u003EPssiiit. "},{type:b,tag:u,props:{},children:[{type:a,value:"passwd"}]},{type:a,value:" sert a changer un mot de passe en terminal!\u003C\u002Ftruc\u003E"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:"Donc, assurez-vous que votre ami..."}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"vous fournit un compte pour vous connecter sur sa machine (\""},{type:b,tag:u,props:{},children:[{type:a,value:eb}]},{type:a,value:fA}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Assurer que OpenSSH  roule"}]},{type:a,value:e}]},{type:a,value:"\nJe vous écrit tout ça de mémoire. Une recherche sur comment activer OpenSSH et créer un utilisateur qui y aura accès sur cette  machine MacOS\u002FLinux vous aidera plus que cet article.\n"},{type:b,tag:L,props:{},children:[{type:a,value:kD}]},{type:a,value:"\nSi tout est fonctionnel, vous avez déjà passé le pire, lui expliquer c'est quoi un utilisateur, si l'accès a distance ou SSH c'est quoi, et pourquoi vous lui demandez d'y accéder.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Expliquez-lui de ne pas utiliesr de mot de passe simple.  Qu'il ne vous donne pas non plus son mot de passe... s'il l'utilise ailleeurs (ou partout, c'est bien d'enseigner ça a ses amis)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Donc... lui faire taper la commande dans un terminal:"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le BUT de cet article, LA commande, UNE LINGE!"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"user@friend-machine$ ssh -nNT -R 1103:localhost:22 friendusername@vm.somehost.com"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ce qui se passera c'est que l'ami (qui a une machine qui s'appelle \"friend-machine\" dans cet exemple) initie un tunnel SSH silencieux vers \"vm.somehost.com\" (le serveur accessible par vous et votre ami) qui s'y connecte avec l'usager temporaire (\"friendusername\")."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Les options utilisés:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"n"}]},{type:a,value:" Sert pour éviter d'afficher des choses sur son terminal n'affiche rien (envoie vers \u002Fdev\u002Fnull)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"N"}]},{type:a,value:" Sert pour préciser de ne pas utiliser la ligne de commande,   une fois connecté, il ne dira rien."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:b$}]},{type:a,value:" Sert à ne pas allouer de pseudo terminal (pseudo-tty)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:ec}]},{type:a,value:" Sert a préciser un Tunnel inversé (Reverse) qui servira a exposer "},{type:b,tag:u,props:{},children:[{type:a,value:"dans"}]},{type:a,value:" (\""},{type:b,tag:u,props:{},children:[{type:a,value:cY}]},{type:a,value:"\") au tunnel initié par (\""},{type:b,tag:u,props:{},children:[{type:a,value:eb}]},{type:a,value:"\") au port "},{type:b,tag:u,props:{},children:[{type:a,value:fB}]},{type:a,value:" à partir du port "},{type:b,tag:u,props:{},children:[{type:a,value:"1103"}]},{type:a,value:" de (\""},{type:b,tag:u,props:{},children:[{type:a,value:cY}]},{type:a,value:"\")."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kE}]},{type:a,value:"\nEnfin. Il ne reste qu'a vous, vous connecter a cette machine commune, pour accéder au tunnel que vous lui avez fait créer, et utiliser SA machine.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Il ne suffit que de se  connecter  sur "},{type:b,tag:u,props:{},children:[{type:a,value:cY}]},{type:a,value:" sous votre compte habituel, initialiser un "},{type:b,tag:u,props:{},children:[{type:a,value:dv}]},{type:a,value:" puis vous re-connecter sur le port spécial qui vous donnera accès au poste \""},{type:b,tag:u,props:{},children:[{type:a,value:eb}]},{type:a,value:cH}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Facile!!"}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"En ordre:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"renoirb@mon-laptop:~$  ssh vm.somehost.com\nrenoirb@vm:~$ screen\nrenoirb@vm: ~$ ssh user@localhost -p 1103\nuser@friend-machine:~$ uname -a\nDarwin friend-machine 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1\u002FRELEASE_I386 i386"}]},{type:a,value:"\nEn gros, je me connecte a "},{type:b,tag:u,props:{},children:[{type:a,value:cY}]},{type:a,value:", j'y initie une session "},{type:b,tag:u,props:{},children:[{type:a,value:dv}]},{type:a,value:", puis je me re-connecte en SSH sur le port local 1103 ouvert par mon ami "},{type:b,tag:u,props:{},children:[{type:a,value:"user@friend-machine"}]},{type:a,value:" (vous suivez toujours?) et hop! Je suis sur la machine distante.\n"},{type:b,tag:L,props:{},children:[{type:a,value:kF}]},{type:a,value:"\nAvec Screen, je peut ainsi me détacher du terminal et m'y reconnecter plus tard sans arrêter les choses en cours.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Pour se déconnecter et se reconnecter je fais ainsi"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Connecter\u002Freconnecter:   screen -dd -R"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Détacher (combinaison de touches):  ctrl+a d"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:kG}]},{type:a,value:"\nNous aurons entré quelques lignes de terminal et hop, nous avons accès a la machine de notre ami.  C'est sûr que vous pouvez jouer avec les tunnels et accéder aux autres services, mais je ne vous expliquerai pas comment spécifiquement utiliser chaque cas.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Je vous laisse imaginer les cas de figure possible:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Faire une mise a jour de paquets"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Réinstaller des programmes"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Accéder a un service qu'il a localement, comme un serveur web, etc."}]},{type:a,value:e}]},{type:a,value:"\n... J'aime linux!\n"},{type:b,tag:L,props:{},children:[{type:a,value:cp}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.techrepublic.com\u002Farticle\u002Fsetting-up-a-reverse-ssh-tunnel\u002F5779944"},children:[{type:a,value:"TechRepublic article Setting up a reverse SSH tunnel"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.howtoforge.com\u002Freverse-ssh-tunneling"},children:[{type:a,value:"HowTo Forge: Reverse SSH Tunneling"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.linuxjournal.com\u002Farticle\u002F6340"},children:[{type:a,value:"LinuxJournal: Power sessions with Screen"}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2012\u002F02",path:"\u002Fblog\u002F2012\u002F02\u002Fcreer-un-tunnel-ssh-inverse-pour-pouvoir-supporter-a-distance-un-ami-utilisant-linux",extension:aw,slug:"creer-un-tunnel-ssh-inverse-pour-pouvoir-supporter-a-distance-un-ami-utilisant-linux",createdAt:kH,updatedAt:kH,category:aF,prettyfiedTemporalDate:{prettified:"mercredi 29 février 2012",temporalDate:"2012-02-29"}},{title:"devLAB Montréal c'est maintenant parti!",locale:aG,created:"2011-02-08T00:00:00.000Z",updated:"2023-11-16T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2011\u002F02\u002Fdevlab-montreal-cest-maintenant-parti\u002F",status:av,revising:T,migrateLinks:T,migrateImages:T,gallery:ai,caption:ai,categories:[aH],tags:["accessibility","events","html",as,cl,"virtualisation",fC,kI],webarchiveSnapshots:[{key:"devlabmtl",orig:"http:\u002F\u002Fdevlabmtl.org\u002F",snapshots:[fD]},{key:"annonce",orig:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F03\u002Fintroduction-de-notre-nouveau-projet-evenement-intitule-devlab\u002F"},{key:"evenements",orig:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F06\u002Fretour-sur-la-semaine-des-logiciels-libres-mondev-et-de-la-conference-make-web-not-war-2010\u002F"},{key:"wordcamp",orig:kJ},{key:"confoo",orig:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F09\u002Flancement-de-lannee-2011-pour-la-conference-confoo\u002F"},{key:"geeknights",orig:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002Fcategory\u002Fgeeknight\u002F"},{key:"migration",orig:kK},{key:"vm-linux",orig:kL},{key:"sandbox-mac",orig:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F07\u002Finstaller-une-machine-virtuelle-linux-roulant-dans-vmware-fusion-sous-mac-os-x\u002F"},{key:"techentreprise",orig:kM},{key:"twitter",orig:kN},{key:"facebook-group",orig:kO},{key:"facebook-page",orig:kP}],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2010\u002F03\u002FdevLAB_LogoURL_Coul_small.png",alt:"devLabMtl.org",text:"Dev Lab Montréal, un «Lab» d’expérimentation pour partager et\naugmenter ses aptitudes en programmation Web\nvia des rencontres hebdomadaires en soirée.\n"},excerpt:"devLAB Montréal, un événement hebdomadaire pour les passionnés de technologie, est maintenant lancé. Découvrez comment ce projet est né, son concept unique et comment vous pouvez y participer.",toc:[{id:kQ,depth:aj,text:kR},{id:kS,depth:aj,text:kT},{id:kU,depth:aj,text:"Pourquoi avons-nous lancé un autre événement à Montréal"},{id:kV,depth:aj,text:kW},{id:kX,depth:aj,text:kY},{id:kZ,depth:aj,text:k_}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Je l'avais "},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2010\u002F03\u002Fintroduction-de-notre-nouveau-projet-evenement-intitule-devlab\u002F"},children:[{type:a,value:"annoncé"}]},{type:a,value:". Nous avons "},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2010\u002F06\u002Fretour-sur-la-semaine-des-logiciels-libres-mondev-et-de-la-conference-make-web-not-war-2010\u002F"},children:[{type:a,value:"participé à des événements"}]},{type:a,value:aO},{type:b,tag:l,props:{href:kJ,rel:[C,G,H],target:A},children:[{type:a,value:"joints"}]},{type:a,value:g},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2010\u002F09\u002Flancement-de-lannee-2011-pour-la-conference-confoo\u002F"},children:[{type:a,value:"d'autres"}]},{type:a,value:". Maintenant, depuis janvier 2011, "},{type:b,tag:s,props:{},children:[{type:a,value:"à tous les mercredis"}]},{type:a,value:", nous vous invitons à vous joindre à nos rencontres. Donc, depuis cinq semaines maintenant nous hébergeons au public nos ateliers de travail qu'on appelait nos "},{type:b,tag:aE,props:{to:"\u002Fblog\u002Fcategory\u002Fgeeknight\u002F"},children:[{type:a,value:"GeekNights"}]},{type:a,value:" maintenant surnommé "},{type:b,tag:l,props:{href:fD,rel:[C,G,H],target:A},children:[{type:a,value:"devLAB"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:an,props:{id:kQ},children:[{type:b,tag:l,props:{href:"#comment-devlab-a-commenc%C3%A9",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:kR}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Tout a commencé en 2006. Le besoin est né après plusieurs mois à discuter de technologie à deux (avec "},{type:b,tag:s,props:{},children:[{type:a,value:"Etienne Lachance"}]},{type:a,value:") à prendre une bière au 3Brasseurs et de parler de binaire, netmask... vous savez, des trucs de Geeks. Nous avons joint notre vieil ami "},{type:b,tag:s,props:{},children:[{type:a,value:ky}]},{type:a,value:" et nous avons officialisé le pacte que nous avons tenu de 2006-2009. Une fois par semaine tous les mercredis soir nous suivions ce concept:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Se rencontrer peu importe la charge de travail au bureau"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Faire avancer une idée"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Utiliser quelque chose qu'on n'a jamais utilisé avant"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pratiquer les méthodologies pour prendre les plis qu'on ne pouvait pas toujours prendre au bureau"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Parfois nous en faisions des CodeFests qui duraient une fin de semaine complète. D'autres fois nous invitions des amis à jouer avec nous sur des sujets divers."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:an,props:{id:kS},children:[{type:b,tag:l,props:{href:"#quelques-sujets-que-nous-avons-couverts",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:kT}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Nous discutions d'à peu près tout ce qui nous tentait. Parfois nous étions inspirés par ce que nous faisions au bureau, d'autres fois, des amis venaient nous montrer leurs trucs qui les \"faisaient tripper\" (!)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Entre autres..."}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Le Test Driven Development avec Visual Studio"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Environnement généré en Javascript avec ExtJS"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Des processus d'auto installation avec CentOS 5 (Kick start)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Monter un serveur SMTP avec Debian Etch et Exim connecté avec un backend MySQL"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Faire des routines de déploiement en XML avec Apache Ant"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Monter une librairie de "},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2010\u002F02\u002Fscript-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre\u002F"},children:[{type:a,value:"migration de base de donnée d'un serveur à l'autre"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:aE,props:{to:k$},children:[{type:a,value:"Monter un \"Une VM Linux qui sert au développement\" et utiliser un tunnel X pour afficher localement ce qui est exécuté dans la VM"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:aE,props:{to:la},children:[{type:a,value:"Monter une sandbox... sous Mac OS X"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Un projet de gestion de parc informatique"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Un projet de gestion de menu utilisant le \""},{type:b,tag:u,props:{},children:[{type:a,value:"Fichier canadien sur les éléments nutritifs"}]},{type:a,value:I}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"... et plusieurs autres."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:an,props:{id:kU},children:[{type:b,tag:l,props:{href:"#pourquoi-avons-nous-lanc%C3%A9-un-autre-%C3%A9v%C3%A9nement-%C3%A0-montr%C3%A9al",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Pourquoi avons-nous lancé un "},{type:b,tag:u,props:{},children:[{type:a,value:"autre"}]},{type:a,value:" événement à Montréal"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Étant donné qu'aucun événement à Montréal n'avait ce type de concept, nous l'avons ouvert au public. Surtout que les gens autour de nous aimaient l'idée de nos rencontres."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Notre objectif est clair:"}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"devLAB est une occasion de partager avec d'autres passionnés en faisant des rencontres hebdomadaires de travail où on \"met la main à la pâte\"."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Parce que ce qu'on veut depuis toujours c'est un endroit où essayer des trucs. Peu importe la techno. Des choses qu'on ne peut pas nécessairement faire au bureau, ou chez soi. C'est de se donner une occasion d'améliorer ses capacités."}]},{type:a,value:e},{type:b,tag:an,props:{id:kV},children:[{type:b,tag:l,props:{href:"#evocatio--l%C5%93uf-ou-la-poule",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:kW}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour les gens qui se le demandent. Evocatio a commencé À CAUSE des GeekNights."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pas le contraire."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"En fait, nous sommes ouverts à l'aide pour en faire une entité à part entière."}]},{type:a,value:e},{type:b,tag:an,props:{id:kX},children:[{type:b,tag:l,props:{href:"#la-direction-de-devlab",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:kY}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"... notre manifeste, en quelque sorte. Pas nécessairement officiel mais va comme suit:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Rencontre tous les mercredis 18h30-22h00"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Avancer un projet de logiciel Libre"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ne pas se coincer qu'à une seule technologie ou langage de programmation"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Travailler en équipe ("},{type:b,tag:c,props:{lang:aU},children:[{type:a,value:"code pairing"}]},{type:a,value:") pour apprendre des interventions de son pair"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ajouter des facteurs d'inconnus côté technologique"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Tout le monde est là pour apprendre et jouer à la technologie"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"But non lucratif. Aucune entreprise ne peut être promue par devLAB. Le contraire n'est pas interdit par contre."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{lang:aU},children:[{type:a,value:"Bilingualism from the ground up"}]},{type:a,value:" (Except that my blog is for a french only audience. sorry)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:an,props:{id:kZ},children:[{type:b,tag:l,props:{href:"#cest-quand",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:k_}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:eR,props:{},children:[{type:a,value:"CE Mercredi, ou le prochain!"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le détail des annonces sur "},{type:b,tag:l,props:{href:kM,rel:[C,G,H],target:A},children:[{type:a,value:"Techentreprise"}]},{type:a,value:" (voir le lien devLAB Montréal), Twitter via "},{type:b,tag:l,props:{href:kN,rel:[C,G,H],target:A},children:[{type:a,value:"@devLABmtl"}]},{type:a,value:" et dans le "},{type:b,tag:l,props:{href:kO,rel:[C,G,H],target:A},children:[{type:a,value:"groupe Facebook"}]},{type:a,value:". Vous pouvez aussi être fan de la "},{type:b,tag:l,props:{href:kP,rel:[C,G,H],target:A},children:[{type:a,value:"Page Facebook"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Vous pouvez aussi "},{type:b,tag:l,props:{href:fD,rel:[C,G,H],target:A},children:[{type:a,value:"devlabmtl.org"}]},{type:a,value:" et qui n'est pas aussi à jour mais qui le sera éventuellement. :)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Vous voulez vous joindre à nous? Pas de problème! Si vous avez des questions vous pouvez envoyer un courriel à "},{type:b,tag:s,props:{},children:[{type:a,value:"info A dev LAB mtl POINT org"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Au plaisir de vous y croiser."}]}]},dir:"\u002Fblog\u002F2011\u002F02",path:"\u002Fblog\u002F2011\u002F02\u002Fdevlab-montreal-cest-maintenant-parti",extension:aw,slug:"devlab-montreal-cest-maintenant-parti",createdAt:lb,updatedAt:lb,category:aH,prettyfiedTemporalDate:{prettified:"mardi 8 février 2011",temporalDate:"2011-02-08"}},{locale:aG,title:"Comment remplacer les caract√®res bizzares dans WordPress lorsqu'on a mal fait la conversion",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F06\u002Fcomment-remplacer-les-caracteres-bizzares-dans-wordpress-lorsqu-on-a-mal-fait-la-conversion\u002F",status:av,revising:T,migrateCode:T,migrateLinks:T,created:"2010-06-10",updated:ea,tags:[as,dU,cl],categories:[lc],excerpt:aF,toc:[{depth:K,text:ld},{depth:K,text:le},{depth:K,text:lf},{depth:K,text:lg}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Accrocheur mon titre n'est-ce pas? Je trouve ça tellement pas drôle lorsque ça m'arrive ce genre de situation avec les caractères accentués. Le problème n'arrive pas tout le temps qu'avec WordPress."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Voici, enfin, une suite a mon billet "},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2009\u002F09\u002Fpourquoi-tout-ces-caracteres-bizzares\u002F"},children:[{type:a,value:"Pourquoi tout ces caractères bizzares"}]},{type:a,value:".  Je devais travailler sur un problème de conversion de caractères pour un client dus a une conversion non réussie et\u002Fou terminée entre "},{type:b,tag:ad,props:{},children:[{type:a,value:"latin1"}]},{type:a,value:d$},{type:b,tag:ad,props:{},children:[{type:a,value:"utf-8"}]},{type:a,value:" puis je me suis remis a penser a ce problème. Pourquoi ne pas le régler, et documenter!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Voilà pourquoi ce billet ;)"}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:ld}]},{type:a,value:"\nMon cas était bien simple. J'avait mal fait ma sauvegarde lors d'un transfert et j'avait tout mes commentaires, billets, et autres données qui avait des accents \""},{type:b,tag:ad,props:{},children:[{type:a,value:"transform√©s comme √áa"}]},{type:a,value:"\" (transformés comme ça).\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Ce genre de problème arrive pour toutes sortes de raisons. Mais le symptôme est le même. Si vous avez des\nJe partage avec vous mon bout de code a «copier-coller» dans "},{type:b,tag:ad,props:{},children:[{type:a,value:lh}]},{type:a,value:" pour votre blogue WordPress si vous avez ces problèmes (oubliez-pas de faire des sauvegardes là(!))."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Plusieurs tutoriels existent pour régler la situation mais mon cas était assez unique. J'ai conservé le problème puis j'ai publié plusieurs billets (qui sortent bien) et laissé ceux \""},{type:b,tag:ad,props:{},children:[{type:a,value:"ab√Æm√©s"}]},{type:a,value:"\" là. "},{type:b,tag:s,props:{},children:[{type:a,value:"Il n'était plus question d'extraire, convertir et ré-importer"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:le}]},{type:a,value:"\nC'est une réponse assez complexe. L'article "},{type:b,tag:l,props:{href:"http:\u002F\u002Ftikiwiki.org\u002FUTF-8"},children:[{type:b,tag:s,props:{},children:[{type:a,value:"UTF-8"}]},{type:a,value:" sur TikiWiki.org"}]},{type:a,value:" l'explique en détail.\n"},{type:b,tag:bg,props:{},children:[{type:a,value:"In short, UTF-8 is a character encoding that uses 1 to 3 bytes for each character.\nIt is one of the existing character encodings of the UCS (Universal Character Set), that contains nearly a hundred thousand abstract characters (including ASCII characters).\n"},{type:b,tag:h,props:{},children:[{type:a,value:"UTF-8 greatly simplifies the task of internationalization by replacing multiple alternative encodings (such as ISO8859-15 Latin-9, which encodes those English, French, German, Spanish and Portuguese characters not available in ASCII)."}]}]},{type:b,tag:h,props:{},children:[]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"En simple, le UTF-8 est un format d'encodage qui utilise 1 a 3 bytes pour chaque caractère. C'est un format d'encodage qui comprend près de plusieurs centaines de milliers de caractères (Incluant ceux du ASCII)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"UTF-8 est fait pour contenir tout les caractères existants pour simplifier l'internationalisation."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"C'est un standard qui est pas nécessairement jeune mais qui n'était pas non plus supporté partout."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"MySQL a commencé a le supporter qu'a partir de la version 4.1."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ce qui arrive c'est qu'avec le temps, les gens prennent de plus en plus soin de rendre accessible pour toutes les langues leur applications. Ainsi un russe pourrait écrire en cyrillic et un Japonais en Kanji dans la même base de donnée. Le coup est difficile! Surtout que les versions de MySQL et PHP et Java offrent maintenant le choix par défaut en UTF-8... lorsqu'on fait pas attention: on se fait coincer!"}]},{type:a,value:e},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:lf}]},{type:a,value:"\nComme il n'y a pas que WordPress qui peut avoir ce type de problème j'ai fait un petit script qui génère pour chaque table et colone affectée. J'ai passé dans chaque table et colone où je voyait des choses bizzares et j'ai représenté dans un array a deux dimensions. Avec cette méthode on peut faire la même chose avec n'importequel schéma de base de donnée.\n"},{type:b,tag:ax,props:{},children:[{type:a,value:"Exemple: Représenter les tables et les colones"}]},{type:a,value:"\nAvec ce format, en exemple, j'ai représenté les tables ("},{type:b,tag:ad,props:{},children:[{type:a,value:"wp_posts"}]},{type:a,value:", etc...) et chaque array représente une colone où des caractères accentués sont mal convertis.\n"},{type:b,tag:o,props:{lang:cl},children:[{type:a,value:"$tables = array(\n        'wp_posts' =\u003E array('post_content','post_title','post_excerpt')\n        ,'wp_usermeta' =\u003E array('meta_value')\n        ,'wp_term_taxonomy' =\u003E array('description')\n        ,'wp_comments' =\u003E array('comment_content')\n);\n"}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:lg}]},{type:a,value:"\nLe script a été utilisé pratiquement tel quel sur ma base de donnée WordPress de ce site.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Seuls ajustements a faire."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:ag},{type:b,tag:i,props:{},children:[{type:a,value:"Remplacer les \"\u003C pre \u003E\" par \"\u003Cpre\u003E\". Vous comprenez le principe ;)"}]},{type:a,value:ag},{type:b,tag:i,props:{},children:[{type:a,value:"Afficher le contenu généré via un serveur Web avec PHP installé"}]},{type:a,value:ag},{type:b,tag:i,props:{},children:[{type:a,value:li},{type:b,tag:ad,props:{},children:[{type:a,value:lh}]},{type:a,value:aO},{type:b,tag:s,props:{},children:[{type:a,value:"faire une copie de la base de donnée à affecter"}]},{type:a,value:" (Voir dans onglet \""},{type:b,tag:ad,props:{},children:[{type:a,value:"Opérations"}]},{type:a,value:lj},{type:b,tag:ad,props:{},children:[{type:a,value:"Copier la base de données vers:  "}]},{type:a,value:fA}]},{type:a,value:ag},{type:b,tag:i,props:{},children:[{type:a,value:"Aller dans cette base de donnée là dans phpmyadmin (!!)"}]},{type:a,value:ag},{type:b,tag:i,props:{},children:[{type:a,value:"Exécuter le code généré (copier-coller) dans la fenêtre "},{type:b,tag:ad,props:{},children:[{type:a,value:"SQL"}]},{type:a,value:" de la base de donnée de tests"}]},{type:a,value:ag},{type:b,tag:i,props:{},children:[{type:a,value:"Faire pareil avec la vraie si vous êtes satisfaits du résultat"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"Le code"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[fu,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cG}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'Content-type:text\u002Fhtml;charset=utf8'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'wp_posts'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'post_content'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'post_title'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'post_excerpt'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'wp_usermeta'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'meta_value'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'wp_term_taxonomy'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'description'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'wp_comments'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'comment_content'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ll}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√Ä'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|À'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√¥'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|ô'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√Ç'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:lm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√á'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:ln}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√©'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|é'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√â'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|É'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√†'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|à'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√®'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|è'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√™'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|ê'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√¢'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:lm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'‚Äô'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|‘'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'¬´'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|«'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'¬ª'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|»'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√ß'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:ln}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√π'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|ù'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√ª'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|û'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:aP}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'√Æ'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|î'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fE}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lo}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lp}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fE}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fG}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fE}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ll}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:fF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fH}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"explode"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'|'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lr}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:".="}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'update '"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lo}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"' set '"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fG}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"' = REPLACE('"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fG}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"', UNHEX(\\''"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'\\'), \\''"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'\\') ;'"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,ca]},children:[{type:a,value:"PHP_EOL"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'\u003C pre \u003E'"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:lr}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,n,ac]},children:[{type:a,value:"'\u003C \u002F pre \u003E'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e}]}]}]}]},dir:"\u002Fblog\u002F2010\u002F06",path:"\u002Fblog\u002F2010\u002F06\u002Fcomment-remplacer-les-caracteres-bizzares-dans-wordpress-lorsqu-on-a-mal-fait-la-conversion",extension:aw,slug:"comment-remplacer-les-caracteres-bizzares-dans-wordpress-lorsqu-on-a-mal-fait-la-conversion",createdAt:ls,updatedAt:ls,category:lc,prettyfiedTemporalDate:{prettified:"jeudi 10 juin 2010",temporalDate:"2010-06-10"}},{locale:aG,title:"Procédure pour créer un serveur FTP sécurisé SSL forcé avec usager virtuels sous Ubuntu Linux avec vsFTPd",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd\u002F",status:av,revising:T,created:"2010-04-30",updated:ea,tags:[as,cW,b_,bc,cX],categories:[],excerpt:aF,toc:[{depth:K,text:lt},{depth:K,text:bN},{depth:K,text:fI},{depth:K,text:lu},{depth:K,text:lv},{depth:K,text:c_},{depth:K,text:lw},{depth:K,text:lx},{depth:K,text:ly}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Je ne sais pas si vous êtes comme moi mais je n'aime pas laisser non crypté l'accès a un service qui me demande un mot de passe. Je devait monter un serveur cette semaine qui doit avoir les accès FTP."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"J'ai pris l'initiative de sécuriser la machine avec du SSL car je crois qu'aujourd'hui c'est notre devoir de faire ce genre de chose. Ce n'est pas la première fois que je configure un serveur FTP over SSL mais je n'avait jamais pris de notes vraiment à ce jour. Je l'ai fait cette fois-ci!"}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cequecetteproc%C3%A9durefait..."},children:[]},{type:a,value:lt}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Pouvoir créer des comptes FTP sans avoir a créer un utilisateur local (donc pas accès shell (SSH))."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Permet les connections FTP over SSL de façon EXPLICITE sur un port non standard  (cet exemple utilisera le port "},{type:b,tag:ad,props:{},children:[{type:a,value:"6123"}]},{type:a,value:$}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ne permet pas d'utilisateur ni de connexions anonymes"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Bannit les hôtes qui tentent de se connecter (LOGIN FAILED)\tvia "},{type:b,tag:s,props:{},children:[{type:a,value:lz}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Utilise le system PAM interne pour l'authentification"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ne requiert pas d'usager local (pas de risque de tentative de connection SSH, usager séparés)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Le serveur FTP roule sur son propre usager"}]},{type:a,value:e}]},{type:a,value:e},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Proc%C3%A9dure"},children:[]},{type:a,value:bN}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Vérifier quelle version de serveur FTP est installé\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# dpkg --list | grep ftp\n~\nii  ftp                               0.17-19                      The FTP client\nii  lftp                              3.7.15-1ubuntu2              Sophisticated command-line FTP\u002FHTTP client p\nii  vsftpd                            2.2.0-1ubuntu1               lightweight, efficient FTP server written fo"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" vsftpd est ce qu'on veut. Dans ce cas-ci il est déjà installé (ii)."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Assurer que les prérequis sont installés\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# aptitude install vsftpd libpam-pwdfile openssl"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Modifier le fichier de config "},{type:b,tag:s,props:{},children:[{type:a,value:"vsftpd.conf"}]},{type:a,value:bW},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" Modifiez pour ces valeurs (ci-bas) et conservez les autres valeurs par défaut.\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\nlocal_umask=022\nchroot_local_user=YES\nftpd_banner=Un nom Quelconque FTP\nnopriv_user=vsftpd\n"},{type:b,tag:c$,props:{id:"renoirboulangercom-2010-04-29-we-will-force-usage-on-an-other-port"},children:[{type:b,tag:l,props:{ariaHidden:J,href:"#renoirboulangercom-2010-04-29-we-will-force-usage-on-an-other-port",tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"renoirboulanger.com 2010-04-29 we will force usage on an other port"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"#connect_from_port_20=YES"}]}]},{type:b,tag:h,props:{},children:[]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ajouter ou corriger (étaient pas présents lorsque j'ai crée la procédure)\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# 2010-04-28 accès usager\nvirtual_use_local_privs=YES\nguest_enable=YES\nuser_sub_token=$USER\nlocal_root=\u002Fhome\u002Fibottin\u002FFTP\u002F$USER\nhide_ids=YES"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" Ajuster le "},{type:b,tag:ad,props:{},children:[{type:a,value:"local_root"}]},{type:a,value:" a l'endroit\tou envoyer les fichiers."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Activer le SSL\n"},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Créer le certificat\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# cd \u002Fetc\u002Fssl\n# \u002Fusr\u002Fbin\u002Fopenssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout vsftpd.pem -out vsftpd.pem"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ajouter au "},{type:b,tag:ad,props:{},children:[{type:a,value:"\u002Fetc\u002Fvsftpd.conf"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\n# renoirboulanger.com 2010-04-30 SSL configuration\nlisten_port=6123\nftp_data_port=6122\npasv_min_port=6000\npasv_max_port=6100\n"},{type:b,tag:h,props:{},children:[{type:a,value:"ssl_enable=YES"}]},{type:a,value:e},{type:b,tag:c$,props:{id:"allow-anonymous-users-to-use-secured-ssl-connections"},children:[{type:b,tag:l,props:{ariaHidden:J,href:"#allow-anonymous-users-to-use-secured-ssl-connections",tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Allow anonymous users to use secured SSL connections"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"allow_anon_ssl=YES"}]},{type:a,value:e},{type:b,tag:c$,props:{id:"all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to"},children:[{type:b,tag:l,props:{ariaHidden:J,href:"#all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to",tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"All non-anonymous logins are forced to use a secure SSL connection in order to"}]},{type:a,value:e},{type:b,tag:c$,props:{id:"send-and-receive-data-on-data-connections"},children:[{type:b,tag:l,props:{ariaHidden:J,href:"#send-and-receive-data-on-data-connections",tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"send and receive data on data connections."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"force_local_data_ssl=NO"}]},{type:a,value:e},{type:b,tag:c$,props:{id:"all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to-send-the-password"},children:[{type:b,tag:l,props:{ariaHidden:J,href:"#all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to-send-the-password",tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"All non-anonymous logins are forced to use a secure SSL connection in order to send the password."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"force_local_logins_ssl=YES\nssl_tlsv1=YES\nssl_sslv2=YES\nssl_sslv3=YES\nrsa_cert_file=\u002Fetc\u002Fssl\u002Fvsftpd.pem"}]}]},{type:b,tag:h,props:{},children:[]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:lA}]},{type:a,value:" le contenu du fichier "},{type:b,tag:ad,props:{},children:[{type:a,value:"pam.d\u002Fvsftpd"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# vi \u002Fetc\u002Fpam.d\u002Fvsftpd\n~\nauth required pam_pwdfile.so pwdfile \u002Fetc\u002Fvsftpd.passwd\naccount required pam_permit.so"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" Il est important de remplacer le reste du fichier par ce contenu ci-haut."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Modifier permissions sur le fichier .pem\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# chown vsftpd \u002Fetc\u002Fssl\u002Fvsftpd.pem"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:lB},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# \u002Fetc\u002Finit.d\u002Fvsftpd restart"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Créer le unix user qui va rouler le démon\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# adduser --system --no-create-home --disabled-login -s \u002Fusr\u002Fsbin\u002Fnologin --home \u002Fvar\u002Fftp vsftpd"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Modifier les permissions pour l'utilisateur qui roule vsftpd (ajuster)\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# chown -R ftp:ftp \u002Fvar\u002Fftp\u002F\n# chmod -R 740 \u002Fvar\u002Fftp"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:aE,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP"},children:[{type:a,value:fI}]}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ajuster "},{type:b,tag:ad,props:{},children:[{type:a,value:lz}]},{type:a,value:e},{type:b,tag:w,props:{className:[k,lC],style:lD},children:[{type:a,value:e},{type:b,tag:w,props:{className:["codeHeader","panelHeader"],style:"border-bottom-width: 1px;"},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Ajuster le bloc [vsftpd]"}]}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# vi \u002Fetc\u002Ffail2ban\u002Fjail.conf\n~\n[vsftpd]\n"},{type:b,tag:h,props:{},children:[{type:a,value:"enabled  = true"}]}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" par defaut "},{type:b,tag:ad,props:{},children:[{type:a,value:"enabled"}]},{type:a,value:" est a false...\til faut l'activer."},{type:b,tag:h,props:{},children:[]},{type:a,value:e}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:lB},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# \u002Fetc\u002Finit.d\u002Fvsftpd restart\n * Stopping FTP server: vsftpd\n   ...done.\n * Starting FTP server: vsftpd\n   ...done.\n# ps aux|grep vsftpd\nvsftpd   18771  0.0  0.0  28904  1300 ?        Ss   17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nvsftpd   18772  0.0  0.0  29100  1608 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nftp      18773  0.0  0.0  28928   924 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nroot     18795  0.0  0.0  22628  1712 ?        S    17:14   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\n..."}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" les deux premiers "},{type:b,tag:ad,props:{},children:[{type:a,value:"vsftpd"}]},{type:a,value:" est le résultat attendu"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Nous allons forcer le FTP over SSL sur le port "},{type:b,tag:s,props:{},children:[{type:a,value:"6122"}]},{type:a,value:", pour ça il faut autoriser le Firewall\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# iptables -A INPUT -m state --state ESTABLISHED,RELATED\n# iptables -A INPUT -m tcp -p tcp --dport 6122 -j ACCEPT\n# iptables -A INPUT -m state --state NEW,ESTABLISHED\n# iptables -A INPUT -m tcp -p tcp --dport 6123 -j ACCEPT\n# iptables -A INPUT -p tcp --dport 6000:6100 -j ACCEPT"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:lE}]},{type:a,value:": "},{type:b,tag:l,props:{href:lF},children:[{type:a,value:lG}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Sauvegarder le Firewall\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# iptables-save \u003E \u002Fetc\u002Fiptables.rules"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Tester de l'extérieur avec un client FTP (Filezilla, etc)\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Voir les options suivantes a la connection"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"port: 6123"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Forcer le SSL"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP"},children:[]},{type:a,value:fI}]},{type:a,value:"\nOn utilise le truc simple de htpasswd pour l'authentification. Pas de gossage :-)\n"},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cr%C3%A9erunnouveaucompte"},children:[]},{type:a,value:lu}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Créer le "},{type:b,tag:u,props:{},children:[{type:a,value:"premier compte"}]},{type:a,value:", sinon, "},{type:b,tag:s,props:{},children:[{type:a,value:"passer\ta la directive suivante"}]},{type:a,value:"! ou Utiliser mon script "},{type:b,tag:aE,props:{to:fJ},children:[{type:a,value:c_}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# htpasswd -c \u002Fetc\u002Fvsftpd.passwd ftpuser\nNew password:\nRe-type new password:\nAdding password for user ftpuser"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" l'option "},{type:b,tag:s,props:{},children:[{type:b,tag:ad,props:{},children:[{type:a,value:iY}]}]},{type:a,value:" est\tpour créer le fichier la première fois."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Voir les directives de *"},{type:b,tag:aE,props:{to:fJ},children:[{type:a,value:c_}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ajouteroumodifierunutilisateur"},children:[]},{type:b,tag:s,props:{},children:[{type:a,value:lv}]}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Utiliser le script "},{type:b,tag:s,props:{},children:[{type:b,tag:ad,props:{},children:[{type:a,value:"evo-vsftpd-user"}]}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ sudo evo-vsftpd-user foo\nCréation d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ...\nNew password:\nRe-type new password:\nAdding password for user foo\n ... OK\n * Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002Ffoo ...  OK\n * Changement des permissions du dossier ...  OK\nTerminé!"}]},{type:a,value:"\nVoir les directives de "},{type:b,tag:s,props:{},children:[{type:b,tag:aE,props:{to:fJ},children:[{type:a,value:c_}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur"},children:[]},{type:a,value:c_}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Créer le fichier\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# vi \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Coller le contenu\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"#!\u002Fbin\u002Fbash\nif [ -z $1 ]; then\n  echo \"Aucun argument usager fourni\"\n  echo \"usage: sudo evo-vsftpd-user foo\"\n  exit 1;\nfi\n"},{type:b,tag:h,props:{},children:[{type:a,value:"if [ \"$(whoami)\" != 'root' ]; then\necho \"Vous n'avez pas les permisions utilisateur requises.\"\nexit 1;\nfi"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"echo \"Création d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ... \"\nhtpasswd \u002Fetc\u002Fvsftpd.passwd $1\necho \" ... OK \"\necho -n \" "},{type:b,tag:u,props:{},children:[{type:a,value:" Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002F$1 ... \"\nmkdir \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho -n \" "}]},{type:a,value:" Changement des permissions du dossier ... \"\nchown -R ftp:ftp \u002Fhome\u002Fibottin\u002FFTP\u002F$1\nchmod -R 740 \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho \"Terminé!\""}]}]},{type:b,tag:h,props:{},children:[]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Rendre exécutable\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# chmod +x \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Tester"},children:[]},{type:a,value:lw}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Installer le paquet pour tester\n"},{type:b,tag:w,props:{className:[k,lC],style:lD},children:[{type:a,value:e},{type:b,tag:w,props:{className:[lH,"panelContent"]},children:[{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# aptitude install ftp-ssl"}]},{type:a,value:e}]},{type:a,value:e}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Tester\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# ftp-ssl someserver.net 6123\nConnected to someserver.net.\n220 Un nom Quelconque FTP\nName (someserver.net:renoirboulanger): ftpuser\n234 Proceed with negotiation.\n[SSL Cipher DES-XXXX-SHA]\n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp\u003E"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" [SSL Cipher DES-XXXX-SHA] est ce qu'on attend :-)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Pourd%C3%A9boguer"},children:[]},{type:a,value:lx}]},{type:a,value:"\nLe feedback est assez difficile a avoir de la part de vsftpd, mais pour en voir plus:\n"},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Pour le debug\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\n# for debuging\nlog_ftp_protocol=YES"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ressources"},children:[]},{type:a,value:ly}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwjholden.com\u002Fvsftpd-help.html"},children:[{type:a,value:"vsftpd help"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fvsftpd.beasts.org\u002Fvsftpd_conf.html"},children:[{type:a,value:"vsftpd.conf manpages"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:lF},children:[{type:a,value:lG}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.ubuntututorials.net\u002Finstalling-vsftpd-using-text-file-for-virtual-users\u002F"},children:[{type:a,value:"Installing vsftpd using text file for virtual users"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.cyberciti.biz\u002Ftips\u002Fconfigure-vsfptd-secure-connections-via-ssl-tls.html"},children:[{type:a,value:"Vsftpd SSL \u002F TLS FTP Server Configuration"}]}]},{type:a,value:e}]}]},dir:fK,path:"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd",extension:aw,slug:"procedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd",createdAt:lI,updatedAt:lI,category:aF,prettyfiedTemporalDate:{prettified:"vendredi 30 avril 2010",temporalDate:"2010-04-30"}},{locale:aG,title:"Les différentes versions du service de tâches planifié CRON",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fles-differentes-versions-du-service-de-taches-planifie-cron\u002F",status:av,revising:T,created:"2010-04-19",updated:bj,tags:[as,fL,bZ,cX,"vocabulaire"],categories:[aH],excerpt:aF,toc:[{depth:K,text:lJ},{depth:K,text:"Versions de CRON"}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:b,tag:fM,props:{className:[lK,"wp-image-2104"],style:"float: right; border: 0px;",title:"Une horloge",src:"https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2010\u002F04\u002FClock-icon.png",alt:aF,width:lL,height:lL},children:[]},{type:a,value:"Suite a mon article «"},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim\u002F"},children:[{type:a,value:"Comment automatiser une tâche avec "},{type:b,tag:u,props:{},children:[{type:a,value:ed}]},{type:a,value:" en utilisant Vim"}]},{type:a,value:"» je me suis venu aux questions sur les différences essentielles entre les versions de "},{type:b,tag:u,props:{},children:[{type:a,value:ed}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le concept de "},{type:b,tag:u,props:{},children:[{type:a,value:ed}]},{type:a,value:" est, un «lanceur de commandes» planifié pour les systèmes UNIX. Le nom est inspiré du dieu grec Chronos."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ayant déjà utilise Gentoo Linux j'avait vu qu'il était possible d'utiliser plus d'une version de CRON mais je ne m'était jamais penché sur les différences. Je l'ai fait aujourd'hui."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:lJ}]},{type:a,value:"\nGénéralement chaque distribution de système d'exploitation UNIX (Linux, Unix, Qnx, etc) a son lot d'outils standards dont CRON fait partie. Chaque éditeur de distribution choisit sa version préférée mais permet d'interchanger (avec "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwiki.debian.org\u002FDebianAlternatives"},children:[{type:a,value:"Alternatives sous Debian"}]},{type:a,value:", par exemple).\n"},{type:b,tag:L,props:{},children:[{type:a,value:"Versions de "},{type:b,tag:u,props:{},children:[{type:a,value:ed}]}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:lM}]},{type:a,value:"\nLa différence d'"},{type:b,tag:u,props:{},children:[{type:a,value:lM}]},{type:a,value:" avec "},{type:b,tag:u,props:{},children:[{type:a,value:"cron"}]},{type:a,value:" (traditionnel) est le fait qu'Anacron ne roule pas en permanence comme un démon en arrière plan. Il est idéal sur des système qui ne roule pas nécessairement 24 heures par jour ou avec peu de ressources processeur.\n"},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fanacron.sourceforge.net\u002F"},children:[{type:a,value:ee}]}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"vixie-cron"}]},{type:a,value:"\nLa version de cron la plus utilisée (selon mon expérience, notamment sous les installation par défaut de Ubuntu, Debian et Red Hat et CentOS)\n"},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Ftroy.jdmz.net\u002Fcron\u002F"},children:[{type:a,value:ee}]}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"bcron"}]},{type:a,value:"\nL'auteur a crée cette version car il avait besoin de précision concernant les délais entre les commandes et les changements de saisons (Heure d'été).\n"},{type:b,tag:h,props:{},children:[{type:a,value:"J'ai remarqué plusieurs autres outils intéressant que l'auteur a publié. Je l'ai ajouté a mes marque-pages."}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"fcron"}]},{type:a,value:"\nL'auteur a crée cette version de cron dans l'optique que la machine peut ne pas être allumée 24\u002F24 et 7 jours\u002F7. fcron se base plutôt sur le temps que le système fonctionne (le «uptime») plutot qu'un moment précis. L'auteur dit que fcron veut remplacer Vixie-cron et anacron mais en "},{type:b,tag:u,props:{},children:[{type:a,value:"mieux"}]},{type:a,value:bW},{type:b,tag:h,props:{},children:[{type:a,value:"Le genre de tâche qu'on peut faire est:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Lance une commande aux chaque 3heures que le système est allumé"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Lance une commande au moins une fois entre 3h00 am et 6h00 am tout les jours."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:l,props:{href:"http:\u002F\u002Ffcron.free.fr\u002F"},children:[{type:a,value:ee}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"incron"}]},{type:a,value:"\nincron est une fonctionnalité cron a l'application inotify qui est un système basé sur le système de fichiers plutôt que sur des plages de temps. Un cas d'utilisation serait, par exemple, de pouvoir lancer une commande lorsqu'un logrotate a été lancé ou si un fichier a été ajouté dans un dossier.\n"},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Flinux.die.net\u002Fman\u002F5\u002Fincron.conf"},children:[{type:a,value:"pages manuel"}]},{type:a,value:" - "},{type:b,tag:l,props:{href:"http:\u002F\u002Finotify.aiken.cz\u002F"},children:[{type:a,value:ee}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Autres versions"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Avez-vous utilisé l'un d'eux dans vos projets?"}]}]},dir:fK,path:"\u002Fblog\u002F2010\u002F04\u002Fles-differentes-versions-du-service-de-taches-planifie-cron",extension:aw,slug:"les-differentes-versions-du-service-de-taches-planifie-cron",createdAt:ef,updatedAt:ef,category:aH,prettyfiedTemporalDate:{prettified:"lundi 19 avril 2010",temporalDate:"2010-04-19"}},{locale:aG,title:"Comment dire à Apache le mime-type d'un document Office 2007",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fcomment-dire-a-apache-le-mime-type-dun-document-office-2007\u002F",status:av,revising:T,migrateLinks:T,migrateCode:T,created:"2010-04-21",updated:bj,tags:[as,b_,cX,kI],categories:[aH],excerpt:aF,toc:[{depth:K,text:bN}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"J'ai entendu parler de certains Problèmes avec les documents "},{type:b,tag:s,props:{},children:[{type:a,value:".docx"}]},{type:a,value:" qui son considérés comme étant des fichiers zip. J'ai pensé partager avec vous comment j'ai réparé la situation."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Il est possible que le serveur apache ne considère pas les fichiers doc sur le serveur comme étant des fichiers office. Normalement un navigateur téléchargera le fichier et ouvrira avec le programme qu'il considère comme étant le bon."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"A moins que l'ordinateur du visiteur ait pas de bonne association de fichier, dans ce cas, on peut rien y faire."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour aider, on peut annoncer au serveur web les associations MIME."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le problème avec cette méthode qui ne sert presque a rien, c'est que ça ne changera rien si"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Le visiteur n'a pas de bonne association sur son système d'exploitation"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Le visiteur n'a pas Microsoft Office 2007 ou Open Office"}]},{type:a,value:e}]},{type:a,value:e},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:bN}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Copier-coller ce bloc dans un ou encore dans l'un ou l'autre:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:lN},{type:b,tag:ad,props:{},children:[{type:a,value:".htaccess"}]},{type:a,value:" du site qui contient les fichiers a télécharger, exemple: "},{type:b,tag:ad,props:{},children:[{type:a,value:"public_html\u002F"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:lN},{type:b,tag:ad,props:{},children:[{type:a,value:"\u003CVirtualHost\u002F\u003E"}]},{type:a,value:" dans le "},{type:b,tag:ad,props:{},children:[{type:a,value:"\u003CDirectory\u003E"}]},{type:a,value:" associé."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{lang:"htaccess"},children:[{type:a,value:"AddType application\u002Fvnd.ms-word.document.macroEnabled.12 .docm\nAddType application\u002Fvnd.openxmlformats-officedocument.wordprocessingml.document docx\nAddType application\u002Fvnd.openxmlformats-officedocument.wordprocessingml.template dotx\nAddType application\u002Fvnd.ms-powerpoint.template.macroEnabled.12 potm\nAddType application\u002Fvnd.openxmlformats-officedocument.presentationml.template potx\nAddType application\u002Fvnd.ms-powerpoint.addin.macroEnabled.12 ppam\nAddType application\u002Fvnd.ms-powerpoint.slideshow.macroEnabled.12 ppsm\nAddType application\u002Fvnd.openxmlformats-officedocument.presentationml.slideshow ppsx\nAddType application\u002Fvnd.ms-powerpoint.presentation.macroEnabled.12 pptm\nAddType application\u002Fvnd.openxmlformats-officedocument.presentationml.presentation pptx\nAddType application\u002Fvnd.ms-excel.addin.macroEnabled.12 xlam\nAddType application\u002Fvnd.ms-excel.sheet.binary.macroEnabled.12 xlsb\nAddType application\u002Fvnd.ms-excel.sheet.macroEnabled.12 xlsm\nAddType application\u002Fvnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx\nAddType application\u002Fvnd.ms-excel.template.macroEnabled.12 xltm\nAddType application\u002Fvnd.openxmlformats-officedocument.spreadsheetml.template xltx"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"source:"}]},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.webdeveloper.com\u002Fforum\u002Fshowthread.php?t=162526"},children:[{type:a,value:"Webdeveloper.com"}]}]}]},dir:fK,path:"\u002Fblog\u002F2010\u002F04\u002Fcomment-dire-a-apache-le-mime-type-dun-document-office-2007",extension:aw,slug:"comment-dire-a-apache-le-mime-type-dun-document-office-2007",createdAt:ef,updatedAt:ef,category:aH,prettyfiedTemporalDate:{prettified:"mercredi 21 avril 2010",temporalDate:"2010-04-21"}},{title:"Script bash pour transférer une base de donnée MySQL d’un serveur à l’autre",locale:aG,created:"2010-02-09T00:00:00.000Z",updated:"2013-06-12T00:00:00.000Z",canonical:kK,status:av,revising:T,migrateCode:T,migrateLinks:T,categories:[aQ],tags:[as,S,"script","sql"],toc:[{id:lO,depth:K,text:lP},{id:lQ,depth:K,text:lR},{id:lS,depth:K,text:lT},{id:lU,depth:K,text:lV}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Il m’est arrivé récemment de devoir transférer plusieurs dizaines de sites web\nd’un serveur à l’autre manuellement."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans ce billet j’expliquerai le processus que j’ai utilisé pour en finir par\nproduire un script bash qui pourrait vous être utile."}]},{type:a,value:e},{type:b,tag:L,props:{id:lO},children:[{type:b,tag:l,props:{href:"#%C3%A0-propos-du-projet",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:lP}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Considérant que certains sites avaient plus d’une base de données il était hors\nde question de faire a bras les lignes "},{type:b,tag:u,props:{},children:[{type:a,value:fN}]},{type:a,value:aO},{type:b,tag:u,props:{},children:[{type:a,value:bV}]},{type:a,value:" (en fait le transfert\nse fait en compressant le fichier et le copiant via une redirection gzip avec\ncat), "},{type:b,tag:u,props:{},children:[{type:a,value:dU}]},{type:a,value:" pour, en ordre, dumper la base de données, la transférer, et la\nrestaurer.... sans oublier les "},{type:b,tag:u,props:{},children:[{type:a,value:"CREATE users"}]},{type:a,value:" pour chaque."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je me suis dit: "},{type:b,tag:u,props:{},children:[{type:a,value:"faisons-en un script"}]},{type:a,value:bq}]},{type:a,value:e},{type:b,tag:L,props:{id:lQ},children:[{type:b,tag:l,props:{href:"#les-pr%C3%A9requis",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:lR}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Nous voulions..."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Faciliter le travail car on savait qu’il faudrait souvent transférer, plus\nd’une fois, chacune des bases de données; Car nous devions faire fonctionner\nle site sur le nouveau serveur "},{type:b,tag:u,props:{},children:[{type:a,value:"avant"}]},{type:a,value:" de transférer les DNS."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Entrer une commande "},{type:b,tag:u,props:{},children:[{type:a,value:"minimale"}]},{type:a,value:" et en conserver les configurations;"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Que le "},{type:b,tag:u,props:{},children:[{type:a,value:"nouveau"}]},{type:a,value:" serveur réalise la tâche a lui-seul, sans prérequis sur le\nserveur distant;"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Utiliser les commandes minimales et pouvoir réutiliser le scripts dans ma\npropre librairie de script bash;"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Éviter de répéter, parceque c’est «"},{type:b,tag:u,props:{},children:[{type:a,value:"con"}]},{type:a,value:"» ;)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:lS},children:[{type:b,tag:l,props:{href:"#ce-que-le-script-fait",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:lT}]},{type:a,value:e},{type:b,tag:ax,props:{id:"1-transférer-la-base-de-donnée"},children:[{type:b,tag:l,props:{href:"#1-transf%C3%A9rer-la-base-de-donn%C3%A9e",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"1. "},{type:b,tag:u,props:{},children:[{type:a,value:"Transférer"}]},{type:a,value:" la base de donnée"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"$ migratemysql transfer\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Lire le fichier de configuration *migratemysql.conf * dans le dossier\ncourrant (ou en créer un)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Se connecter en SSH"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Lancer "},{type:b,tag:k,props:{},children:[{type:a,value:fN}]},{type:a,value:" en conservant le "},{type:b,tag:k,props:{},children:[{type:a,value:"tmp\u002F"}]},{type:a,value:" paramétrable (éviter de remplir le\ndisque)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Compresser le fichier "},{type:b,tag:k,props:{},children:[{type:a,value:eg}]},{type:a,value:" avec "},{type:b,tag:u,props:{},children:[{type:a,value:i_}]},{type:a,value:dK},{type:b,tag:k,props:{},children:[{type:a,value:lW}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Transférer via "},{type:b,tag:k,props:{},children:[{type:a,value:eh}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ax,props:{id:"2-importer-dans-le-serveur-local"},children:[{type:b,tag:l,props:{href:"#2-importer-dans-le-serveur-local",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"2. Importer dans le serveur local"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"$ migratemysql import\n"}]}]}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Lire le fichier de configuration "},{type:b,tag:u,props:{},children:[{type:a,value:"migratemysql.conf"}]},{type:a,value:" dans le dossier actuel"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Véfirier si le "},{type:b,tag:k,props:{},children:[{type:a,value:lW}]},{type:a,value:lX}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"oui: le décompresser"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"si le "},{type:b,tag:k,props:{},children:[{type:a,value:eg}]},{type:a,value:" existe déjà, écrire par dessus? ("},{type:b,tag:s,props:{},children:[{type:a,value:"attente d’une réponse a\nl’usager"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"oui: réécrire, continuer..."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"non: arrêter l’exécution"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"non: continuer"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Véfifier si le "},{type:b,tag:k,props:{},children:[{type:a,value:eg}]},{type:a,value:lX}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"oui: continuer"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"non: cesser l’exécution"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Se connecter au serveur précisé, si erreur... DIE!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Véfifier si la base de donnée existe"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"oui..."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:u,props:{},children:[{type:a,value:"Retenir"}]},{type:a,value:" de ne pas "},{type:b,tag:u,props:{},children:[{type:a,value:"effacer"}]},{type:a,value:" le compte de base de donnée (PRIVILEGES)\n(variable \""},{type:b,tag:k,props:{},children:[{type:a,value:fO}]},{type:a,value:fA}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Effacer pour ré-insérer? ("},{type:b,tag:s,props:{},children:[{type:a,value:"attente d’une réponse a l’usager"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Créer les commandes "},{type:b,tag:k,props:{},children:[{type:a,value:lY}]},{type:a,value:" manipulé via l’option \""},{type:b,tag:k,props:{},children:[{type:a,value:"ALT_PURGE"}]},{type:a,value:I}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"oui: générer le script, puis "},{type:b,tag:u,props:{},children:[{type:a,value:fP}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:lZ},{type:b,tag:u,props:{},children:[{type:a,value:fP}]},{type:a,value:" (utile si le fichier SQL a les commandes de "},{type:b,tag:k,props:{},children:[{type:a,value:lY}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:lZ},{type:b,tag:u,props:{},children:[{type:a,value:fP}]},{type:a,value:cJ}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Vérifier si l’option \""},{type:b,tag:k,props:{},children:[{type:a,value:fO}]},{type:a,value:"\" existe, ne pas faire) Créer\nles PRIVILEGES spécifique pour la table a créer"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Exécuter le "},{type:b,tag:k,props:{},children:[{type:a,value:eg}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Afficher a l’écran un morceau de code PHP pour le fichier de configuration\nsous le format spécifique à WordPress"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:lU},children:[{type:b,tag:l,props:{href:"#le-script",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:lV}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Version disponible sous GitHub gist"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"J'ai crée une copie dans un "},{type:b,tag:l,props:{href:"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F5770703",rel:[C,G,H],target:A},children:[{type:a,value:"gist github pour partager le script"}]},{type:a,value:Q}]},{type:a,value:e},{type:a,value:e},{type:b,tag:"code-block",props:{label:"MigrateMySQL",active:aF},children:[{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,hj,bs]},children:[{type:a,value:hk}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F  Some config  \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"TMPDIR"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"\u002Ftmp\u002F\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:dU}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:l_}]},{type:a,value:" mysql"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:fN}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:l_}]},{type:a,value:" mysqldump"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    MigrateMySQL v 1.0"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    by Etienne Lachance and Renoir Boulanger"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    https:\u002F\u002Frenoirboulanger.com\u002Fprojets\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    This program is free software: you can redistribute it and\u002For modify"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    it under the terms of the GNU General Public License as published by"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    the Free Software Foundation, either version 3 of the License, or"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    (at your option) any later version."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    This program is distributed in the hope that it will be useful,"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    but WITHOUT ANY WARRANTY; without even the implied warranty of"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    GNU General Public License for more details."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    You should have received a copy of the GNU General Public License"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"#    along with this program.  If not, see \u003Chttp:\u002F\u002Fwww.gnu.org\u002Flicenses\u002F\u003E."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:bC}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F  Actual script  \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"PN"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"basename"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$0"}]},{type:a,value:I}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:"          "},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# program name"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"VER"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'1.0'"}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"usage"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"\nUSAGE INFORMATION\n\n  NAME\n       "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:"\n\n  DESCRIPTION\n       Tool to help transfer a MySQL database from a remote site using ssh and\n       mysqldump. You only need one copy of this script, on the server you want\n       to import the databases to.\n\n  SYNOPSIS\n       "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:" transfer\n       "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:" import\n\n  OPTIONS\n       transfer     transfer database dump file from remote host to localhost\n       import       import database dump to database\n\n  FILES\n       "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:".conf\n                    Config file saved in the directory that you invoked "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:"\n\n  LICENCE\n       MigrateMySQL is a software provided under the GNU GENERAL PUBLIC LICENCE\n       Copyright (C) 2010 by Etienne Lachance and Renoir Boulanger\n       This program comes with ABSOLUTELY NO WARRANTY; for details, see source code.\n       This is free software, and you are welcome to redistribute it\n       under certain conditions;\n\n                                     https:\u002F\u002Frenoirboulanger.com\u002F\n\""}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"dump_config_file"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"#\n# Generated by "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:fQ},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ei}]},{type:a,value:fR},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:fS}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:"\n#\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cr},{type:b,tag:c,props:{className:[d,cs,ca]},children:[{type:a,value:ct}]},{type:a,value:ak}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:l$},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'SSH_SOURCE=\"hostname\"\nSSH_PORT=\nSSH_USER=\"username\"\n#SSH_PASS=\"\"\nALT_PURGE=\"\"                      # En cas ou le mysqldump utilise a pas de DROP TABLE (default: false)\nDB_SOURCE_DBNAME=\"\"\nDB_SOURCE_USER=\"\"\nDB_SOURCE_PASS=\"\"\nDB_SOURCE_HOST=\"\"                 # e.g. mysql4.local    (defaults: localhost)\nDB_DEST_DBNAME=$DB_SOURCE_DBNAME\nDB_DEST_USER=\"root\"\nDB_DEST_PASS=\"root\"\nDB_DEST_HOST=\"\"                   # e.g. mysql4.local    (defaults: localhost)\nDB_DEST_USERHOST=\"\"               # e.g. webservers-%    (defaults: localhost)\nDB_DEST_USERNAME=\"root\"           # site username\nDB_DEST_USERPW=\"root\"             # site password\n#OPTS_KEEP_COMPRESSED=\"\"          # 1 or 0               (1=true) (not yet implemented)\nOPTS_COMPRESSION_PROG=\"gzip\"        # bzip2,gzip,zip       (only gzip is implemented)\n'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cr},{type:b,tag:c,props:{className:[d,cs,ca]},children:[{type:a,value:ct}]},{type:a,value:ak}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:l$},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Config file "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cr},{type:b,tag:c,props:{className:[d,cs,ca]},children:[{type:a,value:ct}]},{type:a,value:ak}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:".conf created, modify it, then run "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:" again.\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"dump_prepare_sql"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ma},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:fQ},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ei}]},{type:a,value:fR},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:fS}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:fT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"dump_prepare_createdb"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"CREATE DATABASE "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:";\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:fT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"dump_prepare_addpriv"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"CREATE USER '"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ej}]},{type:a,value:fU},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ek}]},{type:a,value:mb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fV}]},{type:a,value:fW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:fX},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"GRANT USAGE ON * . * TO '"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ej}]},{type:a,value:fU},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ek}]},{type:a,value:mb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fV}]},{type:a,value:fW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:fX},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"GRANT ALL PRIVILEGES ON \\"},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:a,value:aI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:" . * TO '"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ej}]},{type:a,value:fU},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ek}]},{type:a,value:fW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:fX},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"FLUSH PRIVILEGES;\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:fT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"dump_stdout_tellpasswords"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"\nHere is the application database credentials.\n\n --------------------------------------------------------\n|         for WordPress, copy that code block            |\n --------------------------------------------------------\ndefine('DB_SERVER',   '"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cu}]},{type:a,value:"');\ndefine('DB_NAME',     '"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:"');\ndefine('DB_LOGIN',    '"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ej}]},{type:a,value:"');\ndefine('DB_PASSWORD', '"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fV}]},{type:a,value:"');\n --------------------------------------------------------\n\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"fatal"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"FAILED: "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fY}]},{type:a,value:I}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:t}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bO,t]},children:[{type:a,value:"purge_tables"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aq}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Will purge tables from "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:" ... \""}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ma},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:fQ},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ei}]},{type:a,value:fR},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:fS}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:mc},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'Generating tmp file ... '"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"DROPTABLES"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:a,value:md},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cv}]},{type:a,value:me},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cw}]},{type:a,value:mf},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cc}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:mg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'show tables'"}]},{type:a,value:" $DB_DEST_DBNAME "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:mh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'s\u002F^\u002Fdrop table \u002Fg'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:mh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'s\u002F$\u002F;\u002Fg'"}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$DROPTABLES"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:mc},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'Executing ... '"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:".sql.purge.tmp "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:da}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cc}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:"\n\n  "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'Deleting tmp file ... '"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"rm"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:"-rf"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:".sql.purge.tmp\n  "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ak}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F ACTUAL EXECUTION \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,"file-descriptor",bs]},children:[{type:a,value:"&2"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:" - Migrate MySQL database, "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ei}]},{type:a,value:" by Evocatio Solutions Technologies  http:\u002F\u002Fevocatio.com\u002F\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cr},{type:b,tag:c,props:{className:[d,cs,ca]},children:[{type:a,value:ct}]},{type:a,value:ak}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:".conf "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * You need to have a configuration file\""}]},{type:a,value:"\n    dump_config_file\n    "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Reading configuration file "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cr},{type:b,tag:c,props:{className:[d,cs,ca]},children:[{type:a,value:ct}]},{type:a,value:ak}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:".conf ... \""}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:jz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cr},{type:b,tag:c,props:{className:[d,cs,ca]},children:[{type:a,value:ct}]},{type:a,value:ak}]},{type:a,value:cb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:a,value:".conf\n  "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fY}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cy}]},{type:a,value:"\n  transfer"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:"             "},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Initiate transfer"}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mj}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cR}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mk}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO SSH_SOURCE\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ml}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO SSH_USER\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mm}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"SSH_PORT_STR"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"-p "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mm}]},{type:a,value:I}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO DB_SOURCE_DBNAME\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fZ}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO DB_SOURCE_USER\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:f_}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO DB_SOURCE_PASS\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mn}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"DB_SOURCE_HOST"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dz}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$OPTS_KEEP_COMPRESSED"}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"OPTS_KEEP_COMPRESSED"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mo}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mp}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:mq}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mr}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:f$},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:I}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:el},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Checking if remote database exist ... \""}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:em}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:ms}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bV}]},{type:a,value:" $SSH_PORT_STR $SSH_USER@$SSH_SOURCE "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cx}]},{type:a,value:"  -h "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mn}]},{type:a,value:mt},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fZ}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,mu],title:en},children:[{type:a,value:en}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:f_}]},{type:b,tag:c,props:{className:[d,mu],title:en},children:[{type:a,value:en}]},{type:a,value:" -Bse 'show databases'| egrep -v 'information_schema|"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cx}]},{type:a,value:"'\""}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,mv,j]},children:[{type:a,value:fr}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mw}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mx}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:my}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:em}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mz}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mA}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"0\""}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:f$},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"DB_SOURCE_DBNAME : "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:" does not exist\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:el},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Get remote database dump file ... \""}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bV}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$SSH_PORT_STR"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ml}]},{type:a,value:"@"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$mysqldump"}]},{type:a,value:mt},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:fZ}]},{type:a,value:" -p\""}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:f_}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" --opt "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:" \u003E "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:".sql; gzip -f "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:".sql; cat "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:mB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:mC},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:el},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * The local database file is "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:mB}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:"\n\n\n  "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"import"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:"                   "},{type:b,tag:c,props:{className:[d,U]},children:[{type:a,value:"# Initiate import"}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mj}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cR}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO_DEST_DBNAME\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:da}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO_DEST_USER\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cc}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:bx}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:" NO_DEST_PASS\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cu}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"DB_DEST_HOST"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dz}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:ek}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"DB_DEST_USERHOST"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dz}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mp}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:mq}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mr}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:f$},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:bd}]},{type:a,value:I}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:".sql.gz "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Uncompressing the database dump (Only gzip is supported) ... \""}]},{type:a,value:"\n      gunzip "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:mC},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:mE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:"\n      fatal "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"You should have a database dump "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:".sql\""}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Checking if the requested database exists ... \""}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:em}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:ms}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]},{type:a,value:md},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cv}]},{type:a,value:me},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cw}]},{type:a,value:mf},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cc}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:mg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'show databases'"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"egrep"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'information_schema|$mysql'"}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aK}]}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,mv,j]},children:[{type:a,value:fr}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mw}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mx}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:my}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:em}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mz}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:mA}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mo}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:" exists, overwrite? 'y\u002Fn': \""}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:"read"}]},{type:a,value:" DOWEPURGE\n\n        "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$DOWEPURGE"}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cy}]},{type:a,value:eo},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"'y'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:eo},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$ALT_PURGE"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:"\n                            purge_tables\n            "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:eo},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:fO}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"true\""}]},{type:a,value:eo},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:"\n            *"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:"\n              fatal "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"DB_DEST_DBNAME : "},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:" exists. And we did not understand the answer to purge DB.\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:"\n              "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mF}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"else"}]},{type:a,value:"\n          "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Creating database ... \""}]},{type:a,value:"\n        dump_prepare_sql\n        dump_prepare_createdb\n        "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:mG},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:da}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cc}]},{type:a,value:I}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aB}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"$OVERRIDEUSERCREATION"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aC}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Creating default user ... \""}]},{type:a,value:"\n      dump_prepare_sql\n      dump_prepare_addpriv\n      "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aV}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:mG},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:da}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cc}]},{type:a,value:I}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aD}]},{type:a,value:bL},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:aS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\" * Restoring database ... \""}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:cU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aX}]},{type:a,value:mE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:az}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:da}]},{type:a,value:db},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:cc}]},{type:a,value:I}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:aI}]},{type:a,value:aa},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bk}]},{type:a,value:"\n\n    dump_stdout_tellpasswords\n\n      "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:ah}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mD}]},{type:a,value:el},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:"\n  *"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:"  usage"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:mF}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},dir:"\u002Fblog\u002F2010\u002F02",path:"\u002Fblog\u002F2010\u002F02\u002Fscript-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre",extension:aw,slug:"script-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre",createdAt:"2024-10-24T19:43:51.696Z",updatedAt:"2024-10-24T19:43:51.697Z",category:aQ,prettyfiedTemporalDate:{prettified:"mardi 9 février 2010",temporalDate:"2010-02-09"}},{locale:aG,title:"Une VM Linux qui sert au développement PHP 5.3 avec Eclipse - partie II",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-ii\u002F",status:av,revising:T,migrateCode:T,migrateLinks:T,created:mH,updated:bj,tags:[as,cW,b_,bc,bZ],categories:[],excerpt:aF,toc:[{depth:K,text:mI},{depth:K,text:bE}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:ga},{type:b,tag:s,props:{},children:[{type:a,value:"deuxième"}]},{type:a,value:gb}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ce billet expliquera comment j'installe un système Linux que je considère de base pour une infrastructure d'hébergement applicatif. Je ne couvrirai pas les configurations plus avancés pour améliorer la sécurité. Je risque de le faire plus tard."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gc}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:aE,props:{to:mJ},children:[{type:a,value:gd}]}]},{type:a,value:" (article précédent)\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Ce que je vais discuter dans cette série d'articles n'est pas nécessairement connu de tous. Je vais donc vulgariser un peu avant de commencer."}]}]},{type:b,tag:h,props:{},children:[]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[aL,z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u003Cli\u003E\u003Cstrong\u003EInstallation du système\u003C\u002Fstrong\u003E (cet article)\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:mK}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[aL,z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u003Cli\u003E\u003Cstrong\u003E\u003Ca href=\"\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-iii\"\u003ECompilation de PHP 5.3\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:mL}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[aL,z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u003Cli\u003E\u003Cstrong\u003EInstallation de l'environnement de développement avec Eclipse PDT\u003C\u002Fstrong\u003E (à venir)\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La magie se passe par là! Avec ce setup votre équipe pourra répliquer l'installation de développement a volonté."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:b,tag:l,props:{name:"BaseSystem"},children:[]},{type:a,value:mI}]},{type:a,value:"\nJ'utilise personnellement Debian Linux depuis quelques années car je le trouve plus léger que Red Hat Enterprise Linux ou n'importe quelle saveur de RedHat (Fedora, CentOS, etc)\n"},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Note: "}]},{type:a,value:"Je n'expliquerai pas comment faire pour  "},{type:b,tag:l,props:{href:ge},children:[{type:a,value:"installer Debian Linux de base (dans une VM)"}]},{type:a,value:" car c'est un sujet déjà largement couvert."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Personnellement j'installe le système avec la version actuelle provenant d'un mini boot server que j'ai sur un réseau que je partage avec quelques amis."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Une installation simple "},{type:b,tag:l,props:{href:ge},children:[{type:a,value:"comme celle ci"}]},{type:a,value:", ferait très bien l'affaire."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Utiliser le dernier Debian stable"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"à l'écran \""},{type:b,tag:s,props:{},children:[{type:a,value:"Debian Software Installation"}]},{type:a,value:"\" "},{type:b,tag:s,props:{},children:[{type:a,value:"Je coche"}]},{type:a,value:" généralement ~"},{type:b,tag:s,props:{},children:[{type:a,value:"rien"}]},{type:a,value:"~, car"},{type:b,tag:s,props:{},children:[{type:a,value:" je vais donner plus de détails"}]},{type:a,value:" ici."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Les étapes..."}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Modifier le\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"\u002Fetc\u002Fapt\u002Fsources.list"}]},{type:a,value:"\net "},{type:b,tag:s,props:{},children:[{type:a,value:"Enlever la mention du CD-rom"}]},{type:a,value:d$},{type:b,tag:s,props:{},children:[{type:a,value:"Ajouter la mention \""},{type:b,tag:ad,props:{},children:[{type:a,value:"contrib"}]},{type:a,value:I}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"deb http:\u002F\u002Fdebian.savoirfairelinux.net\u002Fdebian\u002F lenny main\ndeb-src http:\u002F\u002Fdebian.savoirfairelinux.net\u002Fdebian\u002F lenny main\ndeb http:\u002F\u002Fsecurity.debian.org\u002F lenny\u002Fupdates main contrib\ndeb-src http:\u002F\u002Fsecurity.debian.org\u002F lenny\u002Fupdates main contrib\n"},{type:b,tag:h,props:{},children:[{type:a,value:mM},{type:b,tag:l,props:{href:ep,rel:[C,G,H],target:A},children:[{type:a,value:ep}]},{type:a,value:" lenny contrib\ndeb-src "},{type:b,tag:l,props:{href:ep,rel:[C,G,H],target:A},children:[{type:a,value:ep}]},{type:a,value:" lenny contrib"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:mM},{type:b,tag:l,props:{href:eq,rel:[C,G,H],target:A},children:[{type:a,value:eq}]},{type:a,value:" lenny main\ndeb-src "},{type:b,tag:l,props:{href:eq,rel:[C,G,H],target:A},children:[{type:a,value:eq}]},{type:a,value:" lenny main"}]}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:mN}]},{type:a,value:" Il s'agit de mon propre "},{type:b,tag:ad,props:{},children:[{type:a,value:"sources.list"}]},{type:a,value:" ayant trouvé "},{type:b,tag:ad,props:{},children:[{type:a,value:"savoirfairelinux"}]},{type:a,value:" comme étant le plus rapide en utilisant "},{type:b,tag:l,props:{href:mO},children:[{type:a,value:mP}]},{type:a,value:" et la liste des "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.debian.org\u002Fmirror\u002Flist"},children:[{type:a,value:"mirroirs Debian"}]}]},{type:b,tag:h,props:{},children:[]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[aL,z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"\u003Cli\u003EUpdater les sources\n"}]}]}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get update"}]},{type:a,value:"\n\n\t"},{type:b,tag:i,props:{},children:[{type:a,value:"Installer les paquets essentiels\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get install openssh-server mlocate screen sudo vim ntpdate linux-headers-$(uname -r) syslog-ng build-essential open-vm-tools"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:mN}]},{type:a,value:" remarquez la présence de "},{type:b,tag:ad,props:{},children:[{type:a,value:"open-vm-tools"}]},{type:a,value:" il s'agit d'un package provenant de Debian contrib pour les VM "},{type:b,tag:s,props:{},children:[{type:a,value:"VMware"}]},{type:a,value:" (n'installez pas si vous utilisez "},{type:b,tag:ad,props:{},children:[{type:a,value:mQ}]},{type:a,value:")... au lieu de compiler vm-ware-tools pour le kernel... Debian s'en occupe (!!)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ajouter les droits sudo à "},{type:b,tag:ad,props:{},children:[{type:a,value:bp}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# visudo"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Va ouvrir "},{type:b,tag:ad,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FPico_%28text_editor%29"},children:[{type:a,value:"pico"}]}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Décommenter "},{type:b,tag:s,props:{},children:[{type:b,tag:ad,props:{},children:[{type:a,value:"%sudo ALL=NOPASSWD: ALL"}]}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Pour quitter, faire CTRL+x y ENTER"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Updater la DB de mlocate\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# updatedb"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Lier killall5 sous le nom legacy de "},{type:b,tag:ad,props:{},children:[{type:a,value:"killall"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# ln -s \u002Fsbin\u002Fkillall5 \u002Fsbin\u002Fkillall"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"suivre "},{type:b,tag:s,props:{},children:[{type:a,value:"Procédure de configuration de NTP pour les serveurs"}]},{type:a,value:bW},{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:" L'idée est d'éviter d'utiliser en mémoire les démons le plus possible. Si utile soit-il (comme ajuster l'heure, ici). Il est plus pratique qu'elle soit ajustée aux heures et laisser l'espace mémoire pour son usage primaire.\n"},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Entrer en édition dans le fichier\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ sudo vi \u002Fetc\u002Fdefault\u002Fntpdate"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Trouver dans le fichier la variable "},{type:b,tag:s,props:{},children:[{type:b,tag:ad,props:{},children:[{type:a,value:"NTPSERVERS"}]}]},{type:a,value:aO},{type:b,tag:s,props:{},children:[{type:a,value:lA}]},{type:a,value:", soit par...\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"NTPSERVERS=\"0.ca.pool.ntp.org 1.ca.pool.ntp.org 2.ca.pool.ntp.org\""}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Faire i (pour Insert)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ajouter a "},{type:b,tag:ad,props:{},children:[{type:a,value:"NTPOPTIONS"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"NTPOPTIONS=\"-u\""}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Faire ESCAPE"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:":wq"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Créer un fichier "},{type:b,tag:ad,props:{},children:[{type:a,value:"cron.hourly"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ sudo vi \u002Fetc\u002Fcron.hourly\u002Fntpdate"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ajouter le contenu\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"#!\u002Fbin\u002Fsh\nPATH=\u002Fsbin:\u002Fbin\ntest -f \u002Fusr\u002Fsbin\u002Fntpdate || exit 0\nif test -f \u002Fetc\u002Fdefault\u002Fntpdate ; then\n        . \u002Fetc\u002Fdefault\u002Fntpdate\nelse\n        NTPSERVERS=\"0.ca.pool.ntp.org\"\nfi\ntest -n \"$NTPSERVERS\" || exit 0\n\u002Fusr\u002Fsbin\u002Fntpdate -s $NTPOPTIONS $NTPSERVERS \u003E\u003E \u002Fdev\u002Fnull 2\u003E&1\n# Exit with a succes anyway, avoids spamming root.\nexit 0"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Changer les permissions pour qu'il puisse être exécuté\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ sudo chmod 755 \u002Fetc\u002Fcron.hourly\u002Fntpdate"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Essayer\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ sudo \u002Fetc\u002Fcron.hourly\u002Fntpdate"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Voir dans syslog, ça devrait ressembler à...\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# tail \u002Fvar\u002Flog\u002Fsyslog\n...\nDec 30 13:39:35 willow ntpdate[1912]: adjust time server 192.168.1.5 offset 0.005642 sec\n..."}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Installer le service d'envoi courriel...\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Question de pouvoir "},{type:b,tag:s,props:{},children:[{type:a,value:"recevoir les avertissements"}]},{type:a,value:" par courriel"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get install postfix"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Satellite System (On veut envoyer les courriels ailleurs et rien garder ici)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"\"Mail name?\"...  "},{type:b,tag:s,props:{},children:[{type:b,tag:ad,props:{},children:[{type:a,value:"NOMDELAVM"}]}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"\"SMTP relay host?\"...  votre relai SMTP fourni par votre fournisseur"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"\"Other destinations...\" Ajuster les noms"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:mR}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"\"Local networks?\"... ENTER"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:cJ}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Tester l'envoi\n("},{type:b,tag:s,props:{},children:[{type:a,value:"NOTE:"}]},{type:a,value:" vous pouvez aussi utiliser l'outil Debian "},{type:b,tag:ad,props:{},children:[{type:a,value:"swaks"}]},{type:a,value:")\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# mail test@test.com\nSubject: Patate 1 am\nMessage, qui doit terminer avec une ligne seule et un point .\n.\nCc:"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Regarder les mails du destinataire."}]},{type:a,value:e}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:bE}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{lang:aU,href:mS},children:[{type:a,value:"VMware Server"}]},{type:a,value:er}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{lang:aU,href:ge},children:[{type:a,value:"Installing a Debian Base system"}]},{type:a,value:er}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{lang:aU,href:mT},children:[{type:a,value:mU}]},{type:a,value:er}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{lang:aU,href:mO},children:[{type:a,value:"Using "},{type:b,tag:ad,props:{},children:[{type:a,value:mP}]},{type:a,value:" tip to select"}]},{type:a,value:er}]},{type:a,value:e}]}]},dir:gf,path:"\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-ii",extension:aw,slug:"une-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-ii",createdAt:dc,updatedAt:dc,category:aF,prettyfiedTemporalDate:{prettified:mV,temporalDate:mH}},{locale:aG,title:"Une VM Linux qui sert au développement PHP 5.3 avec Eclipse - partie III",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-iii\u002F",status:av,revising:T,migrateCode:T,migrateLinks:T,created:"2009-09-09",updated:ea,tags:[as,cW,bZ,bc],categories:[],excerpt:aF,toc:[{depth:K,text:mW},{depth:K,text:es},{depth:K,text:mX},{depth:K,text:bE}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:ga},{type:b,tag:s,props:{},children:[{type:a,value:"troisième"}]},{type:a,value:gb}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Cette partie couvrira l'installation de Apache et de PHP 5.3 (la dernière version depuis Juin 2009) qui offre beaucoup d'avancées. Je pense que c'est devenu le juste minimum a cause de ces nouvelles fonctionnalités. Voir articles faits par  "},{type:b,tag:c,props:{lang:aU},children:[{type:a,value:mY}]},{type:a,value:mZ},{type:b,tag:c,props:{lang:aU},children:[{type:a,value:m_},{type:b,tag:l,props:{href:m$},children:[{type:a,value:na}]},{type:a,value:aO},{type:b,tag:l,props:{href:nb},children:[{type:a,value:nc}]},{type:a,value:aO},{type:b,tag:l,props:{href:nd},children:[{type:a,value:ne}]},{type:a,value:fz},{type:b,tag:l,props:{href:nf},children:[{type:a,value:ng}]},{type:a,value:$}]},{type:a,value:cH}]},{type:a,value:e},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gc}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:aE,props:{to:k$},children:[{type:a,value:gd}]}]},{type:a,value:"\nCe que je vais discuter dans cette série d'articles n'est pas nécessairement connu de tous. Je vais donc vulgariser un peu avant de commencer."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:aE,props:{to:nh},children:[{type:a,value:ni}]}]},{type:a,value:"\nJe donne ici mon secret de magicien avec quelques configurations que je considère importantes pour un environement d'hébergement web pour améliorer la sécruité (le strict minimum pour cette série d'articles. Je pourrai en faire un plus poussé plus tard)."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:es}]},{type:a,value:" (cet article)\nComment installer Apache 2.x avec le dernier cutting-edge PHP."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:nj}]},{type:a,value:" (à venir)\nLa magie se passe par là! Avec ce setup votre équipe pourra répliquer l'installation de développement a volonté."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:mW}]},{type:a,value:e},{type:b,tag:w,props:{style:"background-color:#FFEEEE;border:1px solid #666600;color:#660000;margin:20px;padding:20px 30px;text-align:center;"},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Avertissement!  -  Changement environement:\n"}]},{type:a,value:"Faire des modifications avec Apache et PHP sur un serveur en production peut causer des problèmes sérieux!  Il est conseillé de planifier et de pratiquer le déploiement AVANT de l'appliquer dans un environnement de production. Vous aurez été avertis!"}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:"Varia:"}]},{type:a,value:e},{type:b,tag:w,props:{},children:[{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Désinstallez toutes les instances de PHP que vous avez installé. Il est recommandé d'avoir la version stable pour un environement de production et que l'environement de développement réflète la production."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Dans mes environements de travail j'ai choisi d'utiliser "},{type:b,tag:s,props:{},children:[{type:a,value:"Debian Linux (stable)"}]},{type:a,value:" courrant.  J'ai déjà utilisé d'autres distributions Linux pour des serveurs mais ça dépasse l'objectif de cet article."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Chaque ligne de commande commence soit par \"$\" (dollar sign)  ou \"#\" (hash mark). Le # signifie que vous entrez la commande en tant que "},{type:b,tag:s,props:{},children:[{type:a,value:am}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Le retour de chariot est illustré par un anti-slash \"\\\"  car je veut éviter de changer la largeur du billet! Vous pouvez simplement tout coller sur une ligne."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:es}]},{type:a,value:e},{type:b,tag:c,props:{},children:[{type:a,value:g}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"1 Installer Apache"}]},{type:a,value:"\nLa première étape est d'installer Apache. Il est possible de le faire avec plusieurs autres serveurs (lighttpd par exemple) mais je ne l'utilise pas (lighttpd) pour autre chose que du caching statique ou du Proxying. Alors je ne couvrirai pas comment faire. "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.howtoforge.com\u002Flighttpd_mysql_php_debian_etch"},children:[{type:a,value:"Cet article le fait"}]},{type:a,value:", par contre.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Cette commande devrait faire le travail."}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get install apache2 apache2-mpm-prefork apache2-prefork-dev \\\napache2-utils apache2.2-common"}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"2. Installer MySQL et\u002Fou PostgreSQL"}]},{type:a,value:"\nL'engin de base de donnée utilisé est le choix de chacun. Je suis personnellement habitué avec MySQL mais pouvoir avoir les deux peut être utile.\n"},{type:b,tag:cf,props:{},children:[{type:a,value:nk}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get install postgresql-8.3 postgresql-client-8.3 \\\npostgresql-client-common postgresql-common postgresql-server-dev-8.3"}]},{type:a,value:e},{type:b,tag:cf,props:{},children:[{type:a,value:nl}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get install mysql-client mysql-client-5.0    mysql-common \\\nmysql-server mysql-server-5.0 mysql-server-core-5.0"}]},{type:a,value:e},{type:b,tag:cf,props:{},children:[{type:a,value:"3. Installer les librairies requises"}]},{type:a,value:"\nPHP en tant que tel est facile a configurer mais les librairies externes font que c'est plus compliqué... malheureusement.  Ce qui est bien c'est qu'avec Debian la documentation est entretenue fréquemment et il est facile de se reprendre.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Plusieurs heures peuvent être prises pour simplement préparer la commande \"configure\".  Avec ces notes vous devriez vous en sortir pas pire :)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Voici les packages que Debian fournit pour ce que PHP demande, comme ça vous pourrez éviter d'installer arbitrairement plusieurs dizaines de paquets!"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get install libtidy-dev curl libcurl4-openssl-dev libcurl3 \\\nlibcurl3-gnutls zlib1g zlib1g-dev libxslt1-dev libzip-dev libzip1 \\\nlibxml2 libsnmp-base libsnmp15 libxml2-dev libsnmp-dev libjpeg62 \\\nlibjpeg62-dev libpng12-0 libpng12-dev zlib1g zlib1g-dev libfreetype6 \\\nlibfreetype6-dev libbz2-dev libxpm-dev libmcrypt-dev libmcrypt4"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:bw}]},{type:a,value:":  libxpm4-dev proposé dans "},{type:b,tag:l,props:{href:nm},children:[{type:a,value:"ma source d'information"}]},{type:a,value:" n'est pas trouvé dans Debian Lenny mis a jour le 2009-09-09 j'ai donc rectifié (pour libxpm-dev) la commande ci-haut."}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"4. Télécharger le code source de PHP"}]},{type:a,value:"\nVisiter "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.php.net\u002F"},children:[{type:a,value:"http:\u002F\u002Fwww.php.net"}]},{type:a,value:" et télécharger la version désirée. Actuellement, la version production est la 5.3\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Personnellement je recommande d'avoir les fichiers de compilation dans \u002Fusr\u002Fsrc quoi que j'ai pas la conaissance de la science infuse ;)"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# cd \u002Fusr\u002Fsrc\u002F\n# wget http:\u002F\u002Fus3.php.net\u002Fget\u002Fphp-5.3.0.tar.gz\u002Ffrom\u002Fthis\u002Fmirror\n# tar xvfz php-5-3-0.tar.gz\n# cd php-5.3"}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"5. La commande Configure."}]},{type:a,value:"\nLa commande configure peut etre difficile a configurer surtout avec les librairies qu'on veut généralement mettre... généralement une certaine mesure du minimum.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Personnellement. Je recommande de faire la commande dans un fichier et de l'exécuter par la suite."}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# vi configure.sh\n .\u002Fconfigure --with-apxs2=\u002Fusr\u002Fbin\u002Fapxs2 \\\n   --with-tidy=\u002Fusr --with-curl=\u002Fusr\u002Fbin --with-curlwrappers \\\n   --with-openssl-dir=\u002Fusr --with-zlib-dir=\u002Fusr --enable-mbstring \\\n   --with-xpm-dir=\u002Fusr --with-xsl=\u002Fusr --with-ldap --with-xmlrpc \\\n   --with-iconv-dir=\u002Fusr --with-snmp=\u002Fusr --enable-exif --enable-calendar \\\n   --with-bz2=\u002Fusr --with-mcrypt=\u002Fusr --with-gd --with-jpeg-dir=\u002Fusr \\\n   --with-png-dir=\u002Fusr --with-zlib-dir=\u002Fusr --with-freetype-dir=\u002Fusr \\\n   --enable-mbstring --enable-zip --with-pear"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je suggère d'ajouter les commande ci bas au configure plus bas en fonction de votre choix de gestionnaire de base de donnée."}]},{type:a,value:e},{type:b,tag:cf,props:{},children:[{type:a,value:nk}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"--with-pdo-pgsql=\u002Fusr"}]},{type:a,value:e},{type:b,tag:cf,props:{},children:[{type:a,value:nl}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:" --with-pdo-mysql=\u002Fusr --with-mysqli=\u002Fusr\u002Fbin\u002Fmysql_config --with-mysql=\u002Fusr"}]},{type:a,value:"\nSortir avec :wq puis exécuter le script.\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# \u002Fbin\u002Fbash .\u002Fconfigure.sh"}]},{type:a,value:"\nL'écran devrait bouger beaucoup... généralement dans la doc on conseille ici d'aller prendre un café!\n"},{type:b,tag:h,props:{},children:[{type:a,value:"... Si tout va bien tout devrait terminer par quelque chose qui ressemble à \"Thanks for using php\". Sinon.... je conseille ma "},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2009\u002F08\u002Fprocessus-pour-regler-un-probleme-avec-un-ordinateur\u002F"},children:[{type:a,value:"solution aux problèmes numéro un"}]},{type:a,value:". ;)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Faut pas s'en faire. Généralement c'est de tenter avec \""},{type:b,tag:s,props:{},children:[{type:a,value:"apt-cache search"}]},{type:a,value:lj},{type:b,tag:s,props:{},children:[{type:a,value:"apt-get install"}]},{type:a,value:"\" le nom de la librairie manquante."}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"6. Make et Make Install"}]},{type:a,value:"\nPour l'installer. Maintenant que PHP est \"configure\"-é  il faut le compiler et l'installer avec make.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"La commande est bien simple."}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# make"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Beaucoup de sortie ici aussi. Ça risque même d'être plus long dépendamment de la force du processeur disponible.  C'est le temps de prendre une marche, encore."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Une fois que tout est terminé avec make, vous pouvez faire, accessoirement un \"make test\"."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La dernière étape est de faire le \"install\""}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# make -i install"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pourquoi le -i? Parceque Ubuntu\u002FDebian risque d'avertir pour certaines erreurs a cause de la différence d'installation d'Apache de Debian\u002FUbuntu, nous le ferons nous même a bras plus loin dans ce document."}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"7. Ajouter le module PHP dans Apache"}]},{type:a,value:"\nIl faut ajouter le module dans Apache pour qu'il puisse interpreter... c'est logique. Étant donné que la commande make -i a surement fait son travail (sous Debian), nous devons nous assurer que tout est en ordre dans la configuration d'Apache.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Premièrement, copier la librairie compilée:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# updatedb\n# locate libphp5\n...\n\u002Fusr\u002Flib\u002Fapache2\u002Fmodules\u002Flibphp5.so\n\u002Fusr\u002Fsrc\u002Fphp-5.3.0\u002Flibs\u002Flibphp5.la\n\u002Fusr\u002Fsrc\u002Fphp-5.3.0\u002Flibs\u002Flibphp5.so\n...\n# cp \u002Fusr\u002Fsrc\u002Fphp-5.3.0\u002Flibs\u002Flibphp5.so \u002Fusr\u002Flib\u002Fapache2\u002Fmodules\u002Flibphp5_3.so"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je commencer par mettre a jour la base de donnée \"locate\", ensuite je cherche où est disponible la librairie, puis ensuite j'utilise \"cp\" pour déplacer sous un autre nom la librairie."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite,  dans le dossier:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# cd \u002Fetc\u002Fapache2\u002Fmods-available"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Créez un nouveau fichier appelé php5.load et copiez-y le contenu suivant:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"LoadModule php5_module \u002Fusr\u002Flib\u002Fapache2\u002Fmodules\u002Flibphp5_3.so"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Enregistrer le fichier. Ensuite créez un fichier appelé php5.conf et collez-y ce contenu:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"AddType application\u002Fx-httpd-php .php .phtml .php3\nAddType application\u002Fx-httpd-php-source .phps"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"On est prêts! Il faut le charger dans Apache:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# a2enmod php5\nEnabling module php5.\nRun \"\u002Fetc\u002Finit.d\u002Fapache2 restart\" to activate new configuration!\n# invoke-rc.d apache2 restart\n* Restarting web server apache2\n...waiting    ...done."}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:a,value:"8. Tester l'installation"}]},{type:a,value:"\nC'est assez simple rendus là.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"On commence par le binaire en ligne de commande:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ php -v\nPHP 5.3.0 (cli) (built: Aug  17 2009 19:08:32)\nCopyright (c) 1997-2009 The PHP Group\nZend Engine v2.3.0, Copyright (c) 1998-2009 Zend Technologies"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Tout va bien!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite, voir un phpinfo() dans le docroot. (Généralement \u002Fvar\u002Fwww\u002Findex.php)."}]},{type:a,value:e},{type:b,tag:o,props:{lang:cl},children:[{type:a,value:"\u003C ?php\n  phpinfo();\n?\u003E"}]},{type:a,value:e},{type:b,tag:fM,props:{className:[lK,"wp-image-1113"],style:"border:none;",title:nn,src:"https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2009\u002F09\u002Fphpinfo_php5_3.png",alt:nn,width:612,height:429},children:[]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:mX}]},{type:a,value:"\nJe crois avoir bien réussi mon interprétation et ma traduction de l'article que j'ai utilisé. J'y ai ajouté mon grain de sel et rectifié ce qui a marché pour moi. Je vous conseille de documenter pour vos propres besoins ce que vous faites, on sait jamais quand on a besoin de refaire ce qu'on a déjà fait !\n"},{type:b,tag:L,props:{},children:[{type:a,value:bE}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:l,props:{lang:aU,href:nm},children:[{type:a,value:"BrandonSavage.net : Installing PHP 5.3 on Ubuntu"}]},{type:a,value:g}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.php-experts.org\u002Fdeveloppement-web\u002F5-plugins-indispensables-pour-coder-en-php-avec-lide-eclipse-22"},children:[{type:a,value:"5 plugins indispensables pour coder en PHP avec l'IDE Eclipse"}]}]},{type:b,tag:"br",props:{},children:[]},{type:a,value:"Un article que j'ai beaucoup apprécié car il mentionne ses propres plugins et j'ai cru bon les ajouter ici."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{lang:aU},children:[{type:a,value:mY}]},{type:a,value:mZ},{type:b,tag:c,props:{lang:aU},children:[{type:a,value:m_},{type:b,tag:l,props:{href:m$},children:[{type:a,value:na}]},{type:a,value:aO},{type:b,tag:l,props:{href:nb},children:[{type:a,value:nc}]},{type:a,value:aO},{type:b,tag:l,props:{href:nd},children:[{type:a,value:ne}]},{type:a,value:fz},{type:b,tag:l,props:{href:nf},children:[{type:a,value:ng}]},{type:a,value:$}]},{type:a,value:cH}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:g}]}]}]},dir:gf,path:no,extension:aw,slug:"une-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-iii",createdAt:dc,updatedAt:dc,category:aF,prettyfiedTemporalDate:{prettified:"mercredi 9 septembre 2009",temporalDate:"2009-09-09"}},{locale:aG,title:"Une VM Linux qui sert au développement PHP 5.3 avec Eclipse - partie I",canonical:kL,status:av,revising:T,created:mH,updated:bj,tags:[as,bc,bZ],categories:[aH],excerpt:"Pour développer, j'utilise depuis deux ans une _machine virtuelle_ (VM) Linux (minimale) qui me sert de \"bac à sable\"... Le but de cette série d'articles. Dans cette VM il y a tout les outils nécessaires aux projets en-cours et ils sont configurés pour refléter l'environnement de production où je déploie mon travail. Ce type d'installation est idéal car il permet d'avoir a installer les prérequis une seule fois et pouvoir les dupliquer pour tout les dévelopeurs. Sans oublier que vous n'avez plus de préoccupations de licences logicielles. A la fin de cette série d'articles vous aurez accès a une VM qui représentera votre environement de production (ajuster à vos besoins de production, évidemment).",toc:[{depth:K,text:np},{depth:K,text:nq},{depth:K,text:nr},{depth:K,text:ns}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:b,tag:fM,props:{className:["size-medium","wp-image-1082"],style:"border: none; float: right;",title:nt,src:"https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2009\u002F09\u002Fvirtualization-200x300.jpg",alt:nt,width:200,height:300},children:[]},{type:a,value:ga},{type:b,tag:s,props:{},children:[{type:a,value:"premier"}]},{type:a,value:gb}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je mentionne PHP 5.3 mais en fait ce type d'installation pourrait être utilisé pour n'importe quelle technologie web qui peut rouler sous Linux ("},{type:b,tag:ad,props:{},children:[{type:a,value:"Ruby on Rails"}]},{type:a,value:aO},{type:b,tag:ad,props:{},children:[{type:a,value:"Java"}]},{type:a,value:aO},{type:b,tag:ad,props:{},children:[{type:a,value:"Perl"}]},{type:a,value:", etc)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gc}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:gd}]},{type:a,value:" (cet article)Ce que je vais discuter dans cette série d'articles n'est pas nécessairement connu de tous. Je vais donc vulgariser un peu avant de commencer."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:aE,props:{to:nh},children:[{type:a,value:ni}]}]},{type:a,value:mK}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:aE,props:{to:no},children:[{type:a,value:es}]}]},{type:a,value:mL}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:nj}]},{type:a,value:" (à venir)La magie se passe par là! Avec ce setup votre équipe pourra répliquer l'installation de développement a volonté."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{style:nu},children:[{type:a,value:e},{type:b,tag:ax,props:{style:nv},children:[{type:a,value:"Mise à jour et façon différente de fonctionner"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans un billet plus récent (que celui-ci) "},{type:b,tag:aE,props:{to:la},children:[{type:a,value:"j'explique comment le faire pour un Mac"}]},{type:a,value:Q}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:np}]},{type:a,value:"\nPour développer, j'utilise depuis deux ans une "},{type:b,tag:u,props:{},children:[{type:a,value:"machine virtuelle"}]},{type:a,value:" (VM) Linux (minimale) qui me sert de \"bac à sable\"... Le but de cette série d'articles. Dans cette VM il y a tout les outils nécessaires aux projets en-cours et ils sont configurés pour refléter l'environnement de production où je déploie mon travail.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Ce type d'installation est idéal car il permet d'avoir a installer les prérequis une seule fois et pouvoir les dupliquer pour tout les dévelopeurs. Sans oublier que vous n'avez plus de préoccupations de licences logicielles."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"A la fin de cette série d'articles vous aurez accès a une VM qui représentera votre environement de production (ajuster à vos besoins de production, évidemment)."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:nq}]},{type:a,value:"\nComme j'"},{type:b,tag:aE,props:{to:"\u002Fblog\u002F2007\u002F11\u002Fmon-espace-de-travail\u002F"},children:[{type:a,value:"en ai déjà parlé ici"}]},{type:a,value:" une VM roule avec toutes les versions désirés pour pouvoir développer et tester live le code développé. Le code est envoyé au serveur de source ("},{type:b,tag:ad,props:{},children:[{type:a,value:"git"}]},{type:a,value:aO},{type:b,tag:ad,props:{},children:[{type:a,value:"subversion"}]},{type:a,value:aO},{type:b,tag:ad,props:{},children:[{type:a,value:"cvs"}]},{type:a,value:", etc) de toute façon.  C'est ce qui rend cette VM \"jettable\" et facilement copiée pour des collègues.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"C'est très utile car souvent, les outils utilisés (serveur applicatif, environement de développement, configuration de \"debug\", scripts sur mesure de l'équipe infrastructure) doivent être reproduits le plus fidèlement au niveau développement pour s'assurer de ne pas tomber sur des coquilles rendu au jour \"J\"."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ok. Trève de présentations!"}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:nr}]},{type:a,value:"\nÉtant donné que tout roule dans une machine virtuelle, il faut savoir laquelle utiliser. Je résume ici leur usage recommandé. Personnellement j'ai seulement utilisé VMware comme outil de virtualisation. Vous êtes libres d'utiliser "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.xen.org\u002F"},children:[{type:a,value:mQ}]},{type:a,value:gg},{type:b,tag:l,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FFreeBSD_jail"},children:[{type:a,value:"Jail (avec FreeBSD)"}]},{type:a,value:" si vous avez plus d'Expérience.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Il y a aussi d'autres choix bien illustrés dans cet article "},{type:b,tag:l,props:{lang:aU,href:"http:\u002F\u002Fwww.dedoimedo.com\u002Fcomputers\u002Fvirtualization.html"},children:[{type:a,value:"Virtualization, plenty of choices"}]}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.vmware.com\u002Fproducts\u002Fworkstation\u002F"},children:[{type:a,value:"VMware workstation"}]}]},{type:a,value:"\nEst idéale pour chaque poste de travail qui va utiliser cette VM de développement.\n"},{type:b,tag:ax,props:{},children:[{type:b,tag:l,props:{href:mS},children:[{type:a,value:"VMware server"}]}]},{type:a,value:"\nPour les machines de l'environement de "},{type:b,tag:u,props:{},children:[{type:a,value:"staging"}]},{type:a,value:" avec lesquelles vous voulez avoir le contrôle sur le système d'exploitation en dessous.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Mais selon-moi, le meilleur a utiliser c'est..."}]},{type:a,value:e},{type:b,tag:ax,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.vmware.com\u002Fproducts\u002Fesxi\u002F"},children:[{type:a,value:"VMware server ESXi"}]}]},{type:a,value:"\nUn serveur VMware de 30 Méga-octets qui ne fait QUE rouler des VMs. Le seul hic c'est qu'il faut que ce soit un serveur-rack plus ou moins récent (après 2005 environ).\n"},{type:b,tag:ax,props:{},children:[{type:a,value:"Installation dans une VM"}]},{type:a,value:"\nJe vous recommande de vous inspirer de ce tutoriel pour l'installation: "},{type:b,tag:l,props:{lang:aU,href:mT},children:[{type:a,value:mU}]},{type:a,value:", en anglais)\n"},{type:b,tag:L,props:{},children:[{type:a,value:ns}]},{type:a,value:"\nCommençons par l'installation de la machine virtuelle."}]},dir:gf,path:mJ,extension:aw,slug:"une-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-i",createdAt:"2024-10-24T19:43:51.686Z",updatedAt:dc,category:aH,prettyfiedTemporalDate:{prettified:mV,temporalDate:mH}},{locale:aG,title:"Un firewall simple sous Linux avec «Ferm»",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2009\u002F08\u002Fun-firewall-simple-sous-linux-avec-ferm\u002F",status:av,revising:T,migrateCode:T,migrateLinks:T,created:"2009-08-19",updated:bj,tags:[as,b_,bc,cX],categories:[aH],excerpt:aF,toc:[{depth:aj,text:nw},{depth:aj,text:nx},{depth:aj,text:ny}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Attention: Article Technique!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans le but de faire profiter la postérité et ma mémoire personnelle voici mon premier post d'une série d'articles spécialisée sur Linux."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ces articles proviennent de ma voûte documentaire professionnelle et personnelle."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Évidemment pour les publier ici je dois censurer les détails sensibles, vous me comprendrez (!)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le fait de les avoir dans le format Wiki Markup de Confluence... et les traduire ici demande du temps pour les reformatter pour mon blogue."}]},{type:a,value:e},{type:b,tag:an,props:{},children:[{type:a,value:nw}]},{type:a,value:"\nD'autres articles technique (pour Debian Linux) seront aussi disponibles dans les prochaines semaines.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Voici une liste de quelques uns que je compte publier:"}]},{type:a,value:e},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Monter une machine en SNMP v2c en lecture seule"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Permettre des updates aux serveurs NTP a l'heure"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Installer VMware server 2 sur Debian"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Augumenter le niveau de sécurité pour Infra Publique sous Debian"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Procédure configuration SYSLOG-NG vers un serveur de log"}]},{type:a,value:e}]},{type:a,value:"\nJ\n"},{type:a,value:e},{type:b,tag:an,props:{},children:[{type:a,value:nx}]},{type:a,value:"\nEn fait, sous Debian c'est pas très compliqué, on ajoute le paquet, puis on le configure comme mentionné plus bas.\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# apt-get update\n# apt-get install ferm libnet-dns-perl perl iptables"}]},{type:a,value:"\nJ'ai fait une petite version qui permet d'utiliser des variables et mettre le code un peu plus clean (d'un point de vue programmeur).\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Vous pouvez remplacer par ce code ci:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"# -*- shell-script -*-\n#\n#  Configuration file for ferm(1).\n#\n# vmware-mgmt = 8333\n# vmware-console = 902\n# ntop = 3000\n# ... ports ajoutes dans \u002Fetc\u002Fservices\n\n# Source http:\u002F\u002Fwww.krzywanski.net\u002Farchives\u002F90\n# Interfaces\n@def $DEV_LOCAL = lo;\n@def $DEV_LAN = (eth1 vmnet1 vmnet8);\n@def $DEV_INTERNET = eth0;\n\n# Ports\n@def $PORTS = (ntp name http https smtp);\n\n# Known IPs\n@def $SSH_ALLOWED = (69.159.234.55 192.168.2.1);\n@def $SSH_DYNDNS = @resolve((somehost.renoirboulanger.com someotherhost.somenetwork.net));\n\n# SSH Clients\n@def $SSH_CLIENTS = ($SSH_ALLOWED $SSH_DYNDNS);\n\ntable filter {\n    chain INPUT {\n        policy DROP;\n\n        # connection tracking\n        mod state state INVALID DROP;\n        mod state state (ESTABLISHED RELATED) ACCEPT;\n\n        # allow local packages\n        interface $DEV_LOCAL ACCEPT;\n        interface $DEV_LAN ACCEPT;\n\n        # allow ping from the administrator's network\n        interface $DEV_INTERNET saddr ($SSH_DYNDNS $SSH_ALLOWED) proto icmp icmp-type echo-request ACCEPT;\n\n        # respond to ping\n        proto icmp icmp-type echo-request ACCEPT;\n\n        # allow SSH connections\n        proto tcp dport 2522 ACCEPT;\n\n        proto tcp dport $PORTS ACCEPT;\n    }\n    chain OUTPUT {\n        policy ACCEPT;\n\n        # connection tracking\n        mod state state INVALID DROP;\n        mod state state (ESTABLISHED RELATED) ACCEPT;\n    }\n    chain FORWARD {\n        policy DROP;\n\n        # connection tracking\n        mod state state INVALID DROP;\n        mod state state (ESTABLISHED RELATED) ACCEPT;\n    }\n}"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour plus de détails a propos de la syntaxe, "},{type:b,tag:l,props:{href:"http:\u002F\u002Fferm.foo-projects.org\u002Fdownload\u002F2.0\u002Fferm.html"},children:[{type:a,value:"voir la documentation"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:an,props:{},children:[{type:a,value:ny}]},{type:a,value:"\nJ'ai utilisé, entre autres ces ressources pour m'inspirer de ce mini-tutoriel\n"},{type:b,tag:ab,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.debian.org\u002Fdoc\u002Fmanuals\u002Fsecuring-debian-howto"},children:[{type:a,value:"Securing Debian HOWTO"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.tldp.org\u002FHOWTO\u002FSecurity-HOWTO\u002F"},children:[{type:a,value:"Linux Security HOWTO"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.cromwell-intl.com\u002Fsecurity\u002Fsecurity-firewall.html"},children:[{type:a,value:"Firewall Tools"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.debian.org\u002Fsecurity\u002F"},children:[{type:a,value:"Debian Security"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.debian.org\u002Fdoc\u002Fdebian-policy\u002F"},children:[{type:a,value:"Debian Policies"}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2009\u002F08",path:"\u002Fblog\u002F2009\u002F08\u002Fun-firewall-simple-sous-linux-avec-ferm",extension:aw,slug:"un-firewall-simple-sous-linux-avec-ferm",createdAt:nz,updatedAt:nz,category:aH,prettyfiedTemporalDate:{prettified:"mercredi 19 août 2009",temporalDate:"2009-08-19"}},{title:"Tester le fonctionnement d'un serveur SMTP",locale:aG,created:"2008-04-19T00:00:00.000Z",updated:"2014-02-19T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2008\u002F04\u002Ftester-le-fonctionnement-dun-serveur-smtp\u002F",status:av,revising:T,categories:[aQ],tags:[as,bo,bT,bZ,bc],excerpt:"Envoyer et recevoir des courriels implique une combinaison de systèmes qui interagissent d'une façon assez complexe et un problème de réception ou de classement peut être causé par plusieurs raisons. Étant donné que tout est très intrinsèque sur un serveur, voici une procédure pour s'assurer que tout est en ordre.",toc:[{id:nA,depth:K,text:nB},{id:nC,depth:aj,text:nD},{id:nE,depth:K,text:nF},{id:nG,depth:K,text:nH},{id:nI,depth:K,text:nJ},{id:nK,depth:K,text:nL},{id:nM,depth:K,text:nN},{id:nO,depth:K,text:nP},{id:nQ,depth:K,text:nR},{id:nS,depth:K,text:nT},{id:nU,depth:K,text:nV},{id:nW,depth:aj,text:nX},{id:nY,depth:K,text:nZ},{id:n_,depth:K,text:n$},{id:oa,depth:aj,text:ob},{id:oc,depth:aj,text:od},{id:oe,depth:aj,text:of},{id:fC,depth:aj,text:og},{id:oh,depth:K,text:oi},{id:et,depth:aj,text:bE}],body:{type:am,children:[{type:b,tag:L,props:{id:nA},children:[{type:b,tag:l,props:{href:"#v%C3%A9rifier-si-le-firewall-bloque-certains-services",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nB}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Idéalement il faut faire ces tests d'un autre ordinateur que celui qu'on veut\nvérifier."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ainsi on voit si les services sont fonctionnels en tant que tel, et si le\nfirewall ne les bloquent pas."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Quelques ports à tester, qui donnent une réponse"}]},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:"table",props:{},children:[{type:b,tag:"thead",props:{},children:[{type:b,tag:dd,props:{},children:[{type:b,tag:oj,props:{},children:[{type:a,value:"Nom du service"}]},{type:b,tag:oj,props:{},children:[{type:a,value:"Port TCP"}]}]}]},{type:b,tag:"tbody",props:{},children:[{type:b,tag:dd,props:{},children:[{type:b,tag:bQ,props:{},children:[{type:a,value:"POP"}]},{type:b,tag:bQ,props:{},children:[{type:a,value:"101"}]}]},{type:b,tag:dd,props:{},children:[{type:b,tag:bQ,props:{},children:[{type:a,value:ok}]},{type:b,tag:bQ,props:{},children:[{type:a,value:ol}]}]},{type:b,tag:dd,props:{},children:[{type:b,tag:bQ,props:{},children:[{type:a,value:"SMTP"}]},{type:b,tag:bQ,props:{},children:[{type:a,value:be}]}]},{type:b,tag:dd,props:{},children:[{type:b,tag:bQ,props:{},children:[{type:a,value:"FTP"}]},{type:b,tag:bQ,props:{},children:[{type:a,value:om}]}]}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:eu}]},{type:a,value:" web1.renoirboulanger.com\n"},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:on}]},{type:a,value:" +OK POP3 Welcome to vm-pop3d "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oo}]},{type:a,value:".7f-DA-2\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ev},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:eu}]},{type:a,value:gh},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ol}]},{type:a,value:"\n* OK "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:"CAPABILITY IMAP4REV1 LITERAL+ SASL-IR LOGIN-REFERRALS "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"AUTH"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"LOGIN"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\nweb1.renoirboulanger.com IMAP4rev1 "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2004.357"}]},{type:a,value:" at Tue, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:":08:17 "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:gi},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ev},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:eu}]},{type:a,value:gh},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ew}]},{type:a,value:op},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gj}]},{type:a,value:" Tue, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:":11:10 "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cA}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ev},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:au},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:eu}]},{type:a,value:gh},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:om}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ew}]},{type:a,value:" ProFTPD "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"1.3"}]},{type:a,value:".1rc2 Server ready.\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ev},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note: la note [^c] implique qu'on peut faire "},{type:b,tag:a_,props:{},children:[{type:a,value:"Ctrl"}]},{type:a,value:" + "},{type:b,tag:a_,props:{},children:[{type:a,value:"c"}]},{type:a,value:"\npour quitter plus rapidement de l'attente"}]},{type:a,value:e},{type:b,tag:an,props:{id:nC},children:[{type:b,tag:l,props:{href:"#tester-le-serveur-courriel",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nD}]},{type:a,value:e},{type:b,tag:L,props:{id:nE},children:[{type:b,tag:l,props:{href:"#cr%C3%A9er-un-compte-de-test",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nF}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Permet d'éviter de remplir le compte courriel d'un client."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Créer un compte dans "},{type:b,tag:s,props:{},children:[{type:a,value:"DirectAdmin"}]},{type:a,value:oq},{type:b,tag:s,props:{},children:[{type:a,value:"Show all Users"}]},{type:a,value:"\", "},{type:b,tag:u,props:{},children:[{type:a,value:"username"}]},{type:a,value:oq},{type:b,tag:s,props:{},children:[{type:a,value:"E-Mail Accounts"}]},{type:a,value:I}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:nG},children:[{type:b,tag:l,props:{href:"#test-envoi-local-vers-virtual_local-avec-exim",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nH}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Avant de tester avec une application (remote en shell, ou GMail par exemple) On\ndevrait tester en local"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite... via une application locale à Gmail "},{type:b,tag:s,props:{},children:[{type:a,value:"Cas de nos courriels\nrenoirboulanger"}]},{type:a,value:", voir \"Test envoi local vers une machine remote avec exim\"\nci-haut."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le serveur de mon exemple possède Exim comme serveur de transport de courrier\n(SMTP)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"L'avantage d'utiliser "},{type:b,tag:k,props:{},children:[{type:a,value:"exim -v -odf"}]},{type:a,value:" c'est qu'on sait en shell le output et on\nsait les messages directement"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:or},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:os}]},{type:a,value:" test@renoirboulanger.com         "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:ot},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bY}]},{type:a,value:" a virtuallocal "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\nMessage body                                  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:"                                             "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:ou},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:gl}]},{type:a,value:ov},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gm}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:ow},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gn}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:go},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ox}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oy}]},{type:a,value:"\ndelivering 1JSZkp-0001JH-8H\nLOG: MAIN\n  "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" support "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:"support@renoirboulanger.com"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:ec}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oz},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oA},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"571"}]},{type:a,value:oB}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note: La ligne \""},{type:b,tag:s,props:{},children:[{type:a,value:gq}]},{type:a,value:"\" je note généralement un titre explicatif du genre\n\"Test lundi am 5 local a virtuallocal\" qui donne une idée de quels tests qui\npassent."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le output des 7 dernières lignes est une réponse expectée si tout va bien."}]},{type:a,value:e},{type:b,tag:ax,props:{id:"les-commandes-via-exim"},children:[{type:b,tag:l,props:{href:"#les-commandes-via-exim",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Les commandes via exim"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"exim -v -odf john.doe@example.org"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"C'est les options qui permettent d'utiliser une instance de Exim pour tester\n("},{type:b,tag:s,props:{},children:[{type:a,value:"odf"}]},{type:a,value:") puis de permettre la (v)erbosité"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:oC}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Il faut entrer "},{type:b,tag:k,props:{},children:[{type:a,value:gq}]},{type:a,value:" Pour annoncer qu'on ajoute au header le sujet, on\npourrait meme ajouter un header comme on veut."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Écrire le message"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le prompt condidere que si on commence pas par une commande qui termine par \":\",\nest considéré comme du "},{type:b,tag:s,props:{},children:[{type:a,value:oD}]},{type:a,value:" pour le courriel en tant que tel (aka. Le )."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Terminer par \".\""}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:oE}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:nI},children:[{type:b,tag:l,props:{href:"#v%C3%A9rifier-le-log-denvoi-smtp",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nJ}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Utile pour chaque tentative... voir où le message và!"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ex}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cd}]},{type:a,value:" \u002Fvar\u002Flog\u002Fexim\u002Fmainlog\n "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:gr},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:oF},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:gl}]},{type:a,value:ov},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gm}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:ow},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gn}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:go},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"356"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oy}]},{type:a,value:gs},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:" test@renoirboulanger.com\n "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:gr},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:oF},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:oG}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:"test@renoirboulanger.com"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:ec}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oz},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oA},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ox}]},{type:a,value:aJ},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:gr},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:":02:16 1JSZkp-0001JH-8H Completed\n"}]}]}]},{type:a,value:e},{type:b,tag:L,props:{id:nK},children:[{type:b,tag:l,props:{href:"#tester-r%C3%A9ception-imap",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nL}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Généralement dans *le client "},{type:b,tag:bD,props:{},children:[{type:a,value:ok}]},{type:a,value:" (vérifie le\nprocessus IMAP) on peut aller accéder au compte créé dans \"Créer un compte de\ntest courriel\"."}]},{type:a,value:e},{type:b,tag:L,props:{id:nM},children:[{type:b,tag:l,props:{href:"#v%C3%A9rifier-le-log-impad",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nN}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ex}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cd}]},{type:a,value:oH},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:gt},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gu}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": imap "},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:hb}]},{type:a,value:" init from "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dg}]},{type:a,value:".0.1\n   Feb "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:gt},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gu}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": Login "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oI},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gv}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dg}]},{type:a,value:gw},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:oK},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:gt},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gu}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": Logout "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cS}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oI},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gv}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:oJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dg}]},{type:a,value:gw},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gx},{type:b,tag:k,props:{},children:[{type:a,value:gy}]},{type:a,value:gz}]},{type:a,value:e},{type:b,tag:L,props:{id:nO},children:[{type:b,tag:l,props:{href:"#v%C3%A9rifier-pop-en-telnet",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nP}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"On peut lancer le test à partir de n'importe quel type de client telnet."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour s'assurer que le mail server répond sur le bon, on peut aussi lancer la\nrequete telnet sur le domaine du mail exchange (MX) du client."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"telnet mail.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:on}]},{type:a,value:in0},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:de},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\nTrying "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ey}]},{type:a,value:ez},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:".\nConnected to mail.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ey}]},{type:a,value:ez},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:".\nEscape character is "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oL}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:"\n+OK POP3 Welcome to vm-pop3d "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oo}]},{type:a,value:".7f-DA-2\nuser test@renoirboulanger.com                         "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:oM},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"user (username)\""}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\n+OK\npass GMkRZaKQ                                         "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:oM},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"pass (mot de passe)\""}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\n+OK opened mailbox "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:oG}]},{type:a,value:"\nlist                                                  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:"Pour lister les messages "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"list\""}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\n+OK\n"},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"780"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"488"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:di}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oN}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:"\nretr "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:di}]},{type:a,value:"                                                "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:"Pour obtenir un message, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"retr (numero du message)\""}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\n+OK "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oN}]},{type:a,value:" octets\nReturn-path: "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:"\nEnvelope-to: test@renoirboulanger.com\nDelivery-date: Mon, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:gA},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cA}]},{type:a,value:"\nReceived: from renoirb by web1.renoirboulanger.com with "},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bY}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:"Exim "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:"envelope-from "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:df},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:ap},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:eQ}]},{type:a,value:" 1JTgiM-00057L-SW\n        "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:" test@renoirboulanger.com"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:B}]},{type:a,value:" Mon, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:gA},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cA}]},{type:a,value:ot},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gk}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bY}]},{type:a,value:" a virtuallocal\nMessage-Id: "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:"1JSZkp-0001JH-8H@web1.renoirboulanger.com"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:"\nFrom: renoirb@web1.renoirboulanger.com\nDate: Mon, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:gA},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cA}]},{type:a,value:"\n\nMessage body\n\n"},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:"\nquit                                                  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:"Finalement, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"quit\""}]},{type:a,value:dh},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\n+OK\nConnection closed by foreign host.\n"}]}]}]},{type:a,value:e},{type:b,tag:L,props:{id:nQ},children:[{type:b,tag:l,props:{href:"#v%C3%A9rifier-le-log-pop3d",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nR}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Si tout va bien en telnet, pourquoi ne pas tester pour être sûr!?"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ex}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cd}]},{type:a,value:oH},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:":13:18 web1 vm-pop3d"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gB}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": User "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oO}]},{type:a,value:" logged "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cy}]},{type:a,value:gs},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eB}]},{type:a,value:oP},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:oQ}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:di}]},{type:a,value:oK},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:":13:22 web1 vm-pop3d"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gB}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": bytes: domain renoirboulanger.com "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"491"}]},{type:a,value:" bytes\n   Feb "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bf}]},{type:a,value:":13:23 web1 vm-pop3d"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gB}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": Session ended "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:" user: "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oO}]},{type:a,value:gs},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eB}]},{type:a,value:oP},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:oQ}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:di}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"ndel"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aW}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gx},{type:b,tag:k,props:{},children:[{type:a,value:gy}]},{type:a,value:gz}]},{type:a,value:e},{type:b,tag:L,props:{id:nS},children:[{type:b,tag:l,props:{href:"#test-envoi-remote-vers-virtual_local-avec-telnet",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nT}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Au lieu d'avoir un programme comme mail installé sur une station Linux, on peut\nsimplement utiliser telnet avec ces commandes"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"telnet web1.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:be}]},{type:a,value:"\n   Trying "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ey}]},{type:a,value:ez},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:".\n   Connected to web1.renoirboulanger.com.\n   Escape character is "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oL}]},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:oR},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ew}]},{type:a,value:op},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gj}]},{type:a,value:" Fri, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:fB}]},{type:a,value:cz},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"10"}]},{type:a,value:":42:44 "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cA}]},{type:a,value:"\nhelo renoirboulanger.com\n   "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:" web1.renoirboulanger.com Hello mtrlpq02-1168108314.sdsl.bell.ca "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eB}]},{type:a,value:".235.26"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:"\nmail from: lunique@renoirboulanger.com\n   "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:" OK\nrcpt to: renoir.boulanger@renoirboulanger.com\n   "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:" Accepted\n   data\n   "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gC}]},{type:a,value:" Enter message, ending with "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oS}]},{type:a,value:" on a line by itself\nSubject: Test courriel "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oT}]},{type:a,value:"\nVia tsc-webmestre-dev dans le bureau de renoirboulanger vers web1 qui va rediriger à gmail directement"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:bq}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:oR},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:" OK "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:eQ}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"1JSa3U-0003TM-Tv\nquit\n   "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"221"}]},{type:a,value:" web1.renoirboulanger.com closing connection\n   Connection closed by foreign host.\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note: les codes 250, 354, 220 sont des numeros de messages voir:\n"},{type:b,tag:l,props:{href:oU,rel:[C,G,H],target:A},children:[{type:a,value:oU}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"J'ai mis trois espaces devant la réponse reçue."}]},{type:a,value:e},{type:b,tag:ax,props:{id:"les-commandes-telnet-envoi-smtp"},children:[{type:b,tag:l,props:{href:"#les-commandes-telnet-envoi-smtp",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Les commandes telnet envoi smtp"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"telnet "},{type:b,tag:k,props:{},children:[{type:a,value:"web1.renoirboulanger.com"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"... Trying et connected signifient qu'il a essayé et réussi"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"220 web1.renoirboulanger.com ESMTP Exim 4.66 Fri, 22 Feb 2008 10:42:44 -0500\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Signifie 220 (c'est le code du message) que web1 utilise Exim 4.66.... et qu'on\nest le 22 Feb... C'est ok!"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"helo domaine.du.helo.renoirboulanger.com"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gD},{type:b,tag:k,props:{},children:[{type:a,value:oV}]},{type:a,value:"\" puis le domaine de l'envoyant"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:oV}]},{type:a,value:" (et "},{type:b,tag:k,props:{},children:[{type:a,value:"ehlo"}]},{type:a,value:") sont des conventions pour savoir quel est le hostname qui envoit le courriel"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"mail from: john.doe@example.org"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gD},{type:b,tag:k,props:{},children:[{type:a,value:"mail from:"}]},{type:a,value:"\" puis l'adresse de l'envoyant"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ce qui permet de dire le From: field"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"rcpt to: john.doe@example.org"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gD},{type:b,tag:k,props:{},children:[{type:a,value:"rcpt to:"}]},{type:a,value:"\" puis l'adresse du recipient"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"C'est le recipient."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:oD}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Annonce au MTA (le serveur SMTP) qu'il va envoyer des données textes"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:oC}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Faut au minimum entrer \""},{type:b,tag:k,props:{},children:[{type:a,value:gq}]},{type:a,value:"\" car c'est ce que le serveur attend."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Écrire le message, tout simplement"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Terminer"}]},{type:a,value:" par un dernier [procedures:"},{type:b,tag:s,props:{},children:[{type:a,value:mR}]},{type:a,value:"] et laisser un poin\n\""},{type:b,tag:s,props:{},children:[{type:a,value:Q}]},{type:a,value:I}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite, le message SMTP #"},{type:b,tag:k,props:{},children:[{type:a,value:gC}]},{type:a,value:" annonce que l'on peut écrire notre courriel a\nvolonté... jusqu'a ce qu'on ajoute une ligne vide avec uniquement un \".\" (qui\nannonce la fin du message)"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:oE}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:nU},children:[{type:b,tag:l,props:{href:"#test-envoi-local-vers-une-machine-remote-avec-exim",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nV}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Permet de savoir si l'envoi local vers un remote fonctionne bien"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Il s'agit de l'exemple typique d'un email local envoyé vers Gmail par exemple."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:or},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:bz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:os}]},{type:a,value:" sysadmin@renoirboulanger.com\nSubject: Test lundi am "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bY}]},{type:a,value:" to remote\nMessage correct pour voir de l'usager joe sur web1 vers sysadmin hsu at renoirboulanger\n"},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:ou},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:gl}]},{type:a,value:" joe@web1.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gm}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"joe "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gn}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:go},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"437"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"Test lundi am 4 local to remote\""}]},{type:a,value:"\ndelivering 1JSZmM-0001LR-S8\nConnecting to ASPMX.L.GOOGLE.COM "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oX}]},{type:a,value:oY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:":25 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:". connected\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ew}]},{type:a,value:" mx.google.com ESMTP z21si1091485qbc.21\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:" EHLO web1.renoirboulanger.com\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:"-mx.google.com at your service, "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ey}]},{type:a,value:ez},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:oZ},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:"-SIZE "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"28311552"}]},{type:a,value:oZ},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:"-8BITMIME\n         "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:" ENHANCEDSTATUSCODES\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:" MAIL FROM:"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:o_},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"SIZE"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"1470"}]},{type:a,value:gE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:o$}]},{type:a,value:".0 OK\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:" RCPT TO:"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:"a@test.com"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:gE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:o$}]},{type:a,value:".5 OK\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:" DATA\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gC}]},{type:a,value:" Go ahead\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:" writing message and terminating "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:oS}]},{type:a,value:gE},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:cC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2.0"}]},{type:a,value:".0 OK "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"1203693994"}]},{type:a,value:" z21si1091485qbc.21\n  SMTP"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:aZ}]},{type:a,value:" QUIT\nLOG: MAIN\n  "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:" sysadmin@renoirboulanger.com "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:o_},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:ec}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"lookuphost "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:b$}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"remote_smtp "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:cB}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"450"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"H"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"ASPMX.L.GOOGLE.COM "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oX}]},{type:a,value:oY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"C"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\"250 2.0.0 OK 1203693994 z21si1091485qbc.21\""}]},{type:a,value:oB}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note: C'est quoi EHLO ou HELO? voir \"Description du HELO\""}]},{type:a,value:e},{type:b,tag:an,props:{id:nW},children:[{type:b,tag:l,props:{href:"#tester-mail-remote-vers-mailserver-pour-voir-le-bon-fonctionnement-de-spamassassin",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nX}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le but de ce test est de s'assurer que le service de spam antivirus est lancé,\nil faut s'assurer que le service \"SpamAssassin\" est activé dans la config du\nclient dans le pannel, et qu'on envoie le test en remote."}]},{type:a,value:e},{type:b,tag:L,props:{id:nY},children:[{type:b,tag:l,props:{href:"#envoi-courriel-via-une-machine-remote-via-mail",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:nZ}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Sert a s'assurer que l'envoi d'un courriel remote (application ou en shell)\nfonctionne bien de l'extérieur."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"mail test@test.com\nSubject: Test lundi am "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eC}]},{type:a,value:" remote to virtuallocal\nMessage body, with random content\n"},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:Q}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:L,props:{id:n_},children:[{type:b,tag:l,props:{href:"#regarder-le-log-spamd",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:n$}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Permet de savoir si le message envoyé dans le test \"Envoi courriel via une\nmachine remote via mail\" à bien passé"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:ex}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:cd}]},{type:a,value:" \u002Fvar\u002Flog\u002Fmaillog\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:bW},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bi}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:":31:54 web1 spamd"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"3160"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": prefork: child states: II\n"},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eA}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:gF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": spamd: connection from web1 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dg}]},{type:a,value:gw},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:" at port "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:pa}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:di}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:gF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": spamd: setuid to renoirb succeeded\n"},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oW}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:gF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": spamd: processing message "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:pb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:pc}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:pd}]},{type:a,value:pe},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:" renoirb:501\n"},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:gk}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:pf},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": spamd: identified spam "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"7.0"}]},{type:a,value:"\u002F5.0"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:bP}]},{type:a,value:" renoirb:501 "},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:cy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:pg}]},{type:a,value:" seconds, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ph}]},{type:a,value:" bytes.\n"},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eC}]},{type:a,value:cD},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bR}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:pf},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dj}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:W}]},{type:a,value:": spamd: result: Y "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eC}]},{type:a,value:" - HTML_MESSAGE,RAZOR2_CF_RANGE_51_100,RAZOR2_CF_RANGE_E4_51_100,RAZOR2_CF_RANGE_E8_51_100,RAZOR2_CHECK,RDNS_NONE,URIBL_JP_SURBL "},{type:b,tag:c,props:{className:[d,X,j]},children:[{type:a,value:"scantime"}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:pg}]},{type:a,value:",size"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ph}]},{type:a,value:",user"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"renoirb,uid"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"501"}]},{type:a,value:",required_score"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"5.0"}]},{type:a,value:",rhost"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"web1,raddr"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:dg}]},{type:a,value:".0.1,rport"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:pa}]},{type:a,value:",mid"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:a$}]},{type:a,value:pb},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:pc}]},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:pd}]},{type:a,value:pe},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:a,value:",autolearn"},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:a,value:"no\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:bW}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Voici ce que le spamscanner a fait..."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ligne 4: Il process le message pour le user"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ligne 5: Donne le resultat, (soit "},{type:b,tag:s,props:{},children:[{type:a,value:"identified spam"}]},{type:a,value:gg},{type:b,tag:s,props:{},children:[{type:a,value:"clean message"}]},{type:a,value:")\navec la note entre parenthèses (note reçue \u002F note maximale)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ligne 6: Le résultat Y=C'est un spam... N=Le message est propre... puis la\nvaleur des tests coulés (HTML_MESSAGE,RAZOR2_CF_RANGE_51_100,...)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:gx},{type:b,tag:k,props:{},children:[{type:a,value:gy}]},{type:a,value:gz}]},{type:a,value:e},{type:b,tag:an,props:{id:oa},children:[{type:b,tag:l,props:{href:"#tester-spamassassin",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:ob}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour savoir comment SpamAssassin (aka. SA) traite le spam, on peut lancer\nquelques commandes comme celles ci."}]},{type:a,value:e},{type:b,tag:ax,props:{id:"sa-avec-tests-razor2-sur-un-sample-spam"},children:[{type:b,tag:l,props:{href:"#sa-avec-tests-razor2-sur-un-sample-spam",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"SA avec tests Razor2 sur un sample spam"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"spamassassin -t -D razor2 \u003C \u002Fusr\u002Fshare\u002Fsample-nonspam.txt\n\n... plusieurs lignes ...\n\n[19464] dbg: razor2: razor2 is available, version 2.82\n Razor-Log: read_file: 16 items read from \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Frazor-agent.conf\n Razor-Log: Found razorhome: \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\nFeb 28 10:48:38.385733 check[19464]: [ 2] [bootup] Logging initiated LogDebugLevel=9 to stdout\nFeb 28 10:48:38.386209 check[19464]: [ 5] computed razorhome=\u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor, conf=\u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Frazor-agent.conf, ident=\u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Fidentity-ruKDx1iKgh\nFeb 28 10:48:38.386500 check[19464]: [ 8] Client supported_engines: 4 8\nFeb 28 10:48:38.386960 check[19464]: [ 8]  prep_mail done: mail 1 headers=293, mime0=616\nFeb 28 10:48:38.387312 check[19464]: [ 5] read_file: 1 items read from \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Fservers.discovery.lst\n\n... inclusions des config modulaires ...\n\nFeb 28 10:48:38.405171 check[19464]: [ 5] read_file: 23 items read from \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Fserver.joy.cloudmark.com.conf\nFeb 28 10:48:38.405460 check[19464]: [ 5] 162877 seconds before closest server discovery\nFeb 28 10:48:38.405729 check[19464]: [ 6] c301.cloudmark.com is a Catalogue Server srl 5382; computed min_cf=21, Server se: 3BC8\nFeb 28 10:48:38.405995 check[19464]: [ 8] Computed supported_engines: 4 8\nFeb 28 10:48:38.406217 check[19464]: [ 8] Using next closest server c301.cloudmark.com:2703, cached info srl 5382\nFeb 28 10:48:38.406432 check[19464]: [ 8] mail 1 has no subject\nFeb 28 10:48:38.406840 check[19464]: [ 6] preproc: mail 1.0 went from 616 bytes to 503\nFeb 28 10:48:38.407064 check[19464]: [ 6] computing sigs for mail 1.0, len 503\nFeb 28 10:48:38.408529 check[19464]: [ 6] Engine (8) didn't produce a signature for mail 1.0\nFeb 28 10:48:38.408827 check[19464]: [ 6] skipping whitelist file (empty?): \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Frazor-whitelist\nFeb 28 10:48:38.409055 check[19464]: [ 5] Connecting to c301.cloudmark.com ...\nFeb 28 10:48:38.440917 check[19464]: [ 8] Connection established\nFeb 28 10:48:38.441071 check[19464]: [ 4] c301.cloudmark.com \u003E\u003E 36 server greeting: sn=C&srl=5403&a=1&a=cg&ep4=7542-10\nFeb 28 10:48:38.441476 check[19464]: [ 4] c301.cloudmark.com \u003C\u003C 25\nFeb 28 10:48:38.441548 check[19464]: [ 6] cn=razor-agents&cv=2.82\nFeb 28 10:48:38.441813 check[19464]: [ 4] c301.cloudmark.com \u003C\u003C 14\nFeb 28 10:48:38.441873 check[19464]: [ 6] a=g&pm=state\nFeb 28 10:48:38.463790 check[19464]: [ 4] c301.cloudmark.com \u003E\u003E 264\nFeb 28 10:48:38.463875 check[19464]: [ 6] response to sent.2\n...\n[19464] dbg: razor2: part=0 engine=4 contested=0 confidence=100\n[19464] dbg: razor2: results: spam? 1\n[19464] dbg: razor2: results: engine 8, highest cf score: 0\n[19464] dbg: razor2: results: engine 4, highest cf score: 100\n[19464] info: rules: meta test HS_PHARMA_1 has dependency 'HS_SUBJ_ONLINE_PHARMACEUTICAL' with a zero score\nReceived: from localhost by web1.renoirboulanger.com\n        with SpamAssassin (version 3.2.0);\n        Thu, 28 Feb 2008 10:48:41 -0500\nFrom: Sender \u003Csender@example.net\u003E\nTo: Recipient \u003Crecipient@example.net\u003E\nSubject: *****SPAM***** Test spam mail (GTUBE)\nDate: Wed, 23 Jul 2003 23:30:00 +0200\nMessage-Id: \u003CGTUBE1.1010101@example.net\u003E\nX-Spam-Flag: YES\nX-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on web1.renoirboulanger.com\nX-Spam-Level: **************************************************\nX-Spam-Status: Yes, score=1002.6 required=5.0 tests=AWL,GTUBE,NO_RECEIVED,\n        NO_RELAYS,RAZOR2_CF_RANGE_51_100,RAZOR2_CF_RANGE_E4_51_100,RAZOR2_CHECK\n        autolearn=no version=3.2.0\nMIME-Version: 1.0\nContent-Type: multipart\u002Fmixed; boundary=\"----------=_47C6D7D9.CD6EF8C3\"\n\nThis is a multi-part message in MIME format.\n\n------------=_47C6D7D9.CD6EF8C3\n...Le courriel en tant que tel\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Note: Il existe trois fichiers de tests: "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fusr\u002Fshare\u002Fsample-spam.txt"}]},{type:a,value:" (test\nemail sample spam), "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fusr\u002Fshare\u002Fsample-nonspam.txt"}]},{type:a,value:" (sample email correct), et\n"},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fusr\u002Fshare\u002Fsample-virus.txt"}]},{type:a,value:" (pour voir si l'antivirus est ok)"}]},{type:a,value:e},{type:b,tag:an,props:{id:oc},children:[{type:b,tag:l,props:{href:"#tester-les-relais-smtp",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:od}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Notez que j'ai pas sous la main d'adresse courriel ou serveur connu comme\nspammeur sur notre réseau ce qui est très bien."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Alors si votre test donne pas un résultat similaire... on a un problème de spam!"}]},{type:a,value:e},{type:b,tag:ax,props:{id:"avec-exim--bh"},children:[{type:b,tag:l,props:{href:"#avec-exim--bh",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"avec exim -bh"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Avec la commande "},{type:b,tag:k,props:{},children:[{type:a,value:"exim -bh IP-ADDRESS EMAIL-ADDRESS"}]},{type:a,value:" on peut savoir comment le\ncourriel passe, s'il est accepté."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"exim -bh 69.159.235.26 renoirb@gmail.com\n\n**** SMTP testing session as if from host 69.159.235.26\n**** but without any ident (RFC 1413) callback.\n**** This is not for real!\n\n\u003E\u003E\u003E host in hosts_connection_nolog? no (option unset)\n\u003E\u003E\u003E host in host_lookup? yes (matched \"*\")\n\u003E\u003E\u003E looking up host name for 69.159.235.26\n\u003E\u003E\u003E IP address lookup yielded mtrlpq02-1168108314.sdsl.bell.ca\n\u003E\u003E\u003E gethostbyname looked up these IP addresses:\n\u003E\u003E\u003E   name=mtrlpq02-1168108314.sdsl.bell.ca address=69.159.235.26\n\u003E\u003E\u003E checking addresses for mtrlpq02-1168108314.sdsl.bell.ca\n\u003E\u003E\u003E   69.159.235.26 OK\n\u003E\u003E\u003E host in host_reject_connection? no (option unset)\n\u003E\u003E\u003E host in sender_unqualified_hosts? no (option unset)\n\u003E\u003E\u003E host in recipient_unqualified_hosts? no (option unset)\n\u003E\u003E\u003E host in helo_verify_hosts? no (option unset)\n\u003E\u003E\u003E host in helo_try_verify_hosts? no (option unset)\n\u003E\u003E\u003E host in helo_accept_junk_hosts? no (option unset)\n220 web1.renoirboulanger.com ESMTP Exim 4.66 Thu, 28 Feb 2008 11:02:19 -0500\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Exemple de test fonctionnel (On remarque le message "},{type:b,tag:k,props:{},children:[{type:a,value:"220 hostname ESMTP..."}]},{type:a,value:".\nFaire [^c] pour sortir."}]},{type:a,value:e},{type:b,tag:ax,props:{id:"avec-exim_checkaccess"},children:[{type:b,tag:l,props:{href:"#avec-exim_checkaccess",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:"Avec exim_checkaccess"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Une autre version existe qui sort moins de output"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"exim_checkaccess "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eB}]},{type:a,value:".235.26 contribs@renoirboulanger.com\nAccepted\n"}]}]}]},{type:a,value:e},{type:b,tag:an,props:{id:oe},children:[{type:b,tag:l,props:{href:"#statistiques",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:of}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Il existe, a ma mémoire, actuellement, un outil qui permet de savoir l'Activité\ndu serveur. Il est dans un crontab. Voici la commande."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"eximstats \u002Fvar\u002Flog\u002Fexim\u002Fmainlog\n\nExim statistics from "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:"-02-24 04:02:35 to "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bl}]},{type:a,value:"-02-28 "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:bF}]},{type:a,value:":11:24\n\nGrand total summary\n-------------------\n                                                                  At least one address\n  TOTAL               Volume   Messages Addresses     Hosts      Delayed       Failed\n  Received             100MB       "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"6049"}]},{type:a,value:"                "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2029"}]},{type:a,value:"       "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eA}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"0.0"}]},{type:a,value:"%     "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"37"}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"0.6"}]},{type:a,value:"%\n  Delivered            101MB       "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"6174"}]},{type:a,value:cN},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"6336"}]},{type:a,value:"        "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"17"}]},{type:a,value:"\n  Rejects                         "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"45232"}]},{type:a,value:"               "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"21772"}]},{type:a,value:"\n\nDeliveries by transport\n-----------------------\n                      Volume    Messages\n  :blackhole:           12MB        "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2232"}]},{type:a,value:"\n  address_file         660KB          "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"64"}]},{type:a,value:"\n  remote_smtp          600KB          "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"89"}]},{type:a,value:"\n  spamcheck             46MB        "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"2966"}]},{type:a,value:"\n  virtual_localdelivery    42MB         "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"823"}]},{type:a,value:"\n\nMessages received per hour "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:"each dot is "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:oT}]},{type:a,value:" messages"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:"\n---------------------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:". un tableau par points "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:al}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:$}]},{type:a,value:" qui donne une idée de grandeur de la quantité de courriel "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:".\n\nTime spent on the queue: all messages\n-------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:".\n\nTime spent on the queue: messages with at least one remote delivery\n-------------------------------------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:".\n\nRelayed messages\n----------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:cE},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cF}]},{type:a,value:" mail rejection reasons by message count\n----------------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:cE},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cF}]},{type:a,value:" sending hosts by message count\n-------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:cE},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cF}]},{type:a,value:" sending hosts by volume\n------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:cE},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bY}]},{type:a,value:" senders by message count\n-------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:cE},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bY}]},{type:a,value:" senders by volume\n------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:cE},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:gv}]},{type:a,value:" destinations by message count\n-----------------------------------------\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aM}]},{type:a,value:".\n\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Très utile!"}]},{type:a,value:e},{type:b,tag:an,props:{id:fC},children:[{type:b,tag:l,props:{href:"#vulgarisation",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:og}]},{type:a,value:e},{type:b,tag:L,props:{id:oh},children:[{type:b,tag:l,props:{href:"#description-du-helo",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:oi}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Source: "},{type:b,tag:l,props:{href:gG,rel:[C,G,H],target:A},children:[{type:a,value:gG}]},{type:a,value:" (modifié)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Une discussion SMTP commence soit par "},{type:b,tag:s,props:{},children:[{type:a,value:"EHLO"}]},{type:a,value:" (ou "},{type:b,tag:s,props:{},children:[{type:a,value:"HELO"}]},{type:a,value:"). Qui, en gros,\nannonce que le serveur de courrier possède quelques features améliorés comparé\naux premières générations de serveur smtp."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:eD}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"...But to use later additions to SMTP that have brought about two flavors of the\nlater HELO command (SMTP command generally consist of four characters)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:eD}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"EHLO, being the more recent one makes the server advertise all the additional\nfeatures (such as delivery status notification or the ability to transport\nmessages that contain other than the safe ASCII characters) it supports."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:eD}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Not every server will allow this greeting, but it is required to accept a plain\nHELO which naturally assumes that no additional features are present."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:eD}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Both HELO (et EHLO) commands do require the client to specify its domain"}]},{type:a,value:"\nafter the **LO, however."}]},{type:a,value:e},{type:b,tag:an,props:{id:et},children:[{type:b,tag:l,props:{href:pi,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:bE}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.netadmintools.com\u002Fpart276.html",rel:[C,G,H],target:A},children:[{type:a,value:"Tester avec telnet"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:gG,rel:[C,G,H],target:A},children:[{type:a,value:"Réferences du protocole SMTP"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Femail.about.com\u002Fcs\u002Fstandards\u002Fa\u002Fsmtp_error_code.htm",rel:[C,G,H],target:A},children:[{type:a,value:"Definition messages d'erreur SMTP"}]}]},{type:a,value:e}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2008\u002F04",path:"\u002Fblog\u002F2008\u002F04\u002Ftester-le-fonctionnement-dun-serveur-smtp",extension:aw,slug:"tester-le-fonctionnement-dun-serveur-smtp",createdAt:pj,updatedAt:pj,category:aQ,prettyfiedTemporalDate:{prettified:"samedi 19 avril 2008",temporalDate:"2008-04-19"}},{locale:aG,title:"Créer un tunnel SSH avec session distante en Console VMWare",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F10\u002Ftunnel-ssh-avec-session-distante-en-console-vmware\u002F",status:av,revising:T,created:"2007-10-03",updated:bj,tags:[as,b_],categories:[aH],excerpt:aF,toc:[{depth:K,text:pk},{depth:K,text:pl}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Il existe plusieurs page de how-to's pour se connecter a une application a distance. Mais j'ai envie de mettre pour mes propres archives."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ce billet prend en considérations que..."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Vous voulez vous connecter a un service précis (disons VMWare Server Console)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Sur une machine parmi un réseau de X ordinateurs"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Le gateway (routeur) relie toutes les connections vers un host en Linux (proxysrv) qui sert a s'authentifier et accéder au reste du réseau."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Le serveur sur le réseau qui héberge des machines virtuelles avec VMWare Server (vmserver1)."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Le port 902 (le port TCP que vous voulez utiliser) sur le firewall interne (de vmserver1) est ouvert. Et"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Vous voulez vous connecter a un de ses VM."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{style:nu},children:[{type:a,value:e},{type:b,tag:ax,props:{style:nv},children:[{type:a,value:"Mise à jour"}]},{type:a,value:"\nCe billet a été écrit originalement en 2007. À l'époque il n'existait pas de VMware ESXi, ni de VMware Server 2. Les concepts sont toujours bons par contre.\n"}]},{type:a,value:e},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour avoir accès a une application distante (ou une autre machine\u002FVM), il faut se créer un tunnel vers le réseau interne. En gros il faut avoir accès au réseau (dans mon exemple le serveur "},{type:b,tag:u,props:{},children:[{type:a,value:"proxysrv"}]},{type:a,value:jy}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Vous devez avoir un accès au réseau interne que vous avez accès, vous pouvez le demander a  votre Sysadmin de vous avoir un accès, mais ce n'est pas le point de ce billet."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour ouvrir une session SSH en tunnel, sous windows, il vous faut PuTTY. Si vous n'avez pas PuTTY faites une "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.google.ca\u002Fsearch?q=putty"},children:[{type:a,value:"recherche google"}]},{type:a,value:" c'est une petite application libre de droits. En linux, c'est simple"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"ssh -l username -L 902:192.168.3.97:902 -L 80:192.168.3.88:80 serveurdistant.ca"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:"small",props:{},children:[{type:a,value:"NOTE: Remarquez que vous n'avez qu'a ajouter le nombre de -L nécessaires (-L LOCAL_PORT:ON_REMOTE_NETWORK_IP:REMOTE_IP_OPENED_PORT_NUMBER)"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Aussi, pour accéder a la console VMWare, il faut une version de "},{type:b,tag:s,props:{},children:[{type:a,value:pm}]},{type:a,value:" ou une console VMWare. Le site VMWare ne semble pas avoir de version stand-alone de la console ni pour Linux ni Windows. Alors, si vous n'avez pas encore VMWare sur votre machine, allez chercher votre exemplaire de "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.vmware.com\u002Fdownload\u002Fserver\u002F"},children:[{type:a,value:"VMWare Server ici"}]},{type:a,value:". Si vous avez \"VMWare\" d'installé mais pas de moyen de vous connecter en local ou a distance, désinstallez la, et installez la version server prescrite."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans notre exemple, on va accéder a distance au "},{type:b,tag:s,props:{},children:[{type:a,value:"VMWare Server Console"}]},{type:a,value:" (sur vmserver1) qui utilise le port "},{type:b,tag:s,props:{},children:[{type:a,value:pn}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:pk}]},{type:a,value:"\nPour pouvoir trouver d'autre ports a ouvrir le fichier texte \u002Fetc\u002Fservices donne tout les ports et les alias qu'on peut utiliser comme alias. Ce fichier existe depuis longtemps dans tout ce qui est UNIX et Linux.\n"},{type:b,tag:L,props:{},children:[{type:a,value:pl}]},{type:a,value:"\nUne fois PuTTY et VMWare Server Console (ou console) fonctionnels (pour cet exemple) vous n'avez qu'a suivre les paramêtre ici:\n"},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:" Hostname:"},{type:b,tag:u,props:{},children:[{type:a,value:g},{type:b,tag:s,props:{},children:[{type:a,value:"serveurdistant.ca"}]},{type:a,value:e}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Port: "},{type:b,tag:s,props:{},children:[{type:a,value:fB}]},{type:a,value:" (ssh)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Donner un nom de session, mais ne sauvegardez pas tout de suite."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Aller a "},{type:b,tag:s,props:{},children:[{type:a,value:"SSH"}]},{type:a,value:po},{type:b,tag:s,props:{},children:[{type:a,value:"Tunnels"}]},{type:a,value:" (plus bas)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Entrer, Source port : "},{type:b,tag:s,props:{},children:[{type:a,value:pn}]},{type:a,value:" (votre port local), Destination: (ip de vmserver1:le port) , puis cliquer Add."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:li},{type:b,tag:s,props:{},children:[{type:a,value:"Connection"}]},{type:a,value:po},{type:b,tag:s,props:{},children:[{type:a,value:"Data"}]},{type:a,value:"; Auto-login username, vous pouvez entrer le login qu'il faut si vous l'avez"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Retourner au haut du menu et sauvegarder la session"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Puis... [Open]."}]},{type:a,value:e}]},{type:a,value:"\nEnsuite, connectez vous au service sur l'hôte localhost et le port que vous avez \"tunnellé\".\n"},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:" Connecter a VMWare Server"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ouvrir VMWare sur votre machine hors réseau... maintenant tunnellée"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Connect to remote-host: "},{type:b,tag:s,props:{},children:[{type:a,value:ku}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Login\u002Fpw: votre login pour accéder aux vm."}]},{type:a,value:e}]},{type:a,value:"\nUtiliser la VM comme si elle était locale.\n"},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:lE}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"ttp:\u002F\u002Fwww.medicalnerds.com\u002Fport-forwarding-with-sshputty\u002F"},children:[{type:a,value:"Exemple tunnel avec PuTTY."}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2007\u002F10",path:"\u002Fblog\u002F2007\u002F10\u002Ftunnel-ssh-avec-session-distante-en-console-vmware",extension:aw,slug:"tunnel-ssh-avec-session-distante-en-console-vmware",createdAt:pp,updatedAt:pp,category:aH,prettyfiedTemporalDate:{prettified:"mercredi 3 octobre 2007",temporalDate:"2007-10-03"}},{locale:aG,title:"Lorsque gérer un réseau peut rimer avec vigilance plutôt que réparation",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F09\u002Florsque-gerer-un-reseau-peut-rimer-avec-vigilance-plutot-que-reparation\u002F",status:av,revising:T,caracteresBizzares:T,created:"2007-09-28",updated:bj,tags:[as,fL,b_,bc],categories:[aH],excerpt:aF,toc:[],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Les collègues qui travaillent avec moi pour le réseau savent ce que qu'implique chaque modification dans le réseau. Nous travaillons pour remonter le réseau et atteindre un certain niveau côté qualité qui rendra notre travail plus facile pour tous."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Parmi ces améliorations, il s'agit d'un moyen de savoir si tout est correct et être averti si un changement à été opéré et même savoir \"où est le bobo\"."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Il s'agit du service de monitoring avec "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.nagios.org\u002F",target:A},children:[{type:a,value:"Nagios"}]},{type:a,value:". Il ne s'agit ici pas d'un howo-to technique mais plutôt ma \"review\" de ce que l'installation que j'ai monté peut faire."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Il y a un mois ou deux je me suis commandé le livre \""},{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.goodreads.com\u002Fbook\u002Fshow\u002F1348002.Building_a_Monitoring_Infrastructure_with_Nagios"},children:[{type:a,value:"Building a monitoring infrastructure with Nagios"}]},{type:a,value:"\" de David Josephsen "},{type:a,value:" qui s'avère être très utile pour comprendre le fonctionnement."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je ne l'ai pas tout lu car j'avait déja de l'expérience avec Nagios. Puis de toute façon je voulait faire comme on fait souvent, me débrouiller et apprendre avant de \"lire le manuel\"."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La façon qu'on l'a implantée consiste a utilser une "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.vmware.com\u002Fappliances\u002Fdirectory\u002F1002",target:A},children:[{type:a,value:"VM déjà montée"}]},{type:a,value:" (avec un "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.oreon-project.org\u002F",target:A},children:[{type:a,value:"pannel appelé Centreon"}]},{type:a,value:dK},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.oreon-project.org\u002FNewsflash\u002FOreon-became-Centreon.html",target:A},children:[{type:a,value:"Anciennement Oreon"}]},{type:a,value:") le changement de nom de projet est tout récent)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"En gros il s'agit d'une VM qui roule l'application et merge plusieurs applications fort utiles:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:" Authentification avec notre serveur LDAP"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"RRDTools pour les graphiques"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"... et "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwiki.oreon-project.org\u002Findex.php\u002FPlugins#More_plugins"},children:[{type:a,value:"bien d'autres"}]},{type:a,value:Q}]},{type:a,value:e}]},{type:a,value:"\nLe pannel Centreon donne beaucoup d'avantages pour la gestion, dont;\n"},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:" Un pannel plus complet [que celui fourni par Nagios] qui donne beaucoup plus d'options de configuration"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Un processus de configuration qui te permet de tester AVANT \"d'appliquer\""}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Un moyen de conserver une historique des états et même leurs graphiques."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Beaucoup d'options qui deviennent à portée de la main sur des fonctions de Nagios qu'on ne penserait pas nécessairement."}]},{type:a,value:e}]},{type:a,value:"\nÉtant¬†une¬†\"techie\"¬†qui¬†utilise¬†beaucoup¬†la¬†ligne¬†de¬†commande,¬†j'ai¬†pourtant¬†été¬†surpris¬†d'être¬†rassuré¬†par l'interface aux premiers abords lourd mais complet de l'outil.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Dans¬†le¬†futur,¬†j'aimerai¬†entre-autre¬†améliorer¬†les¬†features¬†de¬†la¬†VM.¬†En voici quelques unes:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.syslog.org\u002Fwiki\u002FMain\u002FCentralSyslogTip",target:A},children:[{type:a,value:"Centraliser les logs"}]},{type:a,value:" pour pouvoir les consulter en un seul endroit."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Utiliser Centreon\u002FNagios comme \""},{type:b,tag:l,props:{href:"http:\u002F\u002Fwiki.oreon-project.org\u002Findex.php\u002FSyslogNG",target:A},children:[{type:a,value:"alerteur"}]},{type:a,value:"\" AVEC les "},{type:b,tag:u,props:{},children:[{type:a,value:pq}]},{type:a,value:" CENTRALISÉS, un gros plus!"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Avoir accès a une application du type "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.splunk.com\u002F",target:A},children:[{type:a,value:"Splunk"}]},{type:a,value:" pour \"fouiller\" dans les "},{type:b,tag:u,props:{},children:[{type:a,value:pq}]},{type:a,value:Q}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:" Intégrer les traps SNMP et pouvoir utiliser dans Nagios"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:" Intégrer le plugin "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.network-weathermap.com\u002Fnode\u002F49",target:A},children:[{type:a,value:"WeatherMap"}]},{type:a,value:" qui affiche l'état complet du réseau."}]},{type:a,value:e}]},{type:a,value:"\nPlus tard j'aurai probablement quelques indices du comment j'ai créé mes propres commandes pour gérer les plugins de nagios."}]},dir:pr,path:"\u002Fblog\u002F2007\u002F09\u002Florsque-gerer-un-reseau-peut-rimer-avec-vigilance-plutot-que-reparation",extension:aw,slug:"lorsque-gerer-un-reseau-peut-rimer-avec-vigilance-plutot-que-reparation",createdAt:gH,updatedAt:gH,category:aH,prettyfiedTemporalDate:{prettified:"vendredi 28 septembre 2007",temporalDate:"2007-09-28"}},{locale:aG,title:"Copier un fichier d'un serveur à l'autre en le compressant pour la route via NetCat et",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F09\u002Fcopier-un-fichier-dun-serveur-a-lautre-en-le-compressant-pour-la-route\u002F",status:av,revising:T,migrateCode:T,created:"2007-09-25",updated:bj,tags:[as,fL,bc],categories:[aH],excerpt:aF,toc:[],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"J'ai voulu un jour transférer des fichiers entre deux machines et les fichiers je les trouvaient lourds. Habituellement j'aurait utilisé soit "},{type:b,tag:l,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FRsync",target:A},children:[{type:a,value:"rsync"}]},{type:a,value:gg},{type:b,tag:l,props:{href:"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FSCP",target:A},children:[{type:a,value:eh}]},{type:a,value:" mais cette fois ci je voulait utiliser un processus un peu différent. Pourquoi ne pas compresser le contenu durant le transfert?"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Une méthode de compression-transfert-décompression aurait été, traditionnellement, de lancer une commande de création d'archive, attendre qu'elle finisse... (ça peut être long)... puis transférer... (attendre)... puis se loguer sur l'hôte distant. Ensuite décompresser le fichie (ou le conserver as-is)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Rsync est bien il permet de synchroniser BEAUCOUP de fichiers entre des machines et j'aime l'utiliser. Scp est très bien aussi il me permet de transférer des fichiers crées simplement, comme il se doit... Mais pourquoi attendre après les commandes de la procédure d'avant quand on peut tout automatiser en une seule commande?"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"En tant que "},{type:b,tag:u,props:{},children:[{type:a,value:"Geek"}]},{type:a,value:" moi même,  j'aime trouver des solutions élégantes pour faire quelque chose de la sorte sans avoir a attendre après un "},{type:b,tag:u,props:{},children:[{type:a,value:"input."}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans mon nouveau "},{type:b,tag:u,props:{},children:[{type:a,value:"blogroll"}]},{type:a,value:" j'ai découvert un "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.hostinggeek.com\u002F"},children:[{type:a,value:"blogeur"}]},{type:a,value:" qui semble avoir les mêmes intérêts que moi  coté hosting et machines serveurs. C'est pour ça que je l'ai ajouté. Ensuite en tant que bon bilingue je vais traduire l'essentiel de "},{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.hostinggeek.com\u002F2005\u002F08\u002Ftar-over-ssh.html"},children:[{type:a,value:"son post"}]},{type:a,value:" et le lier comme référence :)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"La technique"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"En gros,  il suffit de lancer la commande suivante:"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$tar -zcf - .\u002F | ssh remoteuser@remotehost tar -C \u002Fpath\u002Fto\u002Fremote\u002Fdir -zxf -"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"C'est simple que qui se passe."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"En fait il crée une archive compressée par "},{type:b,tag:s,props:{},children:[{type:a,value:iV}]},{type:a,value:" du dossier courrant ("},{type:b,tag:s,props:{},children:[{type:a,value:".\u002F"}]},{type:a,value:") ou peu importe le dossier il suffit de le mentionner là.) et envoie \"l'"},{type:b,tag:u,props:{},children:[{type:a,value:"archive"}]},{type:a,value:"\" au\n"},{type:b,tag:u,props:{},children:[{type:a,value:ps}]},{type:a,value:" (standard output) Ensuite le pipe("},{type:b,tag:s,props:{},children:[{type:a,value:az}]},{type:a,value:"), attrape le contenu du "},{type:b,tag:u,props:{},children:[{type:a,value:ps}]},{type:a,value:") puis appelle "},{type:b,tag:u,props:{},children:[{type:a,value:"ssh(secure shell) "}]},{type:a,value:"pour se connecter en connection sécurisée entre les deux machines par ligne de commande qui exécute presto une autre instance de tar et roule une décompression dans le stdin ("},{type:b,tag:s,props:{},children:[{type:a,value:"- "}]},{type:a,value:"aka. standard input)."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La seule attrape possible c'est que le serveur distant doit avoir la commande tar disponible dans son "},{type:b,tag:u,props:{},children:[{type:a,value:"path "}]},{type:a,value:"(logue toi sur la machine et si\n"},{type:b,tag:u,props:{},children:[{type:a,value:"tar "}]},{type:a,value:"répond... c'est ok. Sinon faites \""},{type:b,tag:s,props:{},children:[{type:a,value:"$which tar"}]},{type:a,value:"\" ou \""},{type:b,tag:s,props:{},children:[{type:a,value:"$locate tar"}]},{type:a,value:"\" pour trouver le binaire."}]}]},dir:pr,path:"\u002Fblog\u002F2007\u002F09\u002Fcopier-un-fichier-dun-serveur-a-lautre-en-le-compressant-pour-la-route",extension:aw,slug:"copier-un-fichier-dun-serveur-a-lautre-en-le-compressant-pour-la-route",createdAt:"2024-10-24T19:43:51.671Z",updatedAt:gH,category:aH,prettyfiedTemporalDate:{prettified:"mardi 25 septembre 2007",temporalDate:"2007-09-25"}},{title:"Montage de dossiers distants via SSHFS",locale:aG,created:"2007-05-31T00:00:00.000Z",updated:"2013-03-27T00:00:00.000Z",canonical:pt,status:av,revising:T,migrateLinks:T,migrateImages:ai,gallery:ai,caption:ai,categories:[bo],tags:[as],excerpt:aF,waybackMachineSnapshots:[{orig:"http:\u002F\u002Fubuntu.wordpress.com\u002F2005\u002F10\u002F28\u002Fhow-to-mount-a-remote-ssh-filesystem-using-sshfs\u002F",snapshots:[pu]},{orig:pt,snapshots:["https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20090903051709\u002Fhttps:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F05\u002Fmontage-de-dossiers-distants-via-sshfs\u002F"]}],toc:[{id:pv,depth:aj,text:pw},{id:px,depth:K,text:eE},{id:py,depth:aj,text:pz},{id:et,depth:K,text:bE}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"J’ai souvent vanté les mérites du SSHFS mais je n’ai jamais réellement expliqué\nle concept du partage à-la-Windows... mais sécuritaire!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le concept est simple. Un dossier de mount points sur diverses machines dans le\nlocal en Linux. Disons que votre dossier ~ est dans \u002Fhome\u002Fusername, ajoutez vos\nserveurs, par exemple, dans un dossier \"Drives\"."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Attention aux non initiés en Linux... c’est un howto très technique!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le résultat de cette procédure vous permettra d’accéder a des fichiers sur une\nautre machine comme si vous y étiez. Ce n’est pas un système qui synchronise les\nfichiers sur plus d’une machine. Ce n'est pas une copie de sauvegarde."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:an,props:{id:pv},children:[{type:b,tag:l,props:{href:"#assomptions",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:pw}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"J’assumerai que vous avez deux machines Linux."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour la procédure, j’utiliserai les informations suivantes."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Veuillez ajuster pour votre situation:"}]},{type:a,value:e},{type:b,tag:"dl",props:{},children:[{type:a,value:ag},{type:b,tag:gI,props:{},children:[{type:a,value:"Utilistaeur distant"}]},{type:a,value:aa},{type:b,tag:eF,props:{},children:[{type:a,value:"sa-storage"}]},{type:a,value:ag},{type:b,tag:gI,props:{},children:[{type:a,value:"Hôte Linux qui va stocker les fichiers"}]},{type:a,value:aa},{type:b,tag:eF,props:{},children:[{type:a,value:"192.168.0.2"}]},{type:a,value:ag},{type:b,tag:gI,props:{},children:[{type:a,value:"Chemin pour fichiers sur l’hôte Linux"}]},{type:a,value:aa},{type:b,tag:eF,props:{},children:[{type:a,value:"\u002Fhome\u002Fsa-storage\u002FDrives\u002Fweb1"}]},{type:a,value:aa},{type:b,tag:eF,props:{},children:[{type:a,value:"\u002Fhome\u002Fsa-storage\u002FDrives\u002Fweb2"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:px},children:[{type:b,tag:l,props:{href:"#consid%C3%A9rations",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:eE}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je suis prends pour acquis les détails suivants;"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Le caractère "},{type:b,tag:k,props:{},children:[{type:a,value:pA}]},{type:a,value:" est un caractère qui de décrire le chemin vers le dossier\nMaison de l’utilisateur courrant, si vous êtes connecté en tant que \"bob\", le\ndossier sera "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fhome\u002Fbob"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"J’ai utilisé Ubuntu, le nom du paquet peut changer et le gestionnaire de\npaquet aussi, mais le reste devrait demeurer la même chose."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Synonymes: "},{type:b,tag:u,props:{},children:[{type:a,value:"fusermount"}]},{type:a,value:aO},{type:b,tag:u,props:{},children:[{type:a,value:kh}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"La commande "},{type:b,tag:a_,props:{},children:[{type:a,value:pB}]},{type:a,value:fe},{type:b,tag:a_,props:{},children:[{type:a,value:pC}]},{type:a,value:" est un raccourci clavier pour faire\nexécuter une commande, on pourrait trouver "},{type:b,tag:a_,props:{},children:[{type:a,value:dC}]},{type:a,value:" dans le menu aussi."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:an,props:{id:py},children:[{type:b,tag:l,props:{href:"#prod%C3%A9cure",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:pz}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Sur notre machine locale, si dans le Terminal."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[ce,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:" ~\u002FDrives\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ajoutez y tout vos hosts que vous voulez... Je ne prendrai pas d’exemple réel\nétant donné qu’on a pas nécessairement tous les même droits partout sur les\nmachines et vm. Personnellement, je l’ai fait sur les serveurs web1 et web2 deux\nserveurs redondants d’hébergement de services web. J’ai donc créé ~\u002FDrives\u002Fweb1\net ~\u002FDrives\u002Fweb2"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[ce,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:" ~\u002FDrives\u002Fweb1\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:br}]},{type:a,value:" ~\u002FDrives\u002Fweb2\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans mon exemple, sur ces deux machines j’ai mon propre usager et j’ai ajouté\nmon login dans le ~\u002F.ssh\u002Fauthorized_keys de mon homedir. Si vous avez pas ça,\nfaites vous le en suivant le howto ici:\n"},{type:b,tag:aE,props:{title:"SSH sans mot de passe",to:pD},children:[{type:a,value:"login ssh sans mot de passe"}]},{type:a,value:".\nVous pourrez tester en faisant $ ssh hostname il devrait se loguer tout seul. Si\nvous ne faites pas cela, vous serez oubligé d’entrer vos mots de passes de\nTOUTES vos machines... A chaque login. Pour continuer, on doit aussi installer\nle paquetage sshfs"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[ce,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bB}]},{type:a,value:" sshfs\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Pour avoir le droit de monter les hôtes en sshfs, vous devez vous autoriser\nl’exécution du mount sinon vous êtes condamné a entrer le mot de passe root a\nchaque login. Vous pouvez aller via: "},{type:b,tag:a_,props:{className:[pE]},children:[{type:a,value:"System "},{type:b,tag:a_,props:{},children:[{type:a,value:"Administration\n"},{type:b,tag:a_,props:{},children:[{type:a,value:"Users"}]}]}]},{type:a,value:" and Groups Puis ajoutez dans Manage groups (ou\nquelque chose qui parle de ça) puis trouvez le groupe fuse puis dans Properties\najoutez votre propre login qui est probablement non coché. Aussi: Une manière\nalternative de s’ajouter le droit fuse, serait de faire en shell"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[ce,z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:iq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:dY}]},{type:a,value:" fuse username\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Finalement... l’auto exécution. Il faut aller dans "},{type:b,tag:a_,props:{className:[pE]},children:[{type:a,value:"System\n"},{type:b,tag:a_,props:{},children:[{type:a,value:"Préférences "},{type:b,tag:a_,props:{},children:[{type:a,value:"Sessions"}]}]}]},{type:a,value:" puis ajouter un Startup\nprograms avec la commande suivante:"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[ce,z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"sshfs sa-storage@192.168.0.2:\u002Fhome\u002Fsa-storage\u002FDrives\u002Fweb1 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:"\n      ~\u002FDrives\u002Fweb1 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:af}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:pF}]},{type:a,value:" reconnect\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Vous devinerez comment écrire correctement la commande en l’appliquant a vos\nbesoins. Oubliez pas de faire sauvegarder votre session GNOME,\n"},{type:b,tag:a_,props:{},children:[{type:a,value:pB}]},{type:a,value:fe},{type:b,tag:a_,props:{},children:[{type:a,value:pC}]},{type:a,value:" puis tapez "},{type:b,tag:k,props:{},children:[{type:a,value:"gnome-session-save"}]},{type:a,value:" puis enter."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Déconnectez et re-connectez-vous. En naviguant dans votre dossier "},{type:b,tag:u,props:{},children:[{type:a,value:"Maison"}]},{type:a,value:"\n("},{type:b,tag:k,props:{},children:[{type:a,value:pA}]},{type:a,value:"), dans le dossier "},{type:b,tag:k,props:{},children:[{type:a,value:"~\u002FDrives\u002F"}]},{type:a,value:" vous avez maintenant vos dossiers sur toutes\nvos machines distantes... localement!"}]},{type:a,value:e},{type:b,tag:L,props:{id:et},children:[{type:b,tag:l,props:{href:pi,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:bE}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Mon expérience... et un peu de;"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:pu,rel:[C,G,H],target:A},children:[{type:b,tag:s,props:{},children:[{type:a,value:"How to mount a remote ssh filesystem using sshfs"}]},{type:a,value:" October 28, 2005"}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2007\u002F05",path:"\u002Fblog\u002F2007\u002F05\u002Fmontage-de-dossiers-distants-via-sshfs",extension:aw,slug:"montage-de-dossiers-distants-via-sshfs",createdAt:gJ,updatedAt:gJ,category:bo,prettyfiedTemporalDate:{prettified:"jeudi 31 mai 2007",temporalDate:"2007-05-31"}},{locale:aG,title:"Doubler la fiabilité avec un miroir MySQL, un mini-Howto",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F06\u002Fdoubler-la-fiabilite-avec-un-miroir-mysql-un-mini-howto\u002F",status:av,revising:T,caption:T,caracteresBizzares:T,gallery:ai,migrateCode:T,migrateImages:ai,migrateLinks:T,created:"2007-06-14",updated:bj,tags:[as,bc],categories:[aH],excerpt:aF,toc:[{depth:K,text:eE},{depth:K,text:pG},{depth:K,text:pH},{depth:K,text:pI},{depth:K,text:pJ},{depth:K,text:cp}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Imaginez que vous avec plusieurs sites a gérer. Sur un serveur, disons, monté en RAID-1 sur deux disques SATA en md-devices. C'est bien, les données sont dupliqués et si un disque dur brise, les données survivent. Évidemment ça ne nous protège pas des erreur de manipulation."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Une redondance comme je l'ai monté implique deux serveurs distincts qui ont chacun leur adresse ip et leur setup. Les serveurs ont deux adapteurs réseau et je les ai reliés ensemble et donné une adresse ip privé pour qu'ils puissent parler ensemble sans passer par Internet. Chaque serveur à les fichiers de sites pour chaque usager et chacun se connecte a mysql en localhost. La réplication se passe donc par l'adresse privée donc aucune encryption est nécessaire entre les peers."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Plus tard je devrai monter un service de miroirisation via rsync mais ce n'est pas le but de \"ce\" post."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Veuillez noter qu'il s'agit d'un howto TR√àS TECHNIQUE et je NE PEUT PAS nécessairement GARANTIR le FONCTIONNEMENT si vous faites simplement que COPIER SANS RÉFLÉCHIR."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Voici ce que j'ai fait pour préparer la redondance des serveurs. Actuellement seulement une Base de donnée est répliquée sur les deux machines, plus tard la redondance sera faite sur tout les sites publics et les applications, je teste encore pour m'assurer de savoir les choses a ne pas faire."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La réplication de base de donnée est un processus qui demande de la préparation. J'ai commencé avec:"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Quelles tables répliquer"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Quelles machines seront les nodes"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Quelle version du serveur"}]},{type:a,value:e}]},{type:a,value:"\nDans mon exemple je ne fait que répliquer qu'une seule BdD, si vous voulez en faire plus, faudra attendre que je sorte un autre billet, ou faire comme je fait... chercher :)\n"},{type:b,tag:L,props:{},children:[{type:a,value:eE}]},{type:a,value:"\nLes serveurs sont connectés entre eux avec un cross-over cable et ont chacun leur adresses privés dans leur "},{type:b,tag:ad,props:{},children:[{type:a,value:kq}]},{type:a,value:" que l'un pointe vers l'autre et vice versa.\n"},{type:b,tag:h,props:{},children:[{type:a,value:"Dans mon setup:\nLa machine "},{type:b,tag:ad,props:{},children:[{type:a,value:"web1"}]},{type:a,value:g},{type:b,tag:s,props:{},children:[{type:a,value:gi}]},{type:a,value:g},{type:b,tag:ad,props:{},children:[{type:a,value:"mysql1"}]},{type:a,value:", et "},{type:b,tag:ad,props:{},children:[{type:a,value:"web2"}]},{type:a,value:g},{type:b,tag:s,props:{},children:[{type:a,value:gi}]},{type:a,value:g},{type:b,tag:ad,props:{},children:[{type:a,value:"mysql2"}]}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:pG}]},{type:a,value:e},{type:b,tag:x,props:{className:[gK],type:gL},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Screen window 1"}]},{type:a,value:gM}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Faire un tail-follow sur les fichiers log, sur les deux machines."},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ sudo tail -f \u002Fvar\u002Flog\u002Fmysql\u002Ferror_log.err"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Screen window 0"}]},{type:a,value:gM}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"se connecter en shell mysql sur la machine locale, sur chaque machine:\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ mysql -u da_admin -p"}]},{type:a,value:"\n(utiliser le compte qui a les acces nécessaires, da_admin devrait suffir, sinon root)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Screen window 2"}]},{type:a,value:gM}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Avoir une session root, pour redémarrer les services au besoin et éditer les fichiers"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:pH}]},{type:a,value:e},{type:b,tag:x,props:{className:[gK],type:gL},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Vérifier \u002Fetc\u002Fmy.cnf, modifier en fonction des besoins"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Modifier au niveau du bloc "},{type:b,tag:ad,props:{},children:[{type:a,value:"[mysqld]"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"AVOIR, un équivalent logique au web2:"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"\u002Fetc\u002Fmy.ini sur web2, exemple\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"server-id                       = 2\nlog-bin                         = mysql-bin\nlog-slave-updates\nauto_increment_increment        = 10\nauto_increment_offset           = 2\nlog-error = \u002Fvar\u002Flog\u002Fmysql\u002Ferror_log\nreplicate-do-db=renoirb_blog"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"AVOIR, un équivalent logique au web1:"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Voir dans le fichier \u002Fetc\u002Fmy.ini, et modifier le code.\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"server-id = 1\nlog-bin = mysql-bin\nlog-slave-updates\nauto_increment_increment = 10\nauto_increment_offset  = 1\nlog-error = \u002Fvar\u002Flog\u002Fmysql\u002Ferror_log\nreplicate-do-db = renoirb_blog"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:pI}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ sudo vdir \u002Fvar\u002Flog\u002Fmysql                    # VOIR si existant, sinon;\n$ sudo mkdir \u002Fvar\u002Flog\u002Fmysql\n$ ps aux | grep mysqld                        # VOIR LE USER QUI ROULE MYSQLD\n$ chown mysql.root \u002Fvar\u002Flog\u002Fmysql        # DONNER les permissions au dossier\n# service mysqld restart                      # REDEMARRER, en root, mysqld"}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:pJ}]},{type:a,value:e},{type:b,tag:x,props:{className:[gK],type:gL},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Aller sur l'application phpmyadmin de votre serveur"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Dans phpmyadmin, aller dans la "},{type:b,tag:s,props:{},children:[{type:a,value:"page d'accueil"}]},{type:a,value:d$},{type:b,tag:s,props:{},children:[{type:a,value:"privileges"}]},{type:a,value:", Ajouter un unager avec les droits "},{type:b,tag:ad,props:{},children:[{type:a,value:"RELOAD, REPLICATION CLIENT, REPLICATION SLAVE"}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ne pas oublier de le faire sur les deux machines"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"J'ai aussi ajouté les droits d'utilisation aux tables que je veut répliquer."}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Aller sur le screen window 0 (le shell SQL)\u003E"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Le faire sur chaque machine\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"mysql\u003E FLUSH PRIVILEGES;                            # RECHARGER les privileges\nmysql\u003E USE renoirb_blog;                                # ALLER dans table desiree de replication\nmysql\u003E FLUSH TABLES WITH READ LOCK;       # Deverrouiller les tables, au cas\nmysql\u003E SHOW MASTER STATUS;                     # Voir le log"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Donne un output similaire a ceci:\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"+------------------+----------+--------------+------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |\n+------------------+----------+--------------+------------------+\n| mysql-bin.000003 | 325617   |              |                  |\n+------------------+----------+--------------+------------------+\n"}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ensuite, on prépare la réplication"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"MODIFIER accordignly a la machine EN SHELL mysql:"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"SI vous êtes sur web2, placer mysql1 comme "},{type:b,tag:ad,props:{},children:[{type:a,value:"MASTER_HOST"}]},{type:a,value:", et vice versa.\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"mysql\u003E CHANGE MASTER TO MASTER_HOST='mysql1',\n\u003E MASTER_USER='replication_user',\n\u003E MASTER_PASSWORD='LE MOT DE PASSE',\n\u003E MASTER_LOG_FILE='mysql-bin."},{type:b,tag:"logfile_ext",props:{},children:[{type:a,value:"',\n\u003E MASTER_LOG_POS="},{type:b,tag:"position",props:{},children:[{type:a,value:";\nmysql\u003E SLAVE START;                        # DEMARRER LA REPLICATION sur chaque machine"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{},children:[{type:a,value:cp}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[by]},children:[{type:b,tag:ad,props:{},children:[{type:b,tag:l,props:{href:pK,rel:[C]},children:[{type:a,value:pK}]}]}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2007\u002F06",path:"\u002Fblog\u002F2007\u002F06\u002Fdoubler-la-fiabilite-avec-un-miroir-mysql-un-mini-howto",extension:aw,slug:"doubler-la-fiabilite-avec-un-miroir-mysql-un-mini-howto",createdAt:gJ,updatedAt:"2024-10-24T19:43:51.670Z",category:aH,prettyfiedTemporalDate:{prettified:"jeudi 14 juin 2007",temporalDate:"2007-06-14"}},{locale:aG,title:"Login SSH sans mot de passe",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F04\u002Flogin-ssh-sans-mot-de-passe\u002F",status:av,revising:T,migrateCode:T,created:"2007-04-10",updated:bj,tags:[as,bc],categories:[aH],excerpt:aF,toc:[],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Voici comment générer un certificat qui sera utilisé par ssh pour se connecter à  un serveur sans demander de mot de passe à  l'usager."}]},{type:a,value:e},{type:b,tag:h,props:{className:[k]},children:[{type:a,value:pL}]},{type:a,value:e},{type:b,tag:h,props:{className:[lH]},children:[{type:a,value:pL}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Sur le serveur client, exécuter (dans le HOME de l'usager):"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ mkdir .ssh\n$ ssh-keygen -t dsa -f .ssh\u002Fid_dsa (Ne pas spécifier de mot de passe)\n$ cd .ssh\n$ scp id_dsa.pub user@remote:~\u002F.ssh\u002Fid_dsa.pub"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"user@remote représente l'usager et le serveur sur lequel le client voudra se connecter par SSH sans mot de passe. Maintenant, sur le serveur remote, exécuter (avec le même usager utiliser à  la commande précédente):"}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"$ cd .ssh\n$ cat id_dsa.pub \u003E\u003E authorized_keys2\n$ chmod 640 authorized_keys2\n$ rm id_dsa.pub"}]}]},dir:pM,path:pD,extension:aw,slug:"login-ssh-sans-mot-de-passe",createdAt:pN,updatedAt:pN,category:aH,prettyfiedTemporalDate:{prettified:"mardi 10 avril 2007",temporalDate:"2007-04-10"}},{locale:aG,title:"Installation RHEL4 sur un Dell PowerEdge 860",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F04\u002Finstallation-rhel4-sur-un-dell-poweredge-860\u002F",status:av,revising:T,migrateCode:T,created:"2007-04-16",updated:bj,tags:[as,bc],categories:[aH],excerpt:aF,toc:[],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Voici comment j'ai fait pour préparer un serveur web... d'autres directives pourraient suivre: ATTENTION; contenu très technique :)"}]},{type:a,value:e},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:"Étapes a suivre"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Insérer le CD \"Installation and Server Management\" fourni"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Suivre les étapes de configuration du serveur\n"},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Qui consiste a faire linstallation"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Setter le \"partitionning\""}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Choisir la distribution Linux (RedHat Enterprise 4 X86)"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Suivre les directives a lecran"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Une fois les étapes faites on se retrouve devant un login noir, tout va bien.\n"},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Savoir son adresse ip   "},{type:b,tag:ad,props:{className:[by]},children:[{type:a,value:"#ifconfig"}]},{type:a,value:"  noter le ip de eth0 (généralement)"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Un texte bizzare demande si on veut installer \"Open Manage Server Assistant\"\n"},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Suivre les étapes pour installer (select all) puis \"i\" pour installer"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Lancer le programme pour la première fois \""},{type:b,tag:ad,props:{className:[by]},children:[{type:a,value:"  \u002Fusr\u002Fbin\u002Fsrvadmin-services.sh start  "}]},{type:a,value:I}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Pour se loguer, aller: https:\u002F\u002F(adresse ip):1311 avec le login root\n"},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Sert a pouvoir avoir l'état de la machine a distance, faire un reboot, etc."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"executer   "},{type:b,tag:ad,props:{className:[by]},children:[{type:a,value:"#up2date --configure"}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Ce qui enregistrera la machine dans notre compte avec RHN"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"NOTE: demander les crédentiels pour pouvoir se loguer sur RHN"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Aller sur "},{type:b,tag:c,props:{className:[by]},children:[{type:b,tag:l,props:{href:pO,title:dk,rel:[C]},children:[{type:a,value:pO}]}]},{type:a,value:" et se loguer avec lesdits credentiels"}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Executer le fichier "},{type:b,tag:l,props:{href:"https:\u002F\u002Frenoirboulanger.com\u002Ffiles\u002FcleanRHEL.sh",title:"Fichier de nettoyage RHEL4"},children:[{type:b,tag:c,props:{className:[by]},children:[{type:a,value:"cleanRHEL.sh"}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:a,value:"Voici comment:  "},{type:b,tag:ad,props:{},children:[{type:a,value:"#\u002Fbin\u002Fbash cleanRHEL.sh"}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:s,props:{},children:[{type:a,value:"Glitches que j'ai trouvé "}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"RHEL 4 ET Open Manage Server Assistant installe des paquets qui cree un conflit pour lupdate alors il faut enlever ceux ci et FORCER l'update."}]},{type:a,value:e},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"#up2date -f seamonkey-nspr\n#up2date -f mozilla-nspr"}]},{type:a,value:"  puis ensuite, lancer lupdate en ignorant les trucs qui boguent!\n"},{type:b,tag:o,props:{lang:S},children:[{type:a,value:"#up2date -u -f --exclude=mozilla-nss,ethereal"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:b,tag:s,props:{},children:[{type:a,value:bE}]}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[by]},children:[{type:b,tag:l,props:{href:pP,title:dk,rel:[C]},children:[{type:a,value:pP}]}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[by]},children:[{type:b,tag:l,props:{href:pQ,title:dk,rel:[C]},children:[{type:a,value:pQ}]}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[by]},children:[{type:b,tag:l,props:{href:pR,title:dk,rel:[C]},children:[{type:a,value:pR}]}]}]},{type:a,value:q},{type:b,tag:i,props:{},children:[{type:b,tag:c,props:{className:[by]},children:[{type:b,tag:l,props:{href:pS,title:dk,rel:[C]},children:[{type:a,value:pS}]}]}]},{type:a,value:e}]}]},dir:pM,path:"\u002Fblog\u002F2007\u002F04\u002Finstallation-rhel4-sur-un-dell-poweredge-860",extension:aw,slug:"installation-rhel4-sur-un-dell-poweredge-860",createdAt:pT,updatedAt:pT,category:aH,prettyfiedTemporalDate:{prettified:"lundi 16 avril 2007",temporalDate:"2007-04-16"}},{title:"Installer VMWare sur Ubuntu server avec le repositoire de Canonical",locale:aG,created:"2006-12-21T00:00:00.000Z",updated:"2006-12-25T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2006\u002F12\u002Finstaller-vmware-sur-ubuntu-server-avec-le-repositoire-de-canonical\u002F",status:av,revising:ai,categories:[pU],tags:[as,eM,bo],keywords:[pm,"Ubuntu 7.04","Fiesty Fawn","Canonical Repository"],excerpt:aF,description:"Procedure pour installer Ubuntu 7.04 Fiesty Fawn pour faire rouler VMWare Server",preamble:{text:"Dans le temps où le «cloud computing» n’était pas très fréquent, ni\nl’automatisation avec Puppet, SaltStack, Ansible. Aussi, les images qui\nétaient originalement incluses dans cet article ne sont plus disponibles, ce\nqui rend cet article peu utilisable. J’ai décidé de conserver quand-même,\ncomme preuve qu’avant d’avoir pris l’habitude de tout automatiser, les\nprocédures avec captures d’écran sont éphémères et perdent tout leur sens sans\nimages.\nD’ailleurs, pour que les services soient résilients, comme par exemple\nles relais SMTP ou DNS qui sont faits pour s’entraîder, ces services sont\npensés pour être composé de plusieurs «nodes» qui ont la même responsabilité\net qu’il est possible de rapidement appliquer la même configuration rapidement.\n"},toc:[{id:pV,depth:aj,text:pW},{id:pX,depth:aj,text:pY},{id:dV,depth:aj,text:dW}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"L’idée c’est de d’avoir un serveur rack-mount minimal fait pour héberger les VM\nd’infrastructure du réseau. Actuellement plusieurs de nos serveurs "},{type:b,tag:u,props:{},children:[{type:a,value:"physiques"}]},{type:a,value:"\nont déjà X-Windows sur leur hôtes (SuSE v10, RHEL 4 U5, Gentoo 2007.0, Ubuntu,\netc.) Mais ce sont des installations qui ont été faites avec tout ce qu’il\nsortait sans réfléchir ou se pencher sur l’économie de ressources. Ce serveur\nsera minimal coté installation, et maximisé sur VMWare... voici les étapes que\nj’ai fait."}]},{type:a,value:e},{type:b,tag:an,props:{id:pV},children:[{type:b,tag:l,props:{href:"#t%C3%A9l%C3%A9charger-ubuntu",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:pW}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"L'idée c'est d'installer le serveur en minimal... donc une visite sur\n"},{type:b,tag:l,props:{href:pZ,rel:[C,G,H],target:A},children:[{type:a,value:pZ}]},{type:a,value:" s'impose."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La dernière mouture en version server suffit."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Actuellement, celle utilisée a été la Ubuntu server 7.04 Feisty Fawn de son nom."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Il ne reste qu'a brûler le "},{type:b,tag:bD,props:{},children:[{type:a,value:"ISO"}]},{type:a,value:" sur un "},{type:b,tag:bD,props:{},children:[{type:a,value:"CD"}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:an,props:{id:pX},children:[{type:b,tag:l,props:{href:"#booter-le-m%C3%A9dium-dinstallation",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:pY}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Une fois le démarrage fait, un écran de la sorte apparaît."}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Sélectionner le premier choix, on fait une installation."}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Choisir la langue d'installation, personnellement je suis anglophone pour ce qui\ntouche a mon OS, c'est à votre choix."}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"On choisit \"Canada\" (contrairement a l'image), choisir son pays... ça aide :)"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite on demande le clavier. Ma combinaison de clavier préféré c'est \"Canadien\nFrançais\" (cf) ou Canadien tout court... c'est pas toujours clair mais le\nlogiciel nous permet de faire nos propres choix et de le tester."}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Setter un nom c’t’important. Fiez vous aux normes de votre data-center."}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Setter son username habituel, car ensuite faire on peut copier sa clé SSH\npublique direct dans le nouveau serveur"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:eh}]},{type:a,value:" ~\u002F.ssh\u002Fid_dsa.pub ubuntu:~\u002F.ssh\u002Fauthorized_keys\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"et pouvoir vivre sans entrer son password a chaque fois :) (hors du sujet mais\nj'ai mis la commande au cas où)"}]},{type:a,value:e},{type:b,tag:dt,props:{variant:eS,className:[du],dataDate:p_},children:[{type:a,value:ag},{type:b,tag:s,props:{slot:cG},children:[{type:a,value:"Méthode alternative"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Plutôt que d’utiliser "},{type:b,tag:k,props:{},children:[{type:a,value:eh}]},{type:a,value:", nous pouvons aussi utiliser la commande\n"},{type:b,tag:k,props:{},children:[{type:a,value:"ssh-copy-id"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Personnellement je ne sélectionne rien ici, à moins de m'en servir... mais je\nn'aime pas ça que le serveur LAMP soit installable et upgradable\nautomatiquement... Les applications web ne \"s'upgradent\" pas automatiquement,\nelles."}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Installation complétée!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Installation des services Voici les étapes faites pour installer le reste."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Se logguer après le redémarrage avec les crédentiels fournis lors de\nl'installation."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Utiliser "},{type:b,tag:k,props:{},children:[{type:a,value:"sudo su --"}]},{type:a,value:" (ou \""},{type:b,tag:k,props:{},children:[{type:a,value:"sudo -s"}]},{type:a,value:"\") pour s'élever au commandes d'un shell\nroot."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,ce]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:eP}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"vi"}]},{type:a,value:" \u002Fetc\u002Fapt\u002Fsources.list\n"}]}]}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ajoutez la ligne suivante:"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:o,props:{className:[z,aL]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"deb http:\u002F\u002Farchive.canonical.com\u002Fubuntu feisty\u002Fcommercial main\n"}]}]}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite un update et un upgrade s'impose... question de garder à jour le\nserveur."}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:c,props:{className:[eG]},children:[{type:a,value:am}]},{type:b,tag:o,props:{className:[z,ce]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:" update\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:" upgrade\n"}]}]}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Puis, installer les kernel-modules"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:c,props:{className:[eG]},children:[{type:a,value:am}]},{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bI}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:bB}]},{type:a,value:" vmware-server vmware-tools-kernel-modules\n"}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Répondre oui a toutes les questions et entrer le numéro de série VMWare sur le\nsite "},{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.vmware.com\u002F",rel:[C,G,H],target:A},children:[{type:a,value:"http:\u002F\u002Fwww.vmware.com"}]},{type:a,value:", obligatoire."}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"La console VMWare Vù qu'on a pas de XWindows pour gérer, on utilise une console\nvmware-server à partir d'une autre machine sur notre LAN."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:dt,props:{variant:"error",className:[du],dataDate:p_},children:[{type:a,value:ag},{type:b,tag:s,props:{slot:cG},children:[{type:a,value:"Après re-lecture (et 18 ans plus tard(!!))"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je réalise à me relire que cette procédure recommande de télécharger un binaire\n("},{type:b,tag:k,props:{},children:[{type:a,value:p$}]},{type:a,value:") d’un autre blogue. Ne faites pas ça!"}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ne suivez pas aveuglément ce type de conseil! Assurez-vous de seulement\ninstaller des binaires de sources que vous faites confiance, comme celles\nprovenant du vendeur. Pas d’un blogue au hasard! A moins que vous puissiez lire\nle code, et compiler vous-même."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:c,props:{className:[eG]},children:[{type:a,value:am}]},{type:b,tag:o,props:{className:[z,Z],dataLine:eA},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,E,F]},children:[{type:a,value:bG}]},{type:a,value:" \u002Flib\u002Fsecurity\n"},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:dJ}]},{type:a,value:" https:\u002F\u002Fwww.matthewbrowne.com\u002Fblog\u002Fwp-content\u002Fuploads\u002Fpam_unix_vm.so "},{type:b,tag:c,props:{className:[d,v,j]},children:[{type:a,value:pF}]},{type:a,value:" pam_unix_vm.so\n"}]}]}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le blogeur de qui je prend mes sources avait fait une librairie "},{type:b,tag:k,props:{},children:[{type:a,value:p$}]},{type:a,value:"\npour remplacer "},{type:b,tag:k,props:{},children:[{type:a,value:"pam_unix2.so"}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"De toute façon il lorsque j'éditait le fichier "},{type:b,tag:k,props:{},children:[{type:a,value:"\u002Fetc\u002Fpam.d\u002Fvmware-authd"}]},{type:a,value:" (celui\nauto-généré par notre installation) Sortait avec des liens absolus qui\nsemblaient bogus."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Alors j'ai suivi, récrit le fichier comme suit"}]},{type:a,value:e},{type:b,tag:ay,props:{src:ba},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite on redémarre la machine"}]},{type:a,value:e},{type:b,tag:w,props:{className:[y]},children:[{type:b,tag:c,props:{className:[eG]},children:[{type:a,value:am}]},{type:b,tag:o,props:{className:[z,Z]},children:[{type:b,tag:k,props:{},children:[{type:a,value:"init "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:eC}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Généralement, sur la console, tu pourrait te connecter sur \"Remote host\" avec\ntes crédentiels et ton host et gérer tes VM :)"}]},{type:a,value:e},{type:b,tag:an,props:{id:dV},children:[{type:b,tag:l,props:{href:jZ,ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:dW}]},{type:a,value:e},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Les notes très utiles et les screenshots de "},{type:b,tag:eR,props:{},children:[{type:b,tag:k,props:{},children:[{type:a,value:"matthewbrowne.com"}]}]},{type:a,value:" est non\ndisponible et l’Internet Archive n’a rien. Je n'ai plus les images localement\nalors ce post est là pour des raisons historiques."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Mon expérience, car en fait j'ai traduit son blog-post. Mais je conaissait\npourtant déja les étapes, son post m'a principalement donné une structure pour\nla traduction."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Last.fm et la musique et le café :PpP"}]},{type:a,value:e}]},{type:a,value:e}]},dir:"\u002Fblog\u002F2006\u002F12",path:"\u002Fblog\u002F2006\u002F12\u002Finstaller-vmware-sur-ubuntu-server-avec-le-repositoire-de-canonical",extension:aw,slug:"installer-vmware-sur-ubuntu-server-avec-le-repositoire-de-canonical",createdAt:eH,updatedAt:eH,category:pU,prettyfiedTemporalDate:{prettified:"jeudi 21 décembre 2006",temporalDate:"2006-12-21"}},{title:"Le futur du PC",locale:aG,created:"2007-01-25T00:00:00.000Z",updated:"2009-08-27T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F01\u002Fle-futur-du-pc\u002F",status:av,revising:T,categories:[qa],tags:["ar",as],keywords:["bureau","futur"],excerpt:aF,preamble:{text:"Maintenant (n.d.l.r. en *2020*) que nous avons la [Réalité Augumentée][0] qu'est-ce qui nous\nattend pour l’interface utilisateur sur le poste de travail?\n[0]: \u002Fblog\u002F2009\u002F08\u002Fnouvelle-technologie-de-la-realite-augumentee-les-habitants-des-pays-bas-seront-des-premiers 'Nouvelle technologie de la Réalité Augumentée, Les habitants des Pays Bas seront des premiers'\n"},toc:[{id:qb,depth:aj,text:qc},{id:qd,depth:K,text:qe},{id:qf,depth:K,text:qg},{id:qh,depth:K,text:qi},{id:qj,depth:K,text:qk},{id:ql,depth:aj,text:qm}],body:{type:am,children:[{type:b,tag:h,props:{},children:[{type:a,value:"Je ne sais pas si vous avez déjà imaginé avoir un ordinateur qui a une interface\nsimilaire a celle qu'on voit dans Minority Report. Techniquement les choses\nsemblent bouger assez vite pour qu'on puisse les voir se concrétiser."}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Je voulait profiter de ce billet pour partager avec vous quelques concepts qui\nexistent déjà et ce qui pourrait arriver dans un futur pas si loin que ça."}]},{type:a,value:e},{type:b,tag:an,props:{id:qb},children:[{type:b,tag:l,props:{href:"#d%C3%A9mos",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:qc}]},{type:a,value:e},{type:b,tag:L,props:{id:qd},children:[{type:b,tag:l,props:{href:"#interface-3d-sous-linux",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:qe}]},{type:a,value:e},{type:b,tag:eI,props:{width:eJ,height:eK,src:"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002FYx9FgLr9oTk",frameBorder:aW,allow:eL,allowFullScreen:T},children:[]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ensuite, imaginez la personne utilise avec un touch-screen (le desktop en 3D ne\nrequiert pas obligatoirement le touch-screen)."}]},{type:a,value:e},{type:b,tag:bg,props:{},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans l'exemple, la personne utilise Linux avec l'interface XGL\u002FCompiz par\ndessus de GNOME sous X-Windows... si ça vous intéresse, faites du googling :)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Dans la même veine, imaginez le desktop avec la considération d'un bureau\ntraditionnel et l'informatique."}]},{type:a,value:e},{type:b,tag:L,props:{id:qf},children:[{type:b,tag:l,props:{href:"#bumptop",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:qg}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Imaginez pouvoir classer les choses sur le «bureau» comme sur un «bureau\nphysique»."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:fq,props:{title:"Note laissée lors de révision faite en Août 2009"},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Sur le marché (en 2009), l’écran ne peux détecter qu’un seul point de pression à\nla fois. La possibilité de détecter plusieurs points de pression est connu comme\nétant «"},{type:b,tag:c,props:{lang:aU},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMulti-touch",rel:[C,G,H],target:A},children:[{type:a,value:"multi touch"}]}]},{type:a,value:"». Pour émuler le clic de\nsouris, il est proposé de conserver la «pression» sur la membrane de l'écran,\npour déplacer, de conserver la «pression» en déplaceant le «curseur»."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:ay,props:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2007\u002F01\u002Fbumptop-video-still.png",figcaption:"BumpTop 3D Desktop Prototype — Published on YouTube on Jun 21, 2006"},children:[{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:qn,rel:[C,G,H],target:A,title:"BumpTop 3D Desktop Prototype"},children:[{type:a,value:"Lien vers le vidéo"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"http:\u002F\u002Fwww.bumptop.com\u002F",rel:[C,G,H],target:A,title:"BUMPTOP a 3D Physics Desktop Experience"},children:[{type:a,value:"www.bumptop.com"}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Ma surprise a été lorsque j’ai entendu parler d’un nouveau type de moniteur\ntouch-screen évolué qui a la possibilité de considérer plus qu’un seul pointeur.\nImaginez les possibilités!"}]},{type:a,value:e},{type:b,tag:eI,props:{width:eJ,height:eK,src:qn,frameBorder:aW,allow:eL,allowFullScreen:T},children:[]},{type:a,value:e},{type:b,tag:L,props:{id:qh},children:[{type:b,tag:l,props:{href:"#ted-talks-jeff-han-2006-ideas-worth-sharing-multipoint-touch-interface",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:qi}]},{type:a,value:e},{type:b,tag:eI,props:{width:eJ,height:eK,src:"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002F5JcSu7h-I40",frameBorder:aW,allow:eL,allowFullScreen:T},children:[]},{type:a,value:e},{type:b,tag:bg,props:{lang:aU},children:[{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Jeff Han is a research scientist for NYU's Courant Institute of Mathematical\nSciences, and the inventor of a MINORITY REPORT STYLE \"interface-free\"\ntouch-driven computer screen"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:L,props:{id:qj},children:[{type:b,tag:l,props:{href:"#gnome-desktop",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:qk}]},{type:a,value:e},{type:b,tag:eI,props:{width:eJ,height:eK,src:"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002FyJB9Yum3S9M",frameBorder:aW,allow:eL,allowFullScreen:T},children:[]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"Le gestionnaire de bureau Linux appelé GNOME a une extension qu'on appelle\n"},{type:b,tag:u,props:{},children:[{type:a,value:"Compiz"}]},{type:a,value:" qui sert a ajouter des effets en 3D au bureau. ça donne des choses qui\nsont très jolies a regarder."}]},{type:a,value:e},{type:b,tag:an,props:{id:ql},children:[{type:b,tag:l,props:{href:"#le-futur",ariaHidden:J,tabIndex:M},children:[{type:b,tag:c,props:{className:[N,O]},children:[]}]},{type:a,value:qm}]},{type:a,value:e},{type:b,tag:h,props:{},children:[{type:a,value:"J'ai cherché un peu quelques liens. J'ai remarqué que Microsoft pousse beaucoup\nles concepts publicitaires très design (contrairement a avant) pour mousser sa\nvision du futur."}]},{type:a,value:e},{type:b,tag:x,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.microsoft.com\u002Fsurface\u002FPages\u002FExperience\u002FVideos.aspx",rel:[C,G,H],target:A},children:[{type:a,value:"Microsoft Surfaces"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=1VuQeR-N8nE",rel:[C,G,H],target:A},children:[{type:a,value:"Windows Home Concept"}]},{type:a,value:" (Personnellement, je ne la comprends pas celle là!)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=b3CvU8OTAmM&feature=related",rel:[C,G,H],target:A},children:[{type:a,value:"Banking: A Glimpse ahead"}]},{type:a,value:" (selon Microsoft)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:l,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=nq3EeZz-W3A&feature=related",rel:[C,G,H],target:A},children:[{type:a,value:"MS Office Labs 2019"}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2007\u002F01",path:"\u002Fblog\u002F2007\u002F01\u002Fle-futur-du-pc",extension:aw,slug:"le-futur-du-pc",createdAt:eH,updatedAt:eH,category:qa,prettyfiedTemporalDate:{prettified:"jeudi 25 janvier 2007",temporalDate:"2007-01-25"}}],taxonomyKey:as,taxonomy:{key:as,human:{key:as,text:"GNU\u002FLinux",description:"Essais écrits pour m’aider à mieux comprendre ou partager mon expérience avec\n"}}}],fetch:[],mutations:void 0}}("text","element","span","token","\n","punctuation"," ","p","li","variable","code","a","operator","string","pre","number","\n\t","keyword","strong","function","em","parameter","div","ul","nuxt-content-highlight","line-numbers","_blank",";","nofollow","=","builtin","class-name","noopener","noreferrer","\"","true",3,"h3",-1,"icon","icon-link",":",".","-","bash",true,"comment","key","]","assign-left","[","language-bash","atrule",")","\n    ","ol","single-quoted-string","tt","\u003E","\\","\n  ","echo",false,2,"}","(","root","h2",",","\n        ","{","\n      ","linux","directive","\n\n","publish",".md","h4","app-image","|","$PN","if","then","fi","nuxt-link","","fr-CA","tranche-de-vie","$DB_DEST_DBNAME","\n ","`","language-text","..","-z",", ","bin2hex","projects","instruction","-n","---","en","${TMPDIR}","0","$DB_SOURCE_DBNAME","boolean","\u003E\u003E","kbd","\u003C","lost-image","property","tutoriels","$ERROR_MSG","25","12","blockquote","language-yaml","1","2013-03-27","\"DONE\"","2008","250","en-CA","procedure","sudo","!","mkdir","important","attr-name","value","attr-value","Note","ERROR_MSG","nobr","-v","exit","install","#","abbr","Références","11","cd","-p","apt-get","cloud-computing","float:unset;","\n\n    ","     ","Procédure","function-name","for","td","26","2023-02-18T00:00:00.000Z","operations","docker","ssh",".\n","Fastly","local","techniques","securite","T","constant","\u002F","$DB_DEST_PASS","-f","language-sh","h5","ENV","w-1\u002F3","unchanged","Cloud-Init","\n     ","php","define","  ","double-quoted-string","Sources","array","${","environment","PWD","$DB_DEST_HOST","-u","-h","$mysql","in"," Feb ","-0500","S","\u003C\u003C",".   Feb ",".\n\nTop ","50","header","\".","server","...","class","IN","type","      ","salt-stack","prefix","line","\"\"","user","-y","cat"," salt","logiciel-libre","unix","vm.somehost.com","=\u003E","Script pour créer un compte utilisateur","h1","$DB_DEST_USER"," -p","2024-10-24T19:43:51.687Z","tr","enter","renoirb@web1.renoirboulanger.com","127.0",", enter","3","817","Visit page outside Confluence","webplatform","steps","Steps","screenshots","Screenshots"," or "," and ","cp","rb-notice-box","my-5","screen","$(","pwd","\n       ","\"localhost\"","listen","server_name","RUN","2024-10-24T19:43:51.726Z","A","CNAME","443","include","snippet","curl"," (","upstream"," grep ","q ","2024-10-24T19:43:51.724Z","https:\u002F\u002Fcloudinit.readthedocs.org\u002Fen\u002Flatest\u002F","Cloud-Init reference documentation pages","OpenStack Cloud-Init dialog","https:\u002F\u002Fwww.digitalocean.com\u002Fcommunity\u002Ftutorials\u002Fan-introduction-to-cloud-config-scripting","false","mysql","references","References"," apt","-G","projets","2024-10-24T19:43:51.719Z"," et ","2013-03-29","friend-machine","R","CRON","site officiel","2024-10-24T19:43:51.699Z",".sql","scp","$VER","$DB_DEST_USERNAME","$DB_DEST_USERHOST","\n\n      ","DB_EXIST","\\\"","\n            ","http:\u002F\u002Fftp.debian.org\u002Fdebian","http:\u002F\u002Fdebian-multimedia.org\u002F"," (anglais seulement)","Compilation de PHP 5.3","références","nc","^c","220","tail","66.46",".177.182","2","69.159","6","(...)","Considérations","dd","filename","2024-10-24T19:43:51.666Z","iframe",560,315,"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","open-source","https:\u002F\u002Fgithub.com\u002Fwebspecs\u002Fpublican","Publican","-s","id","del","info"," run ","-it","--rm","7002","language-nginx","overflow:hidden;clear:both;","thumbnails","gallery","flex","flex-row","flex-wrap","\u002Fblog\u002F2015\u002F05","0000","+","2024-10-24T19:43:51.725Z","frontend",4,"cmd.run","An introduction to cloud-config scripting","--image"," Ubuntu-14.04-Trusty ","--key_name","--flavor","nova","${pecl_memcached_ver}","app-alert-box","db","10.10","masterdb","language-php","2014.7","salt ","bind-address","New VM",", and ","\")","22","vulgarisation","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20110814135755\u002Fhttp:\u002F\u002Fdevlabmtl.org\u002F","foreach","as","$col","$elc","Ajouter un utilisateur FTP","\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur","\u002Fblog\u002F2010\u002F04","outils","img","mysqldump","OVERRIDEUSERCREATION","continuer"," version "," on ","date",".sql.tmp\n","'@'","$DB_DEST_USERPW","';\"",".sql.tmp\n  ","$1","$DB_SOURCE_USER","$DB_SOURCE_PASS"," fatal ","Ce billet est le "," d'une série d'articles décrivant la fabrication d'une Machine Virtuelle (VM) de développement pour une équipe de dévelopeurs.","J'ai séparé cette série en quatre volets.","Description du concept","http:\u002F\u002Flinux.justinhartman.com\u002FInstalling_a_Debian_Etch_base_system","\u002Fblog\u002F2009\u002F09"," ou "," web1.renoirboulanger.com ","EST","4.66","5","\u003C=","U","P","local ","F","Subject:","-02-25 "," from ",":01:14 web1 imapd","19532","host",".0.1","Note: Rappel le ","\u002Fvar\u002Flog\u002Fmaillog"," donne le output des login IMAP(imapd), POP\n(vm-pop3d) et SpamAssasin (spamd)",":02:16 ","20764","354","Faut entrer \"","\n  SMTP",":32:15 web1 spamd","http:\u002F\u002Femail.about.com\u002Fcs\u002Fstandards\u002Fa\u002Fsmtp.htm","2024-10-24T19:43:51.672Z","dt","2024-10-24T19:43:51.669Z","alternate","square",", par exemple:","2024-10-24T19:43:51.728Z","run-publican-inside-docker","gists","Gists","#steps"," vagrant ","su","state.highstate","tmux","\u002Fdata\"",":\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata ","\u002Fspec-data\"",":\u002Fopt\u002Fbikeshed\u002Fbikeshed\u002Fspec-data ",":7002 webspecs\u002Fpublican:wip\n","outside","It should look like the screenshot with caption \"","service","Starting a build process","\n           ","\"jdoe@example.org\"","80","location"," \u002F","$uri","shebang","#!\u002Fbin\u002Fbash","$RUNDIR","#screenshots","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-preview.png","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-deleted-spec-regeneration-question.png","Annotated screenshot, when changing a file a hook is called and regenerates the specification","Discourse","Docker","Varnish","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F11\u002Fdiscourse_migration_list_gravatar_images.png","Side by side comparison while working on migrating Discourse\nwith WICG\n","It is possible the code shown here no longer works.\nMaybe the code shown here uses parts of Discourse that no longer exists.\n","proposed-setup","Proposed setup","https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Ffull-site-cdn-acceleration-for-discourse\u002F21467\u002F1","@sam","http:\u002F\u002Fexample.org\u002F","discoursepolling.example.org","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F04\u002Fdiscuss-fastly-origins.png","Fastly service configuration, at Hosts tab","Configure -\u003E Hosts","language-dns-zone-file"," discoursepolling.example.org discourse.example.org"," ssl","webplatform.org","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fwebplatform-openstack-cluster-2014-10-06.png","get-openstack-instance-detail-using-salt","Get OpenStack instance detail using Salt","what-data-you-can-get","What data you can get","what-does-the-script-do","What does the script do?","Install","https:\u002F\u002Fgithub.com\u002Fsaltstack\u002Fsalt-contrib\u002Fblob\u002Fmaster\u002Fgrains\u002Fec2_info.py","security-groups","7c55","4dd3","a00000000000\n","app1","availability_zone","\n            vda\n        ","name","\n        None\n    ","http:\u002F\u002Fdocs.openstack.org\u002Fadmin-guide-cloud\u002Fcontent\u002Fsection_metadata-service.html","coord","inserted","Enable a CDN for your Discourse","setup-detail","Setup detail","https:\u002F\u002Fdocs.fastly.com\u002Fguides\u002Fssl\u002Fwhich-ssl-options-are-available","\u002Fblog\u002F2015\u002F05\u002Fmake-discourse-long-polling-work-behind-fastly\u002F","Make Discourse \"long polling\" work behind\nFastly","SSL between ","keepalive","frontends"," tld ","ssl","                 ","on","GNU","usermod","A common task while writing server configuration management manifests is to make sure that some enforcements are run in specific situations.","add-group-additional-membership-to-user","Add group additional membership to user","change-ownership-on-a-folder-only-if-its-not-what-we-expect","usermod -a -G amavis clamav","unless","\u002Fblog\u002F2015\u002F03","read-more","Read more","Easily automate The provisioning of your DigitalOcean Droplets ... using Cloud-Init","2013","#cloud-config","nova boot ","\n     --security-groups default ","\u002Fsrv\u002Fcloudconfig.yml","\u002Fetc\u002Fprofile.d\u002F","python-novaclient","build-from-pecl-source","Build from PECL source","make-a-deb-package","Make a .deb package","update-your-private-apt-repository-or-create-one","Update your private apt repository (or create one)","igbinary","apt","https:\u002F\u002Fgithub.com\u002Fjordansissel\u002Ffpm","fpm",".deb","https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F24407095\u002Ferror-when-installing-pecl-memcached\u002F28597188#answer-24892703"," \u002Ftmp\u002Fphp5-memcached\n","tar","dpkg ","grep","-c",6,"gzip","2024-10-24T19:43:51.723Z","Create a MariaDB cluster with replication over SSL with Salt Stack","changing-mariadb-replication-master","Changing MariaDB replication master","Procedure","assumptions","Assumptions","from-the-salt-master-initiate-a-few-vms-to-use-for-your-database-cluster","From the salt-master, initiate a few VMs to use for your database cluster","now-on-each-database-server","Now on each database server;","checking-if-it-worked","Checking if it worked","managing-users","Managing users","userdata.txt","While migrating this article...","get "," renoirb-production ","-a",". "," ACTIVE  "," Running     "," private-network","hosts_entries",").","source"," www","data\n    ","'pillar.get'","'roles:db'"," db2:\n","10.1",".2-MariaDB-1~trusty-wsrep-log\n"," db1-masterdb:\n","     ca-cert.pem\n","     ca-key.pem\n","     client-cert.pem\n","     client-key.pem\n","     client-req.pem\n","     server-cert.pem\n","     server-key.pem\n","     server-req.pem\n","server_id","section","section-name","selector","\nssl\n","ssl-cert","ssl-key","client"," says ","#references","http:\u002F\u002Fdev.mysql.com\u002Fdoc\u002Frefman\u002F5.7\u002Fen\u002Freplication-solutions-ssl.html","https:\u002F\u002Fmariadb.com\u002Fkb\u002Fen\u002Fmariadb\u002Fdocumentation\u002Fmanaging-mariadb\u002Freplication\u002Fstandard-replication\u002Fsetting-up-replication\u002F","2024-10-24T19:43:51.722Z","favourites","Limitations","Material","Hardware requirements","Distribution choice factors","To be continued...","sshfs","1 ","VM","2013-08-07","1. Grab the original machine's configuration","2. Render the production machine unavailable","3. Decomission the original, use the new VM as the new Production","Old VM"," that will replace the Old","\u002Fetc\u002Fhosts","Établissement du standard","L'espace de travail du projet","VirtualDocumentRoot","localhost","\u002Fhome\u002Frenoirb\u002Fworkspace\u002Fclient\u002Fprojectname","web\u002F","DocumentRoot","Stephan Champagne","2024-10-24T19:43:51.718Z","L'historique","0. La machine accessible pour les deux","1. Sur le poste de votre ami","2. Créer le tunnel sur la machine de votre ami","3. Vous connecter de VOTRE poste, à la machine commune,  à finalement le poste de votre ami.","Screen","Finalement","2024-10-24T19:43:51.707Z","web","http:\u002F\u002Fwordcampmontreal.org\u002F","https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F02\u002Fscript-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre\u002F","https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-i\u002F","http:\u002F\u002Ftechentreprise.com\u002FMontreal\u002Fusers\u002Frenoirb","http:\u002F\u002Ftwitter.com\u002FdevLABMtl","http:\u002F\u002Fwww.facebook.com\u002Fhome.php?sk=group_191829357497601","http:\u002F\u002Fwww.facebook.com\u002Fdevlabmtl","comment-devlab-a-commencé","Comment devLAB a commencé?","quelques-sujets-que-nous-avons-couverts","Quelques sujets que nous avons couverts","pourquoi-avons-nous-lancé-un-autre-événement-à-montréal","evocatio--lœuf-ou-la-poule","Evocatio : L'œuf ou la Poule?","la-direction-de-devlab","La direction de devLAB","cest-quand","C'est quand?","\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-i\u002F","\u002Fblog\u002F2010\u002F07\u002Finstaller-une-machine-virtuelle-linux-roulant-dans-vmware-fusion-sous-mac-os-x\u002F","2024-10-24T19:43:51.706Z","programmation","La situation","Pourquoi?!","Comment j'ai opéré","Utiliser le script","phpmyadmin","Aller dans ","\" et \"","$tables","$chars","'|â'","'|ç'","$table","$elements","$char","$update_line","2024-10-24T19:43:51.702Z","Ce que cette procédure fait...","Créer un nouveau compte","Ajouter ou modifier un utilisateur","Tester","Pour déboguer","Ressources","fail2ban","Remplacer","Redémarrer vsftpd\n","panel","border-width: 1px;","Source","http:\u002F\u002Fmy.afterdawn.com\u002Fketola\u002Fblog_entry.cfm\u002F1262\u002Fvsftpd_ssl_and_iptables","vsftpd SSL and iptables","codeContent","2024-10-24T19:43:51.700Z","Une question de choix et de distribution","size-full",205,"Anacron","le ","à-propos-du-projet","à propos du projet","les-prérequis","Les prérequis","ce-que-le-script-fait","Ce que le script fait","le-script","Le script",".sql.gz"," existe...","DROP","non: ","which",".conf\n","\"-- Generated by ","' IDENTIFIED BY '",".sql.purge.tmp\n\n  ","$mysql "," $DB_DEST_USER "," $DB_DEST_HOST -p","-Bse","sed","case","\" * Checking if needed vars are set ... \"","$SSH_SOURCE","$SSH_USER","$SSH_PORT","$DB_SOURCE_HOST","\"1\"","$OPTS_COMPRESSION_PROG","OPTS_COMPRESSION_PROG","\"gzip\"","DBS"," -u ","entity","for-or-select","$DBS","do","$db","done","$DB_EXIST",".sql.gz\"",".sql.gz\n      ","\"Finished!\"",".sql ","esac",".sql.tmp ","2009-09-03","Installation du système de base","\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-i","Je donne ici mon secret de magicien avec quelques configurations que je considère importantes pour un environement d'hébergement web pour améliorer la sécruité (le strict minimum pour cette série d'articles. Je pourrai en faire un plus poussé plus tard).","Comment installer Apache 2.x avec le dernier cutting-edge PHP.","deb ","Note:","http:\u002F\u002Flinuxhelp.blogspot.com\u002F2007\u002F05\u002Fusing-netselect-apt-tip-to-select.html","netselect-apt","Xen","Enter","http:\u002F\u002Fwww.vmware.com\u002Fproducts\u002Fserver\u002F","http:\u002F\u002Fhelpdeskgeek.com\u002Fvirtualization\u002Fcreating-a-virtual-machine-on-vmware-server\u002F","Creating a Virtual Machine on VMware server","jeudi 3 septembre 2009","Avant tout, quelques précautions","Conclusion","IBM developerworks"," \"","What's new in PHP 5.3 (","http:\u002F\u002Fwww.ibm.com\u002Fdeveloperworks\u002Fopensource\u002Flibrary\u002Fos-php-5.3new1\u002Findex.html","part 1","http:\u002F\u002Fwww.ibm.com\u002Fdeveloperworks\u002Fopensource\u002Flibrary\u002Fos-php-5.3new2\u002Findex.html?S_TACT=105AGX44&S_CMP=ART","part 2","http:\u002F\u002Fwww.ibm.com\u002Fdeveloperworks\u002Fopensource\u002Flibrary\u002Fos-php-5.3new3\u002Findex.html?S_TACT=105AGX44&S_CMP=ART","part 3","http:\u002F\u002Fwww.ibm.com\u002Fdeveloperworks\u002Fopensource\u002Flibrary\u002Fos-php-5.3new4\u002Findex.html?S_TACT=105AGX44&S_CMP=ART","part 4","\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-ii\u002F","Installation du système","Installation de l'environnement de développement avec Eclipse PDT","PostgreSQL","MySQL","http:\u002F\u002Fwww.brandonsavage.net\u002Finstalling-php-5-3-on-ubuntu\u002F","PHP 5.3 phpinfo()","\u002Fblog\u002F2009\u002F09\u002Fune-vm-linux-qui-sert-au-developpement-php-5-3-avec-eclipse-partie-iii","Mise en contexte","Concept","Versions de VMware","Suite","La Virtualisation c'est comme des roches en équilibre","background: #ececec; margin: 5px 0px; padding: 18px 8px 8px 50px; border: 1px solid #333;","color: #777; margin-bottom: 10px;","D'autres articles spécialisés Debian Linux","Installer et configurer","Autres ressources","2024-10-24T19:43:51.685Z","vérifier-si-le-firewall-bloque-certains-services","Vérifier si le Firewall bloque certains services","tester-le-serveur-courriel","Tester le serveur courriel","créer-un-compte-de-test","Créer un compte de test","test-envoi-local-vers-virtual_local-avec-exim","Test envoi local vers virtual_local avec exim","vérifier-le-log-denvoi-smtp","Vérifier le log d'envoi SMTP","tester-réception-imap","Tester réception IMAP","vérifier-le-log-impad","Vérifier le log impad","vérifier-pop-en-telnet","Vérifier POP en telnet","vérifier-le-log-pop3d","Vérifier le log pop3d","test-envoi-remote-vers-virtual_local-avec-telnet","Test envoi remote vers virtual_local avec telnet","test-envoi-local-vers-une-machine-remote-avec-exim","Test envoi local vers une machine remote avec exim","tester-mail-remote-vers-mailserver-pour-voir-le-bon-fonctionnement-de-spamassassin","Tester mail remote vers mailserver pour voir le bon fonctionnement de SpamAssassin","envoi-courriel-via-une-machine-remote-via-mail","Envoi courriel via une machine remote via mail","regarder-le-log-spamd","Regarder le log spamd","tester-spamassassin","Tester SpamAssassin","tester-les-relais-smtp","Tester les relais SMTP","statistiques","Statistiques","Vulgarisation","description-du-helo","Description du HELO","th","IMAP","143","21","110","1.1"," web1.renoirboulanger.com ESMTP Exim ",", \"","exim ","-odf","\nSubject: Test lundi am ","\nLOG: MAIN\n  "," renoirb@web1.renoirboulanger.com ","renoirb ","390","\"Test lundi am 5 local a virtuallocal\"","virtual_user ","virtual_localdelivery ","\nLOG: MAIN\n  Completed\n","Subject: LE SUJET","data","Voilà!",":02:16 1JSZkp-0001JH-8H ","test"," \u002Fvar\u002Flog\u002Fmaillog\n   Feb ","test@renoirboulanger.com ","web1 ","\n   Feb ","'^]'","Entrer ","494","'test@renoirboulanger.com'",".235.26, ","nmsgs","\n   ","\".\"","7","http:\u002F\u002Femail.about.com\u002Fcs\u002Fstandards\u002Fa\u002Fsmtp_error_code_2.htm","helo","4","72.14",".205.27","\n         ","joe@web1.renoirboulanger.com","2.1","56256","000801c87894","$66546900","$c07bcf52","@adminhotel",":32:19 web1 spamd","4.1","1602","#r%C3%A9f%C3%A9rences","2024-10-24T19:43:51.677Z","Les ports TCP sous Linux","Directives en résumé","VMWare Server","902","-\u003E","2024-10-24T19:43:51.673Z","logs","\u002Fblog\u002F2007\u002F09","stdout","https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2007\u002F05\u002Fmontage-de-dossiers-distants-via-sshfs\u002F","https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20070324014306\u002Fhttp:\u002F\u002Fubuntu.wordpress.com\u002F2005\u002F10\u002F28\u002Fhow-to-mount-a-remote-ssh-filesystem-using-sshfs\u002F","assomptions","Assomptions","considérations","prodécure","Prodécure","~","ALT","F2","\u002Fblog\u002F2007\u002F04\u002Flogin-ssh-sans-mot-de-passe","nav","-o","Préparer l'espace de travail","MODIFIER les fichiers de config","Créer les logfiles","Création des usagers","http:\u002F\u002Fwww.howtoforge.com\u002Fmysql_database_replication"," ","\u002Fblog\u002F2007\u002F04","2024-10-24T19:43:51.668Z","http:\u002F\u002Fwww.redhat.com\u002Fnetwork\u002F","http:\u002F\u002Fwww.trilug.org\u002Ftalks\u002F2005-10-raid\u002Fmd-lvm-presentation\u002Findex.html","http:\u002F\u002Fwww.sdmachelp.com\u002Flinuxraid.html","http:\u002F\u002Fwww.directadmin.com\u002Fforum\u002Fshowthread.php?t=8643","http:\u002F\u002Fwww.tldp.org\u002FHOWTO\u002FSoftware-RAID-HOWTO-5.html","2024-10-24T19:43:51.667Z","experiments","télécharger-ubuntu","Télécharger Ubuntu","booter-le-médium-dinstallation","Booter le médium d'installation","http:\u002F\u002Fwww.ubuntu.com\u002Fgetubuntu\u002Fdownload\u002F","2024-09-30","pam_unix_vm.so","actualites","démos","Démos","interface-3d-sous-linux","Interface 3D sous Linux","bumptop","Bumptop","ted-talks-jeff-han-2006-ideas-worth-sharing-multipoint-touch-interface","TED talks: Jeff Han (2006) Ideas Worth Sharing Multipoint Touch Interface","gnome-desktop","GNOME desktop","le-futur","Le futur","https:\u002F\u002Fwww.youtube.com\u002Fembed\u002FM0ODskdEPnQ")));