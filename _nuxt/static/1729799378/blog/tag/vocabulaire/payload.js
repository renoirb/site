__NUXT_JSONP__("/blog/tag/vocabulaire", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){return {data:[{},{},{contents:[{locale:x,title:"Les différentes versions du service de tâches planifié CRON",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fles-differentes-versions-du-service-de-taches-planifie-cron\u002F",status:y,revising:k,created:"2010-04-19",updated:z,tags:["linux","outils","techniques",A,q],categories:[B],excerpt:u,toc:[{depth:n,text:C},{depth:n,text:"Versions de CRON"}],body:{type:D,children:[{type:b,tag:f,props:{},children:[{type:b,tag:E,props:{className:[F,"wp-image-2104"],style:"float: right; border: 0px;",title:"Une horloge",src:"https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2010\u002F04\u002FClock-icon.png",alt:u,width:G,height:G},children:[]},{type:a,value:"Suite a mon article «"},{type:b,tag:r,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim\u002F"},children:[{type:a,value:"Comment automatiser une tâche avec "},{type:b,tag:i,props:{},children:[{type:a,value:s}]},{type:a,value:" en utilisant Vim"}]},{type:a,value:"» je me suis venu aux questions sur les différences essentielles entre les versions de "},{type:b,tag:i,props:{},children:[{type:a,value:s}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le concept de "},{type:b,tag:i,props:{},children:[{type:a,value:s}]},{type:a,value:" est, un «lanceur de commandes» planifié pour les systèmes UNIX. Le nom est inspiré du dieu grec Chronos."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ayant déjà utilise Gentoo Linux j'avait vu qu'il était possible d'utiliser plus d'une version de CRON mais je ne m'était jamais penché sur les différences. Je l'ai fait aujourd'hui."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:C}]},{type:a,value:"\nGénéralement chaque distribution de système d'exploitation UNIX (Linux, Unix, Qnx, etc) a son lot d'outils standards dont CRON fait partie. Chaque éditeur de distribution choisit sa version préférée mais permet d'interchanger (avec "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwiki.debian.org\u002FDebianAlternatives"},children:[{type:a,value:"Alternatives sous Debian"}]},{type:a,value:", par exemple).\n"},{type:b,tag:o,props:{},children:[{type:a,value:"Versions de "},{type:b,tag:i,props:{},children:[{type:a,value:s}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:I}]},{type:a,value:"\nLa différence d'"},{type:b,tag:i,props:{},children:[{type:a,value:I}]},{type:a,value:" avec "},{type:b,tag:i,props:{},children:[{type:a,value:"cron"}]},{type:a,value:" (traditionnel) est le fait qu'Anacron ne roule pas en permanence comme un démon en arrière plan. Il est idéal sur des système qui ne roule pas nécessairement 24 heures par jour ou avec peu de ressources processeur.\n"},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fanacron.sourceforge.net\u002F"},children:[{type:a,value:t}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"vixie-cron"}]},{type:a,value:"\nLa version de cron la plus utilisée (selon mon expérience, notamment sous les installation par défaut de Ubuntu, Debian et Red Hat et CentOS)\n"},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Ftroy.jdmz.net\u002Fcron\u002F"},children:[{type:a,value:t}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"bcron"}]},{type:a,value:"\nL'auteur a crée cette version car il avait besoin de précision concernant les délais entre les commandes et les changements de saisons (Heure d'été).\n"},{type:b,tag:f,props:{},children:[{type:a,value:"J'ai remarqué plusieurs autres outils intéressant que l'auteur a publié. Je l'ai ajouté a mes marque-pages."}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"fcron"}]},{type:a,value:"\nL'auteur a crée cette version de cron dans l'optique que la machine peut ne pas être allumée 24\u002F24 et 7 jours\u002F7. fcron se base plutôt sur le temps que le système fonctionne (le «uptime») plutot qu'un moment précis. L'auteur dit que fcron veut remplacer Vixie-cron et anacron mais en "},{type:b,tag:i,props:{},children:[{type:a,value:"mieux"}]},{type:a,value:".\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Le genre de tâche qu'on peut faire est:"}]},{type:a,value:c},{type:b,tag:p,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Lance une commande aux chaque 3heures que le système est allumé"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Lance une commande au moins une fois entre 3h00 am et 6h00 am tout les jours."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{href:"http:\u002F\u002Ffcron.free.fr\u002F"},children:[{type:a,value:t}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"incron"}]},{type:a,value:"\nincron est une fonctionnalité cron a l'application inotify qui est un système basé sur le système de fichiers plutôt que sur des plages de temps. Un cas d'utilisation serait, par exemple, de pouvoir lancer une commande lorsqu'un logrotate a été lancé ou si un fichier a été ajouté dans un dossier.\n"},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Flinux.die.net\u002Fman\u002F5\u002Fincron.conf"},children:[{type:a,value:"pages manuel"}]},{type:a,value:" - "},{type:b,tag:g,props:{href:"http:\u002F\u002Finotify.aiken.cz\u002F"},children:[{type:a,value:t}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Autres versions"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Avez-vous utilisé l'un d'eux dans vos projets?"}]}]},dir:J,path:"\u002Fblog\u002F2010\u002F04\u002Fles-differentes-versions-du-service-de-taches-planifie-cron",extension:K,slug:"les-differentes-versions-du-service-de-taches-planifie-cron",createdAt:v,updatedAt:v,category:B,prettyfiedTemporalDate:{prettified:"lundi 19 avril 2010",temporalDate:"2010-04-19"}},{locale:x,title:"Comment automatiser une tâche avec CRON en utilisant Vim",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim\u002F",status:y,revising:k,caption:k,migrateLinks:k,migrateImages:k,migrateCode:k,created:"2010-04-14",updated:z,tags:["logiciel-libre","tutoriels",A,q,"vulgarisation"],categories:[],excerpt:" ",toc:[{depth:n,text:L},{depth:n,text:M},{depth:n,text:N}],body:{type:D,children:[{type:b,tag:f,props:{},children:[{type:a,value:"[caption id=\"attachment_2079\" align=\"alignright\" width=\"270\" caption=\"Logo Vim, qui signifie vi-improved (amélioré)\"]"},{type:b,tag:E,props:{className:[F,"wp-image-2079"],title:"Logo Vim",src:"https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2010\u002F04\u002FVim_logo.png",alt:"Vi - Vi.... Improved (amélioré)",width:O,height:O},children:[]},{type:a,value:"[\u002Fcaption]"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Deux tâches vraiment essentielles qu'on fait en administrant une machine sous Linux sont très souvent de modifier\u002Fcréer un fichier et de planifier des tâches de maintenance."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Pour utiliser «"},{type:b,tag:i,props:{},children:[{type:a,value:"cron»"}]},{type:a,value:" il faut savoir utiliser «"},{type:b,tag:i,props:{},children:[{type:a,value:"vi»"}]},{type:a,value:", les commandes sont très souvent les mêmes. Je dois spécifier que j'ai basé mon tutoriel sur CRON fourni par Ubuntu Linux qui est (de mémoire) le même paquet que celui fourni dans "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.redhat.com\u002F"},children:[{type:a,value:"Red Hat Linux"}]},{type:a,value:", "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.debian.org\u002F"},children:[{type:a,value:"Debian Linux"}]},{type:a,value:" ou "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.ubuntu.com\u002F"},children:[{type:a,value:"Ubuntu Linux"}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le but de ce billet est en fait de vous montrer sommairement comment automatiser une tâche (une commande) avec cron."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je publierai plus tard un billet sur les différences entre les distributions de cron."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:L}]},{type:a,value:"\nVi est un éditeur de texte en ligne de commande qui permet de faire bien des macros, il peut sembler compliquer mais l'essentiel se résume ainsi.\n"},{type:b,tag:p,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"ESCAPE"}]},{type:a,value:" permet d'entrer une commande"}]},{type:a,value:c},{type:b,tag:w,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"i"}]},{type:a,value:" mode Insertion"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"r"}]},{type:a,value:" mode remplacer le caractère courrant"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"SHIFT+a"}]},{type:a,value:" insérer a partir de la fin de la ligne courrante"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":"}]},{type:a,value:" entrer une commande spéciale"}]},{type:a,value:c},{type:b,tag:w,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":wq"}]},{type:a,value:" sauvegarder le fichier et quitter l'éditeur"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":w"}]},{type:a,value:" sauvegarder le fichier courrant"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":10"}]},{type:a,value:" sauter a la 10e ligne du document"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\u002Ftext"}]},{type:a,value:" Chercher 'text' dans le document courrant"}]},{type:a,value:c},{type:b,tag:w,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"n"}]},{type:a,value:" Chercher le prochain mon cherché (par rapport a ce qui a été dit ci-haut)"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"dd"}]},{type:a,value:" supprimer la ligne courrante"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"5dd"}]},{type:a,value:" supprimer les 5 prochaines lignes"}]},{type:a,value:c}]},{type:a,value:P},{type:b,tag:g,props:{href:Q},children:[{type:a,value:R}]},{type:a,value:c},{type:b,tag:o,props:{},children:[{type:a,value:M}]},{type:a,value:"\nPour créer une tâche sur un système Linux il y a plusieurs méthodes possibles.\n"},{type:b,tag:"ol",props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:r,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim#crontab"},children:[{type:a,value:"Ajouter une ligne dans le «crontab», la table d'actions CRON"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:r,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim#crond"},children:[{type:a,value:"Ajouter fichier avec directives dans \u002Fetc\u002Fcron.d\u002F"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:r,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim#etccron"},children:[{type:a,value:"Ajouter une ligne dans un des dossiers \u002Fetc\u002Fcron.daily\u002F, \u002Fetc\u002Fcron.hourly\u002F, \u002Fetc\u002Fcron.monthly"}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{name:"crontab"},children:[]},{type:a,value:"1. Ajouter une ligne dans le «crontab», la table d'actions CRON"}]},{type:a,value:"\nC'est fait soit en utilisant la commande crontab, ou en éditant le fichier \u002Fetc\u002Fcrontab\n"},{type:b,tag:f,props:{},children:[{type:a,value:"crontab roule tout le temps en tant que root, et l'idéal serait d'utiliser un fichier dans \u002Fetc\u002Fcron.d\u002F\nSavoir sur quel usager doit rouler la tâche (un user local qui peut rouler la commande, idéalement pas root!)"}]},{type:a,value:c},{type:b,tag:p,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:l,props:{lang:m},children:[{type:a,value:"someuser@ubuntu:~$ crontab -e"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"l'éditeur vi va s'ouvrir"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"aller a l'endroit ou vous voulez éditer"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"créez une nouvelle ligne en Insert mode, en utilisant le i, ou a la fin de la ligne courrante en faisant CTRL+a"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Entrer une ligne dans le format"},{type:b,tag:l,props:{lang:m},children:[{type:a,value:"* * * * * commande a être exécutée\n- - - - -\n| | | | |\n| | | | +----- jour de la semaine (0 - 6) (Dimanche=0)\n| | | +------- mois (1 - 12)\n| | +--------- jour dans le mois (1 - 31)\n| +----------- heure (0 - 23)\n+------------- min (0 - 59)"}]},{type:a,value:"\nexemple:\n"},{type:b,tag:l,props:{lang:m},children:[{type:a,value:"30 18 * * * rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F*  \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"... qui effacera le contenu de "},{type:b,tag:S,props:{},children:[{type:a,value:"\u002Fhome\u002Fsomeuser\u002Ftmp\u002F"}]},{type:a,value:" a tout les 18h30 de tout les jours et qui log dans "},{type:b,tag:S,props:{},children:[{type:a,value:"\u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Pour quitter faites ESCAPE  :wq     pour write quit."}]},{type:a,value:c}]},{type:a,value:P},{type:b,tag:g,props:{href:T},children:[{type:a,value:U}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{name:"crond"},children:[]},{type:a,value:"2. Ajouter fichier avec directives dans \u002Fetc\u002Fcron.d\u002F"}]},{type:a,value:"\nC'est le même principe sauf qu'il s'agit d'un fichier nommé, généralement sous le même nom que le package Linux qu'il dessert. Exemple php5 aurait son package.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Sauf qu'on peut spécifier qui lancera la commande."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Comment faire..."}]},{type:a,value:c},{type:b,tag:p,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer un fichier, ex:\n# vi \u002Fetc\u002Fcron.d\u002Fphp5"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Coller la commande qui a été testée au par avant\n"},{type:b,tag:l,props:{lang:m},children:[{type:a,value:"someuser@ubuntu:~$ rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F* \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter une ligne, ESCAPE+i"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Commencer par le moment de l'exécution comme avec «Ajouter une ligne dans le crontab»"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:l,props:{lang:m},children:[{type:a,value:"30 19  *  *  *"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter le nom du username qui va rouler la commande"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"ex: someuser"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter la commande testée tout a l'heure\nex: rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F* \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ce qui donnera:"},{type:b,tag:"br",props:{},children:[]},{type:a,value:c},{type:b,tag:l,props:{lang:m},children:[{type:a,value:"30 19 * * * someuser rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F* \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Voilà!"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:g,props:{name:"etccron"},children:[]},{type:a,value:"3. Ajouter une ligne dans un des dossiers \u002Fetc\u002Fcron.daily\u002F, \u002Fetc\u002Fcron.hourly\u002F, \u002Fetc\u002Fcron.monthly"}]},{type:a,value:"\nMême concept que le crontab sauf que l'on a pas a mentionner quand exécuter, c'est \u002Fetc\u002Fcrontab  qui dit qand les fichiers sont exécuté\n"},{type:b,tag:o,props:{},children:[{type:a,value:N}]},{type:a,value:c},{type:b,tag:p,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:T},children:[{type:a,value:U}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:Q},children:[{type:a,value:R}]}]},{type:a,value:c}]}]},dir:J,path:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim",extension:K,slug:"comment-automatiser-une-tache-avec-cron-en-utilisant-vim",createdAt:"2024-10-24T19:43:51.698Z",updatedAt:v,category:u,prettyfiedTemporalDate:{prettified:"mercredi 14 avril 2010",temporalDate:"2010-04-14"}}],taxonomyKey:q,taxonomy:{key:q}}],fetch:[],mutations:void 0}}("text","element","\n","\n\t","li","p","a","strong","em","h4",true,"pre","bash",3,"h3","ul","vocabulaire","nuxt-link","CRON","site officiel","","2024-10-24T19:43:51.699Z","blockquote","fr-CA","publish","2013-03-27","unix","tranche-de-vie","Une question de choix et de distribution","root","img","size-full",205,".","Anacron","\u002Fblog\u002F2010\u002F04",".md","Utiliser vi (prérequis)","Créer une tâche CRON","Sources",270,"\nsource: ","http:\u002F\u002Fmatrix.samizdat.net\u002Fpratique\u002Fdocumentation\u002Fguide-survie-VI.html","Guide de survie VI","tt","http:\u002F\u002Fadminschoice.com\u002Fcrontab-quick-reference","Crontab Quick reference")));