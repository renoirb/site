__NUXT_JSONP__("/blog/2005/12/detection-langue", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al){return {data:[{},{},{},{canonical:P,content:{title:"Detection de langue en PHP",locale:G,created:"2005-12-22T00:00:00.000Z",updated:"2024-08-08T00:00:00.000Z",canonical:P,status:"publish",revising:false,categories:[Q],tags:["i18n","php"],excerpt:R,preamble:{text:S},toc:[],body:{type:H,children:[{type:b,tag:u,props:{},children:[{type:a,value:"Lorsqu’on travaille sur un site qui doit avoir plusieurs langues... il m’arrive\nsouvent de devoir détecter la langue du visiteur."}]},{type:a,value:h},{type:b,tag:u,props:{},children:[{type:a,value:"Ce bout de code permet de détecter la langue selon les données fournies dans\n"},{type:b,tag:T,props:{},children:[{type:a,value:"HTTP_ACCEPT_LANGUAGE"}]},{type:a,value:f},{type:b,tag:U,props:{},children:[{type:a,value:"et"}]},{type:a,value:h},{type:b,tag:T,props:{},children:[{type:a,value:"HTTP_USER_AGENT"}]},{type:a,value:". Il faut comprendre que ce n’est pas une\nsolution absolue, mais un bout de code qui peut s'avérer utile!"}]},{type:a,value:h},{type:a,value:h},{type:b,tag:u,props:{},children:[{type:a,value:"Toujours utile pour configurer la langue. Ce bout de code permet de savoir la\npréférence du language du visiteur... il est utile lorsqu'on place ensuite des\nimages ou des bouts de texte avec des conditions. Voici le code..."}]},{type:a,value:h},{type:a,value:h},{type:a,value:h},{type:b,tag:V,props:{className:[W]},children:[{type:b,tag:X,props:{className:[Y,Z]},children:[{type:b,tag:A,props:{},children:[{type:a,value:f},{type:b,tag:c,props:{className:[d,I,B]},children:[{type:a,value:"\u002F**\n  * Les langCodes disponibles\n  **\u002F"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:"'fr'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,B]},children:[{type:a,value:"# AUSSI LA LANGUE PAR DEFAUT"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:_}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:"'en'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,I,B]},children:[{type:a,value:"\u002F**\n  * Avoir la liste des details HTTP_USER_AGENT et HTTP_ACCEPT_LANGUAGE dans $ua\n  **\u002F"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:J}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:"'HTTP_USER_AGENT'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:J}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:"'HTTP_ACCEPT_LANGUAGE'"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:ad}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,I,B]},children:[{type:a,value:"\u002F**\n  * Avoir la liste des traductions possibles... puis setter la langue\n  **\u002F"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:J}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"if"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:"in_array"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,r]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:O}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k,ah]},children:[{type:a,value:ai},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:O}]}]},{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"else"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,C]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,k,q]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:z},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:b,tag:u,props:{},children:[{type:a,value:"Ensuite, on appelle la reponse avec\n"},{type:b,tag:A,props:{},children:[{type:a,value:"$GLOBALS['langue']"}]},{type:a,value:" (a l'intérieur d'une fonction), ou encore "},{type:b,tag:A,props:{},children:[{type:a,value:F}]},{type:a,value:"...\nvous pouvez utiliser évidemment la structure de noms que vous voulez. Un exemple\nintéressant d'usage pourrait etre lorsqu'on veut charger une image en fonction\nde la langue actuelle... on pourrait le faire ainsi:"}]},{type:a,value:h},{type:b,tag:V,props:{className:[W]},children:[{type:b,tag:X,props:{className:[Y,Z]},children:[{type:b,tag:A,props:{},children:[{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"return"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,k,ah]},children:[{type:a,value:"\"\u003Cimg src=\\\"\u002Fpath\u002Fto\u002Fimage\u002F?="},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:y}]}]},{type:a,value:"\u002Fdesign_slice_12.jpg\\\" alt=\\\"Welcome\\\" border=\\\"0\\\" \u002F\u003E\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:s}]},{type:a,value:h}]}]}]},{type:a,value:h},{type:a,value:h},{type:b,tag:u,props:{},children:[{type:a,value:"Voici "},{type:b,tag:"a",props:{href:"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F88a6065f7dffeea77333",rel:["nofollow","noopener","noreferrer"],target:"_blank",title:"Détection de langue en utilisant les entêtes HTTP Accept-Language"},children:[{type:a,value:"une version mise a jour en 2015"}]}]},{type:a,value:h},{type:b,tag:"script",props:{src:"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F88a6065f7dffeea77333.js"},children:[]}]},text:"---\ntitle: Detection de langue en PHP\nlocale: fr-CA\ncreated: 2005-12-22\nupdated: 2024-08-08\ncanonical: https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2005\u002F12\u002Fdetection-langue\u002F\nstatus: publish\nrevising: false\ncategories:\n  - techniques\ntags:\n  - i18n\n  - php\nexcerpt: ''\npreamble:\n  text: |\n    D’autant plus que j’ai écrit ça bien avant de réaliser comment c’est très\n    risqué et contribue aux erreurs en temps d’exécution que de tout placer dans\n    le «\u003Cem lang=\"en\"\u003Eglobal scope\u003C\u002Fem\u003E».\n---\n\nLorsqu’on travaille sur un site qui doit avoir plusieurs langues... il m’arrive\nsouvent de devoir détecter la langue du visiteur.\n\nCe bout de code permet de détecter la langue selon les données fournies dans\n\u003Cstrong\u003EHTTP_ACCEPT_LANGUAGE\u003C\u002Fstrong\u003E \u003Cem\u003Eet\u003C\u002Fem\u003E\n\u003Cstrong\u003EHTTP_USER_AGENT\u003C\u002Fstrong\u003E. Il faut comprendre que ce n’est pas une\nsolution absolue, mais un bout de code qui peut s'avérer utile!\n\n\u003C!--more--\u003E\n\nToujours utile pour configurer la langue. Ce bout de code permet de savoir la\npréférence du language du visiteur... il est utile lorsqu'on place ensuite des\nimages ou des bouts de texte avec des conditions. Voici le code...\n\n\u003C!--#TODO-inline-edit--\u003E\n\u003C!-- BCP and ISO locale convention? --\u003E\n\n```php\n \u002F**\n  * Les langCodes disponibles\n  **\u002F\n  $langCodes[] = 'fr'; # AUSSI LA LANGUE PAR DEFAUT\n  $langCodes[] = 'en';\n\n \u002F**\n  * Avoir la liste des details HTTP_USER_AGENT et HTTP_ACCEPT_LANGUAGE dans $ua\n  **\u002F\n  foreach(explode(';',$_SERVER['HTTP_USER_AGENT']) as $agent_details) {\n    $ua[] = substr(trim($agent_details), 0, 2);\n  }\n  foreach(explode(';',$_SERVER['HTTP_ACCEPT_LANGUAGE']) as $agent_details) {\n    $ua[] = substr(trim($agent_details), 0, 2);\n  }\n\n \u002F**\n  * Avoir la liste des traductions possibles... puis setter la langue\n  **\u002F\n  foreach($GLOBALS['langCodes'] as $trx) {\n    if(in_array(substr($trx, 0, 2), $ua)) {\n      $langue = \"$trx\";\n    } else {\n      $langue = $GLOBALS['langCodes'][0];\n    }\n  }\n```\n\nEnsuite, on appelle la reponse avec\n`$GLOBALS['langue']` (a l'intérieur d'une fonction), ou encore `$langue`...\nvous pouvez utiliser évidemment la structure de noms que vous voulez. Un exemple\nintéressant d'usage pourrait etre lorsqu'on veut charger une image en fonction\nde la langue actuelle... on pourrait le faire ainsi:\n\n```php\n return \"\u003Cimg src=\\\"\u002Fpath\u002Fto\u002Fimage\u002F?={$langue}\u002Fdesign_slice_12.jpg\\\" alt=\\\"Welcome\\\" border=\\\"0\\\" \u002F\u003E\";\n```\n\n\u003C!--#TODO-Display-Or-Migrate-Gists--\u003E\n\nVoici [une version mise a jour en 2015][wphttpsupportedlanguagechooser]\n\u003Cscript src=\"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F88a6065f7dffeea77333.js\"\u003E\u003C\u002Fscript\u003E\n\n\n[wphttpsupportedlanguagechooser]:\n  https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F88a6065f7dffeea77333\n  'Détection de langue en utilisant les entêtes HTTP Accept-Language'\n",dir:"\u002Fblog\u002F2005\u002F12",path:"\u002Fblog\u002F2005\u002F12\u002Fdetection-langue",extension:".md",slug:ak,createdAt:al,updatedAt:al,category:Q},coverImage:{toc:[],body:{type:H,children:[]},text:R},month:"12",next:{locale:G,title:"Installation RHEL4 sur un Dell PowerEdge 860",path:"\u002Fblog\u002F2007\u002F04\u002Finstallation-rhel4-sur-un-dell-poweredge-860",slug:"installation-rhel4-sur-un-dell-poweredge-860"},preamble:{toc:[],body:{type:H,children:[{type:b,tag:u,props:{},children:[{type:a,value:"D’autant plus que j’ai écrit ça bien avant de réaliser comment c’est très\nrisqué et contribue aux erreurs en temps d’exécution que de tout placer dans\nle «"},{type:b,tag:U,props:{lang:"en"},children:[{type:a,value:"global scope"}]},{type:a,value:"»."}]}]},text:S},prettyfiedTemporalDate:{prettified:"jeudi 22 décembre 2005",temporalDate:"2005-12-22"},prev:{title:"Journée blanche d’inquiétudes",locale:G,path:"\u002Fblog\u002F2005\u002F09\u002Fjournee-blanche-d-inquietudes",slug:"journee-blanche-d-inquietudes"},slug:ak,year:"2005"}],fetch:[],mutations:void 0}}("text","element","span","token","punctuation"," ","variable","\n","(",")","string","[","]","keyword",",","\n  ","single-quoted-string","function",";","number","p","operator","=","{","}","\n    ","code","comment","global","$agent_details","0","$langue","fr-CA","root","doc-comment","foreach","as","$ua","substr","2","$trx","https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2005\u002F12\u002Fdetection-langue\u002F","techniques","","D’autant plus que j’ai écrit ça bien avant de réaliser comment c’est très\nrisqué et contribue aux erreurs en temps d’exécution que de tout placer dans\nle «\u003Cem lang=\"en\"\u003Eglobal scope\u003C\u002Fem\u003E».\n","strong","em","div","nuxt-content-highlight","pre","language-php","line-numbers","$langCodes","\n\n ","explode","';'","$_SERVER","trim","$GLOBALS","'langCodes'","\n      ","double-quoted-string","\"","interpolation","detection-langue","2024-10-24T19:43:51.664Z")));