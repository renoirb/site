__NUXT_JSONP__("/code-review/mocking-the-dom-during-tests", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return {data:[{title:"Code-review",contentFirstDirName:"code-review"},{content:{title:"Mocking the DOM during tests",locale:"en-CA",created:s,updated:s,status:"publish",revising:false,tags:["ecmascript","javascript","testing"],toc:[],body:{type:"root",children:[{type:b,tag:i,props:{},children:[{type:a,value:"In tests, please, "},{type:b,tag:k,props:{},children:[{type:a,value:"__mocks__"}]},{type:a,value:" the DOM, please!"}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"Either\n"},{type:b,tag:l,props:{href:"https:\u002F\u002Fjestjs.io\u002Fdocs\u002Fen\u002Fmanual-mocks#mocking-methods-which-are-not-implemented-in-jsdom",rel:[m,n,o],target:p},children:[{type:a,value:"mock things that doesn't exist"}]},{type:a,value:".\nWhich should make more sense, because "},{type:b,tag:k,props:{},children:[{type:a,value:"_urq"}]},{type:a,value:" is window spoiled by userReport\nscript. We "},{type:b,tag:l,props:{href:t,rel:[m,n,o],target:p},children:[{type:a,value:"could mock in "},{type:b,tag:u,props:{},children:[{type:a,value:"manual mock"}]}]},{type:a,value:" the UserReport provider.\nThat thing should be tested already."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"But talking about that, what if the script is blocking and or broken, would it\nbreak our stuff too."}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"How about we provide our own tracking method, that then passes it (because we\ncan listen to those events) and delegate them internally to that external\ntracker."}]},{type:a,value:f},{type:b,tag:"div",props:{className:["nuxt-content-highlight"]},children:[{type:b,tag:"pre",props:{className:["language-typescript","line-numbers"]},children:[{type:b,tag:k,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\u002F\u002F file __mocks__\u002Fdom.ts"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"import"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"{"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"}"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"from"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,"string"]},children:[{type:a,value:"'jsdom'"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"const"}]},{type:a,value:" dom "},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"new"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,"class-name"]},children:[{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:x}]}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:"("}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:")"}]},{type:a,value:"\nglobal"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"document "},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:r}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"window"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"document\nglobal"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"window "},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:r}]},{type:a,value:y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:h}]},{type:a,value:"window\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"\u002F\u002F So that calling document, or window during tests will use that instance of JSDOM"}]},{type:a,value:f}]}]}]},{type:a,value:f},{type:b,tag:i,props:{},children:[{type:a,value:"See "},{type:b,tag:l,props:{href:t,rel:[m,n,o],target:p},children:[{type:a,value:"how to mock the DOM"}]},{type:a,value:" with Jest "},{type:b,tag:u,props:{},children:[{type:a,value:"manual mocks"}]},{type:a,value:h}]}]},dir:"\u002Fcode-review",path:"\u002Fcode-review\u002Fmocking-the-dom-during-tests",extension:".md",slug:"mocking-the-dom-during-tests",createdAt:z,updatedAt:z,categories:[],category:""}}],fetch:[],mutations:void 0}}("text","element","span","token","punctuation","\n"," ",".","p","keyword","code","a","nofollow","noopener","noreferrer","_blank","operator","=","2021-01-27T00:00:00.000Z","https:\u002F\u002Fstackoverflow.com\u002Fa\u002F50629802","em","comment","constant","JSDOM"," dom","2024-10-24T19:43:51.732Z")));