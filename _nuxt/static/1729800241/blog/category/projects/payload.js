__NUXT_JSONP__("/blog/category/projects", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ,f_,f$,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs,gt,gu,gv,gw,gx,gy,gz,gA,gB,gC,gD,gE,gF,gG,gH,gI,gJ,gK,gL,gM,gN,gO,gP,gQ,gR,gS,gT,gU,gV,gW,gX,gY,gZ,g_,g$,ha,hb,hc,hd,he,hf,hg,hh,hi,hj,hk,hl,hm,hn,ho,hp,hq,hr,hs,ht,hu,hv,hw,hx,hy,hz,hA,hB,hC,hD,hE,hF,hG,hH,hI,hJ,hK,hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU,hV,hW,hX,hY,hZ,h_,h$,ia,ib,ic,id,ie,if0,ig,ih,ii,ij,ik,il,im,in0,io,ip,iq,ir,is,it,iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH,iI,iJ,iK,iL,iM,iN,iO,iP,iQ,iR,iS,iT,iU,iV,iW,iX,iY,iZ,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx,jy,jz,jA,jB,jC,jD,jE,jF,jG,jH,jI,jJ,jK,jL,jM,jN,jO,jP,jQ,jR,jS,jT,jU,jV,jW,jX,jY,jZ,j_,j$,ka,kb,kc,kd,ke,kf,kg,kh,ki,kj,kk,kl,km,kn,ko,kp,kq,kr,ks,kt,ku,kv,kw,kx,ky,kz,kA,kB,kC,kD,kE,kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,kY,kZ,k_,k$,la,lb,lc,ld,le,lf,lg,lh,li,lj,lk,ll,lm,ln,lo,lp,lq,lr,ls,lt,lu,lv,lw,lx,ly,lz,lA,lB,lC,lD,lE,lF,lG,lH,lI,lJ,lK,lL,lM,lN,lO,lP,lQ,lR,lS,lT,lU,lV,lW,lX,lY,lZ,l_,l$,ma,mb,mc,md,me,mf,mg,mh,mi,mj,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,mA,mB,mC,mD,mE,mF,mG,mH,mI,mJ,mK,mL,mM,mN,mO,mP,mQ,mR,mS,mT,mU,mV,mW,mX,mY,mZ,m_,m$,na,nb,nc,nd,ne,nf,ng,nh,ni,nj,nk,nl,nm,nn,no,np,nq,nr,ns,nt){return {data:[{},{},{contents:[{title:"Managing Email Aliases with ProtonMail and SimpleLogin to sort automatically into inbox folders based local part",locale:aV,created:fQ,updated:fQ,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2024\u002F03\u002Fmanaging-email-aliases-with-protonmail-and-simplelogin-to-sort-automatically-into-inbox-folders-based-local-part\u002F",status:aG,revising:am,categories:[ak],tags:[fR,fS],keywords:["ProtonPass","SimpleLogin","inbox","Sieve mail filtering language rule"],description:"Protect inbox against spam and phishing and sort automatically",excerpt:"Streamline your email management with automatic sorting for messages received through aliases. Learn how to efficiently organize your inbox for your Email aliases without manual intervention.",toc:[],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"I’ve been using ProtonMail for my email needs for quite some time now. Recently,\nI stumbled upon an intriguing feature: the ability to use our own domain names\nfor email aliases, not just those provided by SimpleLogin and Proton. This\ndiscovery prompted me to make the switch, and I haven’t looked back since."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"At first I liked the idea of email aliases but would not consider using anything\nand have recovery lost over time because I didn’t own the domain name. Don’t get\nme wrong, SimpleLogin aliases are great and their best use-case is for privacy,\nto hide your real email. An account alias is a bit different."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Basically, instead of having an email address we pass everywhere. Create an\nemail address specifically for each service, newsletter, product. You can keep\nyour mail address, but the lesser it’s known, the less it’ll receive."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Let’s backtrack a bit. Over the years, we’ve witnessed numerous breaches of\nsecurity. Maybe you’re receiving many emails, some trying to pass as a service\nprovider you’ve used, or another person."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For me, I receive a lot. Probably because I’ve used the same address for almost\n2 decades already. With 2023’s LastPass breach who had all their vaults backups\ncopied by attackers, it was a wake up call for me to review my accounts."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In any case, if you’ve had an email address for more than a decade, chances are\nit’s already on multiple lists floating around the Internet. One effective\nstrategy to combat identity theft is to adopt strong passwords managed by a\nreliable password manager. However, when it comes to safeguarding against\nidentity theft and unsolicited emails (spam), what else can we do?"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Enter the concept of email aliases. By having a different email address for\nevery service or provider we interact with, we can effectively manage our online\npresence and minimize the risk of spam. With services like ProtonMail and\nSimpleLogin, creating aliases is quick and easy. This way, if a service or alias\nstarts receiving spam, we can simply disable it and generate a new one."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"As part of my alias strategy, I’ve adopted the Proton Pass format, which allows\nfor a random component alongside a designated name for the purpose. For example,\n"},{type:b,tag:j,props:{},children:[{type:a,value:"\u003Cservice\u003E.\u003Csomething random\u003E@alias.example.org"}]},{type:a,value:". To streamline the organization\nof these aliases, I’ve developed a Sieve script that automatically sorts\nincoming emails into appropriate folders."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[av,z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"require \"comparator-i;ascii-numeric\";\nrequire \"envelope\";\nrequire \"environment\";\nrequire \"fileinto\";\nrequire \"include\";\nrequire \"regex\";\nrequire \"relational\";\nrequire \"spamtest\";\nrequire \"variables\";\nrequire \"variables\";\n\n# BEGIN Copy-Pasta: This is recommended to be included in any custom sieve within Proton\n# Generated: Do not run this script on spam messages\nif allof (environment :matches \"vnd.proton.spam-threshold\" \"*\", spamtest :value \"ge\" :comparator \"i;ascii-numeric\" \"${1}\") {\n    return;\n}\n# END Copy-Pasta\n\n# BEGIN: Pigeon Hole\nif address :matches :domain [\"to\", \"cc\", \"bcc\"] \"alias.example.org\" {\n  if address :matches :localpart \"to\" \"*.*\" {\n    set \"local_part\" \"${1}\";\n    set :lower \"local_part\" \"${local_part}\";\n    set \"pigeon_hole\" \"${local_part}\";\n    # Create the mailbox if it doesn't exist and file the email into it\n    # Make sure Boxes folder exists\n    fileinto \"Boxes\";\n    fileinto \"Boxes\u002F${pigeon_hole}\";\n    # Proton ^^ doesn’t support `fileinto :create \"Foo\u002FBar\"`, instead give a parent, and tentatively try in pigeonhole\n  }\n}\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This Sieve script effectively sorts incoming emails based on their alias\npattern. Emails with aliases like "},{type:b,tag:j,props:{},children:[{type:a,value:"amazon.aws111@alias.example.org"}]},{type:a,value:" or\n"},{type:b,tag:j,props:{},children:[{type:a,value:"amazon.audible222@alias.example.org"}]},{type:a,value:" are grouped under the \"Box\u002Famazon\"\ndirectory, while emails like "},{type:b,tag:j,props:{},children:[{type:a,value:"ebay.333@alias.example.org"}]},{type:a,value:" are filed directly\ninto the \"Box\" directory."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"By automating this organization process, I can maintain a clutter-free inbox and\nensure that important emails are readily accessible."}]}]},dir:"\u002Fblog\u002F2024\u002F03",path:"\u002Fblog\u002F2024\u002F03\u002Fmanaging-email-aliases-with-protonmail-automatic-sorting",extension:aH,slug:"managing-email-aliases-with-protonmail-automatic-sorting",createdAt:cO,updatedAt:cO,category:ak,prettyfiedTemporalDate:{prettified:"Sunday, March 3, 2024",temporalDate:"2024-03-03"}},{title:"Porting all my content into a static-site",locale:aV,created:fT,updated:fT,status:aG,revising:am,categories:[ak],tags:["vuejs","nuxt",fR],toc:[{id:fU,depth:ae,text:fV},{id:fW,depth:ac,text:fX}],body:{type:aB,children:[{type:b,tag:fY,props:{variant:fZ,className:[f_]},children:[{type:a,value:Z},{type:b,tag:Q,props:{slot:a$},children:[{type:a,value:"Actually..."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I started working on it a little bit before\n"},{type:b,tag:aI,props:{title:"Shortened from Coronavirus disease 2019"},children:[{type:a,value:"COVID-19"}]},{type:a,value:"\npandemic and only would work on it 4 years later, around the end of my Full-Time Parenting period."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"It’s been more than ten years that I haven't touched my site and I want to\nmake-use of my skills working with Vue.js and modern Front End of the last years\nback to my own profit."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"So this is going to be a complete port of all my previous content, talk slides,\nexperiments, posts, Twitter feed, examples, code bits all in a static site."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"It's still work in progress, at the moment "},{type:b,tag:j,props:{},children:[{type:a,value:"https:\u002F\u002Frenoirb.github.io\u002Fsite\u002F"}]},{type:a,value:" is\nthe live version of my site that'll replace what’s at\n"},{type:b,tag:j,props:{},children:[{type:a,value:"https:\u002F\u002Frenoirboulanger.com"}]},{type:a,value:" running with WordPress."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I should piggy-back using my own public packages such as my "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Fexperiments-201908-rush-typescript-just-bili-monorepo",rel:[q,r,s],target:t,title:"TypeScript monorepo using Rush.js, with a few packages, some depending on each other, and tests"},children:[{type:a,value:"Monorepo related\ncontent"}]},{type:a,value:aK},{type:b,tag:m,props:{href:"https:\u002F\u002Fgitlab.com\u002Frenoirb\u002Frenoirb-particles\u002F",rel:[q,r,s],target:t,title:"Renoir’s particles"},children:[{type:a,value:"my \""},{type:b,tag:B,props:{},children:[{type:a,value:"Particles"}]},{type:a,value:"\" monorepo\nproject"}]},{type:a,value:", along with archiving my thousands of web browser\ntabs by leveraging my "},{type:b,tag:m,props:{href:"http:\u002F\u002Fwww.archivator.site\u002F",rel:[q,r,s],target:t,title:"Archivator project"},children:[{type:a,value:dS}]},{type:a,value:cP},{type:b,tag:m,props:{href:f$,rel:[q,r,s],target:t},children:[{type:b,tag:B,props:{},children:[{type:a,value:"archivator"}]},{type:a,value:" package on\nNPM"}]},{type:a,value:ga}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This is just something I've jotted down quickly so that It explains what's this\nfor."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Keep in touch!"}]},{type:a,value:e},{type:b,tag:al,props:{id:fU},children:[{type:b,tag:m,props:{href:"#features",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:fV}]},{type:a,value:e},{type:b,tag:af,props:{id:fW},children:[{type:b,tag:m,props:{href:"#code-blocks",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:fX}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"At last, a way to display code that I'm happy with, it'll look like this"}]},{type:a,value:e},{type:b,tag:"code-group",props:{},children:[{type:a,value:Z},{type:b,tag:dT,props:{label:gb,active:gc},children:[{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[gd,z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:ge},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:cQ}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:gb}]}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,gf]},children:[{type:b,tag:c,props:{className:[d,gg,aL]},children:[{type:a,value:gh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,gi,n]},children:[{type:a,value:gj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,gk,p]},children:[{type:a,value:gl}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:gm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:"application\u002Fjson; charset=utf-8"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:gn}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:go}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:cQ}]}]},{type:a,value:"\n\n{\n  \"body\": \"Hello!\"\n}\n"}]}]}]},{type:a,value:Z}]},{type:a,value:Z},{type:b,tag:dT,props:{label:gq},children:[{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[gd,z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:ge},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:cQ}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:gq}]}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,gf]},children:[{type:b,tag:c,props:{className:[d,gg,aL]},children:[{type:a,value:gh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,gi,n]},children:[{type:a,value:gj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,gk,p]},children:[{type:a,value:gl}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:gm}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:"plain\u002Ftext; charset=utf-8"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:gn}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:go}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,a$]},children:[{type:b,tag:c,props:{className:[d,bq,o]},children:[{type:a,value:gp}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,br]},children:[{type:a,value:cQ}]}]},{type:a,value:"\n\nHello!\n"}]}]}]},{type:a,value:Z}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2020\u002F09",path:"\u002Fblog\u002F2020\u002F09\u002Fporting-all-my-content",extension:aH,slug:"porting-all-my-content",createdAt:cO,updatedAt:cO,category:ak,prettyfiedTemporalDate:{prettified:"Thursday, September 10, 2020",temporalDate:"2020-09-10"}},{title:"Migrating WebPlatform.org MediaWiki into Git as Markdown files",locale:aV,created:"2015-07-30T00:00:00.000Z",updated:"2020-11-18T00:00:00.000Z",status:aG,revising:aq,categories:[ak],tags:[fS,gr,bs,cq],description:"How to take a full MediaWiki content and edit history into a Git repository keeping the history and author attributions into Markdown",coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmonit_dashboard_201502_status.png",text:"The WebPlatform project was running from a about 20 VMs\nand the availability, in part, managed by Monit.\nAt the end of the project, the infrastructure \"had to go away\"\n"},preamble:{disable:aq,text:g},toc:[{id:gs,depth:ae,text:gt},{id:gu,depth:ae,text:gv},{id:gw,depth:ae,text:gx},{id:dU,depth:ac,text:gy},{id:gz,depth:ac,text:cr},{id:gA,depth:ae,text:dV},{id:gB,depth:ac,text:dW},{id:bL,depth:ae,text:bM}],body:{type:aB,children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On July 1st 2015, "},{type:b,tag:B,props:{},children:[{type:a,value:"The WebPlatform project"}]},{type:a,value:" has been discontinued, by having\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20130328132045\u002Fhttp:\u002F\u002Fwww.webplatform.org\u002Fstewards\u002F",rel:[q,r,s],target:t,title:"WebPlatform Project sponsors"},children:[{type:a,value:"its sponsors"}]},{type:a,value:" retracting from the project."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I was hired by the W3C solely to maintain the WebPlatform project. Without\nfunding, and no budget at W3C\u002FMIT to transfer me, my contract was going to end."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:cs,props:{style:gC},children:[{type:a,value:"\n👀 This was written in December 2020 and taken from notes I’ve been sharing around via email.\n"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"With me as the only full-time person on the project with knowledge of the\ninfrastructure, and also as a believer of “"},{type:b,tag:m,props:{href:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FLearn\u002FGetting_started_with_the_web\u002FThe_web_and_web_standards#Dont_break_the_web",rel:[q,r,s],target:t},children:[{type:a,value:"don’t break the\nweb"}]},{type:a,value:"”, I wanted to keep everything online."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"When "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fblog\u002F2013\u002F08\u002Fhi-my-name-s-renoir-ill-be-your-devops-for-the-web-platform\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"I inherited the project"}]},{type:a,value:", I "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider\u002F",rel:[q,r,s],target:t,title:"2013 Infrastructure project: Migrating to a new provider"},children:[{type:a,value:"went through migrating\n"},{type:b,tag:B,props:{},children:[{type:a,value:"from one cloud provider to another"}]}]},{type:a,value:" the full\ninfrastructure, "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fanalysis\u002F2013-Usage_and_future_state\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"it has been running from about 20 Linux\nVMs"}]},{type:a,value:", worked on a few projects such as an attempt at having\nSingle-SignOn, and better compatibility tables."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Since the project was being closed, most of what I’ve worked lost their use. The\ninfrastructure was also going to become a burden."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"While planning my last weeks, I’ve agreed with the W3C systems team\n\""},{type:b,tag:m,props:{href:gD,rel:[q,r,s],target:t},children:[{type:a,value:"w3t-systeam"}]},{type:a,value:"\" to convert as much as possible as a static site."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The following are notes about the software I’ve written to migrate a WordPress\nblog and multiple MediaWiki namespaces into a Git repository."}]},{type:a,value:e},{type:b,tag:al,props:{id:gs},children:[{type:b,tag:m,props:{href:"#priorities",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:gt}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The priorities were to keep the documentation pages up, preserve the\ncontribution history and attributions, also keep the blog contents, and have\neverything to be served as static HTML hosted on GitHub pages."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I wanted to have this done before "},{type:b,tag:bj,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fleaving-w3c\u002F"},children:[{type:a,value:"I leave the W3C"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Since the "},{type:b,tag:m,props:{href:gD,rel:[q,r,s],target:t},children:[{type:a,value:"SysTeam"}]},{type:a,value:" would keep control of the "},{type:b,tag:j,props:{},children:[{type:a,value:dX}]},{type:a,value:"\ndomain, they’ve decided to support some redirect from the original domain to\n"},{type:b,tag:m,props:{href:gE,rel:[q,r,s],target:t,title:gF},children:[{type:a,value:cR}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Once everything was migrated, we’ve added a note;"}]},{type:a,value:e},{type:b,tag:cS,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The WebPlatform project, supported by various stewards between 2012 and 2015,\nhas been discontinued"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:"sup",props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:gG},{type:b,tag:m,props:{href:gE,rel:[q,r,s],target:t,title:gF},children:[{type:a,value:cR}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:al,props:{id:gu},children:[{type:b,tag:m,props:{href:"#outcome",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:gv}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The conversion work took the "},{type:b,tag:B,props:{},children:[{type:a,value:"two last months"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"All links to pages showing the "},{type:b,tag:B,props:{},children:[{type:a,value:"WebPlatform"}]},{type:a,value:" logo from this article is the\nresult of what I’m describing here, as the migration and all servers were shut\ndown and decommissioned in 2016."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The source of the site was generated from\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs",rel:[q,r,s],target:t},children:[{type:a,value:"webplatform\u002Fgenerator-docs"}]},{type:a,value:", and we’ve created\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fwebplatform.github.io\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"webplatform\u002Fwebplatform.github.io"}]},{type:a,value:"\nto host the site on GitHub pages. Eventualy, the W3C SysTeam set the repository\nas read-only."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"There were other things that we’ve initially planned, but couldn’t (see\n"},{type:b,tag:bj,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements-we-couldnt-meet"},children:[{type:a,value:dW}]},{type:a,value:"):"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Here is what I could migrate"}]},{type:a,value:e},{type:b,tag:w,props:{style:"font-size:small",className:["table-parent","table-auto"]},children:[{type:a,value:e},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:gH,props:{},children:[{type:b,tag:gI,props:{},children:[{type:b,tag:ba,props:{},children:[{type:b,tag:bk,props:{},children:[{type:a,value:"From"}]},{type:b,tag:bk,props:{},children:[{type:a,value:"To"}]},{type:b,tag:bk,props:{},children:[{type:a,value:"Repository"}]},{type:b,tag:bk,props:{},children:[{type:a,value:"Comment"}]},{type:b,tag:bk,props:{},children:[{type:a,value:"Commits"}]},{type:b,tag:bk,props:{},children:[{type:a,value:"Documents"}]},{type:b,tag:bk,props:{},children:[{type:a,value:"Deleted"}]}]}]},{type:b,tag:gJ,props:{},children:[{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002F*"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002F*"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:m,props:{href:gK,rel:[q,r,s],target:t,title:gL},children:[{type:a,value:"webplatform\u002Fdocs"}]}]},{type:b,tag:ah,props:{},children:[{type:a,value:"The main docs pages"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"37,000"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"4,675"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"418"}]}]},{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002FMeta:*"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002FMeta\u002F*"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:m,props:{href:gM,rel:[q,r,s],target:t,title:gN},children:[{type:a,value:"webplatform\u002Fdocs-meta"}]}]},{type:b,tag:ah,props:{},children:[{type:a,value:"Archived content that needed to be moved during initial mass imports."}]},{type:b,tag:ah,props:{},children:[{type:a,value:"300"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"58"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"170"}]}]},{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"docs.webplatform.org\u002Fwiki\u002FWPD:*"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs\u002FWPD\u002F*"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:m,props:{href:dY,rel:[q,r,s],target:t,title:dZ},children:[{type:a,value:gO}]}]},{type:b,tag:ah,props:{},children:[{type:a,value:"Community and notes section. Example "},{type:b,tag:m,props:{href:"https:\u002F\u002Fweb.archive.org\u002Fweb\u002F20160722084044\u002Fhttps:\u002F\u002Fdocs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure",rel:[q,r,s],target:t},children:[{type:a,value:"\u002Fwiki\u002FWPD:Infrastructure"}]},{type:a,value:" into "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"\u002Fdocs\u002FWPD\u002FInfrastructure"}]},{type:a,value:cP},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd\u002Fblob\u002Fmanual-edits\u002FInfrastructure\u002Findex.md",rel:[q,r,s],target:t},children:[{type:a,value:d_}]},{type:a,value:ai}]},{type:b,tag:ah,props:{},children:[{type:a,value:"5,700"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"358"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"323"}]}]},{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"blog.webplatform.org"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"webplatform.github.io\u002Fblog\u002F*"}]}]},{type:b,tag:ah,props:{},children:[{type:b,tag:m,props:{href:gP,rel:[q,r,s],target:t},children:[{type:a,value:"webplatform\u002Fblog"}]}]},{type:b,tag:ah,props:{},children:[{type:a,value:"The blog content"}]},{type:b,tag:ah,props:{},children:[{type:a,value:cT}]},{type:b,tag:ah,props:{},children:[{type:a,value:"53"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"N\u002FA"}]}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:al,props:{id:gw},children:[{type:b,tag:m,props:{href:"#migration",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:gx}]},{type:a,value:e},{type:b,tag:cs,props:{style:gC},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"👀 During this migration project, I was hoping to find a way to take any web\npage, from any CMS, and get a full copy (including images) of it into Markdown.\nThere was none. In 2017, I’ve created\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Farchivator",rel:[q,r,s],target:t},children:[{type:b,tag:B,props:{},children:[{type:a,value:dS}]}]},{type:a,value:d$},{type:b,tag:m,props:{href:f$,rel:[q,r,s],target:t},children:[{type:a,value:"npm"}]},{type:a,value:") to help with such work.\nInstead of using the last step described here, anyone could use "},{type:b,tag:B,props:{},children:[{type:a,value:dS}]},{type:a,value:" to\nretrieve a copy of their web pages."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"While building the solution, a few requirements emerged, they’re listed in\n"},{type:b,tag:bj,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#requirements"},children:[{type:a,value:dV}]}]},{type:a,value:e},{type:b,tag:af,props:{id:dU},children:[{type:b,tag:m,props:{href:"#blog",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:gy}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For migrating the "},{type:b,tag:m,props:{href:gP,rel:[q,r,s],target:t},children:[{type:a,value:dU}]},{type:a,value:", it was made manually, I’ve just\nconverted the HTML into Markdown using Pandoc."}]},{type:a,value:e},{type:b,tag:af,props:{id:gz},children:[{type:b,tag:m,props:{href:"#mediawiki",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:cr}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For migrating MediaWiki, the proces was a bit more complex."}]},{type:a,value:e},{type:b,tag:cs,props:{title:"Want to migrate your own MediaWiki?"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"🤲🏼 If you’re looking for an HowTo to migrate your own MediaWiki installation,\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion#use",rel:[q,r,s],target:t},children:[{type:a,value:"the procedure is written in ➡️ "},{type:b,tag:Q,props:{},children:[{type:a,value:ea}]},{type:a,value:"’s README"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"To migrate, we needed an history of each pages, from creation to the last edit."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"With MediaWiki, we have "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:DumpBackup.php",rel:[q,r,s],target:t,title:"dumpBackup.php file creates an XML dump for export or backup. XML dumps contain the content of the wiki"},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Manual:DumpBackup.php"}]}]},{type:a,value:", that creates\nan XML file (\""},{type:b,tag:B,props:{},children:[{type:a,value:gQ}]},{type:a,value:"\") of all history of all pages. One per\n"},{type:b,tag:m,props:{href:gR,rel:[q,r,s],target:t},children:[{type:a,value:"namespace"}]},{type:a,value:", for WebPlatform Docs’ wikis, we had:\n"},{type:b,tag:m,props:{href:gM,rel:[q,r,s],target:t,title:gN},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fwiki\u002FMeta:*"}]}]},{type:a,value:aK},{type:b,tag:m,props:{href:dY,rel:[q,r,s],target:t,title:dZ},children:[{type:b,tag:j,props:{},children:[{type:a,value:gS}]}]},{type:a,value:",\n"},{type:b,tag:m,props:{href:gK,rel:[q,r,s],target:t,title:gL},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fwiki\u002F*"}]}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"A big part of processing and converting history is about the data model so we\ncould read from one format and use the data model as data-source for conversion."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For this, I’ve created "},{type:b,tag:m,props:{href:gT,rel:[q,r,s],target:t,title:gU},children:[{type:a,value:gV}]},{type:a,value:", an\nabstract library specialized for data manipulation to help \""},{type:b,tag:B,props:{},children:[{type:a,value:"Transform CMS\ncontent from a format into another"}]},{type:a,value:" [format]\". It’s written in PHP, and might\nstill work even though it hasn’t been touched since 2015."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:gT,rel:[q,r,s],target:t,title:gU},children:[{type:a,value:gV}]},{type:a,value:" takes care of manipulating\ndata for:"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Date of contribution and author information"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Content management systems like "},{type:b,tag:B,props:{},children:[{type:a,value:cr}]},{type:a,value:" has a way to tell the user and\ndate of an edition."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Take each edit contents as they were"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Do not change any of the contents for each edits, even though they are in a\nformat understood by the original engine, here being "},{type:b,tag:B,props:{},children:[{type:a,value:cr}]},{type:a,value:$}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"To convert each page history edit into "},{type:b,tag:Q,props:{},children:[{type:a,value:"Git commits"}]},{type:a,value:", I’ve created\n"},{type:b,tag:m,props:{href:eb,rel:[q,r,s],target:t,title:ec},children:[{type:a,value:ea}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This is the utility that takes care of making the conversion "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion\u002Fblob\u002Fmaster\u002Fsrc\u002FWebPlatform\u002FImporter\u002FCommands\u002FRunCommand.php#L48",rel:[q,r,s],target:t,title:"Comments describing mediawiki-conversion"},children:[{type:a,value:"see comments made\nhere"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Handle deleted pages"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For each edit create a git revisions commit until the final file delete. At\nthe end of that step, the Git repository should have an history, but no\naparent files. At this step, we can also use the entries and make a redirect\nmap."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Handle pages that weren’t deleted in history"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Do the same as above. At this step, we should have a repository with text\nfiles where each file has exactly the same content as the source history. So\nwe can add them on top of the deleted pages following the same process as\nabove. We can also use those as a list of current pages we’ll want to be\nconverted into Markdown."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Convert content"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For all pages "},{type:b,tag:B,props:{},children:[{type:a,value:"that weren’t deleted in history"}]},{type:a,value:". Query "},{type:b,tag:B,props:{},children:[{type:a,value:cr}]},{type:a,value:" API to\nretrieve the full HTML, including "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FTransclusion",rel:[q,r,s],target:t},children:[{type:a,value:"Transclusions"}]},{type:a,value:" pass it to\nPandoc, so we get it converted into Markdown. Commit the rewritten file\ncontents with Markdown."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"By design "},{type:b,tag:m,props:{href:eb,rel:[q,r,s],target:t,title:ec},children:[{type:a,value:ea}]},{type:a,value:" allows to\nre-run the 3rd step so we could always get all edits until we\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FManual:Lock_the_database",rel:[q,r,s],target:t},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Lock the database"}]},{type:a,value:" (i.e. cut-off)"}]},{type:a,value:"\nso we could keep the production site active until a cut-off date."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:al,props:{id:gA},children:[{type:b,tag:m,props:{href:"#requirements",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:dV}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Along with what's described in the\n"},{type:b,tag:bj,props:{to:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files#migration-steps"},children:[{type:a,value:"Migration steps"}]},{type:a,value:",\nwe wanted also to ensure we properly support the following."}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Keep author attributions but have them anonymized"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"We didn’t want to leak all contributor’s accounts email addresses to be\npublished without their consent. So, I’ve setup a "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs\u002Fblob\u002Fmanual-edits\u002F.mailmap",rel:[q,r,s],target:t},children:[{type:b,tag:j,props:{},children:[{type:a,value:".mailmap"}]},{type:a,value:" so that\ncontributors could add a PR to advertize publicly on GitHub"}]},{type:a,value:$}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Keep code examples in Markdown so we can colourize them"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Golden standard pages should look the same"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The \"Golden Standard\" pages were ones we were regularly referring to see how\nthey would look and see if things are broken."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Also, since we were removing infrastructure, we should see features that were\nenabled at the time of "},{type:b,tag:B,props:{},children:[{type:a,value:"Web.Archive.org"}]},{type:a,value:" snapshot, but would be omitted in\nthe "},{type:b,tag:B,props:{},children:[{type:a,value:"Static version"}]},{type:a,value:" (i.e. "},{type:b,tag:j,props:{},children:[{type:a,value:cR}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Compatibility data"}]},{type:a,value:" was removed"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Contents"}]},{type:a,value:" on the right should be removed"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Overview table"}]},{type:a,value:" should look different"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"On "},{type:b,tag:B,props:{},children:[{type:a,value:"static version"}]},{type:a,value:" code blocks should be more colorized differently (it's\nusing a different process)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Examples:"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fborder-radius"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Fproperties\u002Fdisplay"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002Ffunctions","web-archive-date":"20140626071828"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FArray\u002Ffilter"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fjavascript\u002FDate"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FBeginners\u002Fhtml","web-archive-date":gW},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fcanvas_notearsgame","web-archive-date":gW},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Ftutorials\u002Fsvg_clipping_and_masking","web-archive-date":"20150905205843"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:ct}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"MediaWiki is pretty relax about what it allows in its URLs."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Since we’re migrating into a filesystem, we wanted to have only valid\nfilesystem file names and decided to normalize all paths into ASCII\ncharacters."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For example, the "},{type:b,tag:m,props:{href:gR,rel:[q,r,s],target:t},children:[{type:a,value:"Namespaces"}]},{type:a,value:" (e.g. "},{type:b,tag:j,props:{},children:[{type:a,value:gS}]},{type:a,value:") adds a\ncolumn character, that would be URLEncoded into "},{type:b,tag:j,props:{},children:[{type:a,value:"%3A"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"There were many other discrepancies like:"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Case insensitivity — Because some URLs in pages were not in the same casing"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Supporting spaces — Sometimes with underscore \""},{type:b,tag:j,props:{},children:[{type:a,value:"_"}]},{type:a,value:"\", other times with "},{type:b,tag:j,props:{},children:[{type:a,value:"%20"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Normalize\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FURL\u002Fpathname",rel:[q,r,s],target:t},children:[{type:a,value:"URL Path"}]},{type:a,value:d$},{type:b,tag:m,props:{href:"https:\u002F\u002Furl.spec.whatwg.org\u002F#concept-url-path",rel:[q,r,s],target:t},children:[{type:a,value:"spec"}]},{type:a,value:") (e.g. anything that\nwould be URLEncoded such as "},{type:b,tag:j,props:{},children:[{type:a,value:"()!@:"}]},{type:a,value:ai}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:ct}]},{type:a,value:": A page in another language should\nbe migrated"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fja","web-archive-date":"20160613060459"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMain_Page\u002Fko"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:ct}]},{type:a,value:": A Page with "},{type:b,tag:j,props:{},children:[{type:a,value:"()"}]},{type:a,value:" in URL should be\nnormalized"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fcss\u002Ffunctions\u002Ftranslate()"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002FanimVal_(SVGAnimatedPreserveAspectRatio)"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fsvg\u002Fproperties\u002Fcx_(SVGRadialGradientElement)"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:ct}]},{type:a,value:": Pages within WPD namespace should\nbe migrated"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002FMonitoring\u002FMonit"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FWPD:Infrastructure\u002Fanalysis\u002F2013-Migrating_to_a_new_cloud_provider"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The image comes from "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002FWPD\u002Fassets\u002F"}]},{type:a,value:" which means the image is hosted in the\n"},{type:b,tag:m,props:{href:dY,rel:[q,r,s],target:t,title:dZ},children:[{type:a,value:gO}]},{type:a,value:" in the assets\u002F folder."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:ct}]},{type:a,value:": Pages in Meta namespace should be\nmigrated"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:HTML\u002FElements\u002Fstyle"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:web_platform_wednesday"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002FMeta:Editors_Guide"},children:[{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:gB},children:[{type:b,tag:m,props:{href:"#requirements-we-couldnt-meet",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:dW}]},{type:a,value:e},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ensure ALL assets uploads are displayed properly"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Before, we would use GlusterFS to store images for MediaWiki. There has been\nwork made to store on "},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:", all the pages uses the link,\nbut the SysTeam decided not to keep the redirects."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Now that the site is archived, I’m unsure this can be fixed."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you want to see them, add this bookmarklet to your bookmarks bar\n"},{type:b,tag:m,props:{style:"text-decoration:none;display:inline-block;padding: 1px 6px;color: #fff;background: #32a0eb;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;",href:"javascript:(function()%7B%5B%5D.forEach.call(document.querySelectorAll('img')%2Cfunction(img)%7Bif%20('src'%20in%20img)%20%7Bsrc%20%3D%20img.src%3Bsrc%20%3D%20src.replace('static.webplatform.org'%2C%20'webplatform.github.io%2Fdocs-assets')%3Bimg.src%3Dsrc%3B%7D%7D)%7D)()"},children:[{type:a,value:"WebPlatform.github.io\nShow images"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The project "},{type:b,tag:m,props:{href:gX,rel:[q,r,s],target:t},children:[{type:a,value:gX}]},{type:a,value:" was meant to be used as\nan origin for "},{type:b,tag:j,props:{},children:[{type:a,value:ed}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Should we want to fix the issue"}]},{type:a,value:", we could setup an HTTP redirect from\n"},{type:b,tag:j,props:{},children:[{type:a,value:ed}]},{type:a,value:" to "},{type:b,tag:j,props:{},children:[{type:a,value:"webplatform.github.io\u002Fdocs-assets\u002F"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The following (should be) the same file;"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:gY,rel:[q,r,s],target:t},children:[{type:a,value:gY}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:gZ,rel:[q,r,s],target:t},children:[{type:a,value:gZ}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:g_,rel:[q,r,s],target:t},children:[{type:a,value:g_}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Make sure page links "},{type:b,tag:B,props:{},children:[{type:a,value:"with different casing"}]},{type:a,value:" are redirected properly"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For example the page for \""},{type:b,tag:j,props:{},children:[{type:a,value:"Internet_and_Web"}]},{type:a,value:"\" is sometimes linked with\ndifferent casing, e.g. at \""},{type:b,tag:j,props:{},children:[{type:a,value:"Internet_and_Web\u002FThe_History_of_the_Web"}]},{type:a,value:"\" or\n\""},{type:b,tag:j,props:{},children:[{type:a,value:"internet_and_web\u002FThe_History_of_the_Web"}]},{type:a,value:"\", it is migrated once;\n"},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fconcepts\u002FInternet_and_Web\u002FThe_History_of_the_Web"},children:[]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Some page has links to with different casing \""},{type:b,tag:j,props:{},children:[{type:a,value:"internet_and_web"}]},{type:a,value:"\", we can see\nfrom\n"},{type:b,tag:ax,props:{slug:"docs.webplatform.org\u002Fwiki\u002Fconcepts"},children:[]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"MediaWiki would redirect, but on GitHub pages, nothing has been put in place\nfor those. If we wanted to support, we could have used the same entries used\nto create "},{type:b,tag:m,props:{href:g$,rel:[q,r,s],target:t},children:[{type:a,value:"NGINX rewrite rules"}]},{type:a,value:", and add empty HTML pages\nlike GitHub pages would. In the case of WebPlatform project, it's been\ndecided to leave as-is."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Enforce all redirects from "},{type:b,tag:j,props:{},children:[{type:a,value:"*.webplatform.org"}]},{type:a,value:" to properly redirect to\n"},{type:b,tag:j,props:{},children:[{type:a,value:cR}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This migration process supported creating "},{type:b,tag:m,props:{href:g$,rel:[q,r,s],target:t},children:[{type:a,value:"NGINX rewrite\nrules"}]},{type:a,value:", I’m unsure if they’ve been used."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:"hr",props:{},children:[]},{type:a,value:e},{type:b,tag:al,props:{id:bL},children:[{type:b,tag:m,props:{href:ee,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:bM}]},{type:a,value:e},{type:b,tag:w,props:{style:cU,className:[cV,cW]},children:[{type:a,value:e},{type:b,tag:au,props:{figcaption:g,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-conversion.png"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:eb,rel:[q,r,s],target:t,title:ec},children:[{type:a,value:"WebPlatform\u002Fmediawiki-conversion"}]},{type:a,value:" is made to run in 3\nsteps, here we see it running at the 3rd step. Where we would take the latest\nversion, get the HTML version from the MediaWiki API, and pass to Pandoc to get\nMarkdown."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{figcaption:g,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-output.png"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Making sure during development that the conversion was effectively the same"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{figcaption:g,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-github.png"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"We can see directly on GitHub.com the converted page's Git history"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{figcaption:g,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-markdown.png"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"We can see directly on GitHub.com the converted Markdown contents."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{figcaption:g,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-view-syntaxhighlight.png"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The final output should support code blocks with"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{figcaption:g,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fmediawiki-history-to-git-log.png",alt:"MediaWiki history converted into Git Commits"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The end result is that for each "},{type:b,tag:B,props:{},children:[{type:a,value:gQ}]},{type:a,value:" can be converted into text\nfiles where each edits are made as Git commits keeping author and date of edit."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{figcaption:g,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F07\u002Fdocs-page-history-onsite.png"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Not implemented"}]},{type:a,value:" Screenshot of an experiment to display the page's Git\nhistory calling GitHub API. There is no trace of this to my recollection, and It\nwas effectively the first time I used Vue.js."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},dir:"\u002Fblog\u002F2015\u002F07",path:"\u002Fblog\u002F2015\u002F07\u002Fmigrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files",extension:aH,slug:"migrating-webplatform-org-mediawiki-into-git-history-and-into-markdown-files",createdAt:ha,updatedAt:ha,category:ak,prettyfiedTemporalDate:{prettified:"Thursday, July 30, 2015",temporalDate:"2015-07-30"}},{title:"Run a NodeJS process through forever from within a Docker container",locale:aV,created:"2015-05-12T00:00:00.000Z",updated:bB,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F05\u002Frun-nodejs-process-forever-within-docker-container\u002F",status:aG,revising:aq,migrateLinks:aq,categories:[ak],tags:[bl,bm,gr,bs,aQ,cq],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-spec-rangefinder.png",alt:"Screen capture of the RangeFinder API using Publican",text:"Specification Document for RangeFinder API\n"},excerpt:"I’ve recently been through the steps to make a NodeJS web app to run from inside a Docker container. The objective of this project was to simplify the deployment of a web app that had many moving parts by making it a re-deployable service that is self-contained.",preamble:{disable:aq,text:g},toc:[{id:hb,depth:ae,text:"Run publican inside Docker"},{id:cX,depth:ac,text:cY},{id:hc,depth:ac,text:hd},{id:bL,depth:ac,text:bM}],body:{type:aB,children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"One of the components that I worked on "},{type:b,tag:bj,props:{to:"\u002Fblog\u002Ftag\u002Fwebplatform-docs"},children:[{type:a,value:"during my time on the WebPlatform\nproject"}]},{type:a,value:aK},{type:b,tag:m,props:{href:ef,rel:[q,r,s],target:t},children:[{type:a,value:eg}]},{type:a,value:", that I had to manage has many moving parts. The\nend product of that component is basically static HTML documents that ends up on\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fspecs.webplatform.org\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"specs.webplatform.org"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Since we need to have many packages installed in very specific version, and\nautomating the installation wouldn't bring any more benefit than being\nself-contained, I thought it would be best to go through the steps of converting\nit into a Docker container."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The following is a procedure I wrote to teach "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.w3.org\u002Fstaff\u002Falumni\u002F#robin-berjon",rel:[q,r,s],target:t},children:[{type:a,value:"my colleague"}]},{type:a,value:aK},{type:b,tag:m,props:{href:"https:\u002F\u002Fberjon.com\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Robin\nBerjon"}]},{type:a,value:", how to run his system called "},{type:b,tag:m,props:{href:ef,rel:[q,r,s],target:t},children:[{type:a,value:eg}]},{type:a,value:" from within a Docker\ncontainer. Publican is basically a GitHub hook listener that generates specs\nwritten to be parsed by "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fw3c\u002Frespec",rel:[q,r,s],target:t},children:[{type:a,value:"ReSpec"}]},{type:a,value:cZ},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Ftabatkins\u002Fbikeshed",rel:[q,r,s],target:t},children:[{type:a,value:"Bikeshed"}]}]},{type:a,value:e},{type:b,tag:al,props:{id:hb},children:[{type:b,tag:m,props:{href:"#run-publican-inside-docker",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"Run "},{type:b,tag:B,props:{},children:[{type:a,value:"publican"}]},{type:a,value:" inside Docker"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"What this'll do is basically build a VM that'll run a Docker container. The\ncontainer will write in files outside of it."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You'll quickly notice that the paths will look the same, its confusing, sorry\nabout that. Fortunately for us, the paths in the procedure are the ones that\nwill be mounted through Docker Volume (the "},{type:b,tag:j,props:{},children:[{type:a,value:bn}]},{type:a,value:" option when you call "},{type:b,tag:j,props:{},children:[{type:a,value:bm}]},{type:a,value:")\nand will, in the end, be the same files."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Once you have a Docker container running on a VM, it'll replicate how a\nproduction VM will run the tasks. Since we know where the container will write\nfiles, we'll have our frontend servers to forward requests to publican, and\nserve files it generated."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Doing all this removes the need to do any rsync. NGINX within the VM that'll run\nDocker will take care of serving static files, and frontend server will expose\nit to the public."}]},{type:a,value:e},{type:b,tag:af,props:{id:cX},children:[{type:b,tag:m,props:{href:he,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:cY}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Have "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.vagrantup.com\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Vagrant"}]},{type:a,value:bN},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.virtualbox.org\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"VirtualBox"}]},{type:a,value:" installed"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Follow what's in "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Fsalt-basesystem",rel:[q,r,s],target:t},children:[{type:a,value:"renoirb\u002Fsalt-basesystem README.md"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Make sure you follow "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Frenoirb\u002Fsalt-basesystem#vagrant-sandbox-utilities",rel:[q,r,s],target:t},children:[{type:a,value:"Vagrant Sandbox utilities"}]},{type:a,value:" part"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:hf},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bC}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bO}]},{type:a,value:" salt-call state.highstate\n "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bO}]},{type:a,value:" salt-call state.sls vagrantsandbox.docker\n "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Reboot the VM by doing "},{type:b,tag:j,props:{},children:[{type:a,value:"vagrant reload"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:" vagrant reload\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"No need"}]},{type:a,value:" to follow what's in "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fpublican\u002Fblob\u002Ftask-based-docker\u002FDOCKER.md",rel:[q,r,s],target:t},children:[{type:a,value:"webplatform\u002Fpublican DOCKER.md file"}]},{type:a,value:".\nThose are notes to show how to build a container. For this time, we'll "},{type:b,tag:m,props:{href:"https:\u002F\u002Fregistry.hub.docker.com\u002Fu\u002Fwebspecs\u002Fpublican\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"use a\ncontainer I already built and pushed on "},{type:b,tag:Q,props:{},children:[{type:a,value:"Docker hub"}]}]},{type:a,value:bb}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Setup what's required to run the container"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:hf},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bC}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Prepare the folders;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:c_}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hg}]},{type:a,value:" webapps\n "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ei}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You should see"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:" uid=990(webapps) gid=990(webapps) groups=990(webapps),33(www-data),998(docker)\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Prepare the folders"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:" \u002Fsrv\u002Fwebapps "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bD}]},{type:a,value:" publican\u002Fdata "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:" publican\n"}]}]}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If all went well so far; you should be able to do "},{type:b,tag:j,props:{},children:[{type:a,value:"docker ps"}]},{type:a,value:" as the\n"},{type:b,tag:j,props:{},children:[{type:a,value:"webapps"}]},{type:a,value:" user. Otherwise reboot and\u002For run "},{type:b,tag:j,props:{},children:[{type:a,value:"salt-call"}]},{type:a,value:" with both\n"},{type:b,tag:j,props:{},children:[{type:a,value:hh}]},{type:a,value:g},{type:b,tag:j,props:{},children:[{type:a,value:"state.sls vagrantsandbox.docker"}]},{type:a,value:" states. There should be\nnothing left to do."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"ps"}]},{type:a,value:"\n\nCONTAINER ID IMAGE COMMAND CREATED\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:ej}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pull the publican Docker image I built (it'll take about 10 minutes)"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bm}]},{type:a,value:" pull webspecs\u002Fpublican:wip\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Copy the other files in this Gist in your local coputer where you cloned the\n"},{type:b,tag:Q,props:{},children:[{type:a,value:"salt-basesystem"}]},{type:a,value:" repository. From that folder you can move them inside the\nVagrant VM where you need."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Copy publican config"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:c$}]},{type:a,value:" \u002Fvagrant\u002Fconfig.json data\u002F\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:"del",props:{},children:[{type:a,value:"Download Bikeshed stuff that i didn't figure out yet what's important to\nkeep, extract it in "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fspec-data\u002F"}]}]},{type:a,value:$}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:fY,props:{className:[f_],variant:fZ},children:[{type:a,value:e},{type:b,tag:Q,props:{slot:a$},children:[{type:a,value:"Archive mentioned no longer exists"}]},{type:a,value:"\nThe archive used in the initial procedure no longer exists, it was a series of W3C specification Git repository working copies that Publican was expecting.\n"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You can open up another terminal session and connect to the Vagrant VM\n"},{type:b,tag:j,props:{},children:[{type:a,value:"vagrant ssh"}]},{type:a,value:" (e.g. if you don't use "},{type:b,tag:j,props:{},children:[{type:a,value:hi}]},{type:a,value:cZ},{type:b,tag:j,props:{},children:[{type:a,value:hj}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:" spec-data\u002Freadonly\u002F\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:" data\u002F"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:"gits,logs,publish,queue,temp"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Run the container"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bm}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:el}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:em}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:da}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:db}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ai}]}]},{type:a,value:hk}]},{type:a,value:hl},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:da}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:db}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ai}]}]},{type:a,value:hm}]},{type:a,value:hn},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:en}]},{type:a,value:ho}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you see the following, you're in the Docker container!!"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"webapps@2f33f5c6e183:~$\n"}]}]}]},{type:a,value:e},{type:b,tag:au,props:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-init.png",alt:"A terminal window with a few commands and a build process status and green lines, no errors",figcaption:g},children:[{type:a,value:"\n  Launching the container\n"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Initiate the empty shell we just created (it'll create stuff in the "},{type:b,tag:j,props:{},children:[{type:a,value:"data\u002F"}]},{type:a,value:"\nfolder "},{type:b,tag:B,props:{},children:[{type:a,value:hp}]},{type:a,value:" of the container)"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"publican.js init\n"}]}]}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:hq},{type:b,tag:B,props:{},children:[{type:a,value:"Launching the container"}]},{type:a,value:hr}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Once done, exit the container. Notice that by doing this, you lose the state\nof the VM and anything that has been written in the container. But, since we\nuse volumes (notice the "},{type:b,tag:j,props:{},children:[{type:a,value:"-v \u002Fhost\u002Fpath:\u002Fcontainer\u002Fpath"}]},{type:a,value:"), we actually wrote\n"},{type:b,tag:B,props:{},children:[{type:a,value:hp}]},{type:a,value:" of the container."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"We can "},{type:b,tag:Q,props:{},children:[{type:a,value:"exit the container"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"At this stage, we had publican and bikeshed to generate files (we may call\nthis a \"cache warmup\" of softs). Now, let's prepare the Vagrant VM to serve\nthe static content. Notice that the next commands are there only for the\npurpose of a local workspace, in production this step will also be managed\nautomatically."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Let's get back as the "},{type:b,tag:Q,props:{},children:[{type:a,value:aB}]},{type:a,value:" user, and create a quick web server;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-yqq"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:"\nnginx "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"mv"}]},{type:a,value:" \u002Fvagrant\u002Fdefault.conf \u002Fetc\u002Fnginx\u002Fsites-available\u002Fdefault\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dd}]},{type:a,value:" restart nginx\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Let's return back to "},{type:b,tag:Q,props:{},children:[{type:a,value:"as the webapps user and launch the runner"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:hg}]},{type:a,value:" webapps "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican\u002F\n"}]}]}]},{type:a,value:e},{type:b,tag:au,props:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-run-hook.png",alt:"A terminal window with a build process status and green lines, no errors",figcaption:g},children:[{type:a,value:"\nStarting a build process\n"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:hs}]},{type:a,value:"; this will also be managed automatically in\nproduction."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,"language-shell"]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bm}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:el}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:em}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:da}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:db}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ai}]}]},{type:a,value:hk}]},{type:a,value:hl},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ht},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:da}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:db}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ai}]}]},{type:a,value:hm}]},{type:a,value:hn},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ht},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:en}]},{type:a,value:ho}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:hq},{type:b,tag:B,props:{},children:[{type:a,value:hs}]},{type:a,value:hr}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"get your Vagrant VM IP address"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"ifconfig"}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Should start by "},{type:b,tag:j,props:{},children:[{type:a,value:"172..."}]},{type:a,value:cZ},{type:b,tag:j,props:{},children:[{type:a,value:"192..."}]},{type:a,value:"; visit a browser to that address"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:hc},children:[{type:b,tag:m,props:{href:"#gists",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:hd}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Here are the files mentioned in this post"}]},{type:a,value:e},{type:a,value:e},{type:b,tag:aR,props:{id:"configjson"},children:[{type:b,tag:m,props:{href:"#configjson",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"config.json"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:ef,rel:[q,r,s],target:t},children:[{type:a,value:eg}]},{type:a,value:" expects this file as "},{type:b,tag:j,props:{},children:[{type:a,value:"data\u002Fconfig.json"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,"language-json"]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"bikeshed\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\u002Fopt\u002Fbikeshed\u002Fbikeshed.py\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"rsyncPath\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\u002Fsrv\u002Fwebapps\u002Fpublican\u002F\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"python\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"python2\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"logFile\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"logs\u002Fall.log\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"email\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"to\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:hu}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"from\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:hu}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"host\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"level\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"error\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"handleExceptions\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:I}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"purgeAllURL\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"https:\u002F\u002Fapi.fastly.com\u002Fservice\u002Ffooo\u002Fpurge_all\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aL]},children:[{type:a,value:"\"purgeAllKey\""}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"baar\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:aR,props:{id:"defaultconf"},children:[{type:b,tag:m,props:{href:"#defaultconf",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"default.conf"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"A minimal NGINX web server digging for static content that Publican generates."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,eo]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# file: \u002Fetc\u002Fnginx\u002Fsites-enabled\u002Fdefault"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cu}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:df}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hv}]},{type:a,value:" default_server"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aB}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata\u002Fpublish"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"index"}]},{type:a,value:" index.html index.htm"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:dg}]},{type:a,value:" localhost"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:hw}]},{type:a,value:hx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"try_files"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:hy}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:hy}]},{type:a,value:"\u002F =404"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:"h5",props:{id:"dockerfile"},children:[{type:b,tag:m,props:{href:"#dockerfile",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"Dockerfile"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Here is the project's Dockerfile I created. I think it should be smaller, but\nPublican works with the following script."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Each step in a Dockerfile creates a \"commit\", make sure you have as few of them\nas possible, and also make sure that you clean after yourself. Remember that a\nDocker container is re-deployable and smallest the size of the container, the\nbetter!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Notice a few details;"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"ENV DEBIAN_FRONTEND=noninteractive"}]},{type:a,value:" helps with dialogs"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"USER webapps"}]},{type:a,value:" tells \"where\" the rest of the script will make commands as a\ndifferent user than root. Make sure what's required by root to be done before!"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"COPY ..."}]},{type:a,value:" this is basically how you import content inside the container (i.e.\nmake the container heavier)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,"language-dockerfile"]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Publican Docker runner"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# See also:"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#   * https:\u002F\u002Fgithub.com\u002Fnodesource\u002Fdocker-node\u002Fblob\u002Fmaster\u002Fubuntu\u002Ftrusty\u002Fnode\u002F0.10.36\u002FDockerfile"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"FROM"}]},{type:a,value:" nodesource\u002Ftrusty:0.10.36"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"MAINTAINER"}]},{type:a,value:" Renoir Boulanger \u003Crenoir@w3.org\u003E"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bQ}]},{type:a,value:" DEBIAN_FRONTEND=noninteractive"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Dependencies: Bikeshed, PhantomJS, Bikshed’s lxml"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ep}]},{type:a,value:" apt-get update && apt-get -y upgrade && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    apt-get install -yqq git python2.7 python-dev python-pip libxslt1-dev libxml2-dev zlib1g-dev && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    apt-get install -yqq libfontconfig1 libfreetype6 curl && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    apt-get autoremove -yqq --purge && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    pip install --upgrade lxml"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Copy everything we have locally into the container"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# REMINDER: Make sure you run `make clone-bikeshed`, we prefer to keep a copy locally outside"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# of the data volume. Otherwise it would make problems saying that bikeshed clone is not in the"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# same filesystem."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"COPY"}]},{type:a,value:" . \u002Fsrv\u002Fwebapps\u002Fpublican\u002F"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Make sure we have a \"non root\" user and"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# delete any local workbench data\u002F directory"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ep}]},{type:a,value:" \u002Fusr\u002Fsbin\u002Fgroupadd --system --gid 990 webapps && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    \u002Fusr\u002Fsbin\u002Fuseradd --system --gid 990 --uid 990 -G sudo --home-dir \u002Fsrv\u002Fwebapps --shell \u002Fbin\u002Fbash webapps && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    sed -i "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'\u002F^%sudo\u002Fd'"}]},{type:a,value:" \u002Fetc\u002Fsudoers && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    echo "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'%sudo ALL=NOPASSWD: ALL'"}]},{type:a,value:" \u003E\u003E \u002Fetc\u002Fsudoers && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    mv \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbikeshed \u002Fopt && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    rm -rf data && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    mkdir -p data\u002Ftemp && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    rm -rf Dockerfile Makefile .git .gitignore DOCKER.md && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    chown -R webapps:webapps \u002Fsrv\u002Fwebapps\u002Fpublican && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    chown -R webapps:webapps \u002Fopt\u002Fbikeshed"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Switch from root to webapps system user"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# It **HAS to be** the SAME uid\u002Fgid as the owner on the host from which we’ll use as volume"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"USER"}]},{type:a,value:" webapps"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Where the session will start from"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"WORKDIR"}]},{type:a,value:" \u002Fsrv\u002Fwebapps\u002Fpublican"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Environment variables"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bQ}]},{type:a,value:" PATH \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fnode_modules\u002F.bin:\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbin:\u002Fsrv\u002Fwebapps\u002Fpublican\u002F.local\u002Fbin:"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$PATH"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bQ}]},{type:a,value:" HOME \u002Fsrv\u002Fwebapps\u002Fpublican"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bQ}]},{type:a,value:" TMPDIR \u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata\u002Ftemp"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bQ}]},{type:a,value:" NODE_ENV production"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:bQ}]},{type:a,value:" GIT_DISCOVERY_ACROSS_FILESYSTEM true"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Run what `make deps` would do"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ep}]},{type:a,value:" pip install --upgrade --user --editable \u002Fopt\u002Fbikeshed && "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:G}]},{type:a,value:"\n    mkdir -p node_modules && npm install"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Declare which port we expect to expose"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"EXPOSE"}]},{type:a,value:" 7002"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Allow cli entry for debug, but make sure docker-compose.yml uses \"command: bin\u002Frun.sh\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aE]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"ENTRYPOINT"}]},{type:a,value:" ["},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\u002Fbin\u002Fbash\""}]},{type:a,value:R}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Note leftover: Ideally, it should exclusively run"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#ENTRYPOINT [\"\u002Fbin\u002Fbash\", \"\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fbin\u002Frun.sh\"]"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Note leftover: What it ends up doing"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#CMD [\"node_modules\u002Fforever\u002Fbin\u002Fforever\", \"--fifo\", \"logs\", \"0\"]"}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:aR,props:{id:"forever-start-script"},children:[{type:b,tag:m,props:{href:"#forever-start-script",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"Forever start script"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you notice in the Docker run command, I call a file "},{type:b,tag:j,props:{},children:[{type:a,value:"bin\u002Frun.sh"}]},{type:a,value:", here it is."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bm}]},{type:a,value:ek},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:el}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:em}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:dc},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:en}]},{type:a,value:":7002 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n       webspecs\u002Fpublican:latest "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n       bin\u002Frun.sh\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Publican runs its process using "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fforeverjs\u002Fforever",rel:[q,r,s],target:t},children:[{type:a,value:"Forever"}]},{type:a,value:". The objective of forever is to\nkeep a process to run at all times."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"While this isn't ideal for NodeJS services, in the present use-case of a Docker\ncontainer who has the only purpose to run a process; Forever apt for the job!"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,eq,aW]},children:[{type:a,value:er}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:"export"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"RUNDIR"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\u002Fsrv\u002Fwebapps\u002Fpublican\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:hz}]},{type:a,value:"\nnode_modules\u002Fforever\u002Fbin\u002Fforever start "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:hz}]},{type:a,value:"\u002Fbin\u002Fserver.js\nnode_modules\u002Fforever\u002Fbin\u002Fforever "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"--fifo"}]},{type:a,value:" logs "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"That’s it, it’s all I had."}]},{type:a,value:e},{type:b,tag:af,props:{id:bL},children:[{type:b,tag:m,props:{href:ee,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:bM}]},{type:a,value:e},{type:a,value:e},{type:b,tag:w,props:{style:cU,className:[cV,cW,es,et,eu]},children:[{type:a,value:e},{type:b,tag:au,props:{className:[bR],src:hA,alt:"A W3C Specification preview where we can see on the left the specification, and on the right the source highlighting changes in the source",figcaption:g},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"W3C Publican prototype build process helping with specification change tracking during review process"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{className:[bR],src:hB,figcaption:g},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:hC}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{style:cU,className:[cV,cW,es,et,eu]},children:[{type:a,value:e},{type:b,tag:au,props:{className:[bR],src:hA,alt:hD,figcaption:g},children:[{type:a,value:"\n...\n"}]},{type:a,value:e},{type:b,tag:au,props:{className:[bR],src:hB,figcaption:g},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:hC}]},{type:a,value:e}]},{type:a,value:e}]}]},dir:hE,path:"\u002Fblog\u002F2015\u002F05\u002Frun-nodejs-process-forever-within-docker-container",extension:aH,slug:"run-nodejs-process-forever-within-docker-container",createdAt:dh,updatedAt:dh,category:ak,prettyfiedTemporalDate:{prettified:"Tuesday, May 12, 2015",temporalDate:"2015-05-12"}},{title:"Make Discourse “long polling” work behind Fastly or Varnish",locale:aV,created:"2015-05-03T00:00:00.000Z",updated:bB,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F05\u002Fmake-discourse-long-polling-work-behind-fastly\u002F",status:aG,revising:aq,caption:am,caracteresBizzares:am,gallery:am,migrateCode:aq,migrateImages:aq,migrateLinks:aq,categories:[ak],tags:[bl,bs,cq,bS],keywords:[ev,ew,bE,"Long Polling behind Varnish",hF],excerpt:"In the Discourse forums, if you’ve seen something saying that you have to provide a different origin to make long polling work, maybe you didn’t understand what you have to do. Here are the details of why and how to do it correctly.",coverImage:{src:hG,text:hH},preamble:{text:hI},toc:[{id:hJ,depth:ae,text:hK}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"While working on deploying Discourse, "},{type:b,tag:m,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Ffull-site-cdn-acceleration-for-discourse\u002F21467\u002F4",rel:[q,r,s],target:t},children:[{type:a,value:"I've came across a statement that took\ntime for me to understand"}]},{type:a,value:". Discourse has a subsystem that's similar to\nWebSocket and Server Sent events which takes care to automatically update the\npage asynchronously. Note that this post "},{type:b,tag:m,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Ffull-site-cdn-acceleration-for-discourse\u002F21467",rel:[q,r,s],target:t},children:[{type:a,value:"is canonical version of my answer"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The confusing part was;"}]},{type:a,value:e},{type:b,tag:cS,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:hL,rel:[q,r,s],target:t},children:[{type:a,value:hM}]},{type:a,value:" To server \"long polling\" requests from a different domain, set the\nSite Setting long polling base url to the origin server. For example, if your\nCDN is pulling from \""},{type:b,tag:j,props:{},children:[{type:a,value:"http:\u002F\u002Fexample.org"}]},{type:a,value:"\" be sure to plug in\n"},{type:b,tag:j,props:{},children:[{type:a,value:hN}]},{type:a,value:" into the site setting. If you don't your site will be\nbroken."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This post is about clarifying why and how to work around this particular\nproblem."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The confusing part is that if \""},{type:b,tag:j,props:{},children:[{type:a,value:hN}]},{type:a,value:"\". If you are behind Fastly,\nyou have to use a CNAME entry and then you have to have a sub domain name and\nnot the top level."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Background:"}]},{type:a,value:" In DNS, a top level domain name (i.e. \"example.org\") can "},{type:b,tag:B,props:{},children:[{type:a,value:"only"}]},{type:a,value:"\nhave "},{type:b,tag:j,props:{},children:[{type:a,value:di}]},{type:a,value:" records. Since Fastly requires we use a "},{type:b,tag:j,props:{},children:[{type:a,value:dj}]},{type:a,value:" entry, we have no\nchoice but to use a sub domain name."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Let's say that we will then use \""},{type:b,tag:j,props:{},children:[{type:a,value:"http:\u002F\u002Fdiscourse.example.org\u002F"}]},{type:a,value:"\" to serve our\nDiscourse forum so we can use Fastly."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Now there's this thing called \"long polling\" which is basically an "},{type:b,tag:j,props:{},children:[{type:a,value:"OPTION"}]},{type:a,value:" HTTP\nrequest with a long time before returning anything. If we use the Fastly or\nVarnish address, as Discourse would by default, Varnish will time out and \"long\npolling\" won't work."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"More background:"}]},{type:a,value:" Varnish has this option to bypass in known contexts through\n"},{type:b,tag:j,props:{},children:[{type:a,value:"vcl_pipe"}]},{type:a,value:" which is roughly a raw TCP socket. But Fastly doesn't offer it\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fcommunity.fastly.com\u002Ft\u002Fvcl-pipe-heads-up\u002F163",rel:[q,r,s],target:t},children:[{type:a,value:"because of the "},{type:b,tag:B,props:{},children:[{type:a,value:"size"}]},{type:a,value:" of their setup"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:al,props:{id:hJ},children:[{type:b,tag:m,props:{href:"#proposed-setup",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:hK}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Let's enable long polling and expose our site under Fastly. We'll need two\nnames, one pointing to Fastly's and the other to the IP addresses we give within\nthe service dashboard."}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"discourse.example.org"}]},{type:a,value:" that's our desired Discourse site domain name"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:hO}]},{type:a,value:" (pick any name) that we'll configure in\nDiscourse to access directly to our public facing frontend web server"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In my case, I generally have many web apps running that are only accessible from\nmy internal network. I refer to them as \"upstream\"; the same term NGINX uses in\ntheir config. Since this number of web apps you would host on a site can\nfluctuate, you might still want the number public IP address to remain stable.\nThat's why I setup a NGINX server in front that proxies to internal web app\nserver. I refer to them as \"frontends\"."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Let's say you have two public facing frontends running NGINX."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Those would be the ones you setup in Fastly like this."}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:hP,figcaption:g},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:hQ}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Here we see two "},{type:b,tag:B,props:{},children:[{type:a,value:"Backends"}]},{type:a,value:" in Fastly pannel at "},{type:b,tag:j,props:{},children:[{type:a,value:hR}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Notice that in this example i'm using "},{type:b,tag:j,props:{},children:[{type:a,value:dk}]},{type:a,value:" port because my backends are\nconfigured to communicate between Fastly and my frontends through TLS. But you\ndon't need to."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Quoting again @sam;"}]},{type:a,value:e},{type:b,tag:cS,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:hL,rel:[q,r,s],target:t},children:[{type:a,value:hM}]},{type:a,value:" To server \"long polling\" requests from a different domain, set the\nSite Setting long polling base url to the origin server."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Really means here is that we would have to put one of those IP addresses in\nDiscourse settings."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"What I'd recommend is to create a list of "},{type:b,tag:j,props:{},children:[{type:a,value:di}]},{type:a,value:" entries for all your frontends."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In the end we need three things:"}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"What's the public name that Fastly will serve"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Which IPs are the frontends"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Which hostname we want to use for long polling and we'll add it to our\nVirtualHost"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The zone file would look like this;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,hS]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"# The public facing URL\ndiscourse.example.org.  "},{type:b,tag:c,props:{className:[d,cv,o]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cx,o]},children:[{type:a,value:dj}]},{type:a,value:" global.prod.fastly.net.\n\n# The list of IP addresses you’d give to Fastly as origins\u002Fbackends\nfrontends.example.org.  "},{type:b,tag:c,props:{className:[d,cv,o]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cx,o]},children:[{type:a,value:di}]},{type:a,value:" 8.8.8.113\nfrontends.example.org.  "},{type:b,tag:c,props:{className:[d,cv,o]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cx,o]},children:[{type:a,value:di}]},{type:a,value:" 8.8.8.115\n\n# The long polling URL entry\ndiscoursepolling.example.org.  "},{type:b,tag:c,props:{className:[d,cv,o]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cx,o]},children:[{type:a,value:dj}]},{type:a,value:" frontends.example.org.\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"That way you can setup the \"long polling base url\" correctly without setting a\nsingle point of failure."}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fdiscourse-polling-ui.png",figcaption:"In Discourse admin, adjust long polling base url setting"},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Then, we can go in Discourse admin zone and adjust the \"long polling base url\"\nto our other domain name."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,eo]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# \u002Fetc\u002Fnginx\u002Fsites-enabled\u002F10-discourse"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Let’s redirect to SSL, in case somebody tries to access the direct IP with"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# host header."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cu}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:df}]},{type:a,value:cy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:hv}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:dg}]},{type:a,value:hT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cz}]},{type:a,value:"     common_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"return"}]},{type:a,value:cy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"301"}]},{type:a,value:" https:\u002F\u002F"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$server_name"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$request_uri"}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cu}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:df}]},{type:a,value:cy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dk}]},{type:a,value:hU}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:dg}]},{type:a,value:hT}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Rest of NGINX server block"}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Also, I would make a condition if we are in discoursepolling but not"}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# under using anything specific to polling."}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# #TODO; find paths specific to polling"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"To see if it works; look at your web browser developer tool \"Network inspector\"\nfor "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fpoll"}]},{type:a,value:" calls on "},{type:b,tag:j,props:{},children:[{type:a,value:hO}]},{type:a,value:", and see if you have\n"},{type:b,tag:j,props:{},children:[{type:a,value:"200 OK"}]},{type:a,value:" status code."}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fdiscourse-polling.png",figcaption:"Use your web browser developer tools and inspect network traffic to see if requests made to discoursepolling worked"},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note that this screenshot is showing "},{type:b,tag:j,props:{},children:[{type:a,value:dX}]},{type:a,value:" but that's beside the\npoint i'm trying to illustrate."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Hope this helped."}]}]},dir:hE,path:"\u002Fblog\u002F2015\u002F05\u002Fmake-discourse-long-polling-work-behind-fastly",extension:aH,slug:"make-discourse-long-polling-work-behind-fastly",createdAt:dh,updatedAt:dh,category:ak,prettyfiedTemporalDate:{prettified:"Sunday, May 3, 2015",temporalDate:"2015-05-03"}},{title:"Upgrade to Python 2.7.9 on Ubuntu 14.04 LTS and make your own .deb package for deployment",locale:aV,created:"2015-04-05T00:00:00.000Z",updated:bB,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F04\u002Fupgrade-python-2-7-9-ubuntu-14-04-lts-making-deb-package\u002F",status:aG,revising:aq,caption:am,caracteresBizzares:am,gallery:am,migrateCode:aq,migrateImages:am,migrateLinks:am,categories:[ak],tags:[cq,aQ,bs,hV],keywords:["Python",hW],excerpt:"Need to run your web app with Python 2.7.9, but server environment uses Ubuntu Long Term Support? Don’t replace Python, leverage VirtualEnv instead!",toc:[{id:hX,depth:ae,text:hY},{id:aQ,depth:ae,text:bT},{id:hZ,depth:ae,text:h_},{id:h$,depth:ac,text:ia},{id:ib,depth:ae,text:ic}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"I had this post hanging in my drafts on how I attempted to install a valid\nPython 2.7.9 runtime environment on Ubuntu 14.04 and make my own .deb package\nfor easy re-deployment."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"IMPORTANT"}]},{type:a,value:" This procedure isn't complete as I had to shift focus elsewhere. I\nmight rework this article to adjust what's missing."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"While I understand that Ubuntu 14.04 "},{type:b,tag:m,props:{href:"https:\u002F\u002Faskubuntu.com\u002Fquestions\u002F559036\u002Fwhen-will-the-python-2-7-9-upgrades-be-available-from-apt-get-for-14-04lts#answer-560159",rel:[q,r,s],target:t},children:[{type:a,value:"will"}]},{type:a,value:g},{type:b,tag:m,props:{href:"https:\u002F\u002Fserverfault.com\u002Fquestions\u002F669859\u002Fhow-can-i-upgrade-python-to-2-7-9-on-ubuntu-14-4",rel:[q,r,s],target:t},children:[{type:a,value:"remain"}]},{type:a,value:" using "},{type:b,tag:B,props:{},children:[{type:a,value:"Python 2.7.6"}]},{type:a,value:"\ninternally, applications we run can be configured to use another python\nenvironment. Its what virtualenv is all about after all, isn't it."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This post attempts to install, and make an installable "},{type:b,tag:B,props:{},children:[{type:a,value:ex}]},{type:a,value:" package of\n"},{type:b,tag:Q,props:{},children:[{type:a,value:"Python 2.7.9"}]},{type:a,value:" and is meant to be used by web applications without touching\nthe system's python runtime."}]},{type:a,value:e},{type:b,tag:al,props:{id:hX},children:[{type:b,tag:m,props:{href:"#why-not-replacing-internal-python-version",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:hY}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The reason is simple. If you replace internal Python version, other softwares\nwithin the OS will have broken dependencies."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I realized this while I wanted to upgrade the version and breaking an hard\ndependency I have on Salt Stack. Since many components within a given Ubuntu\nversion relies on Python, it could break anything else. This is why I stopped\nworking on the idea of replacing internally, but instead to configure VirtualEnv\nto use another version instead."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you see procedures that shows you to replace telling you to use\n"},{type:b,tag:j,props:{},children:[{type:a,value:"update-alternatives"}]},{type:a,value:" to replace python, don't do it! Go instead learn how to\nrun your own Python version in VirtualEnv."}]},{type:a,value:e},{type:b,tag:al,props:{id:aQ},children:[{type:b,tag:m,props:{href:ey,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:bT}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Install build dependencies"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Those were the ones I ran last before a successful build on "},{type:b,tag:Q,props:{},children:[{type:a,value:"Ubuntu 14.04\nLTS"}]},{type:a,value:", if you aren't using the same distribution, you might get a different\nlist."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        autotools-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        blt-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"bzip2"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        dpkg-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        g++-multilib "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        gcc-multilib "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:id},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:id},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ie},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ie},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:if0},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:if0},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libffi-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libffi6 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libffi6-dbg "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libgdbm-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libgpm2 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libncursesw5-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libreadline-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libsqlite3-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ig},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ig},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        libtinfo-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        mime-support "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        net-tools "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        netbase "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        python-crypto "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        python-mox3 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        python-pil "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        python-ply "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        quilt "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        tk-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        zlib1g-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        zlib1g-dev\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ae},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Get Python sources and compile"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ez}]},{type:a,value:" https:\u002F\u002Fwww.python.org\u002Fftp\u002Fpython\u002F2.7.9\u002FPython-2.7.9.tgz\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ih}]},{type:a,value:" xfz Python-2.7.9.tgz\n"},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:" Python-2.7.9\u002F\n.\u002Fconfigure "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"--prefix"}]},{type:a,value:" \u002Fusr\u002Flocal\u002Flib\u002Fpython2.7.9 --enable-ipv6\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ii}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ii}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ac},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Test if the version works"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fusr\u002Flocal\u002Flib\u002Fpython2.7.9\u002Fbin\u002Fpython "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-V"}]},{type:a,value:"\n\nPython "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2.7"}]},{type:a,value:".9\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:cA},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Then prepare package through FPM"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        ruby-dev "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        gcc\n\ngem "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:ij}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Its basically about creating a .deb based on your new runtime setup. You can do\nthat by using "},{type:b,tag:m,props:{href:eA,rel:[q,r,s],target:t},children:[{type:a,value:eB}]},{type:a,value:" (\"Fabulous Package Manager\"), I am "},{type:b,tag:m,props:{href:ik,rel:[q,r,s],target:t},children:[{type:a,value:"using this technique\nin a post I published recently about installing a PHP library"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:al,props:{id:hZ},children:[{type:b,tag:m,props:{href:"#incomplete-scratchpad",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:h_}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"But that's as far as my notes goes for now. Sorry about that."}]},{type:a,value:e},{type:b,tag:af,props:{id:h$},children:[{type:b,tag:m,props:{href:"#setuptools",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ia}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"As per recommended in "},{type:b,tag:m,props:{href:"https:\u002F\u002Fpypi.python.org\u002Fpypi\u002Fsetuptools#unix-wget",rel:[q,r,s],target:t},children:[{type:a,value:"Setuptools instructions"}]},{type:a,value:", we can run "},{type:b,tag:j,props:{},children:[{type:a,value:"easy_install"}]},{type:a,value:"\nthrough a "},{type:b,tag:j,props:{},children:[{type:a,value:ez}]},{type:a,value:", like so;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ez}]},{type:a,value:" https:\u002F\u002Fbootstrap.pypa.io\u002Fez_setup.py "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-O"}]},{type:a,value:" - "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:" \u002Fusr\u002Flocal\u002Flib\u002Fpython2.7.9\u002Fbin\u002Fpython\n\n  \u002Fusr\u002Flocal\u002Flib\u002Fpython2.7.9\u002Fbin\u002Feasy_install pip\n  \u002Fusr\u002Flocal\u002Flib\u002Fpython2.7.9\u002Fbin\u002Fpip "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:" virtualenv\n\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Then, create symbolic links"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:il}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:c_}]},{type:a,value:" \u002Fusr\u002Flocal\u002Flib\u002Fpython2.7.9\u002Fbin\u002Feasy_install \u002Fusr\u002Fbin\u002Feasy_install\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:il}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:c_}]},{type:a,value:" \u002Fusr\u002Flocal\u002Flib\u002Fpython2.7.9\u002Fbin\u002Fpip \u002Fusr\u002Fbin\u002Fpip\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You can try if it worked"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"pip list\n\n  pip "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"6.0"}]},{type:a,value:".8"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:"\n  setuptools "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"14.3"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:"\n  virtualenv "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"12.0"}]},{type:a,value:".7"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:al,props:{id:ib},children:[{type:b,tag:m,props:{href:"#resources",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ic}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:im,rel:[q,r,s],target:t},children:[{type:a,value:im}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:in0,rel:[q,r,s],target:t},children:[{type:a,value:in0}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:io,rel:[q,r,s],target:t},children:[{type:a,value:io}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:ip,rel:[q,r,s],target:t},children:[{type:a,value:ip}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:iq,rel:[q,r,s],target:t},children:[{type:a,value:iq}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:ir,rel:[q,r,s],target:t},children:[{type:a,value:ir}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:is,rel:[q,r,s],target:t},children:[{type:a,value:is}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"http:\u002F\u002Fwww.stylesen.org\u002Fpython%5C_27%5C_debian%5C_squeeze%5C_60",rel:[q,r,s],target:t},children:[{type:a,value:"http:\u002F\u002Fwww.stylesen.org\u002Fpython\\_27\\_debian\\_squeeze\\_60"}]}]},{type:a,value:e}]}]},dir:eC,path:"\u002Fblog\u002F2015\u002F04\u002Fupgrade-python-2-7-9-ubuntu-14-04-lts-making-deb-package",extension:aH,slug:"upgrade-python-2-7-9-ubuntu-14-04-lts-making-deb-package",createdAt:cB,updatedAt:"2024-10-24T19:50:04.932Z",category:ak,prettyfiedTemporalDate:{prettified:"Sunday, April 5, 2015",temporalDate:"2015-04-05"}},{title:"Setting up Discourse with Fastly as a CDN provider and TLS",locale:aV,created:"2015-04-29T00:00:00.000Z",updated:bB,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F04\u002Fsetting-discourse-fastly-cdn-provider-ssl\u002F",status:aG,revising:aq,caption:am,caracteresBizzares:am,gallery:am,migrateCode:aq,migrateImages:aq,migrateLinks:am,categories:[ak],tags:[bs,bS,cq,bl,"caching","varnish"],keywords:[ev,ew,bE,"TLS","NGINX",hF],preamble:{text:hI},coverImage:{src:hG,text:hH},excerpt:"Here’s how I setup a Discourse web application so that I can scale it by adding more Docker instances while keeping a low number of exposed web servers",description:"Allow horizontal scaling by separating internal app servers from exposed frontend web servers",title_alternate:it,toc:[{id:iu,depth:ae,text:iv},{id:cX,depth:ae,text:cY}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"The following is a copy of what I published in a question on\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Fenable-a-cdn-for-your-discourse\u002F14857\u002F26?u=renoirb",rel:[q,r,s],target:t},children:[{type:b,tag:B,props:{},children:[{type:a,value:"meta.discourse.org"}]},{type:a,value:" about \""},{type:b,tag:Q,props:{},children:[{type:a,value:it}]},{type:a,value:F}]},{type:a,value:" while\nworking on "},{type:b,tag:B,props:{},children:[{type:a,value:"discuss.webplatform.org"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:al,props:{id:iu},children:[{type:b,tag:m,props:{href:"#setup-detail",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:iv}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Our setup uses "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.fastly.com\u002F",rel:[q,r,s],target:t},children:[{type:a,value:bE}]},{type:a,value:", and leverage "},{type:b,tag:m,props:{href:iw,rel:[q,r,s],target:t},children:[{type:a,value:"their SSL feature"}]},{type:a,value:". Note that in\norder for you to use SSL too, you'll have to contact them to have it onto your\naccount."}]},{type:a,value:e},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"SEE ALSO"}]},{type:a,value:" this "},{type:b,tag:bj,props:{to:ix},children:[{type:a,value:"post about "},{type:b,tag:B,props:{},children:[{type:a,value:iy}]}]},{type:a,value:". This step is "},{type:b,tag:Q,props:{},children:[{type:a,value:"required"}]},{type:a,value:" and is a logical next step to this\nprocedure."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In summary;"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:iz},{type:b,tag:B,props:{},children:[{type:a,value:"users"}]},{type:a,value:bN},{type:b,tag:B,props:{},children:[{type:a,value:bE}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:iz},{type:b,tag:B,props:{},children:[{type:a,value:bE}]},{type:a,value:" and \""},{type:b,tag:B,props:{},children:[{type:a,value:eD}]},{type:a,value:"\" servers. (That's the IP we put into\nFastly hosts configuration, and are also refered to as \"origins\" or \"backends\"\nin CDN-speak)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Docker Discourse instance (\""},{type:b,tag:B,props:{},children:[{type:a,value:dl}]},{type:a,value:"\") which listens only on private network\nand port (e.g. "},{type:b,tag:B,props:{},children:[{type:a,value:"10.10.10.3:8000"}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"More than two publicly exposed web servers (\""},{type:b,tag:B,props:{},children:[{type:a,value:eD}]},{type:a,value:"\"), with SSL, that we\nuse as \""},{type:b,tag:B,props:{},children:[{type:a,value:"backends"}]},{type:a,value:"\" in "},{type:b,tag:B,props:{},children:[{type:a,value:bE}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:eD}]},{type:a,value:" server running NGINX with an "},{type:b,tag:m,props:{href:"https:\u002F\u002Fnginx.org\u002Fen\u002Fdocs\u002Fhttp\u002Fngx_http_upstream_module.html",rel:[q,r,s],target:t},children:[{type:b,tag:B,props:{},children:[{type:a,value:dl}]},{type:a,value:" block"}]},{type:a,value:" proxying\ninternal "},{type:b,tag:B,props:{},children:[{type:a,value:dl}]},{type:a,value:" web servers that the Discourse Docker provides."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"We use NGINX's "},{type:b,tag:j,props:{},children:[{type:a,value:iA}]},{type:a,value:" HTTP header in the frontend to make sure we\nminimize connections"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Using this method, if we need to scale, we only need add more internal\n"},{type:b,tag:B,props:{},children:[{type:a,value:"Discourse Docker instances"}]},{type:a,value:", we can add more NGINX upstream entries."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note that I recommend to use direct private IP addresses instead of internal\nnames. It removes complexity and the need to rewrite "},{type:b,tag:j,props:{},children:[{type:a,value:"Hosts:"}]},{type:a,value:" HTTP headers."}]},{type:a,value:e},{type:b,tag:al,props:{id:cX},children:[{type:b,tag:m,props:{href:he,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:cY}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Everything is the same as basic Fastly configuration, refer to "},{type:b,tag:m,props:{href:"https:\u002F\u002Fdocs.fastly.com\u002Fguides\u002Fgetting-started\u002Fsign-up-and-create-your-first-service",rel:[q,r,s],target:t},children:[{type:a,value:"setup your\ndomain"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Here are the differences;"}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Setup your domain name with the CNAME Fastly will provide you ("},{type:b,tag:m,props:{href:iw,rel:[q,r,s],target:t},children:[{type:a,value:"you will have\nto contact them for your account though"}]},{type:a,value:"), ours is like that ;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,hS]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"discuss.webplatform.org. "},{type:b,tag:c,props:{className:[d,cv,o]},children:[{type:a,value:cw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,cx,o]},children:[{type:a,value:dj}]},{type:a,value:" webplatform.map.fastly.net.\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In Fastly pannel at "},{type:b,tag:j,props:{},children:[{type:a,value:hR}]},{type:a,value:", we tell which publicly available\n"},{type:b,tag:B,props:{},children:[{type:a,value:iB}]},{type:a,value:" IPs"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Notice we use port "},{type:b,tag:j,props:{},children:[{type:a,value:dk}]},{type:a,value:aK},{type:b,tag:m,props:{href:"https:\u002F\u002Fdocs.fastly.com\u002Fguides\u002Fssl\u002Fcan-i-use-ssl-to-communicate-to-my-backend-servers",rel:[q,r,s],target:t},children:[{type:a,value:"so SSL is between "},{type:b,tag:B,props:{},children:[{type:a,value:bE}]},{type:a,value:" and our "},{type:b,tag:B,props:{},children:[{type:a,value:iB}]}]},{type:a,value:".\nAlso, you "},{type:b,tag:Q,props:{},children:[{type:a,value:"can"}]},{type:a,value:" setup "},{type:b,tag:B,props:{},children:[{type:a,value:"Shielding"}]},{type:a,value:" (which is how you activate the CDN behavior\nwithin Fastly) by enabling it on only one. I typically set it on the one I call\n\"first\"."}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:hP,figcaption:hQ},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:aa,props:{start:ac},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"In Fastly pannel "},{type:b,tag:j,props:{},children:[{type:a,value:"Configure -\u003E Settings -\u003E Request Settings"}]},{type:a,value:"; we make sure we\nforward "},{type:b,tag:j,props:{},children:[{type:a,value:"X-Forwarded-For"}]},{type:a,value:" header. You "},{type:b,tag:Q,props:{},children:[{type:a,value:"DONT"}]},{type:a,value:" need this; you can remove it."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F04\u002Fdiscuss-fastly-XFF.png",figcaption:"Fastly service configuration, at Settings tab"},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:aa,props:{start:cA},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Frontend NGINX server has a block similar to this."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In our case, we use "},{type:b,tag:m,props:{href:"https:\u002F\u002Fsaltstack.com\u002Fcommunity\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Salt Stack"}]},{type:a,value:" as the configuration management system, it\nbasically generates the Virtual Hosts for us as using "},{type:b,tag:m,props:{href:"https:\u002F\u002Fdocs.saltstack.com\u002Fen\u002Flatest\u002Ftopics\u002Freactor\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Salt reactor"}]},{type:a,value:" system.\nEvery time a Docker instance would become available, the configuration will be\nrewritten using this template."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"{{ upstream_port }}"}]},{type:a,value:" would be at "},{type:b,tag:j,props:{},children:[{type:a,value:"8000"}]},{type:a,value:" in this example"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"{{ upstreams }}"}]},{type:a,value:" would be an array of current internal Docker instances, e.g.\n"},{type:b,tag:j,props:{},children:[{type:a,value:"['10.10.10.3','10.10.10.4']"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"{{ tld }}"}]},{type:a,value:" would be "},{type:b,tag:B,props:{},children:[{type:a,value:dX}]},{type:a,value:" in production, but can be anything else\nwe need in other deployment, it gives great flexibility."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Notice the use of "},{type:b,tag:j,props:{},children:[{type:a,value:"discoursepolling"}]},{type:a,value:" alongside the "},{type:b,tag:j,props:{},children:[{type:a,value:iC}]},{type:a,value:" subdomain name.\nRefer to "},{type:b,tag:bj,props:{to:ix},children:[{type:a,value:"this post about "},{type:b,tag:B,props:{},children:[{type:a,value:iy}]}]},{type:a,value:" to understand its purpose"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,eo]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:dl}]},{type:a,value:" upstream_discourse"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:"%- for b in upstreams %"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cu}]}]},{type:a,value:"    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:" b "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:" upstream_port "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:"%- endfor %"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:iA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"16"}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cu}]}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:df}]},{type:a,value:cy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dk}]},{type:a,value:hU}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:dg}]},{type:a,value:" discoursepolling."}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:iD},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"discourse."}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:iD},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aB}]},{type:a,value:"    \u002Fvar\u002Fwww\u002Fhtml"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cz}]},{type:a,value:" common_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cz}]},{type:a,value:" ssl_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"ssl"}]},{type:a,value:iE},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:iF}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"ssl_certificate"}]},{type:a,value:"     \u002Fetc\u002Fssl\u002F2015\u002Fdiscuss.pem"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"ssl_certificate_key"}]},{type:a,value:" \u002Fetc\u002Fssl\u002F2015\u002F201503.key"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Use internal Docker runner instance exposed port"}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:hw}]},{type:a,value:hx}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"proxy_pass"}]},{type:a,value:"             http:\u002F\u002Fupstream_discourse"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cz}]},{type:a,value:"                proxy_params"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"proxy_intercept_errors"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:iF}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:"\n\n        "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Backend keepalive"}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# ref: http:\u002F\u002Fnginx.org\u002Fen\u002Fdocs\u002Fhttp\u002Fngx_http_upstream_module.html#keepalive"}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"proxy_http_version"}]},{type:a,value:" 1.1"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,aj]},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"proxy_set_header"}]},{type:a,value:" Connection "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cC}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note that I removed the "},{type:b,tag:j,props:{},children:[{type:a,value:"include proxy_params;"}]},{type:a,value:" line. If you have lines similar\nto "},{type:b,tag:j,props:{},children:[{type:a,value:"proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"}]},{type:a,value:", you don't\nneed them (!)"}]}]},dir:eC,path:"\u002Fblog\u002F2015\u002F04\u002Fsetting-discourse-fastly-cdn-provider-ssl",extension:aH,slug:"setting-discourse-fastly-cdn-provider-ssl",createdAt:cB,updatedAt:cB,category:ak,prettyfiedTemporalDate:{prettified:"Wednesday, April 29, 2015",temporalDate:"2015-04-29"}},{title:"Install Discourse and Docker on Ubuntu 14.04 with aufs enabled",locale:aV,created:"2015-04-02T00:00:00.000Z",updated:bB,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F04\u002Finstall-discourse-docker-ubuntu-14-04-aufs-enabled\u002F",status:aG,revising:aq,categories:[ak],tags:["standardization",dm,aQ],keywords:[bm,iC,eE,hW,"makefile"],excerpt:"I needed to install a set of VMs to run apps within Docker containers. In the case of Discourse, docker requires you to use aufs instead of devicemapper.",toc:[{id:aQ,depth:ae,text:bT}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"While working to run "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.discourse.org\u002F",rel:[q,r,s],target:t},children:[{type:a,value:ev}]},{type:a,value:dn},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.docker.com\u002F",rel:[q,r,s],target:t},children:[{type:a,value:ew}]},{type:a,value:" I was getting numerous errors\nabout a mount problem related to device mapper."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you are using Ubuntu 14.04 LTS, want to solve the problem with aufs, and use\nSalt Stack to control your VMs, here's how I did it."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"After digging "},{type:b,tag:m,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Fdocker-error-on-bootstrap\u002F13657\u002F9",rel:[q,r,s],target:t},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:m,props:{href:"https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Fubuntu-updates-intefere-with-docker-and-aufs\u002F25039",rel:[q,r,s],target:t},children:[{type:a,value:"some"}]},{type:a,value:" time, I found others who had also problems to\nrun Discourse in Docker, and that we had to use \"aufs\"."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I had no idea that we could use different mount subsystems in Docker."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"So I had to read some more on we can find out if we have "},{type:b,tag:j,props:{},children:[{type:a,value:eE}]},{type:a,value:" (whatever this\nis), and that we can tell whether or not Docker is configured to use it."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fdocker\u002Fdocker\u002Fissues\u002F10161",rel:[q,r,s],target:t},children:[{type:a,value:"issue docker\u002Fdocker#10161"}]},{type:a,value:" had proven very helpful to figure out what\nwas my problem. I never thought I could tell Docker to use another device mapper\nengine anyway. In the end, all you can do is to add a "},{type:b,tag:j,props:{},children:[{type:a,value:"-s foo"}]},{type:a,value:" and it can change\nthe Storage engine."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Turns out that "},{type:b,tag:j,props:{},children:[{type:a,value:eE}]},{type:a,value:" is a Kernel module, and that latest Ubuntu 14.04 has it\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fdocker\u002Fdocker\u002Fpull\u002F10860",rel:[q,r,s],target:t},children:[{type:a,value:"but not in the default kernel package"}]},{type:a,value:". You have to make sure that\n"},{type:b,tag:j,props:{},children:[{type:a,value:"linux-image-extra-virtual"}]},{type:a,value:bN},{type:b,tag:j,props:{},children:[{type:a,value:"aufs-tools"}]},{type:a,value:" are installed."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Documentation and notes recommends to download and "},{type:b,tag:m,props:{href:"https:\u002F\u002Fget.docker.com\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"run a shell script"}]},{type:a,value:" to\ninstall Docker instead of using the distribution packages. But I refuse to\nfollow this advice because I already manage via Salt stack every components of\nthe infrastructure. I just needed to put the right pieces together."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Since those changes are specific to Discourse I didn't wanted to make a pull\nrequest to "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fsaltstack-formulas\u002Fdocker-formula",rel:[q,r,s],target:t},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"saltstack-formulas\u002Fdocker-formula"}]}]},{type:a,value:" right away, i'd need to\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fdocs.saltstack.com\u002Fen\u002Flatest\u002Ftopics\u002Fdevelopment\u002Fconventions\u002Fformulas.html",rel:[q,r,s],target:t},children:[{type:a,value:"follow Salt formula conventions"}]},{type:a,value:" and add more logic for my PR to be usable\nby other server runtime too. Not something I had in my plans today."}]},{type:a,value:e},{type:b,tag:al,props:{id:aQ},children:[{type:b,tag:m,props:{href:ey,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:bT}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On the salt master, make sure you have the following:"}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Add "},{type:b,tag:j,props:{},children:[{type:a,value:"saltstack-formulas\u002Fdocker-forumla"}]},{type:a,value:" in your gitfs entries"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,bG]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# \u002Fetc\u002Fsalt\u002Fmaster.d\u002Fgitfs.conf"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"fileserver_backend"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" roots\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" git\n\n"},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"gitfs_remotes"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:iG},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"\u002F\u002Fgithub.com\u002Fsaltstack"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"formulas\u002Fdocker"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"formula.git\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ae},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Ensure you have "},{type:b,tag:j,props:{},children:[{type:a,value:bm}]},{type:a,value:" in your base top file"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,bG]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# \u002Fsrv\u002Fsalt\u002Ftop.sls"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"base"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"'backend-discourse*'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" discourse\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ac},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Create add those lines in "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fsrv\u002Fsalt\u002Fdiscourse\u002Finit.sls"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,bG]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# https:\u002F\u002Fgithub.com\u002Fsaltstack-formulas\u002Fdocker-formula"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:"% set kernelrelease = salt"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'grains.get'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"('kernelrelease') "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:eF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" set dir = '\u002Fsrv\u002Fwebplatform\u002Fdiscourse' "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:cz}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" docker\n\n"},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"\u002Fetc\u002Fdefault\u002Fdocker"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"contents"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,"scalar",p]},children:[{type:a,value:"\n        # Docker Upstart and SysVinit configuration file\n        #\n        # Managed by Salt Stack, at {{ source }}. Do NOT edit manually!\n        # Docker dependencies: Refer to the script at https:\u002F\u002Fget.docker.com\u002F\n        # Available cli options: http:\u002F\u002Fdocs.docker.com\u002Freference\u002Fcommandline\u002Fcli\u002F\n        DOCKER_OPTS=\"--dns 8.8.8.8 -s aufs\""}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"watch_in"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:dd}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" docker"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"service\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:eG}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:eH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" lxc"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"docker\n      "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:eH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:iI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"kernel"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"deps\n\n"},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"linux-kernel-deps"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iJ}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"pkgs"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:iI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"image"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"extra"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:" kernelrelease "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" aufs"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"tools\n  "},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"cmd.run"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" modprobe aufs\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iK}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" modinfo aufs "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:V}]},{type:a,value:" \u002Fdev\u002Fnull 2"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,aW]},children:[{type:a,value:"&1"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"clone-discourse"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iJ}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:iL},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"git.latest"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:iG},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"\u002F\u002Fgithub.com\u002Fdiscourse\u002Fdiscourse_docker.git\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:cD}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:eI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"target"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:dp},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iK}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" test "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"f "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:dp},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:"\u002Fcontainers\u002Fapp.yml\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:eG}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"file"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:dp},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:eH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:iL},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"file.directory"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:do0}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:dp},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:cD}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:eI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iM}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:eI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"recurse"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" user\n      "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" group\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:cA},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Restart your salt master service, sync everything and run highstate"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dd}]},{type:a,value:" salt-master restart\nsalt "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"* saltutil.sync_all\nsalt "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"* service.restart salt-minion\nsalt discourse-backend"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:iN}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:iO},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Go to the VM and run the installer"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note that as long as there is no "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fsrv\u002Fwebplatform\u002Fdiscourse\u002Fcontainers\u002Fapp.yml"}]},{type:a,value:"\nthe states will update the git "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fdiscourse\u002Fdiscourse_docker",rel:[q,r,s],target:t},children:[{type:a,value:"repository to the latest version"}]},{type:a,value:". In my\nprojects, I make sure that salt also generates a configuration file with my\ncurrent environment details (e.g. DNS, Salt master, Redis, SMTP relay, Postgres'\nprivate IP addresses)."}]}]},dir:eC,path:"\u002Fblog\u002F2015\u002F04\u002Finstall-discourse-docker-ubuntu-14-04-aufs-enabled",extension:aH,slug:"install-discourse-docker-ubuntu-14-04-aufs-enabled",createdAt:cB,updatedAt:cB,category:ak,prettyfiedTemporalDate:{prettified:"Thursday, April 2, 2015",temporalDate:"2015-04-02"}},{title:"Install PHP5 Memcached PECL extension and have it support igbinary",locale:aV,created:"2015-02-18T00:00:00.000Z",updated:bB,canonical:ik,status:aG,revising:am,migrateLinks:aq,migrateImages:am,gallery:am,caption:am,categories:[ak],tags:[bl,bS,aQ],keywords:["Memcached","PECL","Ubuntu","dpkg","PHP5","php-fpm"],coverImage:{src:"~\u002Fassets\u002Fimages\u002Flogos\u002Fphp-igbinary.png",text:"[Igbinary][igbinary-github] is a drop in replacement for the standard *PHP serializer*.\nInstead of the time and space consuming textual representation used by PHP’s serialize, *igbinary* stores PHP data structures in a compact binary form.\n[igbinary-github]: https:\u002F\u002Fgithub.com\u002Figbinary\u002Figbinary\n"},excerpt:"Main part of my job is to make sure that its easy to reinstall a VM. Sometimes you need to build a package from source. How do you distribute it? Here’s one way",toc:[{id:iP,depth:ae,text:iQ},{id:iR,depth:ae,text:iS},{id:iT,depth:ae,text:iU},{id:bL,depth:ae,text:bM}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"I was trying to figure out why my PHP setup would never have both "},{type:b,tag:j,props:{},children:[{type:a,value:iV}]},{type:a,value:" to\nbe used to serialize sessions in Memcached using current Memcached PECL\nextension."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"After some research I found a procedure in an answer on StackOverflow."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"But it didn't solve my main requirement: "},{type:b,tag:Q,props:{},children:[{type:a,value:"Since I do automated deployment, I\nMUST be able to move packages around"}]},{type:a,value:". Since all my VMs are using the same\ndistribution and that I already have my own "},{type:b,tag:B,props:{},children:[{type:a,value:iW}]},{type:a,value:" repo, I could just add "},{type:b,tag:B,props:{},children:[{type:a,value:"one\nmore"}]},{type:a,value:" deb file."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"My objective was then now to package it for deployment. To do this, I discovered\n"},{type:b,tag:m,props:{href:eA,rel:[q,r,s],target:t},children:[{type:a,value:"Jordan Sissel's project called "},{type:b,tag:Q,props:{},children:[{type:a,value:eB}]}]},{type:a,value:" which stands for \""},{type:b,tag:B,props:{},children:[{type:a,value:"Freaking Package\nManager"}]},{type:a,value:"\" (sic)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"My target deployment runs on Ubuntu 14.04 LTS and I want it to replace upstream\n"},{type:b,tag:j,props:{},children:[{type:a,value:"php5-memcached"}]},{type:a,value:" package as a simple "},{type:b,tag:B,props:{},children:[{type:a,value:ex}]},{type:a,value:" file."}]},{type:a,value:e},{type:b,tag:al,props:{id:iP},children:[{type:b,tag:m,props:{href:"#build-from-pecl-source",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:iQ}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"NOTE"}]},{type:a,value:" The following was run on an Ubuntu 14.04 VM with "},{type:b,tag:m,props:{href:iX,rel:[q,r,s],target:t},children:[{type:a,value:"@rynop's procedure"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Setting the machine up to make a package."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bD}]},{type:a,value:iY},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:iY},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bF}]},{type:a,value:" php5-dev pkg-config php-pear\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ae},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Follow steps from the procedure. Those were taken from the "},{type:b,tag:B,props:{},children:[{type:b,tag:m,props:{href:iX,rel:[q,r,s],target:t},children:[{type:a,value:"Original procedure"}]}]},{type:a,value:", just before issuing "},{type:b,tag:j,props:{},children:[{type:a,value:".\u002Fconfigure"}]},{type:a,value:$}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"pecl_memcached_ver"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"2.2.0\""}]},{type:a,value:"\npecl download memcached-"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eJ}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ih}]},{type:a,value:" xzvf memcached-"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eJ}]},{type:a,value:".tgz\n"},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:" memcached-"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:eJ}]},{type:a,value:"\u002F\nphpize\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ac},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"I realized that under Ubuntu 14.04 we also needed to "},{type:b,tag:B,props:{},children:[{type:a,value:"disable Memcached SASL"}]},{type:a,value:"\nso I had to do it differently"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:".\u002Fconfigure "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n    --enable-memcached-igbinary "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n    --disable-memcached-sasl\n"}]}]}]},{type:a,value:e},{type:b,tag:al,props:{id:iR},children:[{type:b,tag:m,props:{href:"#make-a-deb-package",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:iS}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Install "},{type:b,tag:m,props:{href:eA,rel:[q,r,s],target:t},children:[{type:a,value:"jordansissel\u002Ffpm"}]},{type:a,value:". Ideally this should be done on a machine or VM\nimage you're OK building things on and you can re-use."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bF}]},{type:a,value:" ruby-dev gcc\n\n"},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Install fpm gem globally."}]},{type:a,value:"\ngem "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:ij}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ae},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Check the package contents you want to replace and let's replicate for our\nown purposes."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:iZ},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"--list"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:i_}]},{type:a,value:" php5-memcached\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"find"}]},{type:a,value:" \u002Fvar\u002Fcache\u002Fapt "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-type"}]},{type:a,value:" f "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-name"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'*php5-memcached*'"}]},{type:a,value:"\ndpkg "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-c"}]},{type:a,value:" \u002Fvar\u002Fcache\u002Fapt\u002Farchives\u002Fphp5-memcached_2.1.0-6build1_amd64.deb\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ac},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"I figured out in the output that I only needed a few folders,\n"},{type:b,tag:j,props:{},children:[{type:a,value:"etc\u002Fphp5\u002Fmods-available\u002F"}]},{type:a,value:bN},{type:b,tag:j,props:{},children:[{type:a,value:"usr\u002Flib\u002Fphp5\u002Ffoo"}]},{type:a,value:", so I created them\nmanually."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:" etc\u002Fphp5\u002Fmods-available\u002F\n\n"},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Adjust memcached.ini to suit your tastes, then prepare it for packaging"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:c$}]},{type:a,value:" memcached.ini etc\u002Fphp5\u002Fmods-available\u002F\n\n"},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Make sure the usr\u002Flib\u002Fphp5\u002Ffoo path matches in"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# the result of `dpkg -c` you issued"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:" usr\u002Flib\u002Fphp5\u002F20121212\u002F\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:c$}]},{type:a,value:" modules\u002Fmemcached.so usr\u002Flib\u002Fphp5\u002F20121212\u002F\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:cA},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Magic will happen"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"fpm "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:c_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"dir"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-t"}]},{type:a,value:" deb "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:" php5-memcached "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2.2"}]},{type:a,value:".0-wpd "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-m"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'\u003Cyour@email.org\u003E'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"--description"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'PHP 5.5 PECL igbinary + memcached support'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-d"}]},{type:a,value:" libmemcached10 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n    etc\u002F usr\u002F\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I could have used "},{type:b,tag:j,props:{},children:[{type:a,value:"--replaces REPLACES"}]},{type:a,value:" in "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fjordansissel\u002Ffpm\u002Fwiki",rel:[q,r,s],target:t},children:[{type:b,tag:j,props:{},children:[{type:a,value:eB}]},{type:a,value:" options"}]},{type:a,value:", but when I did\nthis package, I didn't know which syntax to use. Its an optional argument\nanyway."}]},{type:a,value:e},{type:b,tag:aa,props:{start:iO},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Test if the package works"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:iZ},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-i"}]},{type:a,value:" \u002Fsrv\u002Fwebplatform\u002Fapt\u002Fphp5-memcached_2.2.0-wpd_amd64.deb\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The output ..."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"  (Reading database ... 118781 files and directories currently installed.)\n  Preparing to unpack ...\u002Fphp5-memcached_2.2.0-wpd_amd64.deb ...\n  Unpacking php5-memcached (2.2.0-wpd) over (2.1.0-6build1) ...\n  Setting up php5-memcached (2.2.0-wpd) ...\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Success!"}]},{type:a,value:e},{type:b,tag:aa,props:{start:i$},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Look at the "},{type:b,tag:j,props:{},children:[{type:a,value:"phpinfo"}]},{type:a,value:" output"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F02\u002Fsessions_memcached_after.png",alt:dq},children:[{type:a,value:"\nAter: registered session handlers\n"}]},{type:a,value:e},{type:b,tag:al,props:{id:iT},children:[{type:b,tag:m,props:{href:"#update-your-private-apt-repository-or-create-one",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:iU}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Then, in your own apt repository (if you do have one) here's how I rebuild\nthe index. If you only have a handful of packages, it can simply be a folder\nwith a bunch of deb files."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bu}]},{type:a,value:" \u002Fsrv\u002Fapt\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:c$}]},{type:a,value:" php5-memcached_2.2.0-wpd_amd64.deb \u002Fsrv\u002Fapt\n"},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bt}]},{type:a,value:"  \u002Fsrv\u002Fapt\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bP}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bF}]},{type:a,value:" dpkg-dev\ndpkg-scanpackages "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:" \u002Fdev\u002Fnull "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ja}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-9c"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" Packages.gz\n"},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'deb file:\u002Fsrv\u002Fapt .\u002F'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" \u002Fetc\u002Fapt\u002Fsources.list.d\u002Ffoo.list\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you want something more scalable than a directory with a bunch of "},{type:b,tag:j,props:{},children:[{type:a,value:ex}]},{type:a,value:" and\na "},{type:b,tag:j,props:{},children:[{type:a,value:"Package.gz"}]},{type:a,value:" that you rsync around, there are other procedures available\nonline."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Done!"}]},{type:a,value:e},{type:b,tag:al,props:{id:bL},children:[{type:b,tag:m,props:{href:ee,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:bM}]},{type:a,value:e},{type:b,tag:w,props:{style:cU,className:[cV,cW,es,et,eu]},children:[{type:a,value:e},{type:b,tag:au,props:{className:[bR],src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F02\u002Fsessions_memcached_before2.png",alt:dq},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Session handlers shows memcached"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:au,props:{className:[bR],src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F02\u002Fsessions_memcached_before.png",alt:dq},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:iV}]},{type:a,value:" support no?"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},dir:"\u002Fblog\u002F2015\u002F02",path:"\u002Fblog\u002F2015\u002F02\u002Finstall-php5-memcached-pecl-extension-support-igbinary",extension:aH,slug:"install-php5-memcached-pecl-extension-support-igbinary",createdAt:dr,updatedAt:dr,category:ak,prettyfiedTemporalDate:{prettified:"Wednesday, February 18, 2015",temporalDate:"2015-02-18"}},{title:"Creating a new Ubuntu Salt master from the terminal using Cloud-Init",locale:aV,created:"2015-03-09T00:00:00.000Z",updated:bB,canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F03\u002Fcreating-new-ubuntu-salt-master-terminal-using-cloud-init\u002F",status:aG,revising:aq,caption:am,caracteresBizzares:am,gallery:am,migrateCode:aq,migrateImages:am,migrateLinks:am,categories:[ak],tags:[bs,bl,dm,bS],keywords:["GNU","OpenStack","Cloud Init"],excerpt:"Cloud-Init is made in a way that it handles distribution specific package installation details automatically. With it, you can create a new salt master in a few commands.",coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F03\u002Fopenstack-cloudinit-screenshot.jpg",text:"[Open Stack Cloud-Init](https:\u002F\u002Fcloudinit.readthedocs.io\u002Fen\u002Flatest\u002F) documentation.\n"},description:"Creating new Salt master in a few commands with Cloud-Init",toc:[{id:jb,depth:ae,text:jc}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"If you run on Virtual Machines on a provider that runs OpenStack you can also\nleverage a component that’s made to automatically install softwares at creation\ntime. With this, you can any new node in your cluster, including the salt-master\nin a few terminal commands."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Before starting out, you need to make sure your cloud provider runs Open Stack\nand has "},{type:b,tag:m,props:{href:ds,rel:[q,r,s],target:t,title:dt},children:[{type:a,value:bU}]},{type:a,value:" enabled. To check it out, look in the \"Launch instance\"\ndialog to create a new VM a tab titled \"Post-Creation\", it might just simply\nwork."}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F03\u002Fopenstack-cloudinit-launchinstance-dialog.png",alt:dq},children:[{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:ds,rel:[q,r,s],target:t,title:dt},children:[{type:a,value:bU}]},{type:a,value:" is basically reading a manifest that declares what’s the\nspecifics of the new VM and is part of the conversion from the initial image\nOpenStack into the specific instance you will be using. You can follow those\n"},{type:b,tag:m,props:{href:du,rel:[q,r,s],target:t,title:jd},children:[{type:a,value:"two"}]},{type:a,value:g},{type:b,tag:m,props:{href:du,rel:[q,r,s],target:t,title:eK},children:[{type:a,value:"articles"}]},{type:a,value:" that describes well how "},{type:b,tag:B,props:{},children:[{type:a,value:bU}]},{type:a,value:" works."}]},{type:a,value:e},{type:b,tag:cS,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:ds,rel:[q,r,s],target:t,title:dt},children:[{type:a,value:bU}]},{type:a,value:" is made in a way that it handles distribution specific\npackage installation details automatically."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The following is specific to an "},{type:b,tag:B,props:{},children:[{type:a,value:"Ubuntu server"}]},{type:a,value:" VM, but you might need to adjust\nthe package names to match your current server distribution as those tools are\ngetting more and more popular in the industry."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Before testing out on a new VM, you could also check from an existing instance\nand ask through an HTTP request what was the current instance’ post-creation\nscript using cURL."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note that the IP address you see below is a virtual interface provided by\nOpenStack but can be navigated through HTTP, try it out like this;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:je}]},{type:a,value:" http:\u002F\u002F169.254.169.254\u002Fopenstack\u002F\n\n  "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2012"}]},{type:a,value:"-08-10\n  "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:jf}]},{type:a,value:"-04-04\n  "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:jf}]},{type:a,value:"-10-17\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you see a similar output, you can ask what was the post-creation\nconfiguration (\"userdata\") it used at creation time. You can dig the tree,\nhere’s how you can find it in an OpenStack (CURRENT VERSION NICKNAME) cluster."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"For instance, my a salt master would have the following configuration;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:je}]},{type:a,value:" http:\u002F\u002F169.254.169.254\u002Fopenstack\u002F2013-10-17\u002Fuser_data\n\n  "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:jg}]},{type:a,value:"\n  manage_etc_hosts: "},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:dv}]},{type:a,value:"\n  manage-resolv-conf: "},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:dv}]},{type:a,value:"\n  locale: en_US.UTF-8\n  timezone: America\u002FNew_York\n  package_upgrade: "},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:I}]},{type:a,value:"\n  package_update: "},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:I}]},{type:a,value:"\n  package_reboot_if_required: "},{type:b,tag:c,props:{className:[d,aN]},children:[{type:a,value:I}]},{type:a,value:"\n\n  ssh_import_id: "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:"saltstack"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\n  apt_sources:\n    - source: "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"ppa:saltstack\u002Fsalt\""}]},{type:a,value:"\n\n  packages:\n    - salt-minion\n    - salt-common\n    - salt-master\n    - python-software-properties\n    - software-properties-common\n    - python-novaclient\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"To boot an instance from the terminal, you can use the \"nova\" command like this;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[T,z]},children:[{type:b,tag:j,props:{},children:[{type:a,value:jh},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eL}]},{type:a,value:eM},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n     --user-data \u002Fsrv\u002Fcloudconfig.yml "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eN}]},{type:a,value:" keyname "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eO}]},{type:a,value:" subsonic "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ji},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n     salt\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This assumes that you have the following available in your OpenStack dashboard:"}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"An SSH public key called \"keyname\" in your tenant"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"A flavor called \"subsonic\" that has a predefined configuration of vCPU, vRAM,\netc."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"A security group called \"default\", you could use more than one by separating\nthem by comas; e.g. default,foo,bar"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"A text file in "},{type:b,tag:j,props:{},children:[{type:a,value:jj}]},{type:a,value:" in YAML format that holds your\n"},{type:b,tag:m,props:{href:ds,rel:[q,r,s],target:t,title:dt},children:[{type:a,value:bU}]},{type:a,value:" (a.k.a. \"userdata\") configuration."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"You have your nova configuration available (look in your cloud provider\ndashboard \"Download OpenStack RC File\" link in \"Access & Security\" and \"API\naccess\") and available in your server’s "},{type:b,tag:j,props:{},children:[{type:a,value:jk}]},{type:a,value:" profile folder."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"You have \""},{type:b,tag:j,props:{},children:[{type:a,value:jl}]},{type:a,value:"\" (or its equivalent) installed"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"To test it out yourself, you could use the block I gave earlier and create a\nfile in "},{type:b,tag:j,props:{},children:[{type:a,value:jj}]},{type:a,value:" and give the the "},{type:b,tag:B,props:{},children:[{type:a,value:dw}]},{type:a,value:" command a try."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In this case, you might want to call the new VM \"salt\" as the default Salt stack\nconfiguration will try to communicate to it to make it its salt master. In this\ncase, it’ll be itself."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The creation of the salt master could also contain a few git repositories to be\ncloned at the salt master creation time making your salt master as easily\nreplaceable as any other components in your \"cloud\"."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"A set of sample scripts I use to create a new salt master off of a few\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F01c09df78f05612c281f",rel:[q,r,s],target:t},children:[{type:a,value:"git repositories can be found in the following Gist"}]}]},{type:a,value:e},{type:b,tag:al,props:{id:jb},children:[{type:b,tag:m,props:{href:"#read-more",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jc}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The following articles was found to be describing in more detail what I\nintroduced in this article."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:du,rel:[q,r,s],target:t,title:jd},children:[{type:a,value:"Easily automate The provisioning of your DigitalOcean Droplets"}]},{type:a,value:". Don’t be\nfooled by the name, the article is actually describing "},{type:b,tag:B,props:{},children:[{type:a,value:bU}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:du,rel:[q,r,s],target:t,title:eK},children:[{type:a,value:eK}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002F2015\u002F03",path:"\u002Fblog\u002F2015\u002F03\u002Fcreating-new-ubuntu-salt-master-terminal-using-cloud-init",extension:aH,slug:"creating-new-ubuntu-salt-master-terminal-using-cloud-init",createdAt:dr,updatedAt:dr,category:ak,prettyfiedTemporalDate:{prettified:"Monday, March 9, 2015",temporalDate:"2015-03-09"}},{title:"Quelques bouts de code pour automatiser le déploiement",locale:dx,created:jm,updated:"2015-02-17T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F01\u002Fquelques-bouts-de-code-pour-automatiser-le-deploiement\u002F",status:aG,revising:am,migrateLinks:aq,migrateImages:am,gallery:am,caption:am,categories:[ak],tags:[bS,"development",bs,dm],coverImage:{src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F01\u002Fautomate-all-the-things-300x284.png",srcset:["https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F01\u002Fautomate-all-the-things-300x284.png 300w","https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F01\u002Fautomate-all-the-things-1024x971.png 1024w","https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F01\u002Fautomate-all-the-things.png 1600w"],sizes:"(max-width: 300px) 100vw, 300px",alt:"Illustration souvent utilisée pour un mème de l’Internet d’un dessin fait rapidement à la main illustrant un personnage avec une lumière éclatante derrière comme l’introduction d’un super héros. Le personnage tient un balai d’une main et brandissant l’autre bras et les yeux pas très alignés. Il proclame Automatisons tout!",text:"Automatisons Tout!!1\n"},preamble:{disable:aq,text:g},excerpt:"Avez-vous déjà voulu automatiser le déploiement de votre infrastructure serveurs web de A-Z? C’est exactement sur quoi je travaille en ce moment.",toc:[{id:jn,depth:ae,text:jo},{id:jp,depth:ae,text:jq},{id:jr,depth:ae,text:js}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"Ce billet n’est qu’un simple «link dump» pour retrouver parmi plusieurs notes\néparpillés. Je compte éventuellement publier la totalité de mon travail dans des\nprojets publics sur GitHub une fois la boucle complétée. Le tout sans fournir\nles données privés, évidemment."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Faire le saut vers l’automatisation demande beaucoup de préparation et je prends\nle temps de publier ici quelques bouts de code que j’ai écrits pour compléter la\ntâche."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Au final, mon projet permettra de déployer un site qui s’appuie sur un cluster\nMariaDB, Memcached, une stack LAMP («prefork») lorsqu’on a pas le choix, une\nstack [HHVM\u002Fphp5-fpm, Python, nodejs] app servers pour le reste servi par un\nfrontend NGINX. Mes scripts vont déployer une série d’applications web avec\ntoutes les dépendances qui les adaptent géré dans leur propre «git repo» parent.\nDans mon cas, ce sera: WordPress, MediaWiki, Discourse, et quelques autres."}]},{type:a,value:e},{type:b,tag:al,props:{id:jn},children:[{type:b,tag:m,props:{href:"#requis",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jo}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Instantiation à partir de commandes "},{type:b,tag:j,props:{},children:[{type:a,value:dw}]},{type:a,value:" du terminal, crée une nouvelle VM\nmise à jour et son nom définit son rôle dans le réseau interne"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Les VMs sont uniquement accessible par un Jump box (i.e. réseau interne\nseulement)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Un système regarde si un répertoire clone git à eu des changements sur la\nbranche «master», lance un événement si c’est le cas"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Chaque machine sont construites à partir d’une VM minimale. Dans ce cas-ci;\nUbuntu 14.04 LTS"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Système doit s’assurer que TOUTES les mises à jour sont appliqués\nrégulièrement"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Système doit s’assurer que ses services interne sont fonctionnels"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Dans le cas d’une situation où une VM atteint le seuil critique OOM, la VM\nredémarre automatiquement"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Le nom de la VM décrit son rôle, et les scripts d’installation installent les\nrequis qui y sont affectés"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Les configurations utilisent les détails (e.g. adresses IP privés et\npubliques) de chaque pool (e.g. redis, memcache, mariadb) et ajuste\nautomatiquement les configurations dans chaque application"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"... etc."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:al,props:{id:jp},children:[{type:b,tag:m,props:{href:"#bouts-de-code",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jq}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:jt,rel:[q,r,s],target:t},children:[{type:a,value:"Installation automatisée d’un cluster MariaDB avec réplication SSL"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F6ecf0d852a9148741bef",rel:[q,r,s],target:t},children:[{type:a,value:"Configuration SSH pour accéder aux VMs du réseau interne"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F437f763b948c926ca7ba",rel:[q,r,s],target:t},children:[{type:a,value:"Vérifier si un git repo a changé"}]},{type:a,value:", j’ai prévu faire un \"salt-call\" qui\ntrigger un événement Salt Reactor pour lancer un build run"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:ju,rel:[q,r,s],target:t},children:[{type:a,value:"Configuration Monit"}]},{type:a,value:" pour s’assurer que les services «sont up and running»"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:eP,rel:[q,r,s],target:t},children:[{type:a,value:"Installer automatiquement une VM enregistrée au salt-master"}]},{type:a,value:" via Salt\nReactor. Le nom de la VM déclare son rôle, le reste se fait tout seul\n(incomplet mais un début)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F1b42edac44c723185c9d",rel:[q,r,s],target:t},children:[{type:a,value:"Installer des plugins WordPress à partir des repos Git\u002FSVN\u002FFichiers Zip"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:jv,rel:[q,r,s],target:t},children:[{type:a,value:"Installation automatique d’un salt-master"}]},{type:a,value:" et des dépendances de build"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:jw,rel:[q,r,s],target:t},children:[{type:a,value:"Définir le rôle d’une VM basé sur son nom + TLD"}]},{type:a,value:" (e.g.\nredis-sessions.production.wpdn)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F11258261",rel:[q,r,s],target:t},children:[{type:a,value:"Vérifier avec l’origine d’un clone git s’il y a des changements upstream,\nlancer un événement si c’est le cas"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:eP,rel:[q,r,s],target:t},children:[{type:a,value:"Automatiser des commands selon certains événemnts dans un cluster géré par\nSalt"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:jv,rel:[q,r,s],target:t},children:[{type:a,value:"Automatiser l’installation d’un salt master basé uniquement sur une série de\ngit repos et d’un bootstrapper script"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002Fe925fee9b6085d7cbec4",rel:[q,r,s],target:t},children:[{type:a,value:"Automatiser les backups ElasticSearch"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:ju,rel:[q,r,s],target:t},children:[{type:a,value:"Système pour s’assurer que tous les services son fonctionnels, comment tester\ns’ils fonctionnent et comment les redémarrer"}]},{type:a,value:jx},{type:b,tag:Q,props:{},children:[{type:a,value:"Monit"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:al,props:{id:jr},children:[{type:b,tag:m,props:{href:"#billets-inspirants-sur-le-sujet",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:js}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"http:\u002F\u002Fblog.hendrikvolkmer.de\u002F2013\u002F04\u002F03\u002Fthere-will-be-no-reliable-cloud-part-1\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"There will be no reliable cloud (part 1)"}]},{type:a,value:aK},{type:b,tag:m,props:{href:"http:\u002F\u002Fblog.hendrikvolkmer.de\u002F2013\u002F04\u002F09\u002Fthere-will-be-no-reliable-cloud-part-2\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"part 2"}]},{type:a,value:aK},{type:b,tag:m,props:{href:"http:\u002F\u002Fblog.hendrikvolkmer.de\u002F2013\u002F04\u002F12\u002Fthere-will-be-no-reliable-cloud-part-3\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"part 3"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"http:\u002F\u002Fblog.hendrikvolkmer.de\u002F2013\u002F10\u002F11\u002Fthe-missing-piece-operating-systems-for-web-scale-cloud-apps\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"The missing piece operating systems for \"Web Scale\" Cloud Apps"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"http:\u002F\u002Fwww.rightbrainnetworks.com\u002Fblog\u002Fwhy-an-ec2-instance-isnt-a-server\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Why an X (VM) \"instance\" isn’t a server"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:"http:\u002F\u002Fsamj.net\u002F2012\u002F03\u002F08\u002Fsimplifying-cloud-reliability\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Simplifying cloud reliability"}]}]},{type:a,value:e}]},{type:a,value:e}]},dir:jy,path:"\u002Fblog\u002F2015\u002F01\u002Fquelques-bouts-de-code-pour-automatiser-le-deploiement",extension:aH,slug:"quelques-bouts-de-code-pour-automatiser-le-deploiement",createdAt:dy,updatedAt:dy,category:ak,prettyfiedTemporalDate:{prettified:"mercredi 28 janvier 2015",temporalDate:"2015-01-28"}},{title:jz,locale:aV,created:jm,updated:"2015-02-03T00:00:00.000Z",canonical:jt,status:aG,revising:am,migrateLinks:aq,migrateImages:am,gallery:am,caption:am,categories:[ak],tags:[bl,eQ,dm,bS],keywords:["replication","database-server","cluster","configuration",eR,"MariaDB"],description:jz,excerpt:"Some notes on how I created our updated MariaDB database cluster with replication.",preamble:{text:"The following might still work if all software versions are still available in the exact versions ranges they were when initially published.\nPart of this article was written while maintaining WebPlatform’s Infrastructure maintenance. Mostly [in *WPD\u002FInfrastructure\u002Fprocedures\u002F* **Replacing a VM**](https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fprocedures\u002FReplacing_a_VM\u002F), and [*WPD\u002FInfrastructure\u002Fprocedures\u002F* **Managing  MariaDB replication**](https:\u002F\u002Fwebplatform.github.io\u002Fdocs\u002FWPD\u002FInfrastructure\u002Fprocedures\u002FManaging_MySQL_replication\u002F)\n"},toc:[{id:jA,depth:ae,text:jB},{id:aQ,depth:ae,text:bT},{id:jC,depth:ac,text:jD},{id:jE,depth:ac,text:jF},{id:jG,depth:ac,text:jH},{id:jI,depth:ac,text:jJ},{id:jK,depth:ac,text:jL},{id:jM,depth:ac,text:jN}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"While reworking WebPlatform infrastructure I had to rebuild a new database\ncluster."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The objective of the cluster is to have more than one database server so that\nour web applications can make reads on any node in the cluster."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"While the system has replication, and I can send reads on any nodes on the\ncluster. There is a flaw in it too, any nodes can "},{type:b,tag:B,props:{},children:[{type:a,value:"also"}]},{type:a,value:" make writes; nothing is\nblocking it."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"My plan is to change this so that it would be OK to send writes to anybody in\nthe cluster. There is now something called \"Galera\" that would allow me that.\nBut that's outside of the scope of this article."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In the current configuration, I'm purposefully not fixing it because my\nconfiguration management makes sure only the current master. So in this setup, I\ndecided that the VM that gets writes has a specific mention of \"masterdb\" in the\nhostname."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"That way, its easy to see and it gives me the ability to change master at\nanytime if an emergency requires me to."}]},{type:a,value:e},{type:b,tag:al,props:{id:jA},children:[{type:b,tag:m,props:{href:"#changing-mariadb-replication-master",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jB}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Changing master could be done in the following order:"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Lock writes on masterdb databases"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Wait replication to catch up"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"On secondary database servers; remove replication configuration"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Tell all web apps to use new database master"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Remove database lock"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Setup new replication configuration to use new master"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Thanks to the fact that I manage "},{type:b,tag:Q,props:{},children:[{type:a,value:"everything"}]},{type:a,value:" through configruation management\n--including the web app configuration files-- its only a matter of applying the\nstates everywhere in the cluster. That makes it fairly easy to do such an heavy\nmove, even under stress."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"This post will be updated once I have completed the multi writes setup."}]},{type:a,value:e},{type:b,tag:al,props:{id:aQ},children:[{type:b,tag:m,props:{href:ey,ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:bT}]},{type:a,value:e},{type:b,tag:af,props:{id:jC},children:[{type:b,tag:m,props:{href:"#assumptions",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jD}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The rest of this article will assume the following:"}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"You are running VMs on OpenStack, and do have credentials to make API calls\nto it"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"You have a Salt master already running"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Your salt master has at least "},{type:b,tag:j,props:{},children:[{type:a,value:jl}]},{type:a,value:cP},{type:b,tag:j,props:{},children:[{type:a,value:dw}]},{type:a,value:" commands) available\non it"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"You have your Open Stack credentials already loaded in your salt master's\n"},{type:b,tag:j,props:{},children:[{type:a,value:jk}]},{type:a,value:" so you can use "},{type:b,tag:j,props:{},children:[{type:a,value:dw}]},{type:a,value:" directly"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:jE},children:[{type:b,tag:m,props:{href:"#from-the-salt-master-initiate-a-few-vms-to-use-for-your-database-cluster",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jF}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Before booting, ensure you have the following details in your OpenStack\ncluster and salt master;"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You have a SSH key in your OpenStack cluster. Mine is called\n\"renoirb-production\" and my salt master user has the private key preinstalled"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"You have a "},{type:b,tag:j,props:{},children:[{type:a,value:jO}]},{type:a,value:" file that has settings that points to your salt\nmaster"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cE}]},{type:a,value:" \u002Fsrv\u002Fopsconfigs\u002Fuserdata.txt\n"}]}]}]},{type:a,value:e},{type:a,value:e},{type:b,tag:cs,props:{title:jP},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"I've noticed that this "},{type:b,tag:j,props:{},children:[{type:a,value:jO}]},{type:a,value:" file I've initially written for this\narticle has then been part of "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fops\u002Fblob\u002Ff6e0390a\u002Fsalt-master",rel:[q,r,s],target:t,title:"salt-master\u002F* on GitHub.com\u002Fwebplatform\u002Fops as of 2015-06-08"},children:[{type:a,value:"WebPlatform’s \"ops\" repository"}]},{type:a,value:"\nfrom which I was (2015) using to work locally. In this repo, there was the\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fops\u002Fblob\u002Ff6e0390a\u002Fsalt-master\u002Fsalt-userdata.yml",rel:[q,r,s],target:t,title:"salt-master\u002Fsalt-userdata.yml on GitHub.com\u002Fwebplatform\u002Fops as of 2015-06-08"},children:[{type:b,tag:j,props:{},children:[{type:a,value:"salt-master\u002Fsalt-userdata.yml"}]}]},{type:a,value:$}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,bG]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:jg}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"manage_etc_hosts"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aN,aW]},children:[{type:a,value:dv}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Has to be set to false for everybody. Otherwise we need a DNS"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"manage-resolv-conf"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aN,aW]},children:[{type:a,value:dv}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"locale"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" en_US.UTF"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"8"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"timezone"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" America\u002FNew_York\n"},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"package_upgrade"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aN,aW]},children:[{type:a,value:I}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"package_update"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aN,aW]},children:[{type:a,value:I}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"package_reboot_if_required"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,aN,aW]},children:[{type:a,value:I}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# This is run at EVERY boot, good to ensure things are at the right place"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# IMPORTANT, make sure that `10.10.10.22` is a valid local DNS server."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"bootcmd"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"e 'nameserver' \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fhead "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:a,value:" printf\n    \"nameserver 10.10.10.22\\n\" "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:V}]},{type:a,value:" \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fhead\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"e 'wpdn' \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fbase "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:a,value:" printf \"search\n    production.wpdn\\ndomain production.wpdn\\nnameserver 8.8.8.8\" "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:V}]},{type:a,value:"\n    \u002Fetc\u002Fresolvconf\u002Fresolv.conf.d\u002Fbase\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:eT},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"e 'wpdn' \u002Fetc\u002Fresolv.conf "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:an}]},{type:a,value:" resolvconf "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"u\n\n"},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"runcmd"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" sed "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"i \"s\u002F127.0.0.1 localhost\u002F127.0.1.1 $(hostname).production.wpdn\n    $(hostname)\\n127.0.0.1 localhost\u002F\" \u002Fetc\u002Fhosts\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"get install software"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"properties"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"common python"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"software"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"properties\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" add"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:iW},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"repository "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"y ppa"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"saltstack\u002Fsalt\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"get update\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:jQ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"y upgrade\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:dz},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:jQ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"y autoremove\n\n"},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"packages"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"minion\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"common\n"},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# vim: et ts=2 sw=2 ft=yaml syntax=yaml"}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:aa,props:{start:ae},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Create two "},{type:b,tag:j,props:{},children:[{type:a,value:eU}]},{type:a,value:"-type VMs"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:jh},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eL}]},{type:a,value:eM},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n     --user-data \u002Fsrv\u002Fopsconfigs\u002Fuserdata.txt "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eN}]},{type:a,value:jR},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:bV},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eO}]},{type:a,value:" lightspeed "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ji},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n     db1-masterdb\n\n nova boot "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eL}]},{type:a,value:eM},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n      --user-data \u002Fsrv\u002Fopsconfigs\u002Fuserdata.txt "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eN}]},{type:a,value:jR},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eO}]},{type:a,value:" supersonic "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n      --security-groups default "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n      db2\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Accept them to the salt"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"salt-key "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:jS}]},{type:a,value:" db1-masterdb\nsalt-key "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:jS}]},{type:a,value:" db2\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"As an aside. Imagine you want to run dependencies automatically once a VM is\npart of your salt-master. For example, adding its private IP address in a local\n"},{type:b,tag:B,props:{},children:[{type:a,value:"Redis"}]},{type:a,value:cZ},{type:b,tag:B,props:{},children:[{type:a,value:"Etcd"}]},{type:a,value:" live configuration object. One could create a "},{type:b,tag:m,props:{href:"https:\u002F\u002Fdocs.saltproject.io\u002Fen\u002Flatest\u002Ftopics\u002Freactor\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Salt\n\""},{type:b,tag:B,props:{},children:[{type:a,value:"Reactor"}]},{type:a,value:F}]},{type:a,value:" and make "},{type:b,tag:m,props:{href:eP,rel:[q,r,s],target:t},children:[{type:a,value:"sure the data is refreshed. This gist is a good\nstarting point"}]},{type:a,value:" 4. Wait the VM build to finish and get their private IP\naddresses"}]},{type:a,value:e},{type:b,tag:aa,props:{start:cA},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Wait the VM build to finish and get their private IP addresses"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"nova list "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:i_}]},{type:a,value:" db\n\n  "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:jT},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:" db1-masterdb "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:jU},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:jV},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:jW},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:a,value:".10.73 "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:jT},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:" db2          "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:jU},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:jV},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:jW},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:a,value:".10.74 "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:au,props:{style:bw,src:"~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fwebplatform-openstack-cluster-2014-10-06.png",alt:"OpenStack nova command",figcaption:g},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Command output when issuing "},{type:b,tag:j,props:{},children:[{type:a,value:"nova list"}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Add them to the pillars. Note that the part of the name \"masterdb\" is what\nSalt states uses to know which one will get the writes to. Note that in the\nend, the web apps configs will use the private IP address. Its quicker to\ngenerate pages if the backend doesn't need to make name resolution each time\nit makes database queries. This is why we have to reflect the pillars. Ensure\nthe following structure exists in the file."}]},{type:a,value:e},{type:b,tag:cs,props:{title:jP},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The following file is now "},{type:b,tag:Q,props:{},children:[{type:a,value:"GitHub.com\u002FWebPlatform\u002Fsalt-pillar"}]},{type:a,value:" project,\n"},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-pillar\u002Ftree\u002F3d718578\u002Finfra",rel:[q,r,s],target:t,title:"infra\u002F* on GitHub.com\u002Fwebplatform\u002Fsalt-pillar as of 2015-06-08"},children:[{type:a,value:"and looked like this"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,bG]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Edit \u002Fsrv\u002Fpillar\u002Finfra\u002Finit.sls at the following blocks"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"infra"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:jX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:eW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" 10.10.10.73\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Refer to the right IP address in the configuration file with a similar salt\n"},{type:b,tag:j,props:{},children:[{type:a,value:"pillar.get"}]},{type:a,value:" reference ("},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fblob\u002F20150608\u002Fcode\u002Ffiles\u002Fblog\u002Flocal.php.jinja",rel:[q,r,s],target:t,title:"code\u002Ffiles\u002Fblog\u002Flocal.php.jinja on GitHub.com\u002Fwebplatform\u002Fsalt-states as of 2015-06-08"},children:[{type:a,value:"config template"}]},{type:a,value:aK},{type:b,tag:m,props:{href:"https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fsalt-states\u002Fblob\u002F20150608\u002Fcode\u002Fblog.sls#L48-L55",rel:[q,r,s],target:t,title:"code\u002Fblog.sls on GitHub.com\u002Fwebplatform\u002Fsalt-states as of 2015-06-08"},children:[{type:a,value:"state to write\nconfig template to filesystem"}]},{type:a,value:ga}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,bG]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"\u002Fsrv\u002Fwebplatform\u002Fblog\u002Fwp-config.php"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iH}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:d_}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"\u002F\u002Fcode\u002Ffiles\u002Fblog\u002Fwp"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"config.php.jinja\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"template"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" jinja\n    "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:cD}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:jY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:jZ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:iM}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:jY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:jZ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"context"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"db_creds"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:j_}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"('accounts"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"wiki"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"db') "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"masterdb_ip"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:cF},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:j_}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"('infra"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:jX},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"masterdb') "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:eG}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"cmd"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:" rsync"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:"blog\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"... and the "},{type:b,tag:j,props:{},children:[{type:a,value:"wp-config.php.jinja"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,j$]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,"php",j$]},children:[{type:b,tag:c,props:{className:[d,"delimiter",aW]},children:[{type:a,value:"\u003C?php"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"## Managed by Salt Stack, please DO NOT TOUCH, or ALL CHANGES WILL be LOST!"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"## source {{ source }}"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,p,bX]},children:[{type:a,value:"'DB_CHARSET'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,p,bZ]},children:[{type:a,value:"\"utf8\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,p,bX]},children:[{type:a,value:"'DB_COLLATE'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,p,bZ]},children:[{type:a,value:cC}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,p,bX]},children:[{type:a,value:"'DB_HOST'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,p,bZ]},children:[{type:a,value:"\"{{ masterdb_ip|default('127.0.0.1')    }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,p,bX]},children:[{type:a,value:"'DB_NAME'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,p,bZ]},children:[{type:a,value:"\"{{ db_creds.database|default('wpblog') }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,p,bX]},children:[{type:a,value:"'DB_USER'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,p,bZ]},children:[{type:a,value:"\"{{ db_creds.username|default('root')   }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bW}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,p,bX]},children:[{type:a,value:"'DB_PASSWORD'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p,bZ]},children:[{type:a,value:"\"{{ db_creds.password|default('')       }}\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e}]}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:7},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Refresh the pillars, rebuild the salt master "},{type:b,tag:j,props:{},children:[{type:a,value:hh}]},{type:a,value:", and test it\nout."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"salt-call saltutil.sync_all\nsalt salt state.highstate\n\nsalt-call pillar.get infra:hosts_entries:masterdb\n"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" local:\n"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:"   "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eV}]},{type:a,value:".10.73\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Make sure the VMs has the same version of salt as you do"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:" salt-call test.version\n "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" local:\n "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eX}]},{type:a,value:".0\n\n salt db"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"* test.version\n "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" db2:\n "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eX}]},{type:a,value:".0\n "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" db1-masterdb:\n "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:eX}]},{type:a,value:".0\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Kick the VMs installation"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"salt db"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:iN}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Highstate takes a while to run, but once you are done, you should be able to\nwork with them with the remaining of this tutorial"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:eY},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ka}]},{type:a,value:" mysql.version\n"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kb},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:kc}]},{type:a,value:kd},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:ke},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:by},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:kc}]},{type:a,value:kd}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Each db-type VM MySQL\u002FMariaDB\u002FPercona server will have a "},{type:b,tag:B,props:{},children:[{type:a,value:"different"}]},{type:a,value:" database\nmaintenance users defined in "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fdebian.cnf"}]},{type:a,value:$}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Make sure you don't overwrite them unless you import everything all at once,\nincluding the users and their grants. 11. Check that each db VMs has their SSL\ncertificate generated by Salt"}]},{type:a,value:e},{type:b,tag:aa,props:{start:11},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Check that each db VMs has their SSL certificate generated by Salt"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:eY},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ka}]},{type:a,value:" cmd.run "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'ls \u002Fetc\u002Fmysql | grep pem'"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kb},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kf},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kg},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kh},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:ki},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kj},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kk},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kl},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:km},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:ke},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kf},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kg},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kh},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:ki},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kj},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kk},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:kl},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:km}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Each file is a certificate so they can use to make replication through SSL."}]},{type:a,value:e},{type:b,tag:af,props:{id:jG},children:[{type:b,tag:m,props:{href:"#now-on-each-database-server",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jH}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Connect to both db nodes using the salt as a Jump Host"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bC}]},{type:a,value:" masterdb.production.wpdn\n"},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bC}]},{type:a,value:" db2.production.wpdn\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Get to the MySQL\u002FMariaDB\u002FPercona prompt on each VMs."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"If you are used with terminal screens that allows to keep sessions running even\nif you get disconnected, that would be ideal. We never know if the connection\nhangs."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On WebPlatform system we do have "},{type:b,tag:j,props:{},children:[{type:a,value:hj}]},{type:a,value:" but "},{type:b,tag:j,props:{},children:[{type:a,value:hi}]},{type:a,value:" can do too."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"mysql\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:ac},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Check if SSL is enabled on both MySQL\u002FMariaDB\u002FPercona servers"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u003E MariaDB [(none)]\u003E SHOW VARIABLES like '%ssl%';\n\u003E +---------------+----------------------------+\n\u003E | Variable_name | Value                      |\n\u003E +---------------+----------------------------+\n\u003E | have_openssl  | YES                        |\n\u003E | have_ssl      | YES                        |\n\u003E | ssl_ca        | \u002Fetc\u002Fmysql\u002Fca-cert.pem     |\n\u003E | ssl_capath    |                            |\n\u003E | ssl_cert      | \u002Fetc\u002Fmysql\u002Fserver-cert.pem |\n\u003E | ssl_cipher    | DHE-RSA-AES256-SHA         |\n\u003E | ssl_crl       |                            |\n\u003E | ssl_crlpath   |                            |\n\u003E | ssl_key       | \u002Fetc\u002Fmysql\u002Fserver-key.pem  |\n\u003E +---------------+----------------------------+\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Generate SSL certificates for MySQL\u002FMariaDB\u002FPercona server, see "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002Fdee3c76a88b3c44da564",rel:[q,r,s],target:t},children:[{type:a,value:"this\ngist"}]},{type:a,value:" on how to do it."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Places to double check; To see which config keys sets what's shown in the\nprevious screen, take a look in the VMs "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fconf.d\u002F"}]},{type:a,value:" folders with\nsimilar entries."}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:e_}]},{type:a,value:" is what allows us to communicate between servers, before MySQL\n5.5 we had "},{type:b,tag:j,props:{},children:[{type:a,value:"skip-networking"}]},{type:a,value:" but now only a "},{type:b,tag:j,props:{},children:[{type:a,value:e_}]},{type:a,value:" is sufficient. Make\nsure that your security groups allows only local network connections though."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:kn}]},{type:a,value:" MUST be with a different number for each nodes. Make sure no\nserver has the same number."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,"language-ini"]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,ko]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,kp,kq]},children:[{type:a,value:"mysqld"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:e_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"0.0.0.0"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:"log-basename"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"mariadbrepl"}]},{type:a,value:"\nlog-bin\n"},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:"binlog-format"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"row"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:kn}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:aX}]},{type:a,value:kr},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:"ssl-cipher"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"DHE-RSA-AES256-SHA"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:"ssl-ca"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fca-cert.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:ks}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fserver-cert.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:kt}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fserver-key.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,ko]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,kp,kq]},children:[{type:a,value:"client"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]}]},{type:a,value:kr},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:ks}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fclient-cert.pem"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,P,bf]},children:[{type:a,value:kt}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,bg,bh]},children:[{type:a,value:"\u002Fetc\u002Fmysql\u002Fclient-key.pem"}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:aa,props:{start:i$},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"From the database master"}]},{type:a,value:" (a.k.a \"masterdb\"), Get the replication log\nposition; We'll need the "},{type:b,tag:j,props:{},children:[{type:a,value:"File"}]},{type:a,value:bN},{type:b,tag:j,props:{},children:[{type:a,value:"Position"}]},{type:a,value:" values to setup the\nreplication node."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"MariaDB [(none)]\u003E show master status;\n\u003E +------------------------+----------+--------------+------------------+\n\u003E | File                   | Position | Binlog_Do_DB | Binlog_Ignore_DB |\n\u003E +------------------------+----------+--------------+------------------+\n\u003E | mariadbrepl-bin.000002 |      644 |              |                  |\n\u003E +------------------------+----------+--------------+------------------+\n"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Configure the "},{type:b,tag:j,props:{},children:[{type:a,value:eW}]},{type:a,value:" to accept replication users. "},{type:b,tag:Q,props:{},children:[{type:a,value:"From the salt\nmaster"}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:eY},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:eZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'roles:masterdb'"}]},{type:a,value:" mysql.user_create replication_user "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'%'"}]},{type:a,value:" foobarbaz\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"NOTE: My salt states script creates a grain in "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fetc\u002Fsalt\u002Fgrains"}]},{type:a,value:" with the\nfollowing data;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,bG]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,P,U]},children:[{type:a,value:"roles"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:H}]},{type:a,value:" masterdb\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Alternatively, you could call the VM "},{type:b,tag:j,props:{},children:[{type:a,value:"db1-masterdb"}]},{type:a,value:", use a "},{type:b,tag:m,props:{href:jw,rel:[q,r,s],target:t},children:[{type:a,value:"small python script\nthat'll parse the information for you and make it a "},{type:b,tag:Q,props:{},children:[{type:a,value:"grain"}]},{type:a,value:"\nautomatically"}]},{type:a,value:". 8. "},{type:b,tag:Q,props:{},children:[{type:a,value:"Back to the masterdb VM"}]},{type:a,value:", check if the user exists,\nensure SSL is required"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"MariaDB [(none)]\u003E show grants for 'replication_user';\n\u003E +---------------------------------------------------------------------------------------+\n\u003E | Grants for replication_user@%                                                         |\n\u003E +---------------------------------------------------------------------------------------+\n\u003E | GRANT REPLICATION SLAVE ON *.* TO 'replication_user'@'%' IDENTIFIED BY PASSWORD '...' |\n\u003E +---------------------------------------------------------------------------------------+\n\nMariaDB [(none)]\u003E GRANT REPLICATION SLAVE ON *.* TO 'replication_user'@'%.local.wpdn' REQUIRE SSL;\nMariaDB [(none)]\u003E GRANT USAGE ON *.* TO 'replication_user'@'%' REQUIRE SSL;\n\nMariaDB [(none)]\u003E SELECT User,Host,Repl_slave_priv,Repl_client_priv,ssl_type,ssl_cipher from mysql.user where User = 'replication_user';\n\u003E +------------------+--------------+-----------------+------------------+----------+\n\u003E | User             | Host         | Repl_slave_priv | Repl_client_priv | ssl_type |\n\u003E +------------------+--------------+-----------------+------------------+----------+\n\u003E | replication_user | %.local.wpdn | Y               | N                | ANY      |\n\u003E +------------------+--------------+-----------------+------------------+----------+\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{start:9},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On the secondary db VM, in mysql prompt, setup the initial "},{type:b,tag:j,props:{},children:[{type:a,value:"CHANGE MASTER"}]},{type:a,value:"\nstatement;"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"CHANGE MASTER TO\n  MASTER_HOST='masterdb.local.wpdn',\n  MASTER_USER='replication_user',\n  MASTER_PASSWORD='foobarbaz',\n  MASTER_PORT=3306,\n  MASTER_LOG_FILE='mariadbrepl-bin.000002',\n  MASTER_LOG_POS=644,\n  MASTER_CONNECT_RETRY=10,\n  MASTER_SSL=1,\n  MASTER_SSL_CA='\u002Fetc\u002Fmysql\u002Fca-cert.pem',\n  MASTER_SSL_CERT='\u002Fetc\u002Fmysql\u002Fclient-cert.pem',\n  MASTER_SSL_KEY='\u002Fetc\u002Fmysql\u002Fclient-key.pem';\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:jI},children:[{type:b,tag:m,props:{href:"#checking-if-it-worked",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jJ}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"From one of the secondary servers, look for success indicators:"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"Seconds_Behind_Master"}]},{type:a,value:ku},{type:b,tag:Q,props:{},children:[{type:a,value:bv}]},{type:a,value:aD}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"Slave_IO_State"}]},{type:a,value:ku},{type:b,tag:Q,props:{},children:[{type:a,value:"Waiting for master to send event"}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"MariaDB [wpstats]\u003E show slave status\\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: masterdb.local.wpdn\n                  Master_User: replication_user\n                  Master_Port: 3306\n                Connect_Retry: 10\n              Master_Log_File: mariadbrepl-bin.000066\n          Read_Master_Log_Pos: 19382112\n               Relay_Log_File: mariadbrepl-relay-bin.000203\n                Relay_Log_Pos: 19382405\n        Relay_Master_Log_File: mariadbrepl-bin.000066\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB:\n          Replicate_Ignore_DB:\n           Replicate_Do_Table:\n       Replicate_Ignore_Table:\n      Replicate_Wild_Do_Table:\n  Replicate_Wild_Ignore_Table:\n                   Last_Errno: 0\n                   Last_Error:\n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 19382112\n              Relay_Log_Space: 19382757\n              Until_Condition: None\n               Until_Log_File:\n                Until_Log_Pos: 0\n           Master_SSL_Allowed: Yes\n           Master_SSL_CA_File: \u002Fetc\u002Fmysql\u002Fca-cert.pem\n           Master_SSL_CA_Path:\n              Master_SSL_Cert: \u002Fetc\u002Fmysql\u002Fclient-cert.pem\n            Master_SSL_Cipher:\n               Master_SSL_Key: \u002Fetc\u002Fmysql\u002Fclient-key.pem\n        Seconds_Behind_Master: 0\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error:\n               Last_SQL_Errno: 0\n               Last_SQL_Error:\n  Replicate_Ignore_Server_Ids:\n             Master_Server_Id: 1\n               Master_SSL_Crl: \u002Fetc\u002Fmysql\u002Fca-cert.pem\n           Master_SSL_Crlpath:\n                   Using_Gtid: No\n                  Gtid_IO_Pos:\n      Replicate_Do_Domain_Ids:\n  Replicate_Ignore_Domain_Ids:\n1 row in set (0.00 sec)\n"}]}]}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:jK},children:[{type:b,tag:m,props:{href:"#managing-users",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jL}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"In the end, since replication is active, you can add users to your system and\nall nodes will get the privileges."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"The way I work is that I can use Salt stack states to add privileges in my\nstates (more details soon) or I can use a few salt commands from my salt master\nand send them to the database "},{type:b,tag:j,props:{},children:[{type:a,value:eW}]},{type:a,value:" VM."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"salt -G 'roles:masterdb' mysql.db_create 'accounts_oauth' 'utf8' 'utf8_general_ci'\nsalt -G 'roles:masterdb' mysql.user_create 'accounts' '%' 'barfoo'\nsalt -G 'roles:masterdb' mysql.grant_add 'ALL PRIVILEGES' 'accounts_oauth.*' 'accounts' ‘%’\n"}]}]}]},{type:a,value:e},{type:b,tag:af,props:{id:jM},children:[{type:b,tag:m,props:{href:"#references",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:jN}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:kv,rel:[q,r,s],target:t},children:[{type:a,value:kv}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:m,props:{href:kw,rel:[q,r,s],target:t},children:[{type:a,value:kw}]}]},{type:a,value:e}]},{type:a,value:e}]},dir:jy,path:"\u002Fblog\u002F2015\u002F01\u002Fcreate-mariadb-cluster-replication-ssl-salt-stack",extension:aH,slug:"create-mariadb-cluster-replication-ssl-salt-stack",createdAt:dy,updatedAt:dy,category:ak,prettyfiedTemporalDate:{prettified:"Wednesday, January 28, 2015",temporalDate:"2015-01-28"}},{title:"Script bash pour transférer une base de donnée MySQL d’un serveur à l’autre",locale:dx,created:"2010-02-09T00:00:00.000Z",updated:"2013-06-12T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F02\u002Fscript-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre\u002F",status:aG,revising:aq,migrateCode:aq,migrateLinks:aq,categories:[ak],tags:[bl,"bash",kx,"sql"],toc:[{id:ky,depth:ac,text:kz},{id:kA,depth:ac,text:kB},{id:kC,depth:ac,text:kD},{id:kE,depth:ac,text:kF}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"Il m’est arrivé récemment de devoir transférer plusieurs dizaines de sites web\nd’un serveur à l’autre manuellement."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Dans ce billet j’expliquerai le processus que j’ai utilisé pour en finir par\nproduire un script bash qui pourrait vous être utile."}]},{type:a,value:e},{type:b,tag:af,props:{id:ky},children:[{type:b,tag:m,props:{href:"#%C3%A0-propos-du-projet",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:kz}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Considérant que certains sites avaient plus d’une base de données il était hors\nde question de faire a bras les lignes "},{type:b,tag:B,props:{},children:[{type:a,value:e$}]},{type:a,value:aK},{type:b,tag:B,props:{},children:[{type:a,value:bC}]},{type:a,value:" (en fait le transfert\nse fait en compressant le fichier et le copiant via une redirection gzip avec\ncat), "},{type:b,tag:B,props:{},children:[{type:a,value:eR}]},{type:a,value:" pour, en ordre, dumper la base de données, la transférer, et la\nrestaurer.... sans oublier les "},{type:b,tag:B,props:{},children:[{type:a,value:"CREATE users"}]},{type:a,value:" pour chaque."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Je me suis dit: "},{type:b,tag:B,props:{},children:[{type:a,value:"faisons-en un script"}]},{type:a,value:bb}]},{type:a,value:e},{type:b,tag:af,props:{id:kA},children:[{type:b,tag:m,props:{href:"#les-pr%C3%A9requis",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:kB}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Nous voulions..."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Faciliter le travail car on savait qu’il faudrait souvent transférer, plus\nd’une fois, chacune des bases de données; Car nous devions faire fonctionner\nle site sur le nouveau serveur "},{type:b,tag:B,props:{},children:[{type:a,value:"avant"}]},{type:a,value:" de transférer les DNS."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Entrer une commande "},{type:b,tag:B,props:{},children:[{type:a,value:"minimale"}]},{type:a,value:" et en conserver les configurations;"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Que le "},{type:b,tag:B,props:{},children:[{type:a,value:"nouveau"}]},{type:a,value:" serveur réalise la tâche a lui-seul, sans prérequis sur le\nserveur distant;"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Utiliser les commandes minimales et pouvoir réutiliser le scripts dans ma\npropre librairie de script bash;"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Éviter de répéter, parceque c’est «"},{type:b,tag:B,props:{},children:[{type:a,value:"con"}]},{type:a,value:"» ;)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:kC},children:[{type:b,tag:m,props:{href:"#ce-que-le-script-fait",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:kD}]},{type:a,value:e},{type:b,tag:aR,props:{id:"1-transférer-la-base-de-donnée"},children:[{type:b,tag:m,props:{href:"#1-transf%C3%A9rer-la-base-de-donn%C3%A9e",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"1. "},{type:b,tag:B,props:{},children:[{type:a,value:"Transférer"}]},{type:a,value:" la base de donnée"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"$ migratemysql transfer\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Lire le fichier de configuration *migratemysql.conf * dans le dossier\ncourrant (ou en créer un)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Se connecter en SSH"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Lancer "},{type:b,tag:j,props:{},children:[{type:a,value:e$}]},{type:a,value:" en conservant le "},{type:b,tag:j,props:{},children:[{type:a,value:"tmp\u002F"}]},{type:a,value:" paramétrable (éviter de remplir le\ndisque)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Compresser le fichier "},{type:b,tag:j,props:{},children:[{type:a,value:dA}]},{type:a,value:jx},{type:b,tag:B,props:{},children:[{type:a,value:ja}]},{type:a,value:cP},{type:b,tag:j,props:{},children:[{type:a,value:kG}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Transférer via "},{type:b,tag:j,props:{},children:[{type:a,value:"scp"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:aR,props:{id:"2-importer-dans-le-serveur-local"},children:[{type:b,tag:m,props:{href:"#2-importer-dans-le-serveur-local",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"2. Importer dans le serveur local"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"$ migratemysql import\n"}]}]}]},{type:a,value:e},{type:b,tag:aa,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Lire le fichier de configuration "},{type:b,tag:B,props:{},children:[{type:a,value:"migratemysql.conf"}]},{type:a,value:" dans le dossier actuel"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Véfirier si le "},{type:b,tag:j,props:{},children:[{type:a,value:kG}]},{type:a,value:kH}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"oui: le décompresser"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"si le "},{type:b,tag:j,props:{},children:[{type:a,value:dA}]},{type:a,value:" existe déjà, écrire par dessus? ("},{type:b,tag:Q,props:{},children:[{type:a,value:"attente d’une réponse a\nl’usager"}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"oui: réécrire, continuer..."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"non: arrêter l’exécution"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"non: continuer"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Véfifier si le "},{type:b,tag:j,props:{},children:[{type:a,value:dA}]},{type:a,value:kH}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"oui: continuer"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"non: cesser l’exécution"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Se connecter au serveur précisé, si erreur... DIE!"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Véfifier si la base de donnée existe"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"oui..."}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:B,props:{},children:[{type:a,value:"Retenir"}]},{type:a,value:" de ne pas "},{type:b,tag:B,props:{},children:[{type:a,value:"effacer"}]},{type:a,value:" le compte de base de donnée (PRIVILEGES)\n(variable \""},{type:b,tag:j,props:{},children:[{type:a,value:fa}]},{type:a,value:"\")"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Effacer pour ré-insérer? ("},{type:b,tag:Q,props:{},children:[{type:a,value:"attente d’une réponse a l’usager"}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Créer les commandes "},{type:b,tag:j,props:{},children:[{type:a,value:kI}]},{type:a,value:" manipulé via l’option \""},{type:b,tag:j,props:{},children:[{type:a,value:"ALT_PURGE"}]},{type:a,value:F}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"oui: générer le script, puis "},{type:b,tag:B,props:{},children:[{type:a,value:fb}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:kJ},{type:b,tag:B,props:{},children:[{type:a,value:fb}]},{type:a,value:" (utile si le fichier SQL a les commandes de "},{type:b,tag:j,props:{},children:[{type:a,value:kI}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:kJ},{type:b,tag:B,props:{},children:[{type:a,value:fb}]},{type:a,value:hD}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Vérifier si l’option \""},{type:b,tag:j,props:{},children:[{type:a,value:fa}]},{type:a,value:"\" existe, ne pas faire) Créer\nles PRIVILEGES spécifique pour la table a créer"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Exécuter le "},{type:b,tag:j,props:{},children:[{type:a,value:dA}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Afficher a l’écran un morceau de code PHP pour le fichier de configuration\nsous le format spécifique à WordPress"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:kE},children:[{type:b,tag:m,props:{href:"#le-script",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:kF}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Version disponible sous GitHub gist"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"J'ai crée une copie dans un "},{type:b,tag:m,props:{href:"https:\u002F\u002Fgist.github.com\u002Frenoirb\u002F5770703",rel:[q,r,s],target:t},children:[{type:a,value:"gist github pour partager le script"}]},{type:a,value:$}]},{type:a,value:e},{type:a,value:e},{type:b,tag:dT,props:{label:"MigrateMySQL",active:gc},children:[{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,eq,aW]},children:[{type:a,value:er}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F  Some config  \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"TMPDIR"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\u002Ftmp\u002F\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:eR}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kK}]},{type:a,value:" mysql"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:e$}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kK}]},{type:a,value:" mysqldump"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    MigrateMySQL v 1.0"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    by Etienne Lachance and Renoir Boulanger"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    https:\u002F\u002Frenoirboulanger.com\u002Fprojets\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    This program is free software: you can redistribute it and\u002For modify"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    it under the terms of the GNU General Public License as published by"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    the Free Software Foundation, either version 3 of the License, or"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    (at your option) any later version."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    This program is distributed in the hope that it will be useful,"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    but WITHOUT ANY WARRANTY; without even the implied warranty of"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    GNU General Public License for more details."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    You should have received a copy of the GNU General Public License"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"#    along with this program.  If not, see \u003Chttp:\u002F\u002Fwww.gnu.org\u002Flicenses\u002F\u003E."}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:bd}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F  Actual script  \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"PN"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"basename"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$0"}]},{type:a,value:F}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:"          "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# program name"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"VER"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'1.0'"}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"usage"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\nUSAGE INFORMATION\n\n  NAME\n       "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:"\n\n  DESCRIPTION\n       Tool to help transfer a MySQL database from a remote site using ssh and\n       mysqldump. You only need one copy of this script, on the server you want\n       to import the databases to.\n\n  SYNOPSIS\n       "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:" transfer\n       "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:" import\n\n  OPTIONS\n       transfer     transfer database dump file from remote host to localhost\n       import       import database dump to database\n\n  FILES\n       "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:".conf\n                    Config file saved in the directory that you invoked "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:"\n\n  LICENCE\n       MigrateMySQL is a software provided under the GNU GENERAL PUBLIC LICENCE\n       Copyright (C) 2010 by Etienne Lachance and Renoir Boulanger\n       This program comes with ABSOLUTELY NO WARRANTY; for details, see source code.\n       This is free software, and you are welcome to redistribute it\n       under certain conditions;\n\n                                     https:\u002F\u002Frenoirboulanger.com\u002F\n\""}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"dump_config_file"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"#\n# Generated by "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:fc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dB}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:fd}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:"\n#\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:b_},{type:b,tag:c,props:{className:[d,b$,ca]},children:[{type:a,value:cb}]},{type:a,value:Y}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:kL},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'SSH_SOURCE=\"hostname\"\nSSH_PORT=\nSSH_USER=\"username\"\n#SSH_PASS=\"\"\nALT_PURGE=\"\"                      # En cas ou le mysqldump utilise a pas de DROP TABLE (default: false)\nDB_SOURCE_DBNAME=\"\"\nDB_SOURCE_USER=\"\"\nDB_SOURCE_PASS=\"\"\nDB_SOURCE_HOST=\"\"                 # e.g. mysql4.local    (defaults: localhost)\nDB_DEST_DBNAME=$DB_SOURCE_DBNAME\nDB_DEST_USER=\"root\"\nDB_DEST_PASS=\"root\"\nDB_DEST_HOST=\"\"                   # e.g. mysql4.local    (defaults: localhost)\nDB_DEST_USERHOST=\"\"               # e.g. webservers-%    (defaults: localhost)\nDB_DEST_USERNAME=\"root\"           # site username\nDB_DEST_USERPW=\"root\"             # site password\n#OPTS_KEEP_COMPRESSED=\"\"          # 1 or 0               (1=true) (not yet implemented)\nOPTS_COMPRESSION_PROG=\"gzip\"        # bzip2,gzip,zip       (only gzip is implemented)\n'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:b_},{type:b,tag:c,props:{className:[d,b$,ca]},children:[{type:a,value:cb}]},{type:a,value:Y}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:kL},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Config file "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:b_},{type:b,tag:c,props:{className:[d,b$,ca]},children:[{type:a,value:cb}]},{type:a,value:Y}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:".conf created, modify it, then run "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:" again.\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"dump_prepare_sql"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:kM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:fc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dB}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:fd}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:fe},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"dump_prepare_createdb"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"CREATE DATABASE "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:";\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:fe},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"dump_prepare_addpriv"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"CREATE USER '"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dC}]},{type:a,value:ff},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dD}]},{type:a,value:kN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fg}]},{type:a,value:fh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:fi},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"GRANT USAGE ON * . * TO '"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dC}]},{type:a,value:ff},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dD}]},{type:a,value:kN},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fg}]},{type:a,value:fh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:fi},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"GRANT ALL PRIVILEGES ON \\"},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:aw},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:" . * TO '"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dC}]},{type:a,value:ff},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dD}]},{type:a,value:fh}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:fi},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"FLUSH PRIVILEGES;\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:fe},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"dump_stdout_tellpasswords"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"\nHere is the application database credentials.\n\n --------------------------------------------------------\n|         for WordPress, copy that code block            |\n --------------------------------------------------------\ndefine('DB_SERVER',   '"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cc}]},{type:a,value:"');\ndefine('DB_NAME',     '"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:"');\ndefine('DB_LOGIN',    '"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dC}]},{type:a,value:"');\ndefine('DB_PASSWORD', '"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fg}]},{type:a,value:"');\n --------------------------------------------------------\n\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"fatal"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"FAILED: "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fj}]},{type:a,value:F}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:v}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,bz,v]},children:[{type:a,value:"purge_tables"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ab}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Will purge tables from "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:" ... \""}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:kM},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:fc},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dB}]},{type:a,value:dn},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:fd}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:kO},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'Generating tmp file ... '"}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"DROPTABLES"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:kP},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:cd}]},{type:a,value:kQ},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ce}]},{type:a,value:kR},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bI}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:kS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'show tables'"}]},{type:a,value:" $DB_DEST_DBNAME "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'s\u002F^\u002Fdrop table \u002Fg'"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:kT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'s\u002F$\u002F;\u002Fg'"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$DROPTABLES"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:kO},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'Executing ... '"}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cE}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:".sql.purge.tmp "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:cd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cG}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bI}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:"\n\n  "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'Deleting tmp file ... '"}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"rm"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:"-rf"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:".sql.purge.tmp\n  "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:Y}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F ACTUAL EXECUTION \u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F\u002F"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,"file-descriptor",aW]},children:[{type:a,value:"&2"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:" - Migrate MySQL database, "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dB}]},{type:a,value:" by Evocatio Solutions Technologies  http:\u002F\u002Fevocatio.com\u002F\""}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:b_},{type:b,tag:c,props:{className:[d,b$,ca]},children:[{type:a,value:cb}]},{type:a,value:Y}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:".conf "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * You need to have a configuration file\""}]},{type:a,value:"\n    dump_config_file\n    "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Reading configuration file "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:b_},{type:b,tag:c,props:{className:[d,b$,ca]},children:[{type:a,value:cb}]},{type:a,value:Y}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:".conf ... \""}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:d_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:b_},{type:b,tag:c,props:{className:[d,b$,ca]},children:[{type:a,value:cb}]},{type:a,value:Y}]},{type:a,value:bH},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:a,value:".conf\n  "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:kU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fj}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cg}]},{type:a,value:"\n  transfer"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:"             "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Initiate transfer"}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:kV}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cC}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kW}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO SSH_SOURCE\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kX}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO SSH_USER\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kY}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"SSH_PORT_STR"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"-p "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kY}]},{type:a,value:F}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO DB_SOURCE_DBNAME\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fk}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO DB_SOURCE_USER\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fl}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO DB_SOURCE_PASS\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kZ}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"DB_SOURCE_HOST"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$OPTS_KEEP_COMPRESSED"}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"OPTS_KEEP_COMPRESSED"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:k_}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:k$}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:la}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:lb}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:fm},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:F}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:dE},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Checking if remote database exist ... \""}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:dF}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:lc}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bC}]},{type:a,value:" $SSH_PORT_STR $SSH_USER@$SSH_SOURCE "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:"  -h "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kZ}]},{type:a,value:ld},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fk}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,le],title:dG},children:[{type:a,value:dG}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fl}]},{type:b,tag:c,props:{className:[d,le],title:dG},children:[{type:a,value:dG}]},{type:a,value:" -Bse 'show databases'| egrep -v 'information_schema|"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:"'\""}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,lf,h]},children:[{type:a,value:eU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:lg}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:fn}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:lh}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:dF}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:fo}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:li}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"0\""}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:fm},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"DB_SOURCE_DBNAME : "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:" does not exist\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:dE},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Get remote database dump file ... \""}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bC}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$SSH_PORT_STR"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kX}]},{type:a,value:"@"},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:kW}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$mysqldump"}]},{type:a,value:ld},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fk}]},{type:a,value:" -p\""}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:fl}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" --opt "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:" \u003E "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:".sql; gzip -f "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:".sql; cat "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:lj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:lk},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:dE},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * The local database file is "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:lj}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ll}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:"\n\n\n  "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"import"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:"                   "},{type:b,tag:c,props:{className:[d,N]},children:[{type:a,value:"# Initiate import"}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:kV}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:cC}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO_DEST_DBNAME\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cG}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO_DEST_USER\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bI}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:bi}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:" NO_DEST_PASS\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cc}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"DB_DEST_HOST"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:dD}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"DB_DEST_USERHOST"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:de}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:k$}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:la}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:lb}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:fm},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aS}]},{type:a,value:F}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:".sql.gz "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Uncompressing the database dump (Only gzip is supported) ... \""}]},{type:a,value:"\n      gunzip "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:lk},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bJ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:lm},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:"\n      fatal "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"You should have a database dump "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:".sql\""}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Checking if the requested database exists ... \""}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:dF}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:lc}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]},{type:a,value:kP},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:cd}]},{type:a,value:kQ},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ce}]},{type:a,value:kR},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bI}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:kS}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'show databases'"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"egrep"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'information_schema|$mysql'"}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ay}]}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,lf,h]},children:[{type:a,value:eU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:lg}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:fn}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:lh}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:dF}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:fo}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:li}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:k_}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:" exists, overwrite? 'y\u002Fn': \""}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:"read"}]},{type:a,value:" DOWEPURGE\n\n        "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:kU}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$DOWEPURGE"}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cg}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"'y'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$ALT_PURGE"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:"\n                            purge_tables\n            "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fa}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"true\""}]},{type:a,value:dH},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:"\n            *"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:"\n              fatal "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"DB_DEST_DBNAME : "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:" exists. And we did not understand the answer to purge DB.\""}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:"\n              "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ln}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"else"}]},{type:a,value:"\n          "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Creating database ... \""}]},{type:a,value:"\n        dump_prepare_sql\n        dump_prepare_createdb\n        "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cE}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:lo},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:cd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cG}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bI}]},{type:a,value:F}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ap}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$OVERRIDEUSERCREATION"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ar}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Creating default user ... \""}]},{type:a,value:"\n      dump_prepare_sql\n      dump_prepare_addpriv\n      "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cE}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:lo},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:cd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cG}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bI}]},{type:a,value:F}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:bx},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:aF}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\" * Restoring database ... \""}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:cE}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aM}]},{type:a,value:lm},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:an}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ce}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cc}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:cd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:cG}]},{type:a,value:cH},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:F},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bI}]},{type:a,value:F}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:W},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aY}]},{type:a,value:"\n\n    dump_stdout_tellpasswords\n\n      "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:ll}]},{type:a,value:dE},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:"\n  *"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:"  usage"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:bo}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ln}]},{type:a,value:e}]}]}]},{type:a,value:e}]},{type:a,value:e}]},dir:"\u002Fblog\u002F2010\u002F02",path:"\u002Fblog\u002F2010\u002F02\u002Fscript-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre",extension:aH,slug:"script-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre",createdAt:lp,updatedAt:lp,category:ak,prettyfiedTemporalDate:{prettified:"mardi 9 février 2010",temporalDate:"2010-02-09"}},{title:"Tester le fonctionnement d'un serveur SMTP",locale:dx,created:"2008-04-19T00:00:00.000Z",updated:"2014-02-19T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2008\u002F04\u002Ftester-le-fonctionnement-dun-serveur-smtp\u002F",status:aG,revising:aq,categories:[ak],tags:[bl,aQ,bs,eQ,lq],excerpt:"Envoyer et recevoir des courriels implique une combinaison de systèmes qui interagissent d'une façon assez complexe et un problème de réception ou de classement peut être causé par plusieurs raisons. Étant donné que tout est très intrinsèque sur un serveur, voici une procédure pour s'assurer que tout est en ordre.",toc:[{id:lr,depth:ac,text:ls},{id:lt,depth:ae,text:lu},{id:lv,depth:ac,text:lw},{id:lx,depth:ac,text:ly},{id:lz,depth:ac,text:lA},{id:lB,depth:ac,text:lC},{id:lD,depth:ac,text:lE},{id:lF,depth:ac,text:lG},{id:lH,depth:ac,text:lI},{id:lJ,depth:ac,text:lK},{id:lL,depth:ac,text:lM},{id:lN,depth:ae,text:lO},{id:lP,depth:ac,text:lQ},{id:lR,depth:ac,text:lS},{id:lT,depth:ae,text:lU},{id:lV,depth:ae,text:lW},{id:lX,depth:ae,text:lY},{id:lZ,depth:ae,text:l_},{id:l$,depth:ac,text:ma},{id:mb,depth:ae,text:mc}],body:{type:aB,children:[{type:b,tag:af,props:{id:lr},children:[{type:b,tag:m,props:{href:"#v%C3%A9rifier-si-le-firewall-bloque-certains-services",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ls}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Idéalement il faut faire ces tests d'un autre ordinateur que celui qu'on veut\nvérifier."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ainsi on voit si les services sont fonctionnels en tant que tel, et si le\nfirewall ne les bloquent pas."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Quelques ports à tester, qui donnent une réponse"}]},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:gH,props:{},children:[{type:b,tag:gI,props:{},children:[{type:b,tag:ba,props:{},children:[{type:b,tag:bk,props:{},children:[{type:a,value:"Nom du service"}]},{type:b,tag:bk,props:{},children:[{type:a,value:"Port TCP"}]}]}]},{type:b,tag:gJ,props:{},children:[{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:a,value:"POP"}]},{type:b,tag:ah,props:{},children:[{type:a,value:"101"}]}]},{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:a,value:md}]},{type:b,tag:ah,props:{},children:[{type:a,value:me}]}]},{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:a,value:"SMTP"}]},{type:b,tag:ah,props:{},children:[{type:a,value:aT}]}]},{type:b,tag:ba,props:{},children:[{type:b,tag:ah,props:{},children:[{type:a,value:"FTP"}]},{type:b,tag:ah,props:{},children:[{type:a,value:mf}]}]}]}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:a,value:" web1.renoirboulanger.com\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mg}]},{type:a,value:" +OK POP3 Welcome to vm-pop3d "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mh}]},{type:a,value:".7f-DA-2\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:dJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:a,value:fp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:me}]},{type:a,value:"\n* OK "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:"CAPABILITY IMAP4REV1 LITERAL+ SASL-IR LOGIN-REFERRALS "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"AUTH"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"LOGIN"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\nweb1.renoirboulanger.com IMAP4rev1 "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2004.357"}]},{type:a,value:" at Tue, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:":08:17 "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ci}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:a,value:"EST"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:dJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:a,value:fp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dK}]},{type:a,value:mi},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fq}]},{type:a,value:" Tue, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:":11:10 "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ci}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:dJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:ag},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dI}]},{type:a,value:fp},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mf}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dK}]},{type:a,value:" ProFTPD "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"1.3"}]},{type:a,value:".1rc2 Server ready.\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:dJ},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note: la note [^c] implique qu'on peut faire "},{type:b,tag:dL,props:{},children:[{type:a,value:"Ctrl"}]},{type:a,value:" + "},{type:b,tag:dL,props:{},children:[{type:a,value:"c"}]},{type:a,value:"\npour quitter plus rapidement de l'attente"}]},{type:a,value:e},{type:b,tag:al,props:{id:lt},children:[{type:b,tag:m,props:{href:"#tester-le-serveur-courriel",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lu}]},{type:a,value:e},{type:b,tag:af,props:{id:lv},children:[{type:b,tag:m,props:{href:"#cr%C3%A9er-un-compte-de-test",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lw}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Permet d'éviter de remplir le compte courriel d'un client."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Créer un compte dans "},{type:b,tag:Q,props:{},children:[{type:a,value:"DirectAdmin"}]},{type:a,value:mj},{type:b,tag:Q,props:{},children:[{type:a,value:"Show all Users"}]},{type:a,value:"\", "},{type:b,tag:B,props:{},children:[{type:a,value:"username"}]},{type:a,value:mj},{type:b,tag:Q,props:{},children:[{type:a,value:"E-Mail Accounts"}]},{type:a,value:F}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:lx},children:[{type:b,tag:m,props:{href:"#test-envoi-local-vers-virtual_local-avec-exim",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ly}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Avant de tester avec une application (remote en shell, ou GMail par exemple) On\ndevrait tester en local"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ensuite... via une application locale à Gmail "},{type:b,tag:Q,props:{},children:[{type:a,value:"Cas de nos courriels\nrenoirboulanger"}]},{type:a,value:", voir \"Test envoi local vers une machine remote avec exim\"\nci-haut."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Le serveur de mon exemple possède Exim comme serveur de transport de courrier\n(SMTP)."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"L'avantage d'utiliser "},{type:b,tag:j,props:{},children:[{type:a,value:"exim -v -odf"}]},{type:a,value:" c'est qu'on sait en shell le output et on\nsait les messages directement"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:mk},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ml}]},{type:a,value:" test@renoirboulanger.com         "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:cI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:mm},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fr}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:cj}]},{type:a,value:" a virtuallocal "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:cI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\nMessage body                                  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:cI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:"                                             "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:cI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:mn},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:dM}]},{type:a,value:mo},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fs}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mp},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:fu},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mr}]},{type:a,value:"\ndelivering 1JSZkp-0001JH-8H\nLOG: MAIN\n  "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" support "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:"support@renoirboulanger.com"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fv}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:cJ},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fw}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:ms},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mt},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"571"}]},{type:a,value:mu}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note: La ligne \""},{type:b,tag:Q,props:{},children:[{type:a,value:fx}]},{type:a,value:"\" je note généralement un titre explicatif du genre\n\"Test lundi am 5 local a virtuallocal\" qui donne une idée de quels tests qui\npassent."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Le output des 7 dernières lignes est une réponse expectée si tout va bien."}]},{type:a,value:e},{type:b,tag:aR,props:{id:"les-commandes-via-exim"},children:[{type:b,tag:m,props:{href:"#les-commandes-via-exim",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"Les commandes via exim"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"exim -v -odf john.doe@example.org"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"C'est les options qui permettent d'utiliser une instance de Exim pour tester\n("},{type:b,tag:Q,props:{},children:[{type:a,value:"odf"}]},{type:a,value:") puis de permettre la (v)erbosité"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mv}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Il faut entrer "},{type:b,tag:j,props:{},children:[{type:a,value:fx}]},{type:a,value:" Pour annoncer qu'on ajoute au header le sujet, on\npourrait meme ajouter un header comme on veut."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Écrire le message"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Le prompt condidere que si on commence pas par une commande qui termine par \":\",\nest considéré comme du "},{type:b,tag:Q,props:{},children:[{type:a,value:mw}]},{type:a,value:" pour le courriel en tant que tel (aka. Le )."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Terminer par \".\""}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:mx}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:lz},children:[{type:b,tag:m,props:{href:"#v%C3%A9rifier-le-log-denvoi-smtp",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lA}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Utile pour chaque tentative... voir où le message và!"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bJ}]},{type:a,value:" \u002Fvar\u002Flog\u002Fexim\u002Fmainlog\n "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:fy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:my},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:dM}]},{type:a,value:mo},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fs}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mp},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:fu},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"356"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mr}]},{type:a,value:fz},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:cJ},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:" test@renoirboulanger.com\n "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:fy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:my},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:mz}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:"test@renoirboulanger.com"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fv}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:cJ},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fw}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:ms},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mt},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mq}]},{type:a,value:eh},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:fy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:":02:16 1JSZkp-0001JH-8H Completed\n"}]}]}]},{type:a,value:e},{type:b,tag:af,props:{id:lB},children:[{type:b,tag:m,props:{href:"#tester-r%C3%A9ception-imap",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lC}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Généralement dans *le client "},{type:b,tag:aI,props:{},children:[{type:a,value:md}]},{type:a,value:" (vérifie le\nprocessus IMAP) on peut aller accéder au compte créé dans \"Créer un compte de\ntest courriel\"."}]},{type:a,value:e},{type:b,tag:af,props:{id:lD},children:[{type:b,tag:m,props:{href:"#v%C3%A9rifier-le-log-impad",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lE}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bJ}]},{type:a,value:mA},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:fA},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fB}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": imap "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dd}]},{type:a,value:" init from "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cK}]},{type:a,value:".0.1\n   Feb "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:fA},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fB}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": Login "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cD}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mB},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fC}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mC},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cK}]},{type:a,value:fD},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:mD},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:fA},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fB}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": Logout "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cD}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mB},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fC}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:mC},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cK}]},{type:a,value:fD},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:fE},{type:b,tag:j,props:{},children:[{type:a,value:fF}]},{type:a,value:fG}]},{type:a,value:e},{type:b,tag:af,props:{id:lF},children:[{type:b,tag:m,props:{href:"#v%C3%A9rifier-pop-en-telnet",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lG}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On peut lancer le test à partir de n'importe quel type de client telnet."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour s'assurer que le mail server répond sur le bon, on peut aussi lancer la\nrequete telnet sur le domaine du mail exchange (MX) du client."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"telnet mail.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mg}]},{type:a,value:iE},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:cI},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\nTrying "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dO}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:".\nConnected to mail.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dO}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:".\nEscape character is "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mE}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:"\n+OK POP3 Welcome to vm-pop3d "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mh}]},{type:a,value:".7f-DA-2\nuser test@renoirboulanger.com                         "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:mF},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"user (username)\""}]},{type:a,value:cL},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\n+OK\npass GMkRZaKQ                                         "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:mF},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"pass (mot de passe)\""}]},{type:a,value:cL},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\n+OK opened mailbox "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:mz}]},{type:a,value:"\nlist                                                  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:"Pour lister les messages "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"list\""}]},{type:a,value:cL},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\n+OK\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"780"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"488"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mG}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:"\nretr "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cM}]},{type:a,value:"                                                "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:"Pour obtenir un message, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"retr (numero du message)\""}]},{type:a,value:cL},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\n+OK "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mG}]},{type:a,value:" octets\nReturn-path: "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:cJ},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:"\nEnvelope-to: test@renoirboulanger.com\nDelivery-date: Mon, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:fH},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ci}]},{type:a,value:"\nReceived: from renoirb by web1.renoirboulanger.com with "},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:cj}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:a,value:"Exim "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fq}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:a,value:"envelope-from "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:cJ},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:at},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:ei}]},{type:a,value:" 1JTgiM-00057L-SW\n        "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:" test@renoirboulanger.com"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:" Mon, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:fH},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ci}]},{type:a,value:mm},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fr}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:cj}]},{type:a,value:" a virtuallocal\nMessage-Id: "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:"1JSZkp-0001JH-8H@web1.renoirboulanger.com"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:"\nFrom: renoirb@web1.renoirboulanger.com\nDate: Mon, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:fH},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ci}]},{type:a,value:"\n\nMessage body\n\n"},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:"\nquit                                                  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:a,value:"Finalement, "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"quit\""}]},{type:a,value:cL},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\n+OK\nConnection closed by foreign host.\n"}]}]}]},{type:a,value:e},{type:b,tag:af,props:{id:lH},children:[{type:b,tag:m,props:{href:"#v%C3%A9rifier-le-log-pop3d",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lI}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Si tout va bien en telnet, pourquoi ne pas tester pour être sûr!?"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:bO}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bJ}]},{type:a,value:mA},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:":13:18 web1 vm-pop3d"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fI}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": User "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mH}]},{type:a,value:" logged "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cg}]},{type:a,value:fz},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dQ}]},{type:a,value:mI},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:mJ}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cM}]},{type:a,value:mD},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:":13:22 web1 vm-pop3d"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fI}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": bytes: domain renoirboulanger.com "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"491"}]},{type:a,value:" bytes\n   Feb "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aU}]},{type:a,value:":13:23 web1 vm-pop3d"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fI}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": Session ended "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:" user: "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mH}]},{type:a,value:fz},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dQ}]},{type:a,value:mI},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:mJ}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cM}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"ndel"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bv}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:fE},{type:b,tag:j,props:{},children:[{type:a,value:fF}]},{type:a,value:fG}]},{type:a,value:e},{type:b,tag:af,props:{id:lJ},children:[{type:b,tag:m,props:{href:"#test-envoi-remote-vers-virtual_local-avec-telnet",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lK}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Au lieu d'avoir un programme comme mail installé sur une station Linux, on peut\nsimplement utiliser telnet avec ces commandes"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"telnet web1.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aT}]},{type:a,value:"\n   Trying "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dO}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:".\n   Connected to web1.renoirboulanger.com.\n   Escape character is "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mE}]},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:mK},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dK}]},{type:a,value:mi},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fq}]},{type:a,value:" Fri, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"22"}]},{type:a,value:ch},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mL}]},{type:a,value:":42:44 "},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ci}]},{type:a,value:"\nhelo renoirboulanger.com\n   "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:" web1.renoirboulanger.com Hello mtrlpq02-1168108314.sdsl.bell.ca "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dQ}]},{type:a,value:".235.26"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:"\nmail from: lunique@renoirboulanger.com\n   "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:" OK\nrcpt to: renoir.boulanger@renoirboulanger.com\n   "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:" Accepted\n   data\n   "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fJ}]},{type:a,value:" Enter message, ending with "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mM}]},{type:a,value:" on a line by itself\nSubject: Test courriel "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mN}]},{type:a,value:"\nVia tsc-webmestre-dev dans le bureau de renoirboulanger vers web1 qui va rediriger à gmail directement"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:bb}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:mK},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:" OK "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ei}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"1JSa3U-0003TM-Tv\nquit\n   "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"221"}]},{type:a,value:" web1.renoirboulanger.com closing connection\n   Connection closed by foreign host.\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note: les codes 250, 354, 220 sont des numeros de messages voir:\n"},{type:b,tag:m,props:{href:mO,rel:[q,r,s],target:t},children:[{type:a,value:mO}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"J'ai mis trois espaces devant la réponse reçue."}]},{type:a,value:e},{type:b,tag:aR,props:{id:"les-commandes-telnet-envoi-smtp"},children:[{type:b,tag:m,props:{href:"#les-commandes-telnet-envoi-smtp",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"Les commandes telnet envoi smtp"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"telnet "},{type:b,tag:j,props:{},children:[{type:a,value:"web1.renoirboulanger.com"}]}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"... Trying et connected signifient qu'il a essayé et réussi"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"220 web1.renoirboulanger.com ESMTP Exim 4.66 Fri, 22 Feb 2008 10:42:44 -0500\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Signifie 220 (c'est le code du message) que web1 utilise Exim 4.66.... et qu'on\nest le 22 Feb... C'est ok!"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"helo domaine.du.helo.renoirboulanger.com"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:fK},{type:b,tag:j,props:{},children:[{type:a,value:mP}]},{type:a,value:"\" puis le domaine de l'envoyant"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mP}]},{type:a,value:" (et "},{type:b,tag:j,props:{},children:[{type:a,value:"ehlo"}]},{type:a,value:") sont des conventions pour savoir quel est le hostname qui envoit le courriel"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"mail from: john.doe@example.org"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:fK},{type:b,tag:j,props:{},children:[{type:a,value:"mail from:"}]},{type:a,value:"\" puis l'adresse de l'envoyant"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ce qui permet de dire le From: field"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"rcpt to: john.doe@example.org"}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:fK},{type:b,tag:j,props:{},children:[{type:a,value:"rcpt to:"}]},{type:a,value:"\" puis l'adresse du recipient"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"C'est le recipient."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mw}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Annonce au MTA (le serveur SMTP) qu'il va envoyer des données textes"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:mv}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Faut au minimum entrer \""},{type:b,tag:j,props:{},children:[{type:a,value:fx}]},{type:a,value:"\" car c'est ce que le serveur attend."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Écrire le message, tout simplement"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Terminer"}]},{type:a,value:" par un dernier [procedures:"},{type:b,tag:Q,props:{},children:[{type:a,value:"Enter"}]},{type:a,value:"] et laisser un poin\n\""},{type:b,tag:Q,props:{},children:[{type:a,value:$}]},{type:a,value:F}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ensuite, le message SMTP #"},{type:b,tag:j,props:{},children:[{type:a,value:fJ}]},{type:a,value:" annonce que l'on peut écrire notre courriel a\nvolonté... jusqu'a ce qu'on ajoute une ligne vide avec uniquement un \".\" (qui\nannonce la fin du message)"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:mx}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:af,props:{id:lL},children:[{type:b,tag:m,props:{href:"#test-envoi-local-vers-une-machine-remote-avec-exim",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lM}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Permet de savoir si l'envoi local vers un remote fonctionne bien"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Il s'agit de l'exemple typique d'un email local envoyé vers Gmail par exemple."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:mk},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bn}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:ml}]},{type:a,value:" sysadmin@renoirboulanger.com\nSubject: Test lundi am "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mQ}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:cj}]},{type:a,value:" to remote\nMessage correct pour voir de l'usager joe sur web1 vers sysadmin hsu at renoirboulanger\n"},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:mn},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:dM}]},{type:a,value:" joe@web1.renoirboulanger.com "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fs}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"joe "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ft}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:fu},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"437"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"Test lundi am 4 local to remote\""}]},{type:a,value:"\ndelivering 1JSZmM-0001LR-S8\nConnecting to ASPMX.L.GOOGLE.COM "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mR}]},{type:a,value:mS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:":25 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:". connected\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:cm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dK}]},{type:a,value:" mx.google.com ESMTP z21si1091485qbc.21\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:" EHLO web1.renoirboulanger.com\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:cm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:"-mx.google.com at your service, "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dO}]},{type:a,value:dP},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:mT},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:"-SIZE "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"28311552"}]},{type:a,value:mT},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:"-8BITMIME\n         "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:" ENHANCEDSTATUSCODES\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:" MAIL FROM:"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:mU},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"SIZE"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"1470"}]},{type:a,value:fL},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:cm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mV}]},{type:a,value:".0 OK\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:" RCPT TO:"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:"a@test.com"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:fL},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:cm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mV}]},{type:a,value:".5 OK\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:" DATA\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:cm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fJ}]},{type:a,value:" Go ahead\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:" writing message and terminating "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:mM}]},{type:a,value:fL},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:cm}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:a_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2.0"}]},{type:a,value:".0 OK "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"1203693994"}]},{type:a,value:" z21si1091485qbc.21\n  SMTP"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aO}]},{type:a,value:" QUIT\nLOG: MAIN\n  "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:" sysadmin@renoirboulanger.com "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fv}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:mU},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:fw}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"lookuphost "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:cl}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"remote_smtp "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ck}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"450"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"H"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"ASPMX.L.GOOGLE.COM "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mR}]},{type:a,value:mS},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"C"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"250 2.0.0 OK 1203693994 z21si1091485qbc.21\""}]},{type:a,value:mu}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note: C'est quoi EHLO ou HELO? voir \"Description du HELO\""}]},{type:a,value:e},{type:b,tag:al,props:{id:lN},children:[{type:b,tag:m,props:{href:"#tester-mail-remote-vers-mailserver-pour-voir-le-bon-fonctionnement-de-spamassassin",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lO}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Le but de ce test est de s'assurer que le service de spam antivirus est lancé,\nil faut s'assurer que le service \"SpamAssassin\" est activé dans la config du\nclient dans le pannel, et qu'on envoie le test en remote."}]},{type:a,value:e},{type:b,tag:af,props:{id:lP},children:[{type:b,tag:m,props:{href:"#envoi-courriel-via-une-machine-remote-via-mail",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lQ}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Sert a s'assurer que l'envoi d'un courriel remote (application ou en shell)\nfonctionne bien de l'extérieur."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"mail test@test.com\nSubject: Test lundi am "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fM}]},{type:a,value:" remote to virtuallocal\nMessage body, with random content\n"},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:$}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:af,props:{id:lR},children:[{type:b,tag:m,props:{href:"#regarder-le-log-spamd",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lS}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Permet de savoir si le message envoyé dans le test \"Envoi courriel via une\nmachine remote via mail\" à bien passé"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:dN}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,u,h]},children:[{type:a,value:bJ}]},{type:a,value:" \u002Fvar\u002Flog\u002Fmaillog\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:ej},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:":31:54 web1 spamd"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"3160"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": prefork: child states: II\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:fN},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": spamd: connection from web1 "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cK}]},{type:a,value:fD},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:" at port "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mW}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cM}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:fN},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": spamd: setuid to renoirb succeeded\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mQ}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:fN},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": spamd: processing message "},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:mX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:mY}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:mZ}]},{type:a,value:m_},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:" renoirb:501\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fr}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:m$},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": spamd: identified spam "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"7.0"}]},{type:a,value:"\u002F5.0"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:" renoirb:501 "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:cg}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:na}]},{type:a,value:" seconds, "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:nb}]},{type:a,value:" bytes.\n"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fM}]},{type:a,value:cn},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bA}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:m$},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:S}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cN}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:R}]},{type:a,value:": spamd: result: Y "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:fM}]},{type:a,value:" - HTML_MESSAGE,RAZOR2_CF_RANGE_51_100,RAZOR2_CF_RANGE_E4_51_100,RAZOR2_CF_RANGE_E8_51_100,RAZOR2_CHECK,RDNS_NONE,URIBL_JP_SURBL "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"scantime"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:na}]},{type:a,value:",size"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:nb}]},{type:a,value:",user"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"renoirb,uid"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"501"}]},{type:a,value:",required_score"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"5.0"}]},{type:a,value:",rhost"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"web1,raddr"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cK}]},{type:a,value:".0.1,rport"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mW}]},{type:a,value:",mid"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aP}]},{type:a,value:mX},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:mY}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:mZ}]},{type:a,value:m_},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:V}]},{type:a,value:",autolearn"},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"no\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:ej}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Voici ce que le spamscanner a fait..."}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Ligne 4: Il process le message pour le user"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Ligne 5: Donne le resultat, (soit "},{type:b,tag:Q,props:{},children:[{type:a,value:"identified spam"}]},{type:a,value:" ou "},{type:b,tag:Q,props:{},children:[{type:a,value:"clean message"}]},{type:a,value:")\navec la note entre parenthèses (note reçue \u002F note maximale)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Ligne 6: Le résultat Y=C'est un spam... N=Le message est propre... puis la\nvaleur des tests coulés (HTML_MESSAGE,RAZOR2_CF_RANGE_51_100,...)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:fE},{type:b,tag:j,props:{},children:[{type:a,value:fF}]},{type:a,value:fG}]},{type:a,value:e},{type:b,tag:al,props:{id:lT},children:[{type:b,tag:m,props:{href:"#tester-spamassassin",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lU}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour savoir comment SpamAssassin (aka. SA) traite le spam, on peut lancer\nquelques commandes comme celles ci."}]},{type:a,value:e},{type:b,tag:aR,props:{id:"sa-avec-tests-razor2-sur-un-sample-spam"},children:[{type:b,tag:m,props:{href:"#sa-avec-tests-razor2-sur-un-sample-spam",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"SA avec tests Razor2 sur un sample spam"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"spamassassin -t -D razor2 \u003C \u002Fusr\u002Fshare\u002Fsample-nonspam.txt\n\n... plusieurs lignes ...\n\n[19464] dbg: razor2: razor2 is available, version 2.82\n Razor-Log: read_file: 16 items read from \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Frazor-agent.conf\n Razor-Log: Found razorhome: \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\nFeb 28 10:48:38.385733 check[19464]: [ 2] [bootup] Logging initiated LogDebugLevel=9 to stdout\nFeb 28 10:48:38.386209 check[19464]: [ 5] computed razorhome=\u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor, conf=\u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Frazor-agent.conf, ident=\u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Fidentity-ruKDx1iKgh\nFeb 28 10:48:38.386500 check[19464]: [ 8] Client supported_engines: 4 8\nFeb 28 10:48:38.386960 check[19464]: [ 8]  prep_mail done: mail 1 headers=293, mime0=616\nFeb 28 10:48:38.387312 check[19464]: [ 5] read_file: 1 items read from \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Fservers.discovery.lst\n\n... inclusions des config modulaires ...\n\nFeb 28 10:48:38.405171 check[19464]: [ 5] read_file: 23 items read from \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Fserver.joy.cloudmark.com.conf\nFeb 28 10:48:38.405460 check[19464]: [ 5] 162877 seconds before closest server discovery\nFeb 28 10:48:38.405729 check[19464]: [ 6] c301.cloudmark.com is a Catalogue Server srl 5382; computed min_cf=21, Server se: 3BC8\nFeb 28 10:48:38.405995 check[19464]: [ 8] Computed supported_engines: 4 8\nFeb 28 10:48:38.406217 check[19464]: [ 8] Using next closest server c301.cloudmark.com:2703, cached info srl 5382\nFeb 28 10:48:38.406432 check[19464]: [ 8] mail 1 has no subject\nFeb 28 10:48:38.406840 check[19464]: [ 6] preproc: mail 1.0 went from 616 bytes to 503\nFeb 28 10:48:38.407064 check[19464]: [ 6] computing sigs for mail 1.0, len 503\nFeb 28 10:48:38.408529 check[19464]: [ 6] Engine (8) didn't produce a signature for mail 1.0\nFeb 28 10:48:38.408827 check[19464]: [ 6] skipping whitelist file (empty?): \u002Fetc\u002Fmail\u002Fspamassassin\u002F.razor\u002Frazor-whitelist\nFeb 28 10:48:38.409055 check[19464]: [ 5] Connecting to c301.cloudmark.com ...\nFeb 28 10:48:38.440917 check[19464]: [ 8] Connection established\nFeb 28 10:48:38.441071 check[19464]: [ 4] c301.cloudmark.com \u003E\u003E 36 server greeting: sn=C&srl=5403&a=1&a=cg&ep4=7542-10\nFeb 28 10:48:38.441476 check[19464]: [ 4] c301.cloudmark.com \u003C\u003C 25\nFeb 28 10:48:38.441548 check[19464]: [ 6] cn=razor-agents&cv=2.82\nFeb 28 10:48:38.441813 check[19464]: [ 4] c301.cloudmark.com \u003C\u003C 14\nFeb 28 10:48:38.441873 check[19464]: [ 6] a=g&pm=state\nFeb 28 10:48:38.463790 check[19464]: [ 4] c301.cloudmark.com \u003E\u003E 264\nFeb 28 10:48:38.463875 check[19464]: [ 6] response to sent.2\n...\n[19464] dbg: razor2: part=0 engine=4 contested=0 confidence=100\n[19464] dbg: razor2: results: spam? 1\n[19464] dbg: razor2: results: engine 8, highest cf score: 0\n[19464] dbg: razor2: results: engine 4, highest cf score: 100\n[19464] info: rules: meta test HS_PHARMA_1 has dependency 'HS_SUBJ_ONLINE_PHARMACEUTICAL' with a zero score\nReceived: from localhost by web1.renoirboulanger.com\n        with SpamAssassin (version 3.2.0);\n        Thu, 28 Feb 2008 10:48:41 -0500\nFrom: Sender \u003Csender@example.net\u003E\nTo: Recipient \u003Crecipient@example.net\u003E\nSubject: *****SPAM***** Test spam mail (GTUBE)\nDate: Wed, 23 Jul 2003 23:30:00 +0200\nMessage-Id: \u003CGTUBE1.1010101@example.net\u003E\nX-Spam-Flag: YES\nX-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on web1.renoirboulanger.com\nX-Spam-Level: **************************************************\nX-Spam-Status: Yes, score=1002.6 required=5.0 tests=AWL,GTUBE,NO_RECEIVED,\n        NO_RELAYS,RAZOR2_CF_RANGE_51_100,RAZOR2_CF_RANGE_E4_51_100,RAZOR2_CHECK\n        autolearn=no version=3.2.0\nMIME-Version: 1.0\nContent-Type: multipart\u002Fmixed; boundary=\"----------=_47C6D7D9.CD6EF8C3\"\n\nThis is a multi-part message in MIME format.\n\n------------=_47C6D7D9.CD6EF8C3\n...Le courriel en tant que tel\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Note: Il existe trois fichiers de tests: "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fusr\u002Fshare\u002Fsample-spam.txt"}]},{type:a,value:" (test\nemail sample spam), "},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fusr\u002Fshare\u002Fsample-nonspam.txt"}]},{type:a,value:" (sample email correct), et\n"},{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fusr\u002Fshare\u002Fsample-virus.txt"}]},{type:a,value:" (pour voir si l'antivirus est ok)"}]},{type:a,value:e},{type:b,tag:al,props:{id:lV},children:[{type:b,tag:m,props:{href:"#tester-les-relais-smtp",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lW}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Notez que j'ai pas sous la main d'adresse courriel ou serveur connu comme\nspammeur sur notre réseau ce qui est très bien."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Alors si votre test donne pas un résultat similaire... on a un problème de spam!"}]},{type:a,value:e},{type:b,tag:aR,props:{id:"avec-exim--bh"},children:[{type:b,tag:m,props:{href:"#avec-exim--bh",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"avec exim -bh"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Avec la commande "},{type:b,tag:j,props:{},children:[{type:a,value:"exim -bh IP-ADDRESS EMAIL-ADDRESS"}]},{type:a,value:" on peut savoir comment le\ncourriel passe, s'il est accepté."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"exim -bh 69.159.235.26 renoirb@gmail.com\n\n**** SMTP testing session as if from host 69.159.235.26\n**** but without any ident (RFC 1413) callback.\n**** This is not for real!\n\n\u003E\u003E\u003E host in hosts_connection_nolog? no (option unset)\n\u003E\u003E\u003E host in host_lookup? yes (matched \"*\")\n\u003E\u003E\u003E looking up host name for 69.159.235.26\n\u003E\u003E\u003E IP address lookup yielded mtrlpq02-1168108314.sdsl.bell.ca\n\u003E\u003E\u003E gethostbyname looked up these IP addresses:\n\u003E\u003E\u003E   name=mtrlpq02-1168108314.sdsl.bell.ca address=69.159.235.26\n\u003E\u003E\u003E checking addresses for mtrlpq02-1168108314.sdsl.bell.ca\n\u003E\u003E\u003E   69.159.235.26 OK\n\u003E\u003E\u003E host in host_reject_connection? no (option unset)\n\u003E\u003E\u003E host in sender_unqualified_hosts? no (option unset)\n\u003E\u003E\u003E host in recipient_unqualified_hosts? no (option unset)\n\u003E\u003E\u003E host in helo_verify_hosts? no (option unset)\n\u003E\u003E\u003E host in helo_try_verify_hosts? no (option unset)\n\u003E\u003E\u003E host in helo_accept_junk_hosts? no (option unset)\n220 web1.renoirboulanger.com ESMTP Exim 4.66 Thu, 28 Feb 2008 11:02:19 -0500\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Exemple de test fonctionnel (On remarque le message "},{type:b,tag:j,props:{},children:[{type:a,value:"220 hostname ESMTP..."}]},{type:a,value:".\nFaire [^c] pour sortir."}]},{type:a,value:e},{type:b,tag:aR,props:{id:"avec-exim_checkaccess"},children:[{type:b,tag:m,props:{href:"#avec-exim_checkaccess",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"Avec exim_checkaccess"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Une autre version existe qui sort moins de output"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"exim_checkaccess "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:dQ}]},{type:a,value:".235.26 contribs@renoirboulanger.com\nAccepted\n"}]}]}]},{type:a,value:e},{type:b,tag:al,props:{id:lX},children:[{type:b,tag:m,props:{href:"#statistiques",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:lY}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Il existe, a ma mémoire, actuellement, un outil qui permet de savoir l'Activité\ndu serveur. Il est dans un crontab. Voici la commande."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"eximstats \u002Fvar\u002Flog\u002Fexim\u002Fmainlog\n\nExim statistics from "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:"-02-24 04:02:35 to "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aZ}]},{type:a,value:"-02-28 "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:bp}]},{type:a,value:":11:24\n\nGrand total summary\n-------------------\n                                                                  At least one address\n  TOTAL               Volume   Messages Addresses     Hosts      Delayed       Failed\n  Received             100MB       "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"6049"}]},{type:a,value:"                "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2029"}]},{type:a,value:"       "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cT}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"0.0"}]},{type:a,value:"%     "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"37"}]},{type:a,value:bY},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"0.6"}]},{type:a,value:"%\n  Delivered            101MB       "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"6174"}]},{type:a,value:cy},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"6336"}]},{type:a,value:"        "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"17"}]},{type:a,value:"\n  Rejects                         "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"45232"}]},{type:a,value:"               "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"21772"}]},{type:a,value:"\n\nDeliveries by transport\n-----------------------\n                      Volume    Messages\n  :blackhole:           12MB        "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2232"}]},{type:a,value:"\n  address_file         660KB          "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"64"}]},{type:a,value:"\n  remote_smtp          600KB          "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"89"}]},{type:a,value:"\n  spamcheck             46MB        "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"2966"}]},{type:a,value:"\n  virtual_localdelivery    42MB         "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"823"}]},{type:a,value:"\n\nMessages received per hour "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:a,value:"each dot is "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mN}]},{type:a,value:" messages"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:"\n---------------------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:". un tableau par points "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:ai}]},{type:a,value:" qui donne une idée de grandeur de la quantité de courriel "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:".\n\nTime spent on the queue: all messages\n-------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:".\n\nTime spent on the queue: messages with at least one remote delivery\n-------------------------------------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:".\n\nRelayed messages\n----------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cp}]},{type:a,value:" mail rejection reasons by message count\n----------------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cp}]},{type:a,value:" sending hosts by message count\n-------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cp}]},{type:a,value:" sending hosts by volume\n------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:cj}]},{type:a,value:" senders by message count\n-------------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:cj}]},{type:a,value:" senders by volume\n------------------------------\n\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:co},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:cp}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:fC}]},{type:a,value:" destinations by message count\n-----------------------------------------\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:az}]},{type:a,value:".\n\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Très utile!"}]},{type:a,value:e},{type:b,tag:al,props:{id:lZ},children:[{type:b,tag:m,props:{href:"#vulgarisation",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:l_}]},{type:a,value:e},{type:b,tag:af,props:{id:l$},children:[{type:b,tag:m,props:{href:"#description-du-helo",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ma}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:gG},{type:b,tag:m,props:{href:fO,rel:[q,r,s],target:t},children:[{type:a,value:fO}]},{type:a,value:" (modifié)"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Une discussion SMTP commence soit par "},{type:b,tag:Q,props:{},children:[{type:a,value:"EHLO"}]},{type:a,value:" (ou "},{type:b,tag:Q,props:{},children:[{type:a,value:"HELO"}]},{type:a,value:"). Qui, en gros,\nannonce que le serveur de courrier possède quelques features améliorés comparé\naux premières générations de serveur smtp."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:dR}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"...But to use later additions to SMTP that have brought about two flavors of the\nlater HELO command (SMTP command generally consist of four characters)."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:dR}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"EHLO, being the more recent one makes the server advertise all the additional\nfeatures (such as delivery status notification or the ability to transport\nmessages that contain other than the safe ASCII characters) it supports."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:dR}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Not every server will allow this greeting, but it is required to accept a plain\nHELO which naturally assumes that no additional features are present."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:dR}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Both HELO (et EHLO) commands do require the client to specify its domain"}]},{type:a,value:"\nafter the **LO, however."}]},{type:a,value:e},{type:b,tag:al,props:{id:mb},children:[{type:b,tag:m,props:{href:"#r%C3%A9f%C3%A9rences",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:mc}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:"http:\u002F\u002Fwww.netadmintools.com\u002Fpart276.html",rel:[q,r,s],target:t},children:[{type:a,value:"Tester avec telnet"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:fO,rel:[q,r,s],target:t},children:[{type:a,value:"Réferences du protocole SMTP"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:m,props:{href:"http:\u002F\u002Femail.about.com\u002Fcs\u002Fstandards\u002Fa\u002Fsmtp_error_code.htm",rel:[q,r,s],target:t},children:[{type:a,value:"Definition messages d'erreur SMTP"}]}]},{type:a,value:e}]},{type:a,value:e}]}]},dir:nc,path:"\u002Fblog\u002F2008\u002F04\u002Ftester-le-fonctionnement-dun-serveur-smtp",extension:aH,slug:"tester-le-fonctionnement-dun-serveur-smtp",createdAt:"2024-10-24T19:50:04.879Z",updatedAt:"2024-10-24T19:50:04.880Z",category:ak,prettyfiedTemporalDate:{prettified:"samedi 19 avril 2008",temporalDate:"2008-04-19"}},{title:"Effacer complètement un disque dur de façon sécuritaire",locale:dx,created:"2008-04-16T00:00:00.000Z",updated:"2013-03-27T00:00:00.000Z",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2008\u002F04\u002Feffacer-un-disque-dur\u002F",status:aG,revising:aq,categories:[ak],tags:[eQ,lq,aQ,hV,"security"],keywords:["disque dur","disques",bl,kx],excerpt:"Une procédure qui explique comment complètement effacer un disque dur en écrivant plusieurs fois des données aléatoires pour rendre beaucoup plus difficile de recouvrer les données.",preamble:{disable:aq},toc:[{id:nd,depth:ac,text:ne},{id:nf,depth:ac,text:ng},{id:nh,depth:ac,text:ni},{id:nj,depth:ac,text:nk},{id:nl,depth:ac,text:nm},{id:nn,depth:ac,text:no}],body:{type:aB,children:[{type:b,tag:i,props:{},children:[{type:a,value:"Lorsqu’on se préocupe de ses informations personnelles et qu’on veut se\ndébarrasser d’un ordinateur ou d’un vieux disque dur il faut, idéalement, le\nvider. J’ai une petite méthode pour le faire pas trop compliqué et totalement\nsécuritaire pour les données."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ma méthode implique"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Un disque dur qu’on veut wiper (effacer)"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Un LiveCD de Linux"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Du temps"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Une tour d’ordinateur pour le processus, idéalement inutilisée... sinon où\nchercher ou quoi utiliser pour se «dé-s’emmerder»\n"},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"Un lecteur CD-Rom"}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Attention, un peu technique... mais tellement conseillé :)"}]},{type:a,value:e},{type:b,tag:af,props:{id:nd},children:[{type:b,tag:m,props:{href:"#%C3%A9tape-un-backups",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ne}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"C’est un peu stupide de le préciser... mais assurez-vous qu’il est vraiment vide\nde vos données avant de faire quoi que ce soit!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:Q,props:{},children:[{type:a,value:"Je vous recommande DE NE PAS AVOIR D’AUTRES DISQUES D’INSTALLÉ lors de\nl’exécution de ce script"}]},{type:a,value:" Tant que vous exécutez pas le script a l’"},{type:b,tag:bj,props:{to:np},children:[{type:a,value:"étape\nsix"}]},{type:a,value:" vous ne risquez rien (!)."}]},{type:a,value:e},{type:b,tag:af,props:{id:nf},children:[{type:b,tag:m,props:{href:"#%C3%A9tape-deux-graver-le-livecd",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ng}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour faire la chose facile, vous pouvez prendre le LiveCD de Debian, ma\ndistribution préférée:"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"http:\u002F\u002Flive.debian.net\u002Fcdimage\u002Frelease\u002Fcurrent\u002Fi386\u002Fiso-cd\u002F"}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Une version\n\""},{type:b,tag:c,props:{lang:bK,title:"ISO de l’Image d’installation de Debian Linux"},children:[{type:b,tag:j,props:{},children:[{type:a,value:"debian-live-(.*)-i386-rescue.iso"}]}]},{type:a,value:"\"\nfera l’affaire."}]},{type:a,value:e},{type:b,tag:aR,props:{id:"où-trouver-linux"},children:[{type:b,tag:m,props:{href:"#o%C3%B9-trouver-linux",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"OÙ TROUVER LINUX"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Vous pouvez regarder "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwiki.debian.org\u002FLiveCD",rel:[q,r,s],target:t},children:[{type:a,value:"ici"}]},{type:a,value:" pour d’autres versions de Debian."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour remplacer Windows, ce que je recommande c’est d’utiliser "},{type:b,tag:m,props:{href:"https:\u002F\u002Fwww.ubuntu.com\u002F",rel:[q,r,s],target:t},children:[{type:a,value:"Ubuntu Linux"}]},{type:a,value:"\n(ce que j’utilise pour mon environnement de Bureau)."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Mais ce n’est pas le but de cet article."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Juste une dernière note comme ça: Debian, pour moi, sert pour les serveurs... et\nUbuntu est basé sur Debian."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour ce qui concerne Linux et notre utilisation actuelle, n’importe quelle\nversion fera l’affaire."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Les commandes nécessaires seront celles de base pour n’importe quel Linux depuis\nses débuts :"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fdev\u002Furandom"}]},{type:a,value:", ou"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fdev\u002Fzero"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:aI,props:{lang:bK,title:"Device to Device command"},children:[{type:b,tag:j,props:{},children:[{type:a,value:nq}]}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Je ne me rappelle pas quand Linux en général a inclus ces trucs mais c’est ce\nqu’il faut."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"En gros les deux premiers sont des "},{type:b,tag:c,props:{lang:bK},children:[{type:a,value:"device files"}]},{type:a,value:" qui\nfournissent du "},{type:b,tag:c,props:{lang:bK},children:[{type:a,value:"junk"}]},{type:a,value:" aléatoire... et l’autre. Que des\nzéros!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Tandis que \"dd\" est un utilitaire pour écrire en "},{type:b,tag:c,props:{lang:bK},children:[{type:a,value:"device to\ndevice"}]},{type:a,value:". En d’autres mots: un périphérique vers l’autre."}]},{type:a,value:e},{type:b,tag:af,props:{id:nh},children:[{type:b,tag:m,props:{href:"#%C3%A9tape-trois-on-vide",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:ni}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"En fait, on enlève tout les autres disques durs question de ne pas se tromper!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ensuite, il est bien de remarquer que le processus peut prendre du temps. Ce\nserait idéal d’avoir une tour qui sert a rien... sinon on tombe a devoir\nattendre après."}]},{type:a,value:e},{type:b,tag:af,props:{id:nj},children:[{type:b,tag:m,props:{href:"#%C3%A9tape-quatre-on-d%C3%A9marre-le-livecd",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:nk}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On attend le command prompt. C’est comme du "},{type:b,tag:aI,props:{},children:[{type:a,value:"DOS"}]},{type:a,value:" à l’époque, sauf\nque c’est vraiment plus puissant!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour reconnaitre un prompt linux, on voit quelque chose du genre:"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"user@debian:~ $\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"ou encore... si on voit le dièze ("},{type:b,tag:j,props:{},children:[{type:a,value:bd}]},{type:a,value:")... c’est qu’on est un super utilisateur\n(root). Un LiveCD nous envoit généralement en root alors on devrait voir quelque\nchose de similaire à:"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"root@debian: ~ #\n"}]}]}]},{type:a,value:e},{type:b,tag:af,props:{id:nl},children:[{type:b,tag:m,props:{href:"#%C3%A9tape-cinq-on-script-un-peu",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:nm}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"On peut le faire de plusieurs façon la même chose. En gros, on se doit, pour\ns’assurer d’effacer complètement le disque de le remplir au moins huit fois au\nminimum de données random. Alors je propose le petit script qui se copie bien à\nla main."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Si vous avez vidé vos disques durs le disque dur a vider devraît être \u002Fdev\u002Fhda"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour vous en assurer, faites"}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"file \u002Fdev\u002Fhda\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Un output similaire ceci devrait sortir..."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fdev\u002Fhda: block special (3\u002F0)\n"}]}]}]},{type:a,value:e},{type:b,tag:aR,props:{id:"«crash-course»-sur-les-partitions-et-linux"},children:[{type:b,tag:m,props:{href:"#%C2%ABcrash-course%C2%BB-sur-les-partitions-et-linux",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:"«CRASH COURSE» SUR LES PARTITIONS ET LINUX"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Pour vous assurer de ne pas effacer un bon disque dur, je vous "},{type:b,tag:Q,props:{},children:[{type:a,value:"re-recommande\nDE NE PAS AVOIR D’AUTRES DISQUES D’INSTALLÉ lors de l’exécution de ce script"}]},{type:a,value:d$},{type:b,tag:bj,props:{to:np},children:[{type:a,value:"étape six"}]},{type:a,value:")!"}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Parceque si c’est pas le disque \u002Fdev\u002Fhda, c’est peut être \u002Fdev\u002Fsda ou même un\nautre nom."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Petit cours rapide de partitionnement sous Linux."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Les disques durs n’ont pas de lettres... tout dépend où dans le système on\n\"monte\" la partition."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"En fait les noms vont ainsi"}]},{type:a,value:e},{type:b,tag:X,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:aI,props:{},children:[{type:a,value:"hda"}]},{type:a,value:aK},{type:b,tag:aI,props:{},children:[{type:a,value:"hdb"}]},{type:a,value:aK},{type:b,tag:aI,props:{},children:[{type:a,value:"hdc"}]},{type:a,value:"... pour les disques durs\n"},{type:b,tag:aI,props:{},children:[{type:a,value:"IDE"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:aI,props:{},children:[{type:a,value:"sda"}]},{type:a,value:aK},{type:b,tag:aI,props:{},children:[{type:a,value:"sdb"}]},{type:a,value:aK},{type:b,tag:aI,props:{},children:[{type:a,value:"sdc."}]},{type:a,value:"... pour les disques\n"},{type:b,tag:aI,props:{},children:[{type:a,value:"SATA"}]},{type:a,value:nr},{type:b,tag:aI,props:{},children:[{type:a,value:"SCSI"}]},{type:a,value:nr},{type:b,tag:aI,props:{},children:[{type:a,value:"USB"}]}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Vous imaginez que le ’a’ (b,c,d...) représente l’ordre selon la nappe de\nconnecteurs."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"La première partition du premier disque sera donc: "},{type:b,tag:aI,props:{},children:[{type:b,tag:j,props:{},children:[{type:a,value:"\u002Fdev\u002Fsda1"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Si tout est beau... on continue."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"vi wipedisk.sh\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"En "},{type:b,tag:B,props:{title:"Vim Editor",lang:bK},children:[{type:a,value:"vi"}]},{type:a,value:", il faut faire '"},{type:b,tag:j,props:{},children:[{type:a,value:ns}]},{type:a,value:"’ (lettre\n"},{type:b,tag:dL,props:{},children:[{type:a,value:ns}]},{type:a,value:" minuscule, pour entrer en mode \""},{type:b,tag:B,props:{},children:[{type:a,value:"insert"}]},{type:a,value:"\") avant de commencer\nd’écrire..."}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:c,props:{className:["filename"]},children:[{type:a,value:"wipedisk.sh"}]},{type:b,tag:y,props:{className:[z,T]},children:[{type:b,tag:j,props:{},children:[{type:b,tag:c,props:{className:[d,eq,aW]},children:[{type:a,value:er}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:be}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"(("}]},{type:a,value:fP},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:fP},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:dM}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:mL}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:fP},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"+="}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"))"}]}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:A}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:fn}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,D,E]},children:[{type:a,value:_}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"\"Passe "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"$i"}]},{type:a,value:F}]},{type:a,value:Z},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:nq}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:ap}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"\u002Fdev\u002Furandom "},{type:b,tag:c,props:{className:[d,O,h]},children:[{type:a,value:"of"}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:C}]},{type:a,value:"\u002Fdev\u002Fhda\n  "},{type:b,tag:c,props:{className:[d,v]},children:[{type:a,value:"sleep"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:aX}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:fo}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Ensuite on quitte "},{type:b,tag:Q,props:{},children:[{type:a,value:"en faisant"}]},{type:a,value:g},{type:b,tag:dL,props:{title:"Escape"},children:[{type:a,value:"ESC"}]},{type:a,value:" \""},{type:b,tag:j,props:{},children:[{type:a,value:":wq"}]},{type:a,value:"\" (deux\npoints, la lettres minuscules \""},{type:b,tag:j,props:{},children:[{type:a,value:"w"}]},{type:a,value:"\" et \""},{type:b,tag:j,props:{},children:[{type:a,value:"q"}]},{type:a,value:"\" qui signifient\n"},{type:b,tag:c,props:{lang:bK},children:[{type:b,tag:B,props:{},children:[{type:a,value:"write"}]},{type:a,value:bN},{type:b,tag:B,props:{},children:[{type:a,value:"quit"}]}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:"chmod 755 wipedisk.sh\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Qui va rendre le fichier exécutable."}]},{type:a,value:e},{type:b,tag:af,props:{id:nn},children:[{type:b,tag:m,props:{href:"#%C3%A9tape-six-on-ex%C3%A9cute",ariaHidden:I,tabIndex:K},children:[{type:b,tag:c,props:{className:[L,M]},children:[]}]},{type:a,value:no}]},{type:a,value:e},{type:b,tag:w,props:{className:[x]},children:[{type:b,tag:y,props:{className:[z,av]},children:[{type:b,tag:j,props:{},children:[{type:a,value:".\u002Fwipedisk.sh\n"}]}]}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"En général, ça peut prendre du temps. Le disque devrait être totalement rempli\nd’ordures aléatoire."}]},{type:a,value:e},{type:b,tag:i,props:{},children:[{type:a,value:"Au plaisir!"}]}]},dir:nc,path:"\u002Fblog\u002F2008\u002F04\u002Feffacer-un-disque-dur",extension:aH,slug:"effacer-un-disque-dur",createdAt:nt,updatedAt:nt,category:ak,prettyfiedTemporalDate:{prettified:"mercredi 16 avril 2008",temporalDate:"2008-04-16"}}],taxonomyKey:ak,taxonomy:{key:ak,human:{key:ak,text:"Projets",description:"Projets sur lesquels j’ai travaillé ou publié.\n"}}}],fetch:[],mutations:void 0}}("text","element","span","token","\n","punctuation"," ","variable","p","code","li","operator","a","number","keyword","string","nofollow","noopener","noreferrer","_blank","parameter","function","div","nuxt-content-highlight","pre","line-numbers",";","em","=","builtin","class-name","\"","\\","-","true",":",-1,"icon","icon-link","comment","assign-left","key","strong","]","[","language-bash","atrule","\u003E","\n    ","ul","}","\n  ","echo",".","ol","{",3,"\n      ",2,"h3","\n\n","td",")","directive","projects","h2",false,"|","$PN","if",true,"then","fi","\n        ","app-image","language-text","$DB_DEST_DBNAME","app-link-compare-item","`","..","-z","root","(",",","instruction","-n","publish",".md","abbr","${TMPDIR}",", ","property","$DB_SOURCE_DBNAME","boolean","\u003E\u003E","\u003C","procedure","h4","$ERROR_MSG","25","12","en-CA","important","1","\"DONE\"","2008","250","header","tr","!","install","#","for","attr-name","value","attr-value","ERROR_MSG","nuxt-link","th","linux","docker","-v","exit","11","header-name","header-value","operations","cd","-p","0","float:unset;","\n\n    ","     ","function-name","26","2023-02-18T00:00:00.000Z","ssh","mkdir","Fastly","-y","language-yaml","\u002F","$DB_DEST_PASS","-f","en","screenshots","Screenshots"," and ","sudo","apt-get","ENV","w-1\u002F3","cloud-computing","Procedure","Cloud-Init","\n     ","define","single-quoted-string","  ","double-quoted-string","${","environment","constant","PWD","$DB_DEST_HOST","-u","-h","$mysql","in"," Feb ","-0500","local","S","T","\u003C\u003C",".   Feb ",".\n\nTop ","50","webplatform","MediaWiki","app-alert-box","Support MediaWiki special URL patterns","server","class","IN","type","      ","include",4,"2024-10-24T19:50:04.931Z","\"\"","user","cat"," salt","$DB_DEST_USER"," -p","enter","renoirb@web1.renoirboulanger.com","127.0",", enter","3","817","2024-10-24T19:50:04.936Z"," (","Accept","webplatform.github.io","blockquote","2","overflow:hidden;clear:both;","thumbnails","gallery","steps","Steps"," or ","-s","cp","$(","pwd","\n       ","service","\"localhost\"","listen","server_name","2024-10-24T19:50:04.933Z","A","CNAME","443","upstream","salt-stack"," on ","name"," dir ","OpenStack Cloud-Init dialog","2024-10-24T19:50:04.930Z","https:\u002F\u002Fcloudinit.readthedocs.org\u002Fen\u002Flatest\u002F","Cloud-Init reference documentation pages","https:\u002F\u002Fwww.digitalocean.com\u002Fcommunity\u002Ftutorials\u002Fan-introduction-to-cloud-config-scripting","false","nova","fr-CA","2024-10-24T19:50:04.929Z"," apt",".sql","$VER","$DB_DEST_USERNAME","$DB_DEST_USERHOST","\n\n      ","DB_EXIST","\\\"","\n            ","nc","^c","220","kbd","\u003C=","tail","66.46",".177.182","69.159","(...)","Archivator","code-block","blog","Requirements","Requirements we couldn’t meet","webplatform.org","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-wpd","What was under \u002Fwiki\u002FWPD:...","source","\n(","webplatform\u002Fmediawiki-conversion","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fmediawiki-conversion","Export MediaWiki wiki pages and history into a git repository","static.webplatform.org","#screenshots","https:\u002F\u002Fgithub.com\u002Fwebspecs\u002Fpublican","Publican","\n ","id",".\n"," run ","-it","--rm","7002","language-nginx","RUN","shebang","#!\u002Fbin\u002Fbash","flex","flex-row","flex-wrap","Discourse","Docker",".deb","#procedure","wget","https:\u002F\u002Fgithub.com\u002Fjordansissel\u002Ffpm","fpm","\u002Fblog\u002F2015\u002F04","frontend","aufs","%","require","pkg"," ubuntu\n    ","${pecl_memcached_ver}","An introduction to cloud-config scripting","--image"," Ubuntu-14.04-Trusty ","--key_name","--flavor","https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F563cb12326b92b22a452","techniques","mysql"," grep ","q ","db","10.10","masterdb","2014.7","salt ","-G","bind-address","mysqldump","OVERRIDEUSERCREATION","continuer"," version ","date",".sql.tmp\n","'@'","$DB_DEST_USERPW","';\"",".sql.tmp\n  ","$1","$DB_SOURCE_USER","$DB_SOURCE_PASS"," fatal ","do","done"," web1.renoirboulanger.com ","4.66","5","U","P","local ","F","R","Subject:","-02-25 "," from ",":01:14 web1 imapd","19532","host",".0.1","Note: Rappel le ","\u002Fvar\u002Flog\u002Fmaillog"," donne le output des login IMAP(imapd), POP\n(vm-pop3d) et SpamAssasin (spamd)",":02:16 ","20764","354","Faut entrer \"","\n  SMTP","6",":32:15 web1 spamd","http:\u002F\u002Femail.about.com\u002Fcs\u002Fstandards\u002Fa\u002Fsmtp.htm"," i ","2024-03-03T00:00:00.000Z","on-front-page","archiving","2020-09-10T00:00:00.000Z","features","Features","code-blocks","Code blocks","rb-notice-box","info","my-5","https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Farchivator",").","application\u002Fjson","","language-http","GET \u002Fhello\n","response-status","http-version","HTTP\u002F1.1","status-code","200","reason-phrase","OK","Content-Type","Date","Fri, 16 Sep 2005 19:22:04 GMT","Vary","plain\u002Ftext","open-source","priorities","Priorities","outcome","Outcome","migration","Migration","Blog","mediawiki","requirements","requirements-we-couldnt-meet","display:flex","https:\u002F\u002Fwww.w3.org\u002FPeople\u002Ffunctions\u002Fsysteam","https:\u002F\u002Fwebplatform.github.io\u002F","WebPlatform Docs Home Page","Source: ","table","thead","tbody","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs","What was under \u002Fwiki\u002F...","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-meta","What was under \u002Fwiki\u002FMeta:...","webplatform\u002Fdocs-wpd","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fblog","MediaWiki XML dump","https:\u002F\u002Fwww.mediawiki.org\u002Fwiki\u002FHelp:Namespaces","\u002Fwiki\u002FWPD:*","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fcontent-converter","Transform CMS content from a format into another","webplatform\u002Fcontent-converter","20150513130014","http:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002F","https:\u002F\u002Fstatic.webplatform.org\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fdocs-assets\u002Fblob\u002Fgh-pages\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fwebplatform.github.io\u002Fdocs-assets\u002Ff\u002Ff1\u002Fhtmlstructure1.jpg","https:\u002F\u002Fgithub.com\u002Fwebplatform\u002Fgenerator-docs\u002Fblob\u002Fmaster\u002Fconfig\u002Fnginx\u002Fmaps\u002Fmain.map","2024-10-24T19:50:04.934Z","run-publican-inside-docker","gists","Gists","#steps"," vagrant ","su","state.highstate","tmux","screen","\u002Fdata\"",":\u002Fsrv\u002Fwebapps\u002Fpublican\u002Fdata ","\u002Fspec-data\"",":\u002Fopt\u002Fbikeshed\u002Fbikeshed\u002Fspec-data ",":7002 webspecs\u002Fpublican:wip\n","outside","It should look like the screenshot with caption \"","\".","Starting a build process","\n           ","\"jdoe@example.org\"","80","location"," \u002F","$uri","$RUNDIR","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-preview.png","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F05\u002Fpublican-deleted-spec-regeneration-question.png","Annotated screenshot, when changing a file a hook is called and regenerates the specification","...","\u002Fblog\u002F2015\u002F05","Varnish","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F11\u002Fdiscourse_migration_list_gravatar_images.png","Side by side comparison while working on migrating Discourse\nwith WICG\n","It is possible the code shown here no longer works.\nMaybe the code shown here uses parts of Discourse that no longer exists.\n","proposed-setup","Proposed setup","https:\u002F\u002Fmeta.discourse.org\u002Ft\u002Ffull-site-cdn-acceleration-for-discourse\u002F21467\u002F1","@sam","http:\u002F\u002Fexample.org\u002F","discoursepolling.example.org","~\u002Fassets\u002Fcontent\u002Fblog\u002F2015\u002F04\u002Fdiscuss-fastly-origins.png","Fastly service configuration, at Hosts tab","Configure -\u003E Hosts","language-dns-zone-file"," discoursepolling.example.org discourse.example.org"," ssl","best-practices","ubuntu","why-not-replacing-internal-python-version","Why not replacing internal Python version?","incomplete-scratchpad","Incomplete scratchpad","setuptools","Setuptools","resources","Resources","\n        libbluetooth-dev ","\n        libbz2-dev ","\n        libexpat1-dev ","\n        libssl-dev ","tar","make"," fpm\n","https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F02\u002Finstall-php5-memcached-pecl-extension-support-igbinary\u002F","ln","http:\u002F\u002Fdavebehnke.com\u002Fpython-pyenv-ubuntu.html","https:\u002F\u002Fgithub.com\u002Fyyuu\u002Fpyenv","https:\u002F\u002Fwww.python.org\u002Fdownloads\u002Frelease\u002Fpython-279\u002F","http:\u002F\u002Faboutsimon.com\u002F2012\u002F04\u002F16\u002Fbuilding-a-python-deb-in-a-bootstrapped-ubuntu-chroot-with-fpm\u002F","http:\u002F\u002Fserverfault.com\u002Fquestions\u002F669859\u002Fhow-can-i-upgrade-python-to-2-7-9-on-ubuntu-14-4","http:\u002F\u002Faskubuntu.com\u002Fquestions\u002F101591\u002Fhow-do-i-install-python-2-7-2-on-ubuntu","https:\u002F\u002Fwiki.debian.org\u002FDebootstrap","Enable a CDN for your Discourse","setup-detail","Setup detail","https:\u002F\u002Fdocs.fastly.com\u002Fguides\u002Fssl\u002Fwhich-ssl-options-are-available","\u002Fblog\u002F2015\u002F05\u002Fmake-discourse-long-polling-work-behind-fastly\u002F","Make Discourse \"long polling\" work behind\nFastly","SSL between ","keepalive","frontends","discourse"," tld ","                 ","on"," https","file.managed"," linux","pkg.installed","unless"," git\n  ","group","* state.highstate\n",5,"build-from-pecl-source","Build from PECL source","make-a-deb-package","Make a .deb package","update-your-private-apt-repository-or-create-one","Update your private apt repository (or create one)","igbinary","apt","https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F24407095\u002Ferror-when-installing-pecl-memcached\u002F28597188#answer-24892703"," \u002Ftmp\u002Fphp5-memcached\n","dpkg ","grep",6,"gzip","read-more","Read more","Easily automate The provisioning of your DigitalOcean Droplets ... using Cloud-Init","curl","2013","#cloud-config","nova boot ","\n     --security-groups default ","\u002Fsrv\u002Fcloudconfig.yml","\u002Fetc\u002Fprofile.d\u002F","python-novaclient","2015-01-28T00:00:00.000Z","requis","Requis","bouts-de-code","Bouts de code","billets-inspirants-sur-le-sujet","Billets inspirants sur le sujet","https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2015\u002F01\u002Fcreate-mariadb-cluster-replication-ssl-salt-stack\u002F","https:\u002F\u002Fgist.github.com\u002FWebPlatformDocs\u002F780307ff289864ba02f5","https:\u002F\u002Fgist.github.com\u002Frenoirb\u002Fa66b533c46ef7a8de8e3","https:\u002F\u002Fgist.github.com\u002Frenoirb\u002Fb2e0222ad52e5d453298"," avec ","\u002Fblog\u002F2015\u002F01","Create a MariaDB cluster with replication over SSL with Salt Stack","changing-mariadb-replication-master","Changing MariaDB replication master","assumptions","Assumptions","from-the-salt-master-initiate-a-few-vms-to-use-for-your-database-cluster","From the salt-master, initiate a few VMs to use for your database cluster","now-on-each-database-server","Now on each database server;","checking-if-it-worked","Checking if it worked","managing-users","Managing users","references","References","userdata.txt","While migrating this article...","get "," renoirb-production ","-a",". "," ACTIVE  "," Running     "," private-network","hosts_entries"," www","data\n    ","'pillar.get'","language-php","'roles:db'"," db2:\n","10.1",".2-MariaDB-1~trusty-wsrep-log\n"," db1-masterdb:\n","     ca-cert.pem\n","     ca-key.pem\n","     client-cert.pem\n","     client-key.pem\n","     client-req.pem\n","     server-cert.pem\n","     server-key.pem\n","     server-req.pem\n","server_id","section","section-name","selector","\nssl\n","ssl-cert","ssl-key"," says ","http:\u002F\u002Fdev.mysql.com\u002Fdoc\u002Frefman\u002F5.7\u002Fen\u002Freplication-solutions-ssl.html","https:\u002F\u002Fmariadb.com\u002Fkb\u002Fen\u002Fmariadb\u002Fdocumentation\u002Fmanaging-mariadb\u002Freplication\u002Fstandard-replication\u002Fsetting-up-replication\u002F","script","à-propos-du-projet","à propos du projet","les-prérequis","Les prérequis","ce-que-le-script-fait","Ce que le script fait","le-script","Le script",".sql.gz"," existe...","DROP","non: ","which",".conf\n","\"-- Generated by ","' IDENTIFIED BY '",".sql.purge.tmp\n\n  ","$mysql "," $DB_DEST_USER "," $DB_DEST_HOST -p","-Bse","sed","case","\" * Checking if needed vars are set ... \"","$SSH_SOURCE","$SSH_USER","$SSH_PORT","$DB_SOURCE_HOST","\"1\"","$OPTS_COMPRESSION_PROG","OPTS_COMPRESSION_PROG","\"gzip\"","DBS"," -u ","entity","for-or-select","$DBS","$db","$DB_EXIST",".sql.gz\"",".sql.gz\n      ","\"Finished!\"",".sql ","esac",".sql.tmp ","2024-10-24T19:50:04.904Z","tutoriels","vérifier-si-le-firewall-bloque-certains-services","Vérifier si le Firewall bloque certains services","tester-le-serveur-courriel","Tester le serveur courriel","créer-un-compte-de-test","Créer un compte de test","test-envoi-local-vers-virtual_local-avec-exim","Test envoi local vers virtual_local avec exim","vérifier-le-log-denvoi-smtp","Vérifier le log d'envoi SMTP","tester-réception-imap","Tester réception IMAP","vérifier-le-log-impad","Vérifier le log impad","vérifier-pop-en-telnet","Vérifier POP en telnet","vérifier-le-log-pop3d","Vérifier le log pop3d","test-envoi-remote-vers-virtual_local-avec-telnet","Test envoi remote vers virtual_local avec telnet","test-envoi-local-vers-une-machine-remote-avec-exim","Test envoi local vers une machine remote avec exim","tester-mail-remote-vers-mailserver-pour-voir-le-bon-fonctionnement-de-spamassassin","Tester mail remote vers mailserver pour voir le bon fonctionnement de SpamAssassin","envoi-courriel-via-une-machine-remote-via-mail","Envoi courriel via une machine remote via mail","regarder-le-log-spamd","Regarder le log spamd","tester-spamassassin","Tester SpamAssassin","tester-les-relais-smtp","Tester les relais SMTP","statistiques","Statistiques","vulgarisation","Vulgarisation","description-du-helo","Description du HELO","références","Références","IMAP","143","21","110","1.1"," web1.renoirboulanger.com ESMTP Exim ",", \"","exim ","-odf","\nSubject: Test lundi am ","\nLOG: MAIN\n  "," renoirb@web1.renoirboulanger.com ","renoirb ","390","\"Test lundi am 5 local a virtuallocal\"","virtual_user ","virtual_localdelivery ","\nLOG: MAIN\n  Completed\n","Subject: LE SUJET","data","Voilà!",":02:16 1JSZkp-0001JH-8H ","test"," \u002Fvar\u002Flog\u002Fmaillog\n   Feb ","test@renoirboulanger.com ","web1 ","\n   Feb ","'^]'","Entrer ","494","'test@renoirboulanger.com'",".235.26, ","nmsgs","\n   ","10","\".\"","7","http:\u002F\u002Femail.about.com\u002Fcs\u002Fstandards\u002Fa\u002Fsmtp_error_code_2.htm","helo","4","72.14",".205.27","\n         ","joe@web1.renoirboulanger.com","2.1","56256","000801c87894","$66546900","$c07bcf52","@adminhotel",":32:19 web1 spamd","4.1","1602","\u002Fblog\u002F2008\u002F04","étape-un-backups","ÉTAPE UN... backups?!","étape-deux-graver-le-livecd","ÉTAPE DEUX... Graver le LiveCD","étape-trois-on-vide","ÉTAPE TROIS, on vide","étape-quatre-on-démarre-le-livecd","ÉTAPE QUATRE, On démarre le LiveCD","étape-cinq-on-script-un-peu","ÉTAPE CINQ, on script un peu","étape-six-on-exécute","ÉTAPE SIX... on exécute.","\u002Fblog\u002F2008\u002F04\u002Feffacer-un-disque-dur\u002F#six","dd"," et ","i","2024-10-24T19:50:04.878Z")));