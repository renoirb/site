__NUXT_JSONP__("/blog/2010/04/procedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T){return {data:[{},{},{},{canonical:D,content:{locale:z,title:"Procédure pour créer un serveur FTP sécurisé SSL forcé avec usager virtuels sous Ubuntu Linux avec vsFTPd",canonical:D,status:"publish",revising:true,created:"2010-04-30",updated:"2013-03-29",tags:["linux","logiciel-libre","securite","tutoriels","unix"],categories:[],excerpt:w,toc:[{depth:k,text:E},{depth:k,text:F},{depth:k,text:A},{depth:k,text:G},{depth:k,text:H},{depth:k,text:p},{depth:k,text:I},{depth:k,text:J},{depth:k,text:K}],body:{type:B,children:[{type:b,tag:j,props:{},children:[{type:a,value:"Je ne sais pas si vous êtes comme moi mais je n'aime pas laisser non crypté l'accès a un service qui me demande un mot de passe. Je devait monter un serveur cette semaine qui doit avoir les accès FTP."}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"J'ai pris l'initiative de sécuriser la machine avec du SSL car je crois qu'aujourd'hui c'est notre devoir de faire ce genre de chose. Ce n'est pas la première fois que je configure un serveur FTP over SSL mais je n'avait jamais pris de notes vraiment à ce jour. Je l'ai fait cette fois-ci!"}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cequecetteproc%C3%A9durefait..."},children:[]},{type:a,value:E}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Pouvoir créer des comptes FTP sans avoir a créer un utilisateur local (donc pas accès shell (SSH))."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Permet les connections FTP over SSL de façon EXPLICITE sur un port non standard  (cet exemple utilisera le port "},{type:b,tag:n,props:{},children:[{type:a,value:"6123"}]},{type:a,value:")"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ne permet pas d'utilisateur ni de connexions anonymes"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Bannit les hôtes qui tentent de se connecter (LOGIN FAILED)\tvia "},{type:b,tag:i,props:{},children:[{type:a,value:L}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Utilise le system PAM interne pour l'authentification"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ne requiert pas d'usager local (pas de risque de tentative de connection SSH, usager séparés)"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Le serveur FTP roule sur son propre usager"}]},{type:a,value:c}]},{type:a,value:c},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Proc%C3%A9dure"},children:[]},{type:a,value:F}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Vérifier quelle version de serveur FTP est installé\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# dpkg --list | grep ftp\n~\nii  ftp                               0.17-19                      The FTP client\nii  lftp                              3.7.15-1ubuntu2              Sophisticated command-line FTP\u002FHTTP client p\nii  vsftpd                            2.2.0-1ubuntu1               lightweight, efficient FTP server written fo"}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" vsftpd est ce qu'on veut. Dans ce cas-ci il est déjà installé (ii)."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Assurer que les prérequis sont installés\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# aptitude install vsftpd libpam-pwdfile openssl"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Modifier le fichier de config "},{type:b,tag:i,props:{},children:[{type:a,value:"vsftpd.conf"}]},{type:a,value:".\n"},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" Modifiez pour ces valeurs (ci-bas) et conservez les autres valeurs par défaut.\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\nlocal_umask=022\nchroot_local_user=YES\nftpd_banner=Un nom Quelconque FTP\nnopriv_user=vsftpd\n"},{type:b,tag:q,props:{id:"renoirboulangercom-2010-04-29-we-will-force-usage-on-an-other-port"},children:[{type:b,tag:h,props:{ariaHidden:r,href:"#renoirboulangercom-2010-04-29-we-will-force-usage-on-an-other-port",tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:"renoirboulanger.com 2010-04-29 we will force usage on an other port"}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"#connect_from_port_20=YES"}]}]},{type:b,tag:j,props:{},children:[]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter ou corriger (étaient pas présents lorsque j'ai crée la procédure)\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# 2010-04-28 accès usager\nvirtual_use_local_privs=YES\nguest_enable=YES\nuser_sub_token=$USER\nlocal_root=\u002Fhome\u002Fibottin\u002FFTP\u002F$USER\nhide_ids=YES"}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" Ajuster le "},{type:b,tag:n,props:{},children:[{type:a,value:"local_root"}]},{type:a,value:" a l'endroit\tou envoyer les fichiers."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Activer le SSL\n"},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le certificat\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# cd \u002Fetc\u002Fssl\n# \u002Fusr\u002Fbin\u002Fopenssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout vsftpd.pem -out vsftpd.pem"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter au "},{type:b,tag:n,props:{},children:[{type:a,value:"\u002Fetc\u002Fvsftpd.conf"}]},{type:a,value:c},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\n# renoirboulanger.com 2010-04-30 SSL configuration\nlisten_port=6123\nftp_data_port=6122\npasv_min_port=6000\npasv_max_port=6100\n"},{type:b,tag:j,props:{},children:[{type:a,value:"ssl_enable=YES"}]},{type:a,value:c},{type:b,tag:q,props:{id:"allow-anonymous-users-to-use-secured-ssl-connections"},children:[{type:b,tag:h,props:{ariaHidden:r,href:"#allow-anonymous-users-to-use-secured-ssl-connections",tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:"Allow anonymous users to use secured SSL connections"}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"allow_anon_ssl=YES"}]},{type:a,value:c},{type:b,tag:q,props:{id:"all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to"},children:[{type:b,tag:h,props:{ariaHidden:r,href:"#all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to",tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:"All non-anonymous logins are forced to use a secure SSL connection in order to"}]},{type:a,value:c},{type:b,tag:q,props:{id:"send-and-receive-data-on-data-connections"},children:[{type:b,tag:h,props:{ariaHidden:r,href:"#send-and-receive-data-on-data-connections",tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:"send and receive data on data connections."}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"force_local_data_ssl=NO"}]},{type:a,value:c},{type:b,tag:q,props:{id:"all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to-send-the-password"},children:[{type:b,tag:h,props:{ariaHidden:r,href:"#all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to-send-the-password",tabIndex:s},children:[{type:b,tag:t,props:{className:[u,v]},children:[]}]},{type:a,value:"All non-anonymous logins are forced to use a secure SSL connection in order to send the password."}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"force_local_logins_ssl=YES\nssl_tlsv1=YES\nssl_sslv2=YES\nssl_sslv3=YES\nrsa_cert_file=\u002Fetc\u002Fssl\u002Fvsftpd.pem"}]}]},{type:b,tag:j,props:{},children:[]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:i,props:{},children:[{type:a,value:"Remplacer"}]},{type:a,value:" le contenu du fichier "},{type:b,tag:n,props:{},children:[{type:a,value:"pam.d\u002Fvsftpd"}]},{type:a,value:c},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# vi \u002Fetc\u002Fpam.d\u002Fvsftpd\n~\nauth required pam_pwdfile.so pwdfile \u002Fetc\u002Fvsftpd.passwd\naccount required pam_permit.so"}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" Il est important de remplacer le reste du fichier par ce contenu ci-haut."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Modifier permissions sur le fichier .pem\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# chown vsftpd \u002Fetc\u002Fssl\u002Fvsftpd.pem"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:M},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# \u002Fetc\u002Finit.d\u002Fvsftpd restart"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le unix user qui va rouler le démon\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# adduser --system --no-create-home --disabled-login -s \u002Fusr\u002Fsbin\u002Fnologin --home \u002Fvar\u002Fftp vsftpd"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Modifier les permissions pour l'utilisateur qui roule vsftpd (ajuster)\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# chown -R ftp:ftp \u002Fvar\u002Fftp\u002F\n# chmod -R 740 \u002Fvar\u002Fftp"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:i,props:{},children:[{type:b,tag:x,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP"},children:[{type:a,value:A}]}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajuster "},{type:b,tag:n,props:{},children:[{type:a,value:L}]},{type:a,value:c},{type:b,tag:y,props:{className:[N,O],style:P},children:[{type:a,value:c},{type:b,tag:y,props:{className:["codeHeader","panelHeader"],style:"border-bottom-width: 1px;"},children:[{type:b,tag:i,props:{},children:[{type:a,value:"Ajuster le bloc [vsftpd]"}]}]},{type:a,value:c},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# vi \u002Fetc\u002Ffail2ban\u002Fjail.conf\n~\n[vsftpd]\n"},{type:b,tag:j,props:{},children:[{type:a,value:"enabled  = true"}]}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" par defaut "},{type:b,tag:n,props:{},children:[{type:a,value:"enabled"}]},{type:a,value:" est a false...\til faut l'activer."},{type:b,tag:j,props:{},children:[]},{type:a,value:c}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:M},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# \u002Fetc\u002Finit.d\u002Fvsftpd restart\n * Stopping FTP server: vsftpd\n   ...done.\n * Starting FTP server: vsftpd\n   ...done.\n# ps aux|grep vsftpd\nvsftpd   18771  0.0  0.0  28904  1300 ?        Ss   17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nvsftpd   18772  0.0  0.0  29100  1608 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nftp      18773  0.0  0.0  28928   924 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nroot     18795  0.0  0.0  22628  1712 ?        S    17:14   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\n..."}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" les deux premiers "},{type:b,tag:n,props:{},children:[{type:a,value:"vsftpd"}]},{type:a,value:" est le résultat attendu"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Nous allons forcer le FTP over SSL sur le port "},{type:b,tag:i,props:{},children:[{type:a,value:"6122"}]},{type:a,value:", pour ça il faut autoriser le Firewall\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# iptables -A INPUT -m state --state ESTABLISHED,RELATED\n# iptables -A INPUT -m tcp -p tcp --dport 6122 -j ACCEPT\n# iptables -A INPUT -m state --state NEW,ESTABLISHED\n# iptables -A INPUT -m tcp -p tcp --dport 6123 -j ACCEPT\n# iptables -A INPUT -p tcp --dport 6000:6100 -j ACCEPT"}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:"Source"}]},{type:a,value:": "},{type:b,tag:h,props:{href:Q},children:[{type:a,value:R}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Sauvegarder le Firewall\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# iptables-save \u003E \u002Fetc\u002Fiptables.rules"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Tester de l'extérieur avec un client FTP (Filezilla, etc)\n"},{type:b,tag:j,props:{},children:[{type:a,value:"Voir les options suivantes a la connection"}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"port: 6123"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Forcer le SSL"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP"},children:[]},{type:a,value:A}]},{type:a,value:"\nOn utilise le truc simple de htpasswd pour l'authentification. Pas de gossage :-)\n"},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cr%C3%A9erunnouveaucompte"},children:[]},{type:a,value:G}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le "},{type:b,tag:S,props:{},children:[{type:a,value:"premier compte"}]},{type:a,value:", sinon, "},{type:b,tag:i,props:{},children:[{type:a,value:"passer\ta la directive suivante"}]},{type:a,value:"! ou Utiliser mon script "},{type:b,tag:x,props:{to:C},children:[{type:a,value:p}]},{type:a,value:c},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# htpasswd -c \u002Fetc\u002Fvsftpd.passwd ftpuser\nNew password:\nRe-type new password:\nAdding password for user ftpuser"}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" l'option "},{type:b,tag:i,props:{},children:[{type:b,tag:n,props:{},children:[{type:a,value:"-c"}]}]},{type:a,value:" est\tpour créer le fichier la première fois."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Voir les directives de *"},{type:b,tag:x,props:{to:C},children:[{type:a,value:p}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ajouteroumodifierunutilisateur"},children:[]},{type:b,tag:i,props:{},children:[{type:a,value:H}]}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Utiliser le script "},{type:b,tag:i,props:{},children:[{type:b,tag:n,props:{},children:[{type:a,value:"evo-vsftpd-user"}]}]},{type:a,value:c},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"$ sudo evo-vsftpd-user foo\nCréation d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ...\nNew password:\nRe-type new password:\nAdding password for user foo\n ... OK\n * Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002Ffoo ...  OK\n * Changement des permissions du dossier ...  OK\nTerminé!"}]},{type:a,value:"\nVoir les directives de "},{type:b,tag:i,props:{},children:[{type:b,tag:x,props:{to:C},children:[{type:a,value:p}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur"},children:[]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le fichier\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# vi \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Coller le contenu\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"#!\u002Fbin\u002Fbash\nif [ -z $1 ]; then\n  echo \"Aucun argument usager fourni\"\n  echo \"usage: sudo evo-vsftpd-user foo\"\n  exit 1;\nfi\n"},{type:b,tag:j,props:{},children:[{type:a,value:"if [ \"$(whoami)\" != 'root' ]; then\necho \"Vous n'avez pas les permisions utilisateur requises.\"\nexit 1;\nfi"}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"echo \"Création d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ... \"\nhtpasswd \u002Fetc\u002Fvsftpd.passwd $1\necho \" ... OK \"\necho -n \" "},{type:b,tag:S,props:{},children:[{type:a,value:" Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002F$1 ... \"\nmkdir \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho -n \" "}]},{type:a,value:" Changement des permissions du dossier ... \"\nchown -R ftp:ftp \u002Fhome\u002Fibottin\u002FFTP\u002F$1\nchmod -R 740 \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho \"Terminé!\""}]}]},{type:b,tag:j,props:{},children:[]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Rendre exécutable\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# chmod +x \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Tester"},children:[]},{type:a,value:I}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Installer le paquet pour tester\n"},{type:b,tag:y,props:{className:[N,O],style:P},children:[{type:a,value:c},{type:b,tag:y,props:{className:["codeContent","panelContent"]},children:[{type:a,value:c},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# aptitude install ftp-ssl"}]},{type:a,value:c}]},{type:a,value:c}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Tester\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# ftp-ssl someserver.net 6123\nConnected to someserver.net.\n220 Un nom Quelconque FTP\nName (someserver.net:renoirboulanger): ftpuser\n234 Proceed with negotiation.\n[SSL Cipher DES-XXXX-SHA]\n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp\u003E"}]},{type:a,value:c},{type:b,tag:i,props:{},children:[{type:a,value:o}]},{type:a,value:" [SSL Cipher DES-XXXX-SHA] est ce qu'on attend :-)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Pourd%C3%A9boguer"},children:[]},{type:a,value:J}]},{type:a,value:"\nLe feedback est assez difficile a avoir de la part de vsftpd, mais pour en voir plus:\n"},{type:b,tag:m,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Pour le debug\n"},{type:b,tag:f,props:{lang:g},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\n# for debuging\nlog_ftp_protocol=YES"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:l,props:{},children:[{type:b,tag:h,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ressources"},children:[]},{type:a,value:K}]},{type:a,value:c},{type:b,tag:"ul",props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fwjholden.com\u002Fvsftpd-help.html"},children:[{type:a,value:"vsftpd help"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fvsftpd.beasts.org\u002Fvsftpd_conf.html"},children:[{type:a,value:"vsftpd.conf manpages"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{href:Q},children:[{type:a,value:R}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fwww.ubuntututorials.net\u002Finstalling-vsftpd-using-text-file-for-virtual-users\u002F"},children:[{type:a,value:"Installing vsftpd using text file for virtual users"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fwww.cyberciti.biz\u002Ftips\u002Fconfigure-vsfptd-secure-connections-via-ssl-tls.html"},children:[{type:a,value:"Vsftpd SSL \u002F TLS FTP Server Configuration"}]}]},{type:a,value:c}]}]},text:"---\nlocale: fr-CA\ntitle: \u003E-\n  Procédure pour créer un serveur FTP sécurisé SSL forcé avec usager virtuels\n  sous Ubuntu Linux avec vsFTPd\ncanonical: \u003E-\n  https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd\u002F\nstatus: publish\nrevising: true\ncreated: '2010-04-30'\nupdated: '2013-03-29'\ntags:\n  - linux\n  - logiciel-libre\n  - securite\n  - tutoriels\n  - unix\ncategories: []\nexcerpt: ''\n---\n\nJe ne sais pas si vous êtes comme moi mais je n'aime pas laisser non crypté l'accès a un service qui me demande un mot de passe. Je devait monter un serveur cette semaine qui doit avoir les accès FTP.\n\nJ'ai pris l'initiative de sécuriser la machine avec du SSL car je crois qu'aujourd'hui c'est notre devoir de faire ce genre de chose. Ce n'est pas la première fois que je configure un serveur FTP over SSL mais je n'avait jamais pris de notes vraiment à ce jour. Je l'ai fait cette fois-ci!\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cequecetteproc%C3%A9durefait...\"\u003E\u003C\u002Fa\u003ECe que cette procédure fait...\u003C\u002Fh3\u003E\n\u003Col\u003E\n\t\u003Cli\u003EPouvoir créer des comptes FTP sans avoir a créer un utilisateur local (donc pas accès shell (SSH)).\u003C\u002Fli\u003E\n\t\u003Cli\u003EPermet les connections FTP over SSL de façon EXPLICITE sur un port non standard  (cet exemple utilisera le port \u003Ctt\u003E6123\u003C\u002Ftt\u003E)\u003C\u002Fli\u003E\n\t\u003Cli\u003ENe permet pas d'utilisateur ni de connexions anonymes\u003C\u002Fli\u003E\n\t\u003Cli\u003EBannit les hôtes qui tentent de se connecter (LOGIN FAILED)\tvia \u003Cstrong\u003Efail2ban\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003EUtilise le system PAM interne pour l'authentification\u003C\u002Fli\u003E\n\t\u003Cli\u003ENe requiert pas d'usager local (pas de risque de tentative de connection SSH, usager séparés)\u003C\u002Fli\u003E\n\t\u003Cli\u003ELe serveur FTP roule sur son propre usager\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C!--more--\u003E\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Proc%C3%A9dure\"\u003E\u003C\u002Fa\u003EProcédure\u003C\u002Fh3\u003E\n\u003Col\u003E\n\t\u003Cli\u003EVérifier quelle version de serveur FTP est installé\n\u003Cpre lang=\"bash\"\u003E# dpkg --list | grep ftp\n~\nii  ftp                               0.17-19                      The FTP client\nii  lftp                              3.7.15-1ubuntu2              Sophisticated command-line FTP\u002FHTTP client p\nii  vsftpd                            2.2.0-1ubuntu1               lightweight, efficient FTP server written fo\u003C\u002Fpre\u003E\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E vsftpd est ce qu'on veut. Dans ce cas-ci il est déjà installé (ii).\u003C\u002Fli\u003E\n\t\u003Cli\u003EAssurer que les prérequis sont installés\n\u003Cpre lang=\"bash\"\u003E# aptitude install vsftpd libpam-pwdfile openssl\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003EModifier le fichier de config \u003Cstrong\u003Evsftpd.conf\u003C\u002Fstrong\u003E.\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E Modifiez pour ces valeurs (ci-bas) et conservez les autres valeurs par défaut.\n\u003Cpre lang=\"bash\"\u003E# vi \u002Fetc\u002Fvsftpd.conf\n~\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\nlocal_umask=022\nchroot_local_user=YES\nftpd_banner=Un nom Quelconque FTP\nnopriv_user=vsftpd\n\n# renoirboulanger.com 2010-04-29 we will force usage on an other port\n#connect_from_port_20=YES\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003EAjouter ou corriger (étaient pas présents lorsque j'ai crée la procédure)\n\u003Cpre lang=\"bash\"\u003E# 2010-04-28 accès usager\nvirtual_use_local_privs=YES\nguest_enable=YES\nuser_sub_token=$USER\nlocal_root=\u002Fhome\u002Fibottin\u002FFTP\u002F$USER\nhide_ids=YES\u003C\u002Fpre\u003E\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E Ajuster le \u003Ctt\u003Elocal_root\u003C\u002Ftt\u003E a l'endroit\tou envoyer les fichiers.\u003C\u002Fli\u003E\n\t\u003Cli\u003EActiver le SSL\n\u003Col\u003E\n\t\u003Cli\u003ECréer le certificat\n\u003Cpre lang=\"bash\"\u003E# cd \u002Fetc\u002Fssl\n# \u002Fusr\u002Fbin\u002Fopenssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout vsftpd.pem -out vsftpd.pem\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003EAjouter au \u003Ctt\u003E\u002Fetc\u002Fvsftpd.conf\u003C\u002Ftt\u003E\n\u003Cpre lang=\"bash\"\u003E# vi \u002Fetc\u002Fvsftpd.conf\n~\n# renoirboulanger.com 2010-04-30 SSL configuration\nlisten_port=6123\nftp_data_port=6122\npasv_min_port=6000\npasv_max_port=6100\n\nssl_enable=YES\n# Allow anonymous users to use secured SSL connections\nallow_anon_ssl=YES\n# All non-anonymous logins are forced to use a secure SSL connection in order to\n# send and receive data on data connections.\nforce_local_data_ssl=NO\n# All non-anonymous logins are forced to use a secure SSL connection in order to send the password.\nforce_local_logins_ssl=YES\nssl_tlsv1=YES\nssl_sslv2=YES\nssl_sslv3=YES\nrsa_cert_file=\u002Fetc\u002Fssl\u002Fvsftpd.pem\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003E\u003Cstrong\u003ERemplacer\u003C\u002Fstrong\u003E le contenu du fichier \u003Ctt\u003Epam.d\u002Fvsftpd\u003C\u002Ftt\u003E\n\u003Cpre lang=\"bash\"\u003E# vi \u002Fetc\u002Fpam.d\u002Fvsftpd\n~\nauth required pam_pwdfile.so pwdfile \u002Fetc\u002Fvsftpd.passwd\naccount required pam_permit.so\u003C\u002Fpre\u003E\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E Il est important de remplacer le reste du fichier par ce contenu ci-haut.\u003C\u002Fli\u003E\n\t\u003Cli\u003EModifier permissions sur le fichier .pem\n\u003Cpre lang=\"bash\"\u003E# chown vsftpd \u002Fetc\u002Fssl\u002Fvsftpd.pem\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003ERedémarrer vsftpd\n\u003Cpre lang=\"bash\"\u003E# \u002Fetc\u002Finit.d\u002Fvsftpd restart\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003ECréer le unix user qui va rouler le démon\n\u003Cpre lang=\"bash\"\u003E# adduser --system --no-create-home --disabled-login -s \u002Fusr\u002Fsbin\u002Fnologin --home \u002Fvar\u002Fftp vsftpd\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003EModifier les permissions pour l'utilisateur qui roule vsftpd (ajuster)\n\u003Cpre lang=\"bash\"\u003E# chown -R ftp:ftp \u002Fvar\u002Fftp\u002F\n# chmod -R 740 \u002Fvar\u002Fftp\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003E\u003Cstrong\u003E\u003Ca href=\"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP\"\u003EAjouter un utilisateur FTP\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003EAjuster \u003Ctt\u003Efail2ban\u003C\u002Ftt\u003E\n\u003Cdiv class=\"code panel\" style=\"border-width: 1px;\"\u003E\n\u003Cdiv class=\"codeHeader panelHeader\" style=\"border-bottom-width: 1px;\"\u003E\u003Cstrong\u003EAjuster le bloc [vsftpd]\u003C\u002Fstrong\u003E\u003C\u002Fdiv\u003E\n\u003Cpre lang=\"bash\"\u003E# vi \u002Fetc\u002Ffail2ban\u002Fjail.conf\n~\n[vsftpd]\n\nenabled  = true\u003C\u002Fpre\u003E\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E par defaut \u003Ctt\u003Eenabled\u003C\u002Ftt\u003E est a false...\til faut l'activer.\n\n\u003C\u002Fdiv\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003ERedémarrer vsftpd\n\u003Cpre lang=\"bash\"\u003E# \u002Fetc\u002Finit.d\u002Fvsftpd restart\n * Stopping FTP server: vsftpd\n   ...done.\n * Starting FTP server: vsftpd\n   ...done.\n# ps aux|grep vsftpd\nvsftpd   18771  0.0  0.0  28904  1300 ?        Ss   17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nvsftpd   18772  0.0  0.0  29100  1608 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nftp      18773  0.0  0.0  28928   924 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nroot     18795  0.0  0.0  22628  1712 ?        S    17:14   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\n...\u003C\u002Fpre\u003E\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E les deux premiers \u003Ctt\u003Evsftpd\u003C\u002Ftt\u003E est le résultat attendu\u003C\u002Fli\u003E\n\t\u003Cli\u003ENous allons forcer le FTP over SSL sur le port \u003Cstrong\u003E6122\u003C\u002Fstrong\u003E, pour ça il faut autoriser le Firewall\n\u003Cpre lang=\"bash\"\u003E# iptables -A INPUT -m state --state ESTABLISHED,RELATED\n# iptables -A INPUT -m tcp -p tcp --dport 6122 -j ACCEPT\n# iptables -A INPUT -m state --state NEW,ESTABLISHED\n# iptables -A INPUT -m tcp -p tcp --dport 6123 -j ACCEPT\n# iptables -A INPUT -p tcp --dport 6000:6100 -j ACCEPT\u003C\u002Fpre\u003E\n\u003Cstrong\u003ESource\u003C\u002Fstrong\u003E: \u003Ca href=\"http:\u002F\u002Fmy.afterdawn.com\u002Fketola\u002Fblog_entry.cfm\u002F1262\u002Fvsftpd_ssl_and_iptables\"\u003Evsftpd SSL and iptables\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003ESauvegarder le Firewall\n\u003Cpre lang=\"bash\"\u003E# iptables-save &gt; \u002Fetc\u002Fiptables.rules\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003ETester de l'extérieur avec un client FTP (Filezilla, etc)\n\nVoir les options suivantes a la connection\n\u003Col\u003E\n\t\u003Cli\u003Eport: 6123\u003C\u002Fli\u003E\n\t\u003Cli\u003EForcer le SSL\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP\"\u003E\u003C\u002Fa\u003EAjouter un utilisateur FTP\u003C\u002Fh3\u003E\nOn utilise le truc simple de htpasswd pour l'authentification. Pas de gossage :-)\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cr%C3%A9erunnouveaucompte\"\u003E\u003C\u002Fa\u003ECréer un nouveau compte\u003C\u002Fh3\u003E\n\u003Col\u003E\n\t\u003Cli\u003ECréer le \u003Cem\u003Epremier compte\u003C\u002Fem\u003E, sinon, \u003Cstrong\u003Epasser\ta la directive suivante\u003C\u002Fstrong\u003E! ou Utiliser mon script \u003Ca href=\"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur\"\u003EScript pour créer un compte utilisateur\u003C\u002Fa\u003E\n\u003Cpre lang=\"bash\"\u003E# htpasswd -c \u002Fetc\u002Fvsftpd.passwd ftpuser\nNew password:\nRe-type new password:\nAdding password for user ftpuser\u003C\u002Fpre\u003E\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E l'option \u003Cstrong\u003E\u003Ctt\u003E-c\u003C\u002Ftt\u003E\u003C\u002Fstrong\u003E est\tpour créer le fichier la première fois.\u003C\u002Fli\u003E\n\t\u003Cli\u003EVoir les directives de *\u003Ca href=\"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur\"\u003EScript pour créer un compte utilisateur\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ajouteroumodifierunutilisateur\"\u003E\u003C\u002Fa\u003E\u003Cstrong\u003EAjouter ou modifier un utilisateur\u003C\u002Fstrong\u003E\u003C\u002Fh3\u003E\n\u003Col\u003E\n\t\u003Cli\u003EUtiliser le script \u003Cstrong\u003E\u003Ctt\u003Eevo-vsftpd-user\u003C\u002Ftt\u003E\u003C\u002Fstrong\u003E\n\u003Cpre lang=\"bash\"\u003E$ sudo evo-vsftpd-user foo\nCréation d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ...\nNew password:\nRe-type new password:\nAdding password for user foo\n ... OK\n * Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002Ffoo ...  OK\n * Changement des permissions du dossier ...  OK\nTerminé!\u003C\u002Fpre\u003E\nVoir les directives de \u003Cstrong\u003E\u003Ca href=\"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur\"\u003EScript pour créer un compte utilisateur\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur\"\u003E\u003C\u002Fa\u003EScript pour créer un compte utilisateur\u003C\u002Fh3\u003E\n\u003Col\u003E\n\t\u003Cli\u003ECréer le fichier\n\u003Cpre lang=\"bash\"\u003E# vi \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003EColler le contenu\n\u003Cpre lang=\"bash\"\u003E#!\u002Fbin\u002Fbash\nif [ -z $1 ]; then\n  echo \"Aucun argument usager fourni\"\n  echo \"usage: sudo evo-vsftpd-user foo\"\n  exit 1;\nfi\n\nif [ \"$(whoami)\" != 'root' ]; then\n  echo \"Vous n'avez pas les permisions utilisateur requises.\"\n  exit 1;\nfi\n\necho \"Création d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ... \"\nhtpasswd \u002Fetc\u002Fvsftpd.passwd $1\necho \" ... OK \"\necho -n \" * Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002F$1 ... \"\nmkdir \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho -n \" * Changement des permissions du dossier ... \"\nchown -R ftp:ftp \u002Fhome\u002Fibottin\u002FFTP\u002F$1\nchmod -R 740 \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho \"Terminé!\"\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\t\u003Cli\u003ERendre exécutable\n\u003Cpre lang=\"bash\"\u003E# chmod +x \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Tester\"\u003E\u003C\u002Fa\u003ETester\u003C\u002Fh3\u003E\n\u003Col\u003E\n\t\u003Cli\u003EInstaller le paquet pour tester\n\u003Cdiv class=\"code panel\" style=\"border-width: 1px;\"\u003E\n\u003Cdiv class=\"codeContent panelContent\"\u003E\n\u003Cpre lang=\"bash\"\u003E# aptitude install ftp-ssl\u003C\u002Fpre\u003E\n\u003C\u002Fdiv\u003E\n\u003C\u002Fdiv\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003ETester\n\u003Cpre lang=\"bash\"\u003E# ftp-ssl someserver.net 6123\nConnected to someserver.net.\n220 Un nom Quelconque FTP\nName (someserver.net:renoirboulanger): ftpuser\n234 Proceed with negotiation.\n[SSL Cipher DES-XXXX-SHA]\n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp&gt;\u003C\u002Fpre\u003E\n\u003Cstrong\u003ENote\u003C\u002Fstrong\u003E [SSL Cipher DES-XXXX-SHA] est ce qu'on attend :-)\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Pourd%C3%A9boguer\"\u003E\u003C\u002Fa\u003EPour déboguer\u003C\u002Fh3\u003E\nLe feedback est assez difficile a avoir de la part de vsftpd, mais pour en voir plus:\n\u003Col\u003E\n\t\u003Cli\u003EPour le debug\n\u003Cpre lang=\"bash\"\u003E# vi \u002Fetc\u002Fvsftpd.conf\n~\n# for debuging\nlog_ftp_protocol=YES\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3\u003E\u003Ca name=\"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ressources\"\u003E\u003C\u002Fa\u003ERessources\u003C\u002Fh3\u003E\n\u003Cul\u003E\n\t\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwjholden.com\u002Fvsftpd-help.html\"\u003Evsftpd help\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fvsftpd.beasts.org\u002Fvsftpd_conf.html\"\u003Evsftpd.conf manpages\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fmy.afterdawn.com\u002Fketola\u002Fblog_entry.cfm\u002F1262\u002Fvsftpd_ssl_and_iptables\"\u003Evsftpd SSL and iptables\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.ubuntututorials.net\u002Finstalling-vsftpd-using-text-file-for-virtual-users\u002F\"\u003EInstalling vsftpd using text file for virtual users\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\t\u003Cli\u003E\u003Ca href=\"http:\u002F\u002Fwww.cyberciti.biz\u002Ftips\u002Fconfigure-vsfptd-secure-connections-via-ssl-tls.html\"\u003EVsftpd SSL \u002F TLS FTP Server Configuration\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",dir:"\u002Fblog\u002F2010\u002F04",path:"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd",extension:".md",slug:T,createdAt:"2024-10-24T19:50:04.907Z",updatedAt:"2024-10-24T19:50:04.908Z",category:w},coverImage:{toc:[],body:{type:B,children:[]},text:w},month:"04",next:{locale:z,title:"Installer une Machine Virtuelle Linux roulant dans VMware Fusion sous Mac OS X",path:"\u002Fblog\u002F2010\u002F07\u002Finstaller-une-machine-virtuelle-linux-roulant-dans-vmware-fusion-sous-mac-os-x",slug:"installer-une-machine-virtuelle-linux-roulant-dans-vmware-fusion-sous-mac-os-x"},preamble:{toc:[],body:{type:B,children:[]},text:w},prettyfiedTemporalDate:{prettified:"vendredi 30 avril 2010",temporalDate:"2010-04-30"},prev:{locale:z,title:"Comment dire à Apache le mime-type d'un document Office 2007",path:"\u002Fblog\u002F2010\u002F04\u002Fcomment-dire-a-apache-le-mime-type-dun-document-office-2007",slug:"comment-dire-a-apache-le-mime-type-dun-document-office-2007"},slug:T,year:"2010"}],fetch:[],mutations:void 0}}("text","element","\n","\n\t","li","pre","bash","a","strong","p",3,"h3","ol","tt","Note","Script pour créer un compte utilisateur","h1","true",-1,"span","icon","icon-link","","nuxt-link","div","fr-CA","Ajouter un utilisateur FTP","root","\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur","https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd\u002F","Ce que cette procédure fait...","Procédure","Créer un nouveau compte","Ajouter ou modifier un utilisateur","Tester","Pour déboguer","Ressources","fail2ban","Redémarrer vsftpd\n","code","panel","border-width: 1px;","http:\u002F\u002Fmy.afterdawn.com\u002Fketola\u002Fblog_entry.cfm\u002F1262\u002Fvsftpd_ssl_and_iptables","vsftpd SSL and iptables","em","procedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd")));