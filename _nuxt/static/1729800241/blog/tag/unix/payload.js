__NUXT_JSONP__("/blog/tag/unix", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR){return {data:[{},{},{contents:[{locale:w,title:"Créer un tunnel SSH inverse pour pouvoir supporter à distance un ami utilisant Linux",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2012\u002F02\u002Fcreer-un-tunnel-ssh-inverse-pour-pouvoir-supporter-a-distance-un-ami-utilisant-linux\u002F",status:x,revising:o,migrateCode:o,migrateLinks:o,created:"2012-02-29",updated:ac,tags:[B,U,K,t],categories:[],excerpt:q,toc:[{depth:l,text:ad},{depth:l,text:ae},{depth:l,text:af},{depth:l,text:ag},{depth:l,text:ah},{depth:l,text:ai},{depth:l,text:aj},{depth:l,text:L}],body:{type:y,children:[{type:b,tag:f,props:{},children:[{type:a,value:"Avez-vous déjà voulu accéder a votre ordinateur Unix\u002FLinux\u002FMacOS d'un ami, chez ou ailleurs, et que vous avez besoin de l'aider a distance?   En tant qu'utilisateur de Linux, si vous aider quelqu'un d'autre qui n'Est pas habitué, il peut vouloir votre aide. Cette procédure peut vous aider a l'aider, a distance."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ça vient de m'arriver. Je vais vous montrer comment j'ai fait."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ce que j'ai utilisé:"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Une machine avec OpenSSH que chaque personne à accès (une instance Amazon EC2?)"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer un nouvel utilisateur temporaire pour la personne a aider"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ordinateur a réparer roulant Linux\u002FUnix\u002FMacOS\u002FCygwin (qui a OpenSSH serveur et client)"}]},{type:a,value:c}]},{type:a,value:"\nCe que j'avait fait avec, en plus de cette procédure, c'est "},{type:b,tag:g,props:{href:"https:\u002F\u002Fhelp.ubuntu.com\u002Fcommunity\u002FUbuntuBootupHowto"},children:[{type:a,value:"un script RC"}]},{type:a,value:" qui créait une connection permanente, avec "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.debian-administration.org\u002Farticles\u002F152"},children:[{type:a,value:"une connection SSH qui ne requiert pas de mot de passe"}]},{type:a,value:V},{type:b,tag:f,props:{},children:[{type:a,value:"L'idée étaait que peu importe le lieu ou mon ami se trouve, dès qu'il\u002Felle a un lien à Internet, j'ai accès a son ordinateur portable."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ma procédure décrit comment créer un lien entre ces deux machines."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:ad}]},{type:a,value:"\nIl y a quelques années j'ai fait le cadeau a ma mère d'un vieil ordinateur portable. Étant donné qu'il était vieux et qu'elle n'a jamais vraiment utilisé d'ordinateur dans sa vie, j'ai pensé lui configurer un Ubuntu qui avait tout ce qui est nécessaire.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Elle l'a utilisée pendant environ 3 ans. Je crois que ma maman sait maintenant qu'un navigateur web n'est pas nécessairement Internet Explorer. Qu'un document n'est pas obligatoirement un fichier \"Word\".  Aujourd'hui elle roule sous Windows. Parce que quelqu'un d'autre lui a fait le cadeau et qu'il n'est pas porté a utiliser Linux comme moi."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Toujours est-il que pour l'aider j'utilisait ce processus pour entretenir son ordinateur sans qu'elle ait rien a faire."}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:ae}]},{type:a,value:"\nSurnommons cette machine \""},{type:b,tag:k,props:{},children:[{type:a,value:C}]},{type:a,value:"\".\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Il faut que vous et votre ami ayez accès a cette machine sur le port 22. Si c'est votre machine, vous pouvez forcément créer un nouveau compte pour votre ami qu'il utilisera pour initier le tunnel entre sa machine et cet machine."}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:af}]},{type:a,value:"\nDans mon exemple, son compte est \""},{type:b,tag:k,props:{},children:[{type:a,value:"user"}]},{type:a,value:"\", sa machine s'appelle \""},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:"\".﻿\n"},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Prérequis"}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"OpenSSH"}]},{type:a,value:" qui est installé et qui roule.\nEn Mac OS, c'est dans Préférences, Partage, il y a une option Accès a distance \u003Crant rel=\"windows\"\u003E... ah ces changements de noms pour la même chose\u003C\u002Frant\u003E."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Un compte utilisateur"}]},{type:a,value:" pour vos propres besoins\n... Ou le même que votre ami, s'il vous donne un mot de passe \u003Ctruc\u003EPssiiit. "},{type:b,tag:k,props:{},children:[{type:a,value:"passwd"}]},{type:a,value:" sert a changer un mot de passe en terminal!\u003C\u002Ftruc\u003E"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"Donc, assurez-vous que votre ami..."}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"vous fournit un compte pour vous connecter sur sa machine (\""},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:"\")"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Assurer que OpenSSH  roule"}]},{type:a,value:c}]},{type:a,value:"\nJe vous écrit tout ça de mémoire. Une recherche sur comment activer OpenSSH et créer un utilisateur qui y aura accès sur cette  machine MacOS\u002FLinux vous aidera plus que cet article.\n"},{type:b,tag:m,props:{},children:[{type:a,value:ag}]},{type:a,value:"\nSi tout est fonctionnel, vous avez déjà passé le pire, lui expliquer c'est quoi un utilisateur, si l'accès a distance ou SSH c'est quoi, et pourquoi vous lui demandez d'y accéder.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Expliquez-lui de ne pas utiliesr de mot de passe simple.  Qu'il ne vous donne pas non plus son mot de passe... s'il l'utilise ailleeurs (ou partout, c'est bien d'enseigner ça a ses amis)."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Donc... lui faire taper la commande dans un terminal:"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le BUT de cet article, LA commande, UNE LINGE!"}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"user@friend-machine$ ssh -nNT -R 1103:localhost:22 friendusername@vm.somehost.com"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ce qui se passera c'est que l'ami (qui a une machine qui s'appelle \"friend-machine\" dans cet exemple) initie un tunnel SSH silencieux vers \"vm.somehost.com\" (le serveur accessible par vous et votre ami) qui s'y connecte avec l'usager temporaire (\"friendusername\")."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Les options utilisés:"}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:ak}]},{type:a,value:" Sert pour éviter d'afficher des choses sur son terminal n'affiche rien (envoie vers \u002Fdev\u002Fnull)"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"N"}]},{type:a,value:" Sert pour préciser de ne pas utiliser la ligne de commande,   une fois connecté, il ne dira rien."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"T"}]},{type:a,value:" Sert à ne pas allouer de pseudo terminal (pseudo-tty)"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"R"}]},{type:a,value:" Sert a préciser un Tunnel inversé (Reverse) qui servira a exposer "},{type:b,tag:k,props:{},children:[{type:a,value:"dans"}]},{type:a,value:" (\""},{type:b,tag:k,props:{},children:[{type:a,value:C}]},{type:a,value:"\") au tunnel initié par (\""},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:"\") au port "},{type:b,tag:k,props:{},children:[{type:a,value:"22"}]},{type:a,value:" à partir du port "},{type:b,tag:k,props:{},children:[{type:a,value:"1103"}]},{type:a,value:" de (\""},{type:b,tag:k,props:{},children:[{type:a,value:C}]},{type:a,value:"\")."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:ah}]},{type:a,value:"\nEnfin. Il ne reste qu'a vous, vous connecter a cette machine commune, pour accéder au tunnel que vous lui avez fait créer, et utiliser SA machine.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Il ne suffit que de se  connecter  sur "},{type:b,tag:k,props:{},children:[{type:a,value:C}]},{type:a,value:" sous votre compte habituel, initialiser un "},{type:b,tag:k,props:{},children:[{type:a,value:al}]},{type:a,value:" puis vous re-connecter sur le port spécial qui vous donnera accès au poste \""},{type:b,tag:k,props:{},children:[{type:a,value:M}]},{type:a,value:"\"."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Facile!!"}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"En ordre:"}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"renoirb@mon-laptop:~$  ssh vm.somehost.com\nrenoirb@vm:~$ screen\nrenoirb@vm: ~$ ssh user@localhost -p 1103\nuser@friend-machine:~$ uname -a\nDarwin friend-machine 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1\u002FRELEASE_I386 i386"}]},{type:a,value:"\nEn gros, je me connecte a "},{type:b,tag:k,props:{},children:[{type:a,value:C}]},{type:a,value:", j'y initie une session "},{type:b,tag:k,props:{},children:[{type:a,value:al}]},{type:a,value:", puis je me re-connecte en SSH sur le port local 1103 ouvert par mon ami "},{type:b,tag:k,props:{},children:[{type:a,value:"user@friend-machine"}]},{type:a,value:" (vous suivez toujours?) et hop! Je suis sur la machine distante.\n"},{type:b,tag:m,props:{},children:[{type:a,value:ai}]},{type:a,value:"\nAvec Screen, je peut ainsi me détacher du terminal et m'y reconnecter plus tard sans arrêter les choses en cours.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Pour se déconnecter et se reconnecter je fais ainsi"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Connecter\u002Freconnecter:   screen -dd -R"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Détacher (combinaison de touches):  ctrl+a d"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:aj}]},{type:a,value:"\nNous aurons entré quelques lignes de terminal et hop, nous avons accès a la machine de notre ami.  C'est sûr que vous pouvez jouer avec les tunnels et accéder aux autres services, mais je ne vous expliquerai pas comment spécifiquement utiliser chaque cas.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Je vous laisse imaginer les cas de figure possible:"}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Faire une mise a jour de paquets"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Réinstaller des programmes"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Accéder a un service qu'il a localement, comme un serveur web, etc."}]},{type:a,value:c}]},{type:a,value:"\n... J'aime linux!\n"},{type:b,tag:m,props:{},children:[{type:a,value:L}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.techrepublic.com\u002Farticle\u002Fsetting-up-a-reverse-ssh-tunnel\u002F5779944"},children:[{type:a,value:"TechRepublic article Setting up a reverse SSH tunnel"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.howtoforge.com\u002Freverse-ssh-tunneling"},children:[{type:a,value:"HowTo Forge: Reverse SSH Tunneling"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.linuxjournal.com\u002Farticle\u002F6340"},children:[{type:a,value:"LinuxJournal: Power sessions with Screen"}]}]},{type:a,value:c}]}]},dir:"\u002Fblog\u002F2012\u002F02",path:"\u002Fblog\u002F2012\u002F02\u002Fcreer-un-tunnel-ssh-inverse-pour-pouvoir-supporter-a-distance-un-ami-utilisant-linux",extension:z,slug:"creer-un-tunnel-ssh-inverse-pour-pouvoir-supporter-a-distance-un-ami-utilisant-linux",createdAt:am,updatedAt:am,category:q,prettyfiedTemporalDate:{prettified:"mercredi 29 février 2012",temporalDate:"2012-02-29"}},{locale:w,title:"Les différentes versions du service de tâches planifié CRON",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fles-differentes-versions-du-service-de-taches-planifie-cron\u002F",status:x,revising:o,created:"2010-04-19",updated:N,tags:[B,"outils","techniques",t,an],categories:[A],excerpt:q,toc:[{depth:l,text:ao},{depth:l,text:"Versions de CRON"}],body:{type:y,children:[{type:b,tag:f,props:{},children:[{type:b,tag:ap,props:{className:[aq,"wp-image-2104"],style:"float: right; border: 0px;",title:"Une horloge",src:"https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2010\u002F04\u002FClock-icon.png",alt:q,width:ar,height:ar},children:[]},{type:a,value:"Suite a mon article «"},{type:b,tag:u,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim\u002F"},children:[{type:a,value:"Comment automatiser une tâche avec "},{type:b,tag:k,props:{},children:[{type:a,value:O}]},{type:a,value:" en utilisant Vim"}]},{type:a,value:"» je me suis venu aux questions sur les différences essentielles entre les versions de "},{type:b,tag:k,props:{},children:[{type:a,value:O}]},{type:a,value:W}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le concept de "},{type:b,tag:k,props:{},children:[{type:a,value:O}]},{type:a,value:" est, un «lanceur de commandes» planifié pour les systèmes UNIX. Le nom est inspiré du dieu grec Chronos."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ayant déjà utilise Gentoo Linux j'avait vu qu'il était possible d'utiliser plus d'une version de CRON mais je ne m'était jamais penché sur les différences. Je l'ai fait aujourd'hui."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:ao}]},{type:a,value:"\nGénéralement chaque distribution de système d'exploitation UNIX (Linux, Unix, Qnx, etc) a son lot d'outils standards dont CRON fait partie. Chaque éditeur de distribution choisit sa version préférée mais permet d'interchanger (avec "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwiki.debian.org\u002FDebianAlternatives"},children:[{type:a,value:"Alternatives sous Debian"}]},{type:a,value:", par exemple).\n"},{type:b,tag:m,props:{},children:[{type:a,value:"Versions de "},{type:b,tag:k,props:{},children:[{type:a,value:O}]}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:as}]},{type:a,value:"\nLa différence d'"},{type:b,tag:k,props:{},children:[{type:a,value:as}]},{type:a,value:" avec "},{type:b,tag:k,props:{},children:[{type:a,value:"cron"}]},{type:a,value:" (traditionnel) est le fait qu'Anacron ne roule pas en permanence comme un démon en arrière plan. Il est idéal sur des système qui ne roule pas nécessairement 24 heures par jour ou avec peu de ressources processeur.\n"},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fanacron.sourceforge.net\u002F"},children:[{type:a,value:P}]}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"vixie-cron"}]},{type:a,value:"\nLa version de cron la plus utilisée (selon mon expérience, notamment sous les installation par défaut de Ubuntu, Debian et Red Hat et CentOS)\n"},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Ftroy.jdmz.net\u002Fcron\u002F"},children:[{type:a,value:P}]}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"bcron"}]},{type:a,value:"\nL'auteur a crée cette version car il avait besoin de précision concernant les délais entre les commandes et les changements de saisons (Heure d'été).\n"},{type:b,tag:f,props:{},children:[{type:a,value:"J'ai remarqué plusieurs autres outils intéressant que l'auteur a publié. Je l'ai ajouté a mes marque-pages."}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"fcron"}]},{type:a,value:"\nL'auteur a crée cette version de cron dans l'optique que la machine peut ne pas être allumée 24\u002F24 et 7 jours\u002F7. fcron se base plutôt sur le temps que le système fonctionne (le «uptime») plutot qu'un moment précis. L'auteur dit que fcron veut remplacer Vixie-cron et anacron mais en "},{type:b,tag:k,props:{},children:[{type:a,value:"mieux"}]},{type:a,value:V},{type:b,tag:f,props:{},children:[{type:a,value:"Le genre de tâche qu'on peut faire est:"}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Lance une commande aux chaque 3heures que le système est allumé"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Lance une commande au moins une fois entre 3h00 am et 6h00 am tout les jours."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{href:"http:\u002F\u002Ffcron.free.fr\u002F"},children:[{type:a,value:P}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"incron"}]},{type:a,value:"\nincron est une fonctionnalité cron a l'application inotify qui est un système basé sur le système de fichiers plutôt que sur des plages de temps. Un cas d'utilisation serait, par exemple, de pouvoir lancer une commande lorsqu'un logrotate a été lancé ou si un fichier a été ajouté dans un dossier.\n"},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Flinux.die.net\u002Fman\u002F5\u002Fincron.conf"},children:[{type:a,value:"pages manuel"}]},{type:a,value:" - "},{type:b,tag:g,props:{href:"http:\u002F\u002Finotify.aiken.cz\u002F"},children:[{type:a,value:P}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Autres versions"}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Avez-vous utilisé l'un d'eux dans vos projets?"}]}]},dir:Q,path:"\u002Fblog\u002F2010\u002F04\u002Fles-differentes-versions-du-service-de-taches-planifie-cron",extension:z,slug:"les-differentes-versions-du-service-de-taches-planifie-cron",createdAt:X,updatedAt:X,category:A,prettyfiedTemporalDate:{prettified:"lundi 19 avril 2010",temporalDate:"2010-04-19"}},{locale:w,title:"Procédure pour créer un serveur FTP sécurisé SSL forcé avec usager virtuels sous Ubuntu Linux avec vsFTPd",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd\u002F",status:x,revising:o,created:"2010-04-30",updated:ac,tags:[B,U,K,Y,t],categories:[],excerpt:q,toc:[{depth:l,text:at},{depth:l,text:R},{depth:l,text:Z},{depth:l,text:au},{depth:l,text:av},{depth:l,text:D},{depth:l,text:aw},{depth:l,text:ax},{depth:l,text:ay}],body:{type:y,children:[{type:b,tag:f,props:{},children:[{type:a,value:"Je ne sais pas si vous êtes comme moi mais je n'aime pas laisser non crypté l'accès a un service qui me demande un mot de passe. Je devait monter un serveur cette semaine qui doit avoir les accès FTP."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"J'ai pris l'initiative de sécuriser la machine avec du SSL car je crois qu'aujourd'hui c'est notre devoir de faire ce genre de chose. Ce n'est pas la première fois que je configure un serveur FTP over SSL mais je n'avait jamais pris de notes vraiment à ce jour. Je l'ai fait cette fois-ci!"}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cequecetteproc%C3%A9durefait..."},children:[]},{type:a,value:at}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Pouvoir créer des comptes FTP sans avoir a créer un utilisateur local (donc pas accès shell (SSH))."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Permet les connections FTP over SSL de façon EXPLICITE sur un port non standard  (cet exemple utilisera le port "},{type:b,tag:p,props:{},children:[{type:a,value:"6123"}]},{type:a,value:")"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ne permet pas d'utilisateur ni de connexions anonymes"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Bannit les hôtes qui tentent de se connecter (LOGIN FAILED)\tvia "},{type:b,tag:h,props:{},children:[{type:a,value:az}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Utilise le system PAM interne pour l'authentification"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ne requiert pas d'usager local (pas de risque de tentative de connection SSH, usager séparés)"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Le serveur FTP roule sur son propre usager"}]},{type:a,value:c}]},{type:a,value:c},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Proc%C3%A9dure"},children:[]},{type:a,value:R}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Vérifier quelle version de serveur FTP est installé\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# dpkg --list | grep ftp\n~\nii  ftp                               0.17-19                      The FTP client\nii  lftp                              3.7.15-1ubuntu2              Sophisticated command-line FTP\u002FHTTP client p\nii  vsftpd                            2.2.0-1ubuntu1               lightweight, efficient FTP server written fo"}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" vsftpd est ce qu'on veut. Dans ce cas-ci il est déjà installé (ii)."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Assurer que les prérequis sont installés\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# aptitude install vsftpd libpam-pwdfile openssl"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Modifier le fichier de config "},{type:b,tag:h,props:{},children:[{type:a,value:"vsftpd.conf"}]},{type:a,value:V},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" Modifiez pour ces valeurs (ci-bas) et conservez les autres valeurs par défaut.\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\nanonymous_enable=NO\nlocal_enable=YES\nwrite_enable=YES\nlocal_umask=022\nchroot_local_user=YES\nftpd_banner=Un nom Quelconque FTP\nnopriv_user=vsftpd\n"},{type:b,tag:E,props:{id:"renoirboulangercom-2010-04-29-we-will-force-usage-on-an-other-port"},children:[{type:b,tag:g,props:{ariaHidden:F,href:"#renoirboulangercom-2010-04-29-we-will-force-usage-on-an-other-port",tabIndex:G},children:[{type:b,tag:H,props:{className:[I,J]},children:[]}]},{type:a,value:"renoirboulanger.com 2010-04-29 we will force usage on an other port"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"#connect_from_port_20=YES"}]}]},{type:b,tag:f,props:{},children:[]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter ou corriger (étaient pas présents lorsque j'ai crée la procédure)\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# 2010-04-28 accès usager\nvirtual_use_local_privs=YES\nguest_enable=YES\nuser_sub_token=$USER\nlocal_root=\u002Fhome\u002Fibottin\u002FFTP\u002F$USER\nhide_ids=YES"}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" Ajuster le "},{type:b,tag:p,props:{},children:[{type:a,value:"local_root"}]},{type:a,value:" a l'endroit\tou envoyer les fichiers."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Activer le SSL\n"},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le certificat\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# cd \u002Fetc\u002Fssl\n# \u002Fusr\u002Fbin\u002Fopenssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout vsftpd.pem -out vsftpd.pem"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter au "},{type:b,tag:p,props:{},children:[{type:a,value:"\u002Fetc\u002Fvsftpd.conf"}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\n# renoirboulanger.com 2010-04-30 SSL configuration\nlisten_port=6123\nftp_data_port=6122\npasv_min_port=6000\npasv_max_port=6100\n"},{type:b,tag:f,props:{},children:[{type:a,value:"ssl_enable=YES"}]},{type:a,value:c},{type:b,tag:E,props:{id:"allow-anonymous-users-to-use-secured-ssl-connections"},children:[{type:b,tag:g,props:{ariaHidden:F,href:"#allow-anonymous-users-to-use-secured-ssl-connections",tabIndex:G},children:[{type:b,tag:H,props:{className:[I,J]},children:[]}]},{type:a,value:"Allow anonymous users to use secured SSL connections"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"allow_anon_ssl=YES"}]},{type:a,value:c},{type:b,tag:E,props:{id:"all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to"},children:[{type:b,tag:g,props:{ariaHidden:F,href:"#all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to",tabIndex:G},children:[{type:b,tag:H,props:{className:[I,J]},children:[]}]},{type:a,value:"All non-anonymous logins are forced to use a secure SSL connection in order to"}]},{type:a,value:c},{type:b,tag:E,props:{id:"send-and-receive-data-on-data-connections"},children:[{type:b,tag:g,props:{ariaHidden:F,href:"#send-and-receive-data-on-data-connections",tabIndex:G},children:[{type:b,tag:H,props:{className:[I,J]},children:[]}]},{type:a,value:"send and receive data on data connections."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"force_local_data_ssl=NO"}]},{type:a,value:c},{type:b,tag:E,props:{id:"all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to-send-the-password"},children:[{type:b,tag:g,props:{ariaHidden:F,href:"#all-non-anonymous-logins-are-forced-to-use-a-secure-ssl-connection-in-order-to-send-the-password",tabIndex:G},children:[{type:b,tag:H,props:{className:[I,J]},children:[]}]},{type:a,value:"All non-anonymous logins are forced to use a secure SSL connection in order to send the password."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"force_local_logins_ssl=YES\nssl_tlsv1=YES\nssl_sslv2=YES\nssl_sslv3=YES\nrsa_cert_file=\u002Fetc\u002Fssl\u002Fvsftpd.pem"}]}]},{type:b,tag:f,props:{},children:[]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Remplacer"}]},{type:a,value:" le contenu du fichier "},{type:b,tag:p,props:{},children:[{type:a,value:"pam.d\u002Fvsftpd"}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# vi \u002Fetc\u002Fpam.d\u002Fvsftpd\n~\nauth required pam_pwdfile.so pwdfile \u002Fetc\u002Fvsftpd.passwd\naccount required pam_permit.so"}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" Il est important de remplacer le reste du fichier par ce contenu ci-haut."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Modifier permissions sur le fichier .pem\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# chown vsftpd \u002Fetc\u002Fssl\u002Fvsftpd.pem"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:aA},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# \u002Fetc\u002Finit.d\u002Fvsftpd restart"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le unix user qui va rouler le démon\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# adduser --system --no-create-home --disabled-login -s \u002Fusr\u002Fsbin\u002Fnologin --home \u002Fvar\u002Fftp vsftpd"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Modifier les permissions pour l'utilisateur qui roule vsftpd (ajuster)\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# chown -R ftp:ftp \u002Fvar\u002Fftp\u002F\n# chmod -R 740 \u002Fvar\u002Fftp"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:b,tag:u,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP"},children:[{type:a,value:Z}]}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajuster "},{type:b,tag:p,props:{},children:[{type:a,value:az}]},{type:a,value:c},{type:b,tag:S,props:{className:[aB,aC],style:aD},children:[{type:a,value:c},{type:b,tag:S,props:{className:["codeHeader","panelHeader"],style:"border-bottom-width: 1px;"},children:[{type:b,tag:h,props:{},children:[{type:a,value:"Ajuster le bloc [vsftpd]"}]}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# vi \u002Fetc\u002Ffail2ban\u002Fjail.conf\n~\n[vsftpd]\n"},{type:b,tag:f,props:{},children:[{type:a,value:"enabled  = true"}]}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" par defaut "},{type:b,tag:p,props:{},children:[{type:a,value:"enabled"}]},{type:a,value:" est a false...\til faut l'activer."},{type:b,tag:f,props:{},children:[]},{type:a,value:c}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:aA},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# \u002Fetc\u002Finit.d\u002Fvsftpd restart\n * Stopping FTP server: vsftpd\n   ...done.\n * Starting FTP server: vsftpd\n   ...done.\n# ps aux|grep vsftpd\nvsftpd   18771  0.0  0.0  28904  1300 ?        Ss   17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nvsftpd   18772  0.0  0.0  29100  1608 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nftp      18773  0.0  0.0  28928   924 ?        S    17:09   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\nroot     18795  0.0  0.0  22628  1712 ?        S    17:14   0:00 \u002Fusr\u002Fsbin\u002Fvsftpd\n..."}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" les deux premiers "},{type:b,tag:p,props:{},children:[{type:a,value:"vsftpd"}]},{type:a,value:" est le résultat attendu"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Nous allons forcer le FTP over SSL sur le port "},{type:b,tag:h,props:{},children:[{type:a,value:"6122"}]},{type:a,value:", pour ça il faut autoriser le Firewall\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# iptables -A INPUT -m state --state ESTABLISHED,RELATED\n# iptables -A INPUT -m tcp -p tcp --dport 6122 -j ACCEPT\n# iptables -A INPUT -m state --state NEW,ESTABLISHED\n# iptables -A INPUT -m tcp -p tcp --dport 6123 -j ACCEPT\n# iptables -A INPUT -p tcp --dport 6000:6100 -j ACCEPT"}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:"Source"}]},{type:a,value:": "},{type:b,tag:g,props:{href:aE},children:[{type:a,value:aF}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Sauvegarder le Firewall\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# iptables-save \u003E \u002Fetc\u002Fiptables.rules"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Tester de l'extérieur avec un client FTP (Filezilla, etc)\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Voir les options suivantes a la connection"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"port: 6123"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Forcer le SSL"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-AjouterunutilisateurFTP"},children:[]},{type:a,value:Z}]},{type:a,value:"\nOn utilise le truc simple de htpasswd pour l'authentification. Pas de gossage :-)\n"},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Cr%C3%A9erunnouveaucompte"},children:[]},{type:a,value:au}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le "},{type:b,tag:k,props:{},children:[{type:a,value:"premier compte"}]},{type:a,value:", sinon, "},{type:b,tag:h,props:{},children:[{type:a,value:"passer\ta la directive suivante"}]},{type:a,value:"! ou Utiliser mon script "},{type:b,tag:u,props:{to:_},children:[{type:a,value:D}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# htpasswd -c \u002Fetc\u002Fvsftpd.passwd ftpuser\nNew password:\nRe-type new password:\nAdding password for user ftpuser"}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" l'option "},{type:b,tag:h,props:{},children:[{type:b,tag:p,props:{},children:[{type:a,value:"-c"}]}]},{type:a,value:" est\tpour créer le fichier la première fois."}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Voir les directives de *"},{type:b,tag:u,props:{to:_},children:[{type:a,value:D}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ajouteroumodifierunutilisateur"},children:[]},{type:b,tag:h,props:{},children:[{type:a,value:av}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Utiliser le script "},{type:b,tag:h,props:{},children:[{type:b,tag:p,props:{},children:[{type:a,value:"evo-vsftpd-user"}]}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"$ sudo evo-vsftpd-user foo\nCréation d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ...\nNew password:\nRe-type new password:\nAdding password for user foo\n ... OK\n * Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002Ffoo ...  OK\n * Changement des permissions du dossier ...  OK\nTerminé!"}]},{type:a,value:"\nVoir les directives de "},{type:b,tag:h,props:{},children:[{type:b,tag:u,props:{to:_},children:[{type:a,value:D}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur"},children:[]},{type:a,value:D}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer le fichier\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# vi \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Coller le contenu\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"#!\u002Fbin\u002Fbash\nif [ -z $1 ]; then\n  echo \"Aucun argument usager fourni\"\n  echo \"usage: sudo evo-vsftpd-user foo\"\n  exit 1;\nfi\n"},{type:b,tag:f,props:{},children:[{type:a,value:"if [ \"$(whoami)\" != 'root' ]; then\necho \"Vous n'avez pas les permisions utilisateur requises.\"\nexit 1;\nfi"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"echo \"Création d'un nouvel usager dans \u002Fetc\u002Fvsftpd.passwd ... \"\nhtpasswd \u002Fetc\u002Fvsftpd.passwd $1\necho \" ... OK \"\necho -n \" "},{type:b,tag:k,props:{},children:[{type:a,value:" Création du dossier \u002Fhome\u002Fibottin\u002FFTP\u002F$1 ... \"\nmkdir \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho -n \" "}]},{type:a,value:" Changement des permissions du dossier ... \"\nchown -R ftp:ftp \u002Fhome\u002Fibottin\u002FFTP\u002F$1\nchmod -R 740 \u002Fhome\u002Fibottin\u002FFTP\u002F$1\necho \" OK\"\necho \"Terminé!\""}]}]},{type:b,tag:f,props:{},children:[]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Rendre exécutable\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# chmod +x \u002Fusr\u002Fsbin\u002Fevo-vsftpd-user"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Tester"},children:[]},{type:a,value:aw}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Installer le paquet pour tester\n"},{type:b,tag:S,props:{className:[aB,aC],style:aD},children:[{type:a,value:c},{type:b,tag:S,props:{className:["codeContent","panelContent"]},children:[{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# aptitude install ftp-ssl"}]},{type:a,value:c}]},{type:a,value:c}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Tester\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# ftp-ssl someserver.net 6123\nConnected to someserver.net.\n220 Un nom Quelconque FTP\nName (someserver.net:renoirboulanger): ftpuser\n234 Proceed with negotiation.\n[SSL Cipher DES-XXXX-SHA]\n331 Please specify the password.\nPassword:\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp\u003E"}]},{type:a,value:c},{type:b,tag:h,props:{},children:[{type:a,value:v}]},{type:a,value:" [SSL Cipher DES-XXXX-SHA] est ce qu'on attend :-)"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Pourd%C3%A9boguer"},children:[]},{type:a,value:ax}]},{type:a,value:"\nLe feedback est assez difficile a avoir de la part de vsftpd, mais pour en voir plus:\n"},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Pour le debug\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# vi \u002Fetc\u002Fvsftpd.conf\n~\n# for debuging\nlog_ftp_protocol=YES"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:b,tag:g,props:{name:"ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Ressources"},children:[]},{type:a,value:ay}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwjholden.com\u002Fvsftpd-help.html"},children:[{type:a,value:"vsftpd help"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fvsftpd.beasts.org\u002Fvsftpd_conf.html"},children:[{type:a,value:"vsftpd.conf manpages"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:aE},children:[{type:a,value:aF}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.ubuntututorials.net\u002Finstalling-vsftpd-using-text-file-for-virtual-users\u002F"},children:[{type:a,value:"Installing vsftpd using text file for virtual users"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.cyberciti.biz\u002Ftips\u002Fconfigure-vsfptd-secure-connections-via-ssl-tls.html"},children:[{type:a,value:"Vsftpd SSL \u002F TLS FTP Server Configuration"}]}]},{type:a,value:c}]}]},dir:Q,path:"\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd",extension:z,slug:"procedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd",createdAt:X,updatedAt:"2024-10-24T19:50:04.908Z",category:q,prettyfiedTemporalDate:{prettified:"vendredi 30 avril 2010",temporalDate:"2010-04-30"}},{locale:w,title:"Comment automatiser une tâche avec CRON en utilisant Vim",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim\u002F",status:x,revising:o,caption:o,migrateLinks:o,migrateImages:o,migrateCode:o,created:"2010-04-14",updated:N,tags:[U,Y,t,an,"vulgarisation"],categories:[],excerpt:" ",toc:[{depth:l,text:aG},{depth:l,text:aH},{depth:l,text:L}],body:{type:y,children:[{type:b,tag:f,props:{},children:[{type:a,value:"[caption id=\"attachment_2079\" align=\"alignright\" width=\"270\" caption=\"Logo Vim, qui signifie vi-improved (amélioré)\"]"},{type:b,tag:ap,props:{className:[aq,"wp-image-2079"],title:"Logo Vim",src:"https:\u002F\u002Frenoirb.github.io\u002Fsite-assets\u002Fassets\u002Fcontent\u002Fblog\u002F2010\u002F04\u002FVim_logo.png",alt:"Vi - Vi.... Improved (amélioré)",width:aI,height:aI},children:[]},{type:a,value:"[\u002Fcaption]"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Deux tâches vraiment essentielles qu'on fait en administrant une machine sous Linux sont très souvent de modifier\u002Fcréer un fichier et de planifier des tâches de maintenance."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Pour utiliser «"},{type:b,tag:k,props:{},children:[{type:a,value:"cron»"}]},{type:a,value:" il faut savoir utiliser «"},{type:b,tag:k,props:{},children:[{type:a,value:"vi»"}]},{type:a,value:", les commandes sont très souvent les mêmes. Je dois spécifier que j'ai basé mon tutoriel sur CRON fourni par Ubuntu Linux qui est (de mémoire) le même paquet que celui fourni dans "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.redhat.com\u002F"},children:[{type:a,value:"Red Hat Linux"}]},{type:a,value:", "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.debian.org\u002F"},children:[{type:a,value:"Debian Linux"}]},{type:a,value:" ou "},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.ubuntu.com\u002F"},children:[{type:a,value:"Ubuntu Linux"}]},{type:a,value:W}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le but de ce billet est en fait de vous montrer sommairement comment automatiser une tâche (une commande) avec cron."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Je publierai plus tard un billet sur les différences entre les distributions de cron."}]},{type:a,value:c},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:aG}]},{type:a,value:"\nVi est un éditeur de texte en ligne de commande qui permet de faire bien des macros, il peut sembler compliquer mais l'essentiel se résume ainsi.\n"},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"ESCAPE"}]},{type:a,value:" permet d'entrer une commande"}]},{type:a,value:c},{type:b,tag:$,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"i"}]},{type:a,value:" mode Insertion"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"r"}]},{type:a,value:" mode remplacer le caractère courrant"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"SHIFT+a"}]},{type:a,value:" insérer a partir de la fin de la ligne courrante"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":"}]},{type:a,value:" entrer une commande spéciale"}]},{type:a,value:c},{type:b,tag:$,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":wq"}]},{type:a,value:" sauvegarder le fichier et quitter l'éditeur"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":w"}]},{type:a,value:" sauvegarder le fichier courrant"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:":10"}]},{type:a,value:" sauter a la 10e ligne du document"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"\u002Ftext"}]},{type:a,value:" Chercher 'text' dans le document courrant"}]},{type:a,value:c},{type:b,tag:$,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:ak}]},{type:a,value:" Chercher le prochain mon cherché (par rapport a ce qui a été dit ci-haut)"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"dd"}]},{type:a,value:" supprimer la ligne courrante"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"5dd"}]},{type:a,value:" supprimer les 5 prochaines lignes"}]},{type:a,value:c}]},{type:a,value:aJ},{type:b,tag:g,props:{href:aK},children:[{type:a,value:aL}]},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:aH}]},{type:a,value:"\nPour créer une tâche sur un système Linux il y a plusieurs méthodes possibles.\n"},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:u,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim#crontab"},children:[{type:a,value:"Ajouter une ligne dans le «crontab», la table d'actions CRON"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:u,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim#crond"},children:[{type:a,value:"Ajouter fichier avec directives dans \u002Fetc\u002Fcron.d\u002F"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:u,props:{to:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim#etccron"},children:[{type:a,value:"Ajouter une ligne dans un des dossiers \u002Fetc\u002Fcron.daily\u002F, \u002Fetc\u002Fcron.hourly\u002F, \u002Fetc\u002Fcron.monthly"}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:b,tag:g,props:{name:"crontab"},children:[]},{type:a,value:"1. Ajouter une ligne dans le «crontab», la table d'actions CRON"}]},{type:a,value:"\nC'est fait soit en utilisant la commande crontab, ou en éditant le fichier \u002Fetc\u002Fcrontab\n"},{type:b,tag:f,props:{},children:[{type:a,value:"crontab roule tout le temps en tant que root, et l'idéal serait d'utiliser un fichier dans \u002Fetc\u002Fcron.d\u002F\nSavoir sur quel usager doit rouler la tâche (un user local qui peut rouler la commande, idéalement pas root!)"}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:i,props:{lang:j},children:[{type:a,value:"someuser@ubuntu:~$ crontab -e"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"l'éditeur vi va s'ouvrir"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"aller a l'endroit ou vous voulez éditer"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"créez une nouvelle ligne en Insert mode, en utilisant le i, ou a la fin de la ligne courrante en faisant CTRL+a"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Entrer une ligne dans le format"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"* * * * * commande a être exécutée\n- - - - -\n| | | | |\n| | | | +----- jour de la semaine (0 - 6) (Dimanche=0)\n| | | +------- mois (1 - 12)\n| | +--------- jour dans le mois (1 - 31)\n| +----------- heure (0 - 23)\n+------------- min (0 - 59)"}]},{type:a,value:"\nexemple:\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"30 18 * * * rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F*  \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"... qui effacera le contenu de "},{type:b,tag:p,props:{},children:[{type:a,value:"\u002Fhome\u002Fsomeuser\u002Ftmp\u002F"}]},{type:a,value:" a tout les 18h30 de tout les jours et qui log dans "},{type:b,tag:p,props:{},children:[{type:a,value:"\u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Pour quitter faites ESCAPE  :wq     pour write quit."}]},{type:a,value:c}]},{type:a,value:aJ},{type:b,tag:g,props:{href:aM},children:[{type:a,value:aN}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:b,tag:g,props:{name:"crond"},children:[]},{type:a,value:"2. Ajouter fichier avec directives dans \u002Fetc\u002Fcron.d\u002F"}]},{type:a,value:"\nC'est le même principe sauf qu'il s'agit d'un fichier nommé, généralement sous le même nom que le package Linux qu'il dessert. Exemple php5 aurait son package.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Sauf qu'on peut spécifier qui lancera la commande."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Comment faire..."}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Créer un fichier, ex:\n# vi \u002Fetc\u002Fcron.d\u002Fphp5"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Coller la commande qui a été testée au par avant\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"someuser@ubuntu:~$ rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F* \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter une ligne, ESCAPE+i"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Commencer par le moment de l'exécution comme avec «Ajouter une ligne dans le crontab»"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:i,props:{lang:j},children:[{type:a,value:"30 19  *  *  *"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter le nom du username qui va rouler la commande"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"ex: someuser"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ajouter la commande testée tout a l'heure\nex: rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F* \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Ce qui donnera:"},{type:b,tag:"br",props:{},children:[]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"30 19 * * * someuser rm \u002Fhome\u002Fsomeuser\u002Ftmp\u002F* \u003E \u002Fhome\u002Fsomeuser\u002Fcronlogs\u002Fclean_tmp_dir.log"}]},{type:a,value:c}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Voilà!"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:b,tag:g,props:{name:"etccron"},children:[]},{type:a,value:"3. Ajouter une ligne dans un des dossiers \u002Fetc\u002Fcron.daily\u002F, \u002Fetc\u002Fcron.hourly\u002F, \u002Fetc\u002Fcron.monthly"}]},{type:a,value:"\nMême concept que le crontab sauf que l'on a pas a mentionner quand exécuter, c'est \u002Fetc\u002Fcrontab  qui dit qand les fichiers sont exécuté\n"},{type:b,tag:m,props:{},children:[{type:a,value:L}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:aM},children:[{type:a,value:aN}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:aK},children:[{type:a,value:aL}]}]},{type:a,value:c}]}]},dir:Q,path:"\u002Fblog\u002F2010\u002F04\u002Fcomment-automatiser-une-tache-avec-cron-en-utilisant-vim",extension:z,slug:"comment-automatiser-une-tache-avec-cron-en-utilisant-vim",createdAt:T,updatedAt:T,category:q,prettyfiedTemporalDate:{prettified:"mercredi 14 avril 2010",temporalDate:"2010-04-14"}},{locale:w,title:"Comment dire à Apache le mime-type d'un document Office 2007",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2010\u002F04\u002Fcomment-dire-a-apache-le-mime-type-dun-document-office-2007\u002F",status:x,revising:o,migrateLinks:o,migrateCode:o,created:"2010-04-21",updated:N,tags:[B,K,t,"web"],categories:[A],excerpt:q,toc:[{depth:l,text:R}],body:{type:y,children:[{type:b,tag:f,props:{},children:[{type:a,value:"J'ai entendu parler de certains Problèmes avec les documents "},{type:b,tag:h,props:{},children:[{type:a,value:".docx"}]},{type:a,value:" qui son considérés comme étant des fichiers zip. J'ai pensé partager avec vous comment j'ai réparé la situation."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Il est possible que le serveur apache ne considère pas les fichiers doc sur le serveur comme étant des fichiers office. Normalement un navigateur téléchargera le fichier et ouvrira avec le programme qu'il considère comme étant le bon."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"A moins que l'ordinateur du visiteur ait pas de bonne association de fichier, dans ce cas, on peut rien y faire."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Pour aider, on peut annoncer au serveur web les associations MIME."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le problème avec cette méthode qui ne sert presque a rien, c'est que ça ne changera rien si"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Le visiteur n'a pas de bonne association sur son système d'exploitation"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Le visiteur n'a pas Microsoft Office 2007 ou Open Office"}]},{type:a,value:c}]},{type:a,value:c},{type:a,value:c},{type:b,tag:m,props:{},children:[{type:a,value:R}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Copier-coller ce bloc dans un ou encore dans l'un ou l'autre:"}]},{type:a,value:c},{type:b,tag:r,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:aO},{type:b,tag:p,props:{},children:[{type:a,value:".htaccess"}]},{type:a,value:" du site qui contient les fichiers a télécharger, exemple: "},{type:b,tag:p,props:{},children:[{type:a,value:"public_html\u002F"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:aO},{type:b,tag:p,props:{},children:[{type:a,value:"\u003CVirtualHost\u002F\u003E"}]},{type:a,value:" dans le "},{type:b,tag:p,props:{},children:[{type:a,value:"\u003CDirectory\u003E"}]},{type:a,value:" associé."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{lang:"htaccess"},children:[{type:a,value:"AddType application\u002Fvnd.ms-word.document.macroEnabled.12 .docm\nAddType application\u002Fvnd.openxmlformats-officedocument.wordprocessingml.document docx\nAddType application\u002Fvnd.openxmlformats-officedocument.wordprocessingml.template dotx\nAddType application\u002Fvnd.ms-powerpoint.template.macroEnabled.12 potm\nAddType application\u002Fvnd.openxmlformats-officedocument.presentationml.template potx\nAddType application\u002Fvnd.ms-powerpoint.addin.macroEnabled.12 ppam\nAddType application\u002Fvnd.ms-powerpoint.slideshow.macroEnabled.12 ppsm\nAddType application\u002Fvnd.openxmlformats-officedocument.presentationml.slideshow ppsx\nAddType application\u002Fvnd.ms-powerpoint.presentation.macroEnabled.12 pptm\nAddType application\u002Fvnd.openxmlformats-officedocument.presentationml.presentation pptx\nAddType application\u002Fvnd.ms-excel.addin.macroEnabled.12 xlam\nAddType application\u002Fvnd.ms-excel.sheet.binary.macroEnabled.12 xlsb\nAddType application\u002Fvnd.ms-excel.sheet.macroEnabled.12 xlsm\nAddType application\u002Fvnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx\nAddType application\u002Fvnd.ms-excel.template.macroEnabled.12 xltm\nAddType application\u002Fvnd.openxmlformats-officedocument.spreadsheetml.template xltx"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"source:"}]},{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.webdeveloper.com\u002Fforum\u002Fshowthread.php?t=162526"},children:[{type:a,value:"Webdeveloper.com"}]}]}]},dir:Q,path:"\u002Fblog\u002F2010\u002F04\u002Fcomment-dire-a-apache-le-mime-type-dun-document-office-2007",extension:z,slug:"comment-dire-a-apache-le-mime-type-dun-document-office-2007",createdAt:T,updatedAt:T,category:A,prettyfiedTemporalDate:{prettified:"mercredi 21 avril 2010",temporalDate:"2010-04-21"}},{locale:w,title:"Un firewall simple sous Linux avec «Ferm»",canonical:"https:\u002F\u002Frenoirboulanger.com\u002Fblog\u002F2009\u002F08\u002Fun-firewall-simple-sous-linux-avec-ferm\u002F",status:x,revising:o,migrateCode:o,migrateLinks:o,created:"2009-08-19",updated:N,tags:[B,K,Y,t],categories:[A],excerpt:q,toc:[{depth:aa,text:aP},{depth:aa,text:aQ},{depth:aa,text:aR}],body:{type:y,children:[{type:b,tag:f,props:{},children:[{type:a,value:"Attention: Article Technique!"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Dans le but de faire profiter la postérité et ma mémoire personnelle voici mon premier post d'une série d'articles spécialisée sur Linux."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Ces articles proviennent de ma voûte documentaire professionnelle et personnelle."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Évidemment pour les publier ici je dois censurer les détails sensibles, vous me comprendrez (!)"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Le fait de les avoir dans le format Wiki Markup de Confluence... et les traduire ici demande du temps pour les reformatter pour mon blogue."}]},{type:a,value:c},{type:b,tag:ab,props:{},children:[{type:a,value:aP}]},{type:a,value:"\nD'autres articles technique (pour Debian Linux) seront aussi disponibles dans les prochaines semaines.\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Voici une liste de quelques uns que je compte publier:"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Monter une machine en SNMP v2c en lecture seule"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Permettre des updates aux serveurs NTP a l'heure"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Installer VMware server 2 sur Debian"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Augumenter le niveau de sécurité pour Infra Publique sous Debian"}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:a,value:"Procédure configuration SYSLOG-NG vers un serveur de log"}]},{type:a,value:c}]},{type:a,value:"\nJ\n"},{type:a,value:c},{type:b,tag:ab,props:{},children:[{type:a,value:aQ}]},{type:a,value:"\nEn fait, sous Debian c'est pas très compliqué, on ajoute le paquet, puis on le configure comme mentionné plus bas.\n"},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# apt-get update\n# apt-get install ferm libnet-dns-perl perl iptables"}]},{type:a,value:"\nJ'ai fait une petite version qui permet d'utiliser des variables et mettre le code un peu plus clean (d'un point de vue programmeur).\n"},{type:b,tag:f,props:{},children:[{type:a,value:"Vous pouvez remplacer par ce code ci:"}]},{type:a,value:c},{type:b,tag:i,props:{lang:j},children:[{type:a,value:"# -*- shell-script -*-\n#\n#  Configuration file for ferm(1).\n#\n# vmware-mgmt = 8333\n# vmware-console = 902\n# ntop = 3000\n# ... ports ajoutes dans \u002Fetc\u002Fservices\n\n# Source http:\u002F\u002Fwww.krzywanski.net\u002Farchives\u002F90\n# Interfaces\n@def $DEV_LOCAL = lo;\n@def $DEV_LAN = (eth1 vmnet1 vmnet8);\n@def $DEV_INTERNET = eth0;\n\n# Ports\n@def $PORTS = (ntp name http https smtp);\n\n# Known IPs\n@def $SSH_ALLOWED = (69.159.234.55 192.168.2.1);\n@def $SSH_DYNDNS = @resolve((somehost.renoirboulanger.com someotherhost.somenetwork.net));\n\n# SSH Clients\n@def $SSH_CLIENTS = ($SSH_ALLOWED $SSH_DYNDNS);\n\ntable filter {\n    chain INPUT {\n        policy DROP;\n\n        # connection tracking\n        mod state state INVALID DROP;\n        mod state state (ESTABLISHED RELATED) ACCEPT;\n\n        # allow local packages\n        interface $DEV_LOCAL ACCEPT;\n        interface $DEV_LAN ACCEPT;\n\n        # allow ping from the administrator's network\n        interface $DEV_INTERNET saddr ($SSH_DYNDNS $SSH_ALLOWED) proto icmp icmp-type echo-request ACCEPT;\n\n        # respond to ping\n        proto icmp icmp-type echo-request ACCEPT;\n\n        # allow SSH connections\n        proto tcp dport 2522 ACCEPT;\n\n        proto tcp dport $PORTS ACCEPT;\n    }\n    chain OUTPUT {\n        policy ACCEPT;\n\n        # connection tracking\n        mod state state INVALID DROP;\n        mod state state (ESTABLISHED RELATED) ACCEPT;\n    }\n    chain FORWARD {\n        policy DROP;\n\n        # connection tracking\n        mod state state INVALID DROP;\n        mod state state (ESTABLISHED RELATED) ACCEPT;\n    }\n}"}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Pour plus de détails a propos de la syntaxe, "},{type:b,tag:g,props:{href:"http:\u002F\u002Fferm.foo-projects.org\u002Fdownload\u002F2.0\u002Fferm.html"},children:[{type:a,value:"voir la documentation"}]},{type:a,value:W}]},{type:a,value:c},{type:b,tag:ab,props:{},children:[{type:a,value:aR}]},{type:a,value:"\nJ'ai utilisé, entre autres ces ressources pour m'inspirer de ce mini-tutoriel\n"},{type:b,tag:n,props:{},children:[{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.debian.org\u002Fdoc\u002Fmanuals\u002Fsecuring-debian-howto"},children:[{type:a,value:"Securing Debian HOWTO"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.tldp.org\u002FHOWTO\u002FSecurity-HOWTO\u002F"},children:[{type:a,value:"Linux Security HOWTO"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.cromwell-intl.com\u002Fsecurity\u002Fsecurity-firewall.html"},children:[{type:a,value:"Firewall Tools"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.debian.org\u002Fsecurity\u002F"},children:[{type:a,value:"Debian Security"}]}]},{type:a,value:d},{type:b,tag:e,props:{},children:[{type:b,tag:g,props:{href:"http:\u002F\u002Fwww.debian.org\u002Fdoc\u002Fdebian-policy\u002F"},children:[{type:a,value:"Debian Policies"}]}]},{type:a,value:c}]}]},dir:"\u002Fblog\u002F2009\u002F08",path:"\u002Fblog\u002F2009\u002F08\u002Fun-firewall-simple-sous-linux-avec-ferm",extension:z,slug:"un-firewall-simple-sous-linux-avec-ferm",createdAt:"2024-10-24T19:50:04.889Z",updatedAt:"2024-10-24T19:50:04.890Z",category:A,prettyfiedTemporalDate:{prettified:"mercredi 19 août 2009",temporalDate:"2009-08-19"}}],taxonomyKey:t,taxonomy:{key:t}}],fetch:[],mutations:void 0}}("text","element","\n","\n\t","li","p","a","strong","pre","bash","em",3,"h3","ol",true,"tt","","ul","h4","unix","nuxt-link","Note","fr-CA","publish","root",".md","tranche-de-vie","linux","vm.somehost.com","Script pour créer un compte utilisateur","h1","true",-1,"span","icon","icon-link","securite","Sources","friend-machine","2013-03-27","CRON","site officiel","\u002Fblog\u002F2010\u002F04","Procédure","div","2024-10-24T19:50:04.906Z","logiciel-libre",".\n",".","2024-10-24T19:50:04.907Z","tutoriels","Ajouter un utilisateur FTP","\u002Fblog\u002F2010\u002F04\u002Fprocedure-pour-creer-un-serveur-ftp-securise-ssl-force-avec-usager-virtuels-sous-ubuntu-linux-avec-vsftpd#ComptesFTPvirtuel%28sansutilisateurlocal%29sousUbuntuavecvsFTPdetcryptoSSL-Scriptpourcr%C3%A9eruncompteutilisateur","blockquote",2,"h2","2013-03-29","L'historique","0. La machine accessible pour les deux","1. Sur le poste de votre ami","2. Créer le tunnel sur la machine de votre ami","3. Vous connecter de VOTRE poste, à la machine commune,  à finalement le poste de votre ami.","Screen","Finalement","n","screen","2024-10-24T19:50:04.914Z","vocabulaire","Une question de choix et de distribution","img","size-full",205,"Anacron","Ce que cette procédure fait...","Créer un nouveau compte","Ajouter ou modifier un utilisateur","Tester","Pour déboguer","Ressources","fail2ban","Redémarrer vsftpd\n","code","panel","border-width: 1px;","http:\u002F\u002Fmy.afterdawn.com\u002Fketola\u002Fblog_entry.cfm\u002F1262\u002Fvsftpd_ssl_and_iptables","vsftpd SSL and iptables","Utiliser vi (prérequis)","Créer une tâche CRON",270,"\nsource: ","http:\u002F\u002Fmatrix.samizdat.net\u002Fpratique\u002Fdocumentation\u002Fguide-survie-VI.html","Guide de survie VI","http:\u002F\u002Fadminschoice.com\u002Fcrontab-quick-reference","Crontab Quick reference","le ","D'autres articles spécialisés Debian Linux","Installer et configurer","Autres ressources")));