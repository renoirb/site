---
locale: en-CA
title: Data Driven UI
description: Research summary on experiments made in 2018 and 2019
date: &createdAt '2020-02-04T20:55:06-04:00'
createdAt: *createdAt
preamble:
  disable: true
  text: ' '
categories:
  - Research Summary
tags:
  - front-end
  - architecture
  - favourites
---

[react-as-ui-runtime]:
  https://overreacted.io/react-as-a-ui-runtime/
  'React as a UI Runtime by Dan Abramov'

The following is a summary of research I’ve made while attempting to build a web
application where each views would be generated based on how to organize data
and how to organize its visualization.

The idea of separating data from HTML markup isn’t new, there has been many
attempts

It is a follow up about one of the many tweets where I’ve made allusion about
the same idea.

<app-twitter-quote tweet="1134646209392648193">

I just came up with my shortest summary for leveraging Vue,React,Svelte;
&quot;[X as a UI Runtime][react-as-ui-runtime]&quot;

UI generated by code that&#39;s reading data, that&#39;s describing views
embedded with metadata about what and how to get content for itself.

Thanks
<a href="https://twitter.com/dan_abramov?ref_src=twsrc%5Etfw">@dan_abramov</a>
for your article [overreacted.io/react-as-a-ui-runtime][react-as-ui-runtime]

</app-twitter-quote>

## Description

Most FrontEnd tutorials and literature explains how to manually stitch HTML or
JSX (now with React) together to make a view.

In most examples they show how to display values from numbers or strings. As
strings. But rarely ways of "dressing up" more than one properties together
dynamically.

That is also true for more advanced "component library" where we might want to
re-use the same application layout for completely separate products. Not all
projects uses exactly the same stack.

## 1. Value components

Components used to dress up complex values such as a circle with color. A date,
where we plug in the user's locale and time zone, etc.

Here, shown inside an "UI-Value" project where we're publishing how to display a
value.

We can use Storybook to work and visualize those components.

<div style="clear:both;overflow:hidden;">

<app-image figcaption=" " src="~/assets/content/blog/2020/02/storybook-value-number.png">

Notice the documentation for other developers to consume.

</app-image>

<app-image figcaption=" " src="~/assets/content/blog/2020/02/storybook-value-date.png">

We can leverage Storybook’s "knobs" to visualize possible configuration options.

</app-image>

</div>

## 2. DisplayUnit and DataViewParent pattern

A work in progress UI pattern I'm working on, I might make it a paper.

> «UI generated by code that's reading data, that's describing views embedded
> with metadata about what and how to get content for itself.»

Inspired by [_dan_abramov_ in "React as a UI Runtime"][react-as-ui-runtime] and
[Generate Vue.js components from JSON DOM Structure][json-dom-structure].

[json-dom-structure]:
  https://medium.com/@harin76/generate-vue-js-components-from-a-json-javascript-dom-structure-a76534478d15
[react-as-ui-runtime]: https://overreacted.io/react-as-a-ui-runtime/
[initial-jsfiddle-proto]: https://jsbin.com/vecufob/edit?js,output

At first, I [experimented with this JSFiddle][initial-jsfiddle-proto], then, I
implemented a more complete solution allowing me to keep memory a dataset (i.e.
fetch once) in a given shape, and plug in how to assemble (i.e. change shape on
screen, without re-fetching). Leveraging Vue.js’ design.

Which allows us to keep memory a dataset in a given shape, and plug in how to
assemble.

Making views change completely by telling use this dataset (e.g. Vuex Store
module in `foo/bar/baz` in `rows`), and just flip which `DisplayUnitCollection`
to use and/or which top level `DataView*` component.

For example,

> I want to put the contents of each rows’s content property inside a
> _something_ value component.

And we can use that idea to describe a view. Such as a table with data.

<app-image figcaption="A DataViewTable" src="~/assets/content/blog/2020/02/storybook-data-view-table.png"></app-image>

> For `let fooDatasetAlpha = DisplayUnitCollection([/*...*/])`, inside a
> `<DataViewTable :headings="fooDatasetAlpha" />`, I want;
>
> - The first column to use the each rows’s "`task_name`" property as value, and
>   use "Task Name" as a label on top of the column
> - The 2nd column to be labelled "Status", that is sortable, sorted by the
>   value of "`request_progress`" property, for each row cell, I want a
>   "progress-trinary" component.
> - ...

So, a given dataset can have many `DisplayUnitCollection` (shown above as JSON
source), for example, we could have another for the a detailed view.

<app-image figcaption=" " src="~/assets/content/blog/2020/02/data-view-item-table.png">

A DataViewLabelProp

Imagine the rows are the same as the example above, but where we want to display
each properties on a table where the label is on the left, and the value on the
right.

</app-image>

> For `let fooDatasetBravo = DisplayUnitCollection([/*...*/])`, inside a
> `<DataViewLabelProp :headings="fooDatasetBravo" />` (i.e. label on the left,
> property dressed up to show value on the right), I want:
>
> - The first column to be labelled using "lbl_ObjectName" (to be translated by
>   i18n layer), show data using link component, use the "cmdb-id" Vue Router
>   route name, use the `CMDBID` for the `id` and `ObjectName` as text inside
>   the link
> - The 2nd column to be labelled as "lbl_Status" (i18n... not shown), show data
>   using a "trinary" component, plug-in use `Status` row property as the
>   trinary’s `value`

Then, we can have tree of views we can express to compound it all together.

<div style="clear:both;overflow:hidden;">

## 3. Re-Usble common Web Application Layout ("AppLayout")

From one repository, sandbox to work on all Application Layout (or "Chrome")
common in a web app; user icon, user options, sidebar, etc.

Output is a package we can publish and import from a host project: e.g. a nuxt
project, a small vue project with vuex

(note that the merge request is no longer up to the same stage as shown in the
following screenshots for packaging)

[experiment merge-request](https://github.com/renoirb/vue-admin-template/pull/1)

In the following screenshot, we can see that `AppLayout` contains many slots
that we can configure at import time.

<!-- 02C7E1A9-663B-47B7-B172-3657208D5F8E -->

In the screenshots below, you’re looking at the process of themeing
[PanJiaChen/vue-admin-template](https://github.com/PanJiaChen/vue-admin-template)
to look like the WebApp I’m contributing to at my current employer so we can
transparently migrate views from legacy.

<!-- IMG_2363 -->

### Example how to make make use

The following is a video where I show
[PanJiaChen/vue-admin-template](https://github.com/PanJiaChen/vue-admin-template)
in use, then run the finished "themed" version where I package it, and import it
inside a fresh Nuxt.js pro

- First minutes shows library I'm importing from
- Middle shows "frontend-bindings/vue-app-layout" as themed version
- `3:01` Notice in `"devDependencies"` importing
  `@frontend-bindings/conventions-use-bili`
- `4:11` Shows build process of packaging
- `5:39` How to import into a new Nuxt.js project a packaged version of the
  vue-app-layout
- `11:28` How to make host Nuxt.js project listen to vue-app-layout "logout"
  event

[Video _Publishing and importing vue-app-layout into a Nuxt.js
project_][vue-app-layout]

</div>

[vue-app-layout]: https://youtu.be/NHJiCwLUakE 'Video on YouTube'
