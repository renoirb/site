<!doctype html>
<html data-n-head-ssr class="layout--default zone__sandwich light-mode" lang="fr-CA" data-n-head="%7B%22class%22:%7B%22ssr%22:%5B%22layout--default%22,%22zone__sandwich%22,%22light-mode%22%5D%7D,%22lang%22:%7B%22ssr%22:%22fr-CA%22%7D%7D">
  <head>
    <title>Script bash pour transférer une base de donnée MySQL d’un serveur à l’autre - Renoir Boulanger</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" property="og:image" content="https://secure.gravatar.com/avatar/cbf8c9036c204fe85e15155f9d70faec?s=400"><meta data-n-head="ssr" property="twitter:card" content="summary_large_image"><meta data-n-head="ssr" property="twitter:site" content="@renoirb"><base href="/site/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="alternate" type="application/rss+xml" title="Renoir Boulanger’s Page Updates RSS Feed" href="https://renoirboulanger.com/feed.xml"><link data-n-head="ssr" rel="alternate" type="application/feed+json" title="Renoir Boulanger’s Page Updates Feed" href="https://renoirboulanger.com/feed.json"><link rel="preload" href="/_nuxt/runtime.js" as="script"><link rel="preload" href="/_nuxt/commons/app.js" as="script"><link rel="preload" href="/_nuxt/vendors/app.css" as="style"><link rel="preload" href="/_nuxt/vendors/app.js" as="script"><link rel="preload" href="/_nuxt/app.css" as="style"><link rel="preload" href="/_nuxt/app.js" as="script"><link rel="preload" href="/_nuxt/pages/blog.css" as="style"><link rel="preload" href="/_nuxt/pages/blog.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_year.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_year/_month.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_year/_month/_slug.css" as="style"><link rel="preload" href="/_nuxt/pages/blog/_year/_month/_slug.js" as="script"><link rel="stylesheet" href="/_nuxt/vendors/app.css"><link rel="stylesheet" href="/_nuxt/app.css"><link rel="stylesheet" href="/_nuxt/pages/blog.css"><link rel="stylesheet" href="/_nuxt/pages/blog/_year/_month/_slug.css"><link rel="preload" href="/site/_nuxt/static/1729800241/blog/2010/02/script-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre/state.js" as="script"><link rel="preload" href="/site/_nuxt/static/1729800241/blog/2010/02/script-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre/payload.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function (){"use strict";var e=window,t=document,s=t.documentElement,n=["dark","light"],a=function(e){for(var s=e+"=",n=t.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(s))return o.substring(s.length,o.length)}return null}("nuxt-color-mode")||"light",o="system"===a?i():a;function r(e){var t=e+"-mode";s.classList?s.classList.add(t):s.className+=" "+t}function c(t){return e.matchMedia("(prefers-color-scheme"+t+")")}function i(){if(e.matchMedia&&"not all"!==c("").media)for(var t of n)if(c(":"+t).matches)return t;return"light"}r(o),e["__NUXT_COLOR_MODE__"]={preference:a,value:o,getColorScheme:i,addClass:r,removeClass:function(e){var t=e+"-mode";s.classList?s.classList.remove(t):s.className=s.className.replace(new RegExp(t,"g"),"")}}}();
</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="layouts--default"><!----> <nav class="app-side-bar--component fixed z-40 w-full top z-50" data-v-cf57f860 data-v-2b2f37b3><div class="zone__sandwich__top container flex items-center justify-between py-4 mx-auto" style="position:relative" data-v-cf57f860><!----> <div class="app-side-bar__identity md:px-5 flex items-center" data-v-cf57f860><button aria-label="Open Menu" class="md:hidden ml-5 mr-2" data-v-cf57f860><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" class="w-8 h-8" data-v-cf57f860><path d="M4 6h16M4 12h16M4 18h16" data-v-cf57f860></path></svg></button> <a href="/" data-wip="components/global/AppSideBar.vue" class="identity__text font-semibold nuxt-link-active" data-v-cf57f860>
        Renoir Boulanger
      </a></div> <div class="app-side-bar__nav flex items-center" data-v-cf57f860><div class="md:flex md:justify-between md:bg-transparent text-is-italicized hidden" data-v-cf57f860><a href="/blog" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded nuxt-link-active" data-v-2b2f37b3>
      Blog
    </a><a href="/projects" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded" data-v-2b2f37b3>
      Projects
    </a><a href="/resume/as-code" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded" data-v-2b2f37b3>
      Resume
    </a><a href="/hello" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded" data-v-2b2f37b3>
      About
    </a></div></div></div> <aside class="md:invisible app-side-bar__aside fixed top-0 left-0 visible w-64 h-full overflow-auto transition-all duration-500 ease-in-out transform -translate-x-full" data-v-cf57f860><div class="app-side-bar__identity flex items-center w-full h-16 p-4 border-b" data-v-cf57f860><a href="/" class="identity__text nuxt-link-active" data-v-cf57f860>Renoir Boulanger</a></div> <div data-v-cf57f860><a href="/blog" class="hover:bg-teal-500 hover:text-white flex items-center p-4 nuxt-link-active" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          Blog
        </span></a><a href="/projects" class="hover:bg-teal-500 hover:text-white flex items-center p-4" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          Projects
        </span></a><a href="/resume/as-code" class="hover:bg-teal-500 hover:text-white flex items-center p-4" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          Resume
        </span></a><a href="/hello" class="hover:bg-teal-500 hover:text-white flex items-center p-4" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          About
        </span></a></div></aside></nav> <div class="fixed inset-0 z-40 transition-opacity" style="display:none"><div class="absolute inset-0 bg-black opacity-75"></div></div> <main class="zone__sandwich__meat middle container z-40 mx-auto"><div data-wip="layout/default.vue" class="md:m-10 grid grid-cols-1 m-5"><section data-wip="pages/blog.vue" class="pages__blog--parent"><div class="pages-blog--parent--top justify-items-stretch sm:grid-cols-2 sm:grid-flow-row md:grid-flow-col-dense grid grid-cols-1 gap-4"><nav class="breadcrumb" data-v-ede238bc><ol class="list-none p-0 inline-flex" data-v-ede238bc><li class="flex items-center" data-v-ede238bc><a href="/blog" class="nuxt-link-active" data-v-ede238bc>blog</a></li><li class="flex items-center" data-v-ede238bc><a href="/blog/2010" class="nuxt-link-active" data-v-ede238bc>2010</a></li><li class="flex items-center" data-v-ede238bc><a href="/blog/2010/02" class="nuxt-link-active" data-v-ede238bc>02</a></li></ol></nav></div> <!----> <div class="pages-blog--parent--bottom"><div q=""><!----> <div><div class="pages__blog__year__month--parent"><div class="pages__blog__year__month__slug--item" data-v-79a168f2><div data-v-79a168f2><rb-notice-box variant="warn" role="alert" class="disposition-parent app-alert-box my-4" data-v-79a168f2 data-v-79a168f2><!----> <!----> <div class="nuxt-content" data-v-79a168f2></div></rb-notice-box></div> <div class="document document--item z-30" data-v-79a168f2><div data-wip="pages/blog/_year/_month/_slug.vue" class="title page-title lg:pr-64 mb-4 font-serif text-2xl italic" data-v-79a168f2><h1 data-v-79a168f2>Script bash pour transférer une base de donnée <abbr lang="en" title="MySQL a Structured Query Language product now owned by Oracle">MySQL</abbr> d’un serveur à l’autre</h1></div> <div class="mt-0 mb-5 font-serif text-sm italic" data-v-79a168f2><time datetime="2010-02-09" data-v-79a168f2>
        mardi 9 février 2010
      </time> <a href="https://renoirboulanger.com/blog/2010/02/script-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre/" lang="en" target="_blank" title="Canonical link, the URL it is meant to replace" class="canonical-link hidden" data-v-79a168f2>
        Canonical
      </a></div> <div class="taxonomy mt-0 mb-5 taxonomy-hoverizable" data-v-79a168f2><strong id="tags__396" class="taxonomy-label">
    Tags
  </strong> <ul aria-labelled-by="tags__396" class="taxonomy-items"><li class="px-2 py-1 mb-3 mr-3 is-hoverizable"><nuxtlink to="/blog/tag/linux" class="no-underline">linux</nuxtlink></li><li class="px-2 py-1 mb-3 mr-3 is-hoverizable"><nuxtlink to="/blog/tag/bash" class="no-underline">bash</nuxtlink></li><li class="px-2 py-1 mb-3 mr-3 is-hoverizable"><nuxtlink to="/blog/tag/script" class="no-underline">script</nuxtlink></li><li class="px-2 py-1 mb-3 mr-3 is-hoverizable"><nuxtlink to="/blog/tag/sql" class="no-underline"><abbr lang="en" title="Structured Query Language for querying database">sql</abbr></nuxtlink></li> <li class="category px-2 py-1 mb-3 mr-3 is-hoverizable"><a href="/blog/category/projects" class="no-underline">📁 projects</a></li></ul></div> <div class="body mt-10" data-v-79a168f2><!----> <div class="nuxt-content" data-v-79a168f2 data-v-79a168f2><p data-v-79a168f2 data-v-79a168f2>Il m’est arrivé récemment de devoir transférer plusieurs dizaines de sites web
d’un serveur à l’autre manuellement.</p>
<p data-v-79a168f2 data-v-79a168f2>Dans ce billet j’expliquerai le processus que j’ai utilisé pour en finir par
produire un script bash qui pourrait vous être utile.</p>
<h3 id="à-propos-du-projet" data-v-79a168f2 data-v-79a168f2><a href="#%C3%A0-propos-du-projet" aria-hidden="true" tabindex="-1" data-v-79a168f2 data-v-79a168f2><span class="icon icon-link" data-v-79a168f2 data-v-79a168f2></span></a>à propos du projet</h3>
<p data-v-79a168f2 data-v-79a168f2>Considérant que certains sites avaient plus d’une base de données il était hors
de question de faire a bras les lignes <em data-v-79a168f2 data-v-79a168f2>mysqldump</em>, <em data-v-79a168f2 data-v-79a168f2>ssh</em> (en fait le transfert
se fait en compressant le fichier et le copiant via une redirection gzip avec
cat), <em data-v-79a168f2 data-v-79a168f2>mysql</em> pour, en ordre, dumper la base de données, la transférer, et la
restaurer.... sans oublier les <em data-v-79a168f2 data-v-79a168f2>CREATE users</em> pour chaque.</p>
<p data-v-79a168f2 data-v-79a168f2>Je me suis dit: <em data-v-79a168f2 data-v-79a168f2>faisons-en un script</em>!</p>
<h3 id="les-prérequis" data-v-79a168f2 data-v-79a168f2><a href="#les-pr%C3%A9requis" aria-hidden="true" tabindex="-1" data-v-79a168f2 data-v-79a168f2><span class="icon icon-link" data-v-79a168f2 data-v-79a168f2></span></a>Les prérequis</h3>
<p data-v-79a168f2 data-v-79a168f2>Nous voulions...</p>
<ul data-v-79a168f2 data-v-79a168f2>
<li data-v-79a168f2 data-v-79a168f2>Faciliter le travail car on savait qu’il faudrait souvent transférer, plus
d’une fois, chacune des bases de données; Car nous devions faire fonctionner
le site sur le nouveau serveur <em data-v-79a168f2 data-v-79a168f2>avant</em> de transférer les DNS.</li>
<li data-v-79a168f2 data-v-79a168f2>Entrer une commande <em data-v-79a168f2 data-v-79a168f2>minimale</em> et en conserver les configurations;</li>
<li data-v-79a168f2 data-v-79a168f2>Que le <em data-v-79a168f2 data-v-79a168f2>nouveau</em> serveur réalise la tâche a lui-seul, sans prérequis sur le
serveur distant;</li>
<li data-v-79a168f2 data-v-79a168f2>Utiliser les commandes minimales et pouvoir réutiliser le scripts dans ma
propre librairie de script bash;</li>
<li data-v-79a168f2 data-v-79a168f2>Éviter de répéter, parceque c’est «<em data-v-79a168f2 data-v-79a168f2>con</em>» ;)</li>
</ul>
<h3 id="ce-que-le-script-fait" data-v-79a168f2 data-v-79a168f2><a href="#ce-que-le-script-fait" aria-hidden="true" tabindex="-1" data-v-79a168f2 data-v-79a168f2><span class="icon icon-link" data-v-79a168f2 data-v-79a168f2></span></a>Ce que le script fait</h3>
<h4 id="1-transférer-la-base-de-donnée" data-v-79a168f2 data-v-79a168f2><a href="#1-transf%C3%A9rer-la-base-de-donn%C3%A9e" aria-hidden="true" tabindex="-1" data-v-79a168f2 data-v-79a168f2><span class="icon icon-link" data-v-79a168f2 data-v-79a168f2></span></a>1. <em data-v-79a168f2 data-v-79a168f2>Transférer</em> la base de donnée</h4>
<div class="nuxt-content-highlight" data-v-79a168f2 data-v-79a168f2><pre class="line-numbers language-text" data-v-79a168f2 data-v-79a168f2><code data-v-79a168f2 data-v-79a168f2>$ migratemysql transfer
</code></pre></div>
<ol data-v-79a168f2 data-v-79a168f2>
<li data-v-79a168f2 data-v-79a168f2>Lire le fichier de configuration *migratemysql.conf * dans le dossier
courrant (ou en créer un)</li>
<li data-v-79a168f2 data-v-79a168f2>Se connecter en SSH</li>
<li data-v-79a168f2 data-v-79a168f2>Lancer <code data-v-79a168f2 data-v-79a168f2>mysqldump</code> en conservant le <code data-v-79a168f2 data-v-79a168f2>tmp/</code> paramétrable (éviter de remplir le
disque)</li>
<li data-v-79a168f2 data-v-79a168f2>Compresser le fichier <code data-v-79a168f2 data-v-79a168f2>.sql</code> avec <em data-v-79a168f2 data-v-79a168f2>gzip</em> (<code data-v-79a168f2 data-v-79a168f2>.sql.gz</code>)</li>
<li data-v-79a168f2 data-v-79a168f2>Transférer via <code data-v-79a168f2 data-v-79a168f2>scp</code></li>
</ol>
<h4 id="2-importer-dans-le-serveur-local" data-v-79a168f2 data-v-79a168f2><a href="#2-importer-dans-le-serveur-local" aria-hidden="true" tabindex="-1" data-v-79a168f2 data-v-79a168f2><span class="icon icon-link" data-v-79a168f2 data-v-79a168f2></span></a>2. Importer dans le serveur local</h4>
<div class="nuxt-content-highlight" data-v-79a168f2 data-v-79a168f2><pre class="line-numbers language-text" data-v-79a168f2 data-v-79a168f2><code data-v-79a168f2 data-v-79a168f2>$ migratemysql import
</code></pre></div>
<ol data-v-79a168f2 data-v-79a168f2>
<li data-v-79a168f2 data-v-79a168f2>Lire le fichier de configuration <em data-v-79a168f2 data-v-79a168f2>migratemysql.conf</em> dans le dossier actuel</li>
<li data-v-79a168f2 data-v-79a168f2>Véfirier si le <code data-v-79a168f2 data-v-79a168f2>.sql.gz</code> existe...</li>
<li data-v-79a168f2 data-v-79a168f2>oui: le décompresser</li>
<li data-v-79a168f2 data-v-79a168f2>si le <code data-v-79a168f2 data-v-79a168f2>.sql</code> existe déjà, écrire par dessus? (<strong data-v-79a168f2 data-v-79a168f2>attente d’une réponse a
l’usager</strong>)</li>
<li data-v-79a168f2 data-v-79a168f2>oui: réécrire, continuer...</li>
<li data-v-79a168f2 data-v-79a168f2>non: arrêter l’exécution</li>
<li data-v-79a168f2 data-v-79a168f2>non: continuer</li>
<li data-v-79a168f2 data-v-79a168f2>Véfifier si le <code data-v-79a168f2 data-v-79a168f2>.sql</code> existe...</li>
<li data-v-79a168f2 data-v-79a168f2>oui: continuer</li>
<li data-v-79a168f2 data-v-79a168f2>non: cesser l’exécution</li>
<li data-v-79a168f2 data-v-79a168f2>Se connecter au serveur précisé, si erreur... DIE!</li>
<li data-v-79a168f2 data-v-79a168f2>Véfifier si la base de donnée existe</li>
<li data-v-79a168f2 data-v-79a168f2>oui...</li>
<li data-v-79a168f2 data-v-79a168f2><em data-v-79a168f2 data-v-79a168f2>Retenir</em> de ne pas <em data-v-79a168f2 data-v-79a168f2>effacer</em> le compte de base de donnée (PRIVILEGES)
(variable "<code data-v-79a168f2 data-v-79a168f2>OVERRIDEUSERCREATION</code>")</li>
<li data-v-79a168f2 data-v-79a168f2>Effacer pour ré-insérer? (<strong data-v-79a168f2 data-v-79a168f2>attente d’une réponse a l’usager</strong>)</li>
<li data-v-79a168f2 data-v-79a168f2>Créer les commandes <code data-v-79a168f2 data-v-79a168f2>DROP</code> manipulé via l’option "<code data-v-79a168f2 data-v-79a168f2>ALT_PURGE</code>"</li>
<li data-v-79a168f2 data-v-79a168f2>oui: générer le script, puis <em data-v-79a168f2 data-v-79a168f2>continuer</em></li>
<li data-v-79a168f2 data-v-79a168f2>non: <em data-v-79a168f2 data-v-79a168f2>continuer</em> (utile si le fichier SQL a les commandes de <code data-v-79a168f2 data-v-79a168f2>DROP</code></li>
<li data-v-79a168f2 data-v-79a168f2>non: <em data-v-79a168f2 data-v-79a168f2>continuer</em>...</li>
<li data-v-79a168f2 data-v-79a168f2>Vérifier si l’option "<code data-v-79a168f2 data-v-79a168f2>OVERRIDEUSERCREATION</code>" existe, ne pas faire) Créer
les PRIVILEGES spécifique pour la table a créer</li>
<li data-v-79a168f2 data-v-79a168f2>Exécuter le <code data-v-79a168f2 data-v-79a168f2>.sql</code></li>
<li data-v-79a168f2 data-v-79a168f2>Afficher a l’écran un morceau de code PHP pour le fichier de configuration
sous le format spécifique à WordPress</li>
</ol>
<h3 id="le-script" data-v-79a168f2 data-v-79a168f2><a href="#le-script" aria-hidden="true" tabindex="-1" data-v-79a168f2 data-v-79a168f2><span class="icon icon-link" data-v-79a168f2 data-v-79a168f2></span></a>Le script</h3>
<p data-v-79a168f2 data-v-79a168f2><strong data-v-79a168f2 data-v-79a168f2>Version disponible sous GitHub gist</strong></p>
<p data-v-79a168f2 data-v-79a168f2>J'ai crée une copie dans un <a href="https://gist.github.com/renoirb/5770703" rel="nofollow noopener noreferrer" target="_blank" data-v-79a168f2 data-v-79a168f2>gist github pour partager le script</a>.</p>

<div class="code-block active" data-v-172c3de6 data-v-79a168f2>
<div class="nuxt-content-highlight" data-v-172c3de6 data-v-79a168f2><pre class="line-numbers language-bash" data-v-172c3de6 data-v-79a168f2><code data-v-172c3de6 data-v-79a168f2><span class="token shebang important" data-v-172c3de6 data-v-79a168f2>#!/bin/bash</span>

<span class="token comment" data-v-172c3de6 data-v-79a168f2># ////////////////  Some config  //////////////</span>
<span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>TMPDIR</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"/tmp/"</span>
<span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>mysql</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span><span class="token function" data-v-172c3de6 data-v-79a168f2>which</span> mysql<span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>
<span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>mysqldump</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span><span class="token function" data-v-172c3de6 data-v-79a168f2>which</span> mysqldump<span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>

<span class="token comment" data-v-172c3de6 data-v-79a168f2>#</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    MigrateMySQL v 1.0</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    by Etienne Lachance and Renoir Boulanger</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    https://renoirboulanger.com/projets/</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    This program is free software: you can redistribute it and/or modify</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    it under the terms of the GNU General Public License as published by</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    the Free Software Foundation, either version 3 of the License, or</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    (at your option) any later version.</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    This program is distributed in the hope that it will be useful,</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    GNU General Public License for more details.</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    You should have received a copy of the GNU General Public License</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/>.</span>
<span class="token comment" data-v-172c3de6 data-v-79a168f2>#</span>

<span class="token comment" data-v-172c3de6 data-v-79a168f2># ////////////////  Actual script  //////////////</span>
<span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>PN</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span><span class="token function" data-v-172c3de6 data-v-79a168f2>basename</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$0</span>"</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>          <span class="token comment" data-v-172c3de6 data-v-79a168f2># program name</span>
<span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>VER</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>'1.0'</span>

<span class="token function-name function" data-v-172c3de6 data-v-79a168f2>usage</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>(</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>)</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span>
<span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"
USAGE INFORMATION

  NAME
       <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>

  DESCRIPTION
       Tool to help transfer a MySQL database from a remote site using ssh and
       mysqldump. You only need one copy of this script, on the server you want
       to import the databases to.

  SYNOPSIS
       <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span> transfer
       <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span> import

  OPTIONS
       transfer     transfer database dump file from remote host to localhost
       import       import database dump to database

  FILES
       <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>.conf
                    Config file saved in the directory that you invoked <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>

  LICENCE
       MigrateMySQL is a software provided under the GNU GENERAL PUBLIC LICENCE
       Copyright (C) 2010 by Etienne Lachance and Renoir Boulanger
       This program comes with ABSOLUTELY NO WARRANTY; for details, see source code.
       This is free software, and you are welcome to redistribute it
       under certain conditions;

                                     https://renoirboulanger.com/
"</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>exit</span> <span class="token number" data-v-172c3de6 data-v-79a168f2>1</span>
<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>

<span class="token function-name function" data-v-172c3de6 data-v-79a168f2>dump_config_file</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>(</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>)</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span>
<span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"#
# Generated by <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span> version <span class="token variable" data-v-172c3de6 data-v-79a168f2>$VER</span> on <span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span><span class="token function" data-v-172c3de6 data-v-79a168f2>date</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>
#"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${<span class="token environment constant" data-v-172c3de6 data-v-79a168f2>PWD</span>}</span>/<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>.conf
<span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'SSH_SOURCE="hostname"
SSH_PORT=
SSH_USER="username"
#SSH_PASS=""
ALT_PURGE=""                      # En cas ou le mysqldump utilise a pas de DROP TABLE (default: false)
DB_SOURCE_DBNAME=""
DB_SOURCE_USER=""
DB_SOURCE_PASS=""
DB_SOURCE_HOST=""                 # e.g. mysql4.local    (defaults: localhost)
DB_DEST_DBNAME=$DB_SOURCE_DBNAME
DB_DEST_USER="root"
DB_DEST_PASS="root"
DB_DEST_HOST=""                   # e.g. mysql4.local    (defaults: localhost)
DB_DEST_USERHOST=""               # e.g. webservers-%    (defaults: localhost)
DB_DEST_USERNAME="root"           # site username
DB_DEST_USERPW="root"             # site password
#OPTS_KEEP_COMPRESSED=""          # 1 or 0               (1=true) (not yet implemented)
OPTS_COMPRESSION_PROG="gzip"        # bzip2,gzip,zip       (only gzip is implemented)
'</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${<span class="token environment constant" data-v-172c3de6 data-v-79a168f2>PWD</span>}</span>/<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>.conf
<span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Config file <span class="token variable" data-v-172c3de6 data-v-79a168f2>${<span class="token environment constant" data-v-172c3de6 data-v-79a168f2>PWD</span>}</span>/<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>.conf created, modify it, then run <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span> again."</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>

<span class="token keyword" data-v-172c3de6 data-v-79a168f2>function</span> <span class="token function-name function" data-v-172c3de6 data-v-79a168f2>dump_prepare_sql</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"-- Generated by <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span> version <span class="token variable" data-v-172c3de6 data-v-79a168f2>$VER</span> on <span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span><span class="token function" data-v-172c3de6 data-v-79a168f2>date</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span>/<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp
<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>

<span class="token keyword" data-v-172c3de6 data-v-79a168f2>function</span> <span class="token function-name function" data-v-172c3de6 data-v-79a168f2>dump_prepare_createdb</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"CREATE DATABASE <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>;"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp
<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>

<span class="token keyword" data-v-172c3de6 data-v-79a168f2>function</span> <span class="token function-name function" data-v-172c3de6 data-v-79a168f2>dump_prepare_addpriv</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"CREATE USER '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERNAME</span>'@'<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERHOST</span>' IDENTIFIED BY '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERPW</span>';"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"GRANT USAGE ON * . * TO '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERNAME</span>'@'<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERHOST</span>' IDENTIFIED BY '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERPW</span>';"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"GRANT ALL PRIVILEGES ON \<span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span>$DB_DEST_DBNAME<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>\</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span> . * TO '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERNAME</span>'@'<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERHOST</span>';"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"FLUSH PRIVILEGES;"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp
<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>

<span class="token keyword" data-v-172c3de6 data-v-79a168f2>function</span> <span class="token function-name function" data-v-172c3de6 data-v-79a168f2>dump_stdout_tellpasswords</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"
Here is the application database credentials.

 --------------------------------------------------------
|         for WordPress, copy that code block            |
 --------------------------------------------------------
define('DB_SERVER',   '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_HOST</span>');
define('DB_NAME',     '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>');
define('DB_LOGIN',    '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERNAME</span>');
define('DB_PASSWORD', '<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERPW</span>');
 --------------------------------------------------------
"</span>
<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>
<span class="token keyword" data-v-172c3de6 data-v-79a168f2>function</span> <span class="token function-name function" data-v-172c3de6 data-v-79a168f2>fatal</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span> <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"FAILED: <span class="token variable" data-v-172c3de6 data-v-79a168f2>$1</span>"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>exit</span> <span class="token number" data-v-172c3de6 data-v-79a168f2>1</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>

<span class="token keyword" data-v-172c3de6 data-v-79a168f2>function</span> <span class="token function-name function" data-v-172c3de6 data-v-79a168f2>purge_tables</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>{</span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Will purge tables from <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span> ... "</span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"-- Generated by <span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span> version <span class="token variable" data-v-172c3de6 data-v-79a168f2>$VER</span> on <span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span><span class="token function" data-v-172c3de6 data-v-79a168f2>date</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.purge.tmp

  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'Generating tmp file ... '</span>
  <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DROPTABLES</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span>$mysql <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-u</span> $DB_DEST_USER <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-h</span> $DB_DEST_HOST -p<span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_PASS</span>"</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-Bse</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'show tables'</span> $DB_DEST_DBNAME <span class="token operator" data-v-172c3de6 data-v-79a168f2>|</span><span class="token function" data-v-172c3de6 data-v-79a168f2>sed</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'s/^/drop table /g'</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>|</span> <span class="token function" data-v-172c3de6 data-v-79a168f2>sed</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'s/$/;/g'</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DROPTABLES</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.purge.tmp

  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'Executing ... '</span>
  <span class="token function" data-v-172c3de6 data-v-79a168f2>cat</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.purge.tmp <span class="token operator" data-v-172c3de6 data-v-79a168f2>|</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$mysql</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-h</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_HOST</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-u</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USER</span> -p<span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_PASS</span>"</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>

  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'Deleting tmp file ... '</span>
  <span class="token function" data-v-172c3de6 data-v-79a168f2>rm</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-rf</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.purge.tmp
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>
<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>}</span>

<span class="token comment" data-v-172c3de6 data-v-79a168f2># ///////////////////// ACTUAL EXECUTION //////////////////////</span>
<span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>></span><span class="token file-descriptor important" data-v-172c3de6 data-v-79a168f2>&2</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span> - Migrate MySQL database, <span class="token variable" data-v-172c3de6 data-v-79a168f2>$VER</span> by Evocatio Solutions Technologies  http://evocatio.com/"</span>
<span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>!</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$1</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span>
  <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>!</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-f</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${<span class="token environment constant" data-v-172c3de6 data-v-79a168f2>PWD</span>}</span>/<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>.conf <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * You need to have a configuration file"</span>
    dump_config_file
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>exit</span> <span class="token number" data-v-172c3de6 data-v-79a168f2>1</span>
  <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Reading configuration file <span class="token variable" data-v-172c3de6 data-v-79a168f2>${<span class="token environment constant" data-v-172c3de6 data-v-79a168f2>PWD</span>}</span>/<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>.conf ... "</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>source</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${<span class="token environment constant" data-v-172c3de6 data-v-79a168f2>PWD</span>}</span>/<span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span>.conf
  <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>
<span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>

<span class="token keyword" data-v-172c3de6 data-v-79a168f2>case</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$1</span>"</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>in</span>
  transfer<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>)</span>             <span class="token comment" data-v-172c3de6 data-v-79a168f2># Initiate transfer</span>
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Checking if needed vars are set ... "</span>
        <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>""</span>
        <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$SSH_SOURCE</span>"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>""</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO SSH_SOURCE"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$SSH_USER</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO SSH_USER"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>!</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$SSH_PORT</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>SSH_PORT_STR</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"-p <span class="token variable" data-v-172c3de6 data-v-79a168f2>$SSH_PORT</span>"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO DB_SOURCE_DBNAME"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_USER</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO DB_SOURCE_USER"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_PASS</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO DB_SOURCE_PASS"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_HOST</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DB_SOURCE_HOST</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"localhost"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$OPTS_KEEP_COMPRESSED</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>OPTS_KEEP_COMPRESSED</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"1"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$OPTS_COMPRESSION_PROG</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>OPTS_COMPRESSION_PROG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"gzip"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>!</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> fatal <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span>"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>

      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Checking if remote database exist ... "</span>
        <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DB_EXIST</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token number" data-v-172c3de6 data-v-79a168f2>0</span>
        <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DBS</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span><span class="token function" data-v-172c3de6 data-v-79a168f2>ssh</span> $SSH_PORT_STR $SSH_USER@$SSH_SOURCE <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$mysql</span>  -h <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_HOST</span> -u <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_USER</span> -p<span class="token entity" title='\"' data-v-172c3de6 data-v-79a168f2>\"</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_PASS</span><span class="token entity" title='\"' data-v-172c3de6 data-v-79a168f2>\"</span> -Bse 'show databases'| egrep -v 'information_schema|<span class="token variable" data-v-172c3de6 data-v-79a168f2>$mysql</span>'"</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>for</span> <span class="token for-or-select variable" data-v-172c3de6 data-v-79a168f2>db</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>in</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DBS</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>do</span>
        <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$db</span>"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DB_EXIST</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token number" data-v-172c3de6 data-v-79a168f2>1</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>done</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_EXIST</span>"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"0"</span>  <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> fatal <span class="token string" data-v-172c3de6 data-v-79a168f2>"DB_SOURCE_DBNAME : <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span> does not exist"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>

      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Get remote database dump file ... "</span>
        <span class="token function" data-v-172c3de6 data-v-79a168f2>ssh</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$SSH_PORT_STR</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$SSH_USER</span>@<span class="token variable" data-v-172c3de6 data-v-79a168f2>$SSH_SOURCE</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$mysqldump</span> -u <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_USER</span> -p"</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_PASS</span><span class="token string" data-v-172c3de6 data-v-79a168f2>" --opt <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span> > <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql; gzip -f <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql; cat <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql.gz"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>></span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql.gz
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>

      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * The local database file is <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql.gz"</span>
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"Finished!"</span>
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>exit</span> <span class="token number" data-v-172c3de6 data-v-79a168f2>0</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>


  <span class="token function" data-v-172c3de6 data-v-79a168f2>import</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>)</span>                   <span class="token comment" data-v-172c3de6 data-v-79a168f2># Initiate import</span>
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Checking if needed vars are set ... "</span>
        <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>""</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO_DEST_DBNAME"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USER</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO_DEST_USER"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_PASS</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>ERROR_MSG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span> NO_DEST_PASS"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_HOST</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DB_DEST_HOST</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"localhost"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USERHOST</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DB_DEST_USERHOST</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"localhost"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$OPTS_COMPRESSION_PROG</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>OPTS_COMPRESSION_PROG</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"gzip"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>!</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> fatal <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$ERROR_MSG</span>"</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>

    <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-f</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql.gz <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span>
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Uncompressing the database dump (Only gzip is supported) ... "</span>
      gunzip <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql.gz
      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>
    <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>

    <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>!</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-f</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span>
      fatal <span class="token string" data-v-172c3de6 data-v-79a168f2>"You should have a database dump <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql"</span>
    <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>

    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Checking if the requested database exists ... "</span>
        <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DB_EXIST</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token number" data-v-172c3de6 data-v-79a168f2>0</span>
        <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DBS</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token variable" data-v-172c3de6 data-v-79a168f2><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span>$mysql <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-u</span> $DB_DEST_USER <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-h</span> $DB_DEST_HOST -p<span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_PASS</span>"</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-Bse</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'show databases'</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>|</span> <span class="token function" data-v-172c3de6 data-v-79a168f2>egrep</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-v</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>'information_schema|$mysql'</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>`</span></span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>for</span> <span class="token for-or-select variable" data-v-172c3de6 data-v-79a168f2>db</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>in</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DBS</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>do</span>
        <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$db</span>"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>"</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span> <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>DB_EXIST</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token number" data-v-172c3de6 data-v-79a168f2>1</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>done</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_EXIST</span>"</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"1"</span>  <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span>
        <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span> exists, overwrite? 'y/n': "</span>
        <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>read</span> DOWEPURGE

        <span class="token keyword" data-v-172c3de6 data-v-79a168f2>case</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DOWEPURGE</span>"</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>in</span>
            <span class="token string" data-v-172c3de6 data-v-79a168f2>'y'</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>)</span>
            <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token operator" data-v-172c3de6 data-v-79a168f2>!</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$ALT_PURGE</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span>
                            purge_tables
            <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>
            <span class="token assign-left variable" data-v-172c3de6 data-v-79a168f2>OVERRIDEUSERCREATION</span><span class="token operator" data-v-172c3de6 data-v-79a168f2>=</span><span class="token string" data-v-172c3de6 data-v-79a168f2>"true"</span>
            <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
            *<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>)</span>
              fatal <span class="token string" data-v-172c3de6 data-v-79a168f2>"DB_DEST_DBNAME : <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span> exists. And we did not understand the answer to purge DB."</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
              <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
        <span class="token keyword" data-v-172c3de6 data-v-79a168f2>esac</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>else</span>
          <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>
        <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Creating database ... "</span>
        dump_prepare_sql
        dump_prepare_createdb
        <span class="token function" data-v-172c3de6 data-v-79a168f2>cat</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp <span class="token operator" data-v-172c3de6 data-v-79a168f2>|</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$mysql</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-h</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_HOST</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-u</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USER</span> -p<span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_PASS</span>"</span>
        <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>
      <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>

    <span class="token keyword" data-v-172c3de6 data-v-79a168f2>if</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>[</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-z</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$OVERRIDEUSERCREATION</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>]</span> <span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span> <span class="token keyword" data-v-172c3de6 data-v-79a168f2>then</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Creating default user ... "</span>
      dump_prepare_sql
      dump_prepare_addpriv
      <span class="token function" data-v-172c3de6 data-v-79a168f2>cat</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>${TMPDIR}</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$PN</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>.</span><span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>.sql.tmp <span class="token operator" data-v-172c3de6 data-v-79a168f2>|</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$mysql</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-h</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_HOST</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-u</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USER</span> -p<span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_PASS</span>"</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>
    <span class="token keyword" data-v-172c3de6 data-v-79a168f2>fi</span>

    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-n</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>" * Restoring database ... "</span>
      <span class="token function" data-v-172c3de6 data-v-79a168f2>cat</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_SOURCE_DBNAME</span>.sql <span class="token operator" data-v-172c3de6 data-v-79a168f2>|</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$mysql</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-h</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_HOST</span> <span class="token parameter variable" data-v-172c3de6 data-v-79a168f2>-u</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_USER</span> -p<span class="token string" data-v-172c3de6 data-v-79a168f2>"<span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_PASS</span>"</span> <span class="token variable" data-v-172c3de6 data-v-79a168f2>$DB_DEST_DBNAME</span>
    <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"DONE"</span>

    dump_stdout_tellpasswords

      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>echo</span> <span class="token string" data-v-172c3de6 data-v-79a168f2>"Finished!"</span>

      <span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>exit</span> <span class="token number" data-v-172c3de6 data-v-79a168f2>0</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
  *<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>)</span>  usage<span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token builtin class-name" data-v-172c3de6 data-v-79a168f2>exit</span> <span class="token number" data-v-172c3de6 data-v-79a168f2>0</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span><span class="token punctuation" data-v-172c3de6 data-v-79a168f2>;</span>
<span class="token keyword" data-v-172c3de6 data-v-79a168f2>esac</span>
</code></pre></div>
</div>
</div> <div class="clearfix" data-v-79a168f2></div></div> <div class="text-md grid grid-cols-2 my-10" style="display:none" data-v-4d2003f9 data-v-79a168f2><div class="text-left" data-v-4d2003f9><a href="/blog/2010/02/realisation-dune-application-dechange-de-cadeau-avec-red-lagence" lang="fr-CA" class="hover:underline item-prev" data-v-4d2003f9>
      Réalisation d'une application d'échange de cadeau avec RED L'agence le «club échangiste» [2009]
    </a></div> <div class="text-right" data-v-4d2003f9><a href="/blog/2010/03/la-premiere-de-ignite-montreal" lang="fr-CA" class="hover:underline item-next" data-v-4d2003f9>
      La première de Ignite Montréal
    </a></div></div></div></div></div></div></div></div></section></div></main> <div timezone="America/New_York" class="app-footer--component disposition-parent w-full bottom" data-v-7116e49f><footer class="zone__sandwich__bottom container flex items-center justify-between p-10 mx-auto" style="position:relative" data-v-7116e49f><dl class="contact items-item disposition-item" data-v-7116e49f><dt class="mb-4 font-serif text-2xl" data-v-7116e49f><a href="/contact" class="underline" data-v-7116e49f>Contact</a></dt> <dd data-v-7116e49f>Fascinated By The Open Web Platform</dd> <dd aria-errormessage="why-fou-de-la-pouitte" data-v-7116e49f>
        Send your remarks using
        <em data-fou-de-la-pouitte title="Please type this manually" class="underline" data-v-7116e49f><span id="why-fou-de-la-pouitte" class="sr-only" data-v-7116e49f>
            An email address written using CSS, apologies for obfuscating
            this.
          </span></em></dd> <dd class="underline sr-only" data-v-7116e49f><a rel="me" href="https://mastodon.social/@renoirb" data-v-7116e49f>
          @renoirb@mastodon.social
        </a></dd> <dd class="underline sr-only" data-v-7116e49f><a rel="me" href="https://w3c.social/@renoirb" data-v-7116e49f>
          @renoirb@w3c.social
        </a></dd> <dd class="font-mono" data-v-7116e49f>v4.0.0-dev</dd> <span class="inline-flex" data-v-7116e49f><button aria-label="Color Mode" class="hover:text-primary-500 focus:outline-none transition duration-150 ease-in-out rounded-md"><!----> <!----></button></span></dl> <div class="items-item disposition-item" data-v-7116e49f><dl lang="fr-CA" class="see-also" data-v-7116e49f><dt data-v-7116e49f>Voir aussi…</dt> <dd data-v-7116e49f><a href="/ligne-editoriale" data-v-7116e49f> Ligne éditoriale </a></dd> <dd data-v-7116e49f><a href="/projects" data-v-7116e49f> Projets </a></dd> <dd data-v-7116e49f><a href="/glossary" lang="en" data-v-7116e49f> Glossary </a></dd> <dd data-v-7116e49f><a href="/code-review" lang="en" data-v-7116e49f>
            Code-Review notes
          </a></dd></dl></div></footer></div></div></div></div><script defer src="/site/_nuxt/static/1729800241/blog/2010/02/script-bash-pour-transferer-une-base-de-donnee-mysql-dun-serveur-a-lautre/state.js"></script><script src="/_nuxt/runtime.js" defer></script><script src="/_nuxt/pages/blog.js" defer></script><script src="/_nuxt/pages/blog/_year.js" defer></script><script src="/_nuxt/pages/blog/_year/_month.js" defer></script><script src="/_nuxt/pages/blog/_year/_month/_slug.js" defer></script><script src="/_nuxt/commons/app.js" defer></script><script src="/_nuxt/vendors/app.js" defer></script><script src="/_nuxt/app.js" defer></script><script data-n-head="ssr" type="module" vmid="load-esm-modules-separately-please" data-body="true" defer>
/**
 * #WIP-Mingle-CustomElements-From-ESM-Modules: Added on 2024-09-18 during migration.
 */
import { registerCustomElement } from 'https://renoirb.com/esm-modules/element-utils.mjs'
import NoticeBoxElement from 'https://renoirb.com/esm-modules/notice-box-element.mjs'
try {
  registerCustomElement(window, 'rb-notice-box', NoticeBoxElement)
} catch (e) {
  // #XXX FIX ME because this gets loaded
  console.log('Already loaded', e)
}
        </script>
  </body>
</html>
