<!doctype html>
<html data-n-head-ssr class="layout--default zone__sandwich light-mode" lang="en-CA" data-n-head="%7B%22class%22:%7B%22ssr%22:%5B%22layout--default%22,%22zone__sandwich%22,%22light-mode%22%5D%7D,%22lang%22:%7B%22ssr%22:%22en-CA%22%7D%7D">
  <head>
    <title>Creating and using Javascript events while combining events on two separates behaviors - Renoir Boulanger</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" property="og:image" content="https://secure.gravatar.com/avatar/cbf8c9036c204fe85e15155f9d70faec?s=400"><meta data-n-head="ssr" property="twitter:card" content="summary_large_image"><meta data-n-head="ssr" property="twitter:site" content="@renoirb"><meta data-n-head="ssr" data-hid="description-creating-and-us" name="description" content="Creating and using Javascript events while combining events"><base href="/site/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="alternate" type="application/rss+xml" title="Renoir Boulanger‚Äôs Page Updates RSS Feed" href="https://renoirboulanger.com/feed.xml"><link data-n-head="ssr" rel="alternate" type="application/feed+json" title="Renoir Boulanger‚Äôs Page Updates Feed" href="https://renoirboulanger.com/feed.json"><link rel="preload" href="/_nuxt/runtime.js" as="script"><link rel="preload" href="/_nuxt/commons/app.js" as="script"><link rel="preload" href="/_nuxt/vendors/app.css" as="style"><link rel="preload" href="/_nuxt/vendors/app.js" as="script"><link rel="preload" href="/_nuxt/app.css" as="style"><link rel="preload" href="/_nuxt/app.js" as="script"><link rel="preload" href="/_nuxt/pages/blog.css" as="style"><link rel="preload" href="/_nuxt/pages/blog.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_year.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_year/_month.js" as="script"><link rel="preload" href="/_nuxt/pages/blog/_year/_month/_slug.css" as="style"><link rel="preload" href="/_nuxt/pages/blog/_year/_month/_slug.js" as="script"><link rel="stylesheet" href="/_nuxt/vendors/app.css"><link rel="stylesheet" href="/_nuxt/app.css"><link rel="stylesheet" href="/_nuxt/pages/blog.css"><link rel="stylesheet" href="/_nuxt/pages/blog/_year/_month/_slug.css"><link rel="preload" href="/site/_nuxt/static/1729800241/blog/2013/03/creating-and-using-javascript-events-while-combining-events-on-two-separates-behaviors/state.js" as="script"><link rel="preload" href="/site/_nuxt/static/1729800241/blog/2013/03/creating-and-using-javascript-events-while-combining-events-on-two-separates-behaviors/payload.js" as="script">
  </head>
  <body>
    <script data-n-head="ssr" data-hid="nuxt-color-mode-script" data-pbody="true">!function (){"use strict";var e=window,t=document,s=t.documentElement,n=["dark","light"],a=function(e){for(var s=e+"=",n=t.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(s))return o.substring(s.length,o.length)}return null}("nuxt-color-mode")||"light",o="system"===a?i():a;function r(e){var t=e+"-mode";s.classList?s.classList.add(t):s.className+=" "+t}function c(t){return e.matchMedia("(prefers-color-scheme"+t+")")}function i(){if(e.matchMedia&&"not all"!==c("").media)for(var t of n)if(c(":"+t).matches)return t;return"light"}r(o),e["__NUXT_COLOR_MODE__"]={preference:a,value:o,getColorScheme:i,addClass:r,removeClass:function(e){var t=e+"-mode";s.classList?s.classList.remove(t):s.className=s.className.replace(new RegExp(t,"g"),"")}}}();
</script><div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="layouts--default"><!----> <nav class="app-side-bar--component fixed z-40 w-full top z-50" data-v-cf57f860 data-v-2b2f37b3><div class="zone__sandwich__top container flex items-center justify-between py-4 mx-auto" style="position:relative" data-v-cf57f860><!----> <div class="app-side-bar__identity md:px-5 flex items-center" data-v-cf57f860><button aria-label="Open Menu" class="md:hidden ml-5 mr-2" data-v-cf57f860><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" class="w-8 h-8" data-v-cf57f860><path d="M4 6h16M4 12h16M4 18h16" data-v-cf57f860></path></svg></button> <a href="/" data-wip="components/global/AppSideBar.vue" class="identity__text font-semibold nuxt-link-active" data-v-cf57f860>
        Renoir Boulanger
      </a></div> <div class="app-side-bar__nav flex items-center" data-v-cf57f860><div class="md:flex md:justify-between md:bg-transparent text-is-italicized hidden" data-v-cf57f860><a href="/blog" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded nuxt-link-active" data-v-2b2f37b3>
      Blog
    </a><a href="/projects" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded" data-v-2b2f37b3>
      Projects
    </a><a href="/resume/as-code" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded" data-v-2b2f37b3>
      Resume
    </a><a href="/hello" class="hover:opacity-100 opacity-80 hover:underline flex items-center p-3 px-4 py-2 mr-2 font-medium text-center rounded" data-v-2b2f37b3>
      About
    </a></div></div></div> <aside class="md:invisible app-side-bar__aside fixed top-0 left-0 visible w-64 h-full overflow-auto transition-all duration-500 ease-in-out transform -translate-x-full" data-v-cf57f860><div class="app-side-bar__identity flex items-center w-full h-16 p-4 border-b" data-v-cf57f860><a href="/" class="identity__text nuxt-link-active" data-v-cf57f860>Renoir Boulanger</a></div> <div data-v-cf57f860><a href="/blog" class="hover:bg-teal-500 hover:text-white flex items-center p-4 nuxt-link-active" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          Blog
        </span></a><a href="/projects" class="hover:bg-teal-500 hover:text-white flex items-center p-4" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          Projects
        </span></a><a href="/resume/as-code" class="hover:bg-teal-500 hover:text-white flex items-center p-4" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          Resume
        </span></a><a href="/hello" class="hover:bg-teal-500 hover:text-white flex items-center p-4" data-v-cf57f860><span class="mr-2" data-v-cf57f860>
          About
        </span></a></div></aside></nav> <div class="fixed inset-0 z-40 transition-opacity" style="display:none"><div class="absolute inset-0 bg-black opacity-75"></div></div> <main class="zone__sandwich__meat middle container z-40 mx-auto"><div data-wip="layout/default.vue" class="md:m-10 grid grid-cols-1 m-5"><section data-wip="pages/blog.vue" class="pages__blog--parent"><div class="pages-blog--parent--top justify-items-stretch sm:grid-cols-2 sm:grid-flow-row md:grid-flow-col-dense grid grid-cols-1 gap-4"><nav class="breadcrumb" data-v-ede238bc><ol class="list-none p-0 inline-flex" data-v-ede238bc><li class="flex items-center" data-v-ede238bc><a href="/blog" class="nuxt-link-active" data-v-ede238bc>blog</a></li><li class="flex items-center" data-v-ede238bc><a href="/blog/2013" class="nuxt-link-active" data-v-ede238bc>2013</a></li><li class="flex items-center" data-v-ede238bc><a href="/blog/2013/03" class="nuxt-link-active" data-v-ede238bc>03</a></li></ol></nav></div> <!----> <div class="pages-blog--parent--bottom"><div q=""><!----> <div><div class="pages__blog__year__month--parent"><div class="pages__blog__year__month__slug--item" data-v-79a168f2><div data-v-79a168f2><rb-notice-box variant="warn" role="alert" class="disposition-parent app-alert-box my-4" data-v-79a168f2 data-v-79a168f2><!----> <!----> <div class="nuxt-content" data-v-79a168f2></div></rb-notice-box></div> <div class="document document--item z-30" data-v-79a168f2><div data-wip="pages/blog/_year/_month/_slug.vue" class="title page-title lg:pr-64 mb-4 font-serif text-2xl italic" data-v-79a168f2><h1 data-v-79a168f2>Creating and using Javascript events while combining events on two separates behaviors</h1></div> <div class="mt-0 mb-5 font-serif text-sm italic" data-v-79a168f2><time datetime="2013-03-29" data-v-79a168f2>
        Friday, March 29, 2013
      </time> <a href="https://renoirboulanger.com/blog/2013/03/creating-and-using-javascript-events-while-combining-events-on-two-separates-behaviors/" lang="en" target="_blank" title="Canonical link, the URL it is meant to replace" class="canonical-link hidden" data-v-79a168f2>
        Canonical
      </a></div> <div class="taxonomy mt-0 mb-5 taxonomy-hoverizable" data-v-79a168f2><strong id="tags__273" class="taxonomy-label">
    Tags
  </strong> <ul aria-labelled-by="tags__273" class="taxonomy-items"><li class="px-2 py-1 mb-3 mr-3 is-hoverizable"><nuxtlink to="/blog/tag/integration" class="no-underline">integration</nuxtlink></li><li class="px-2 py-1 mb-3 mr-3 is-hoverizable"><nuxtlink to="/blog/tag/javascript" class="no-underline">javascript</nuxtlink></li><li class="px-2 py-1 mb-3 mr-3 is-hoverizable"><nuxtlink to="/blog/tag/techniques" class="no-underline">techniques</nuxtlink></li> <li class="category px-2 py-1 mb-3 mr-3 is-hoverizable"><a href="/blog/category/programmation" class="no-underline">üìÅ programmation</a></li></ul></div> <div class="body mt-10" data-v-79a168f2><!----> <div class="nuxt-content" data-v-79a168f2 data-v-79a168f2><p data-v-79a168f2 data-v-79a168f2>I discovered something that chocked me: Did you know that the ‚Äòclick‚Äô event is only a string and you can create any event name you may want? Here is an experimentation example.</p>
<p data-v-79a168f2 data-v-79a168f2>During web development, it often happens you want to attach events handler on something in your page. A common usage could be you want to flip a plus sign to a minus sign when you click on a button.</p>
<pre data-v-79a168f2 data-v-79a168f2><code data-v-79a168f2 data-v-79a168f2>&lt;a href="/some/url/324" class="flip-icon" data-target="#generated-324">&lt;i class="icon-plus">&lt;/i>&lt;/a></code></pre>
<p data-v-79a168f2 data-v-79a168f2>Later in a script you may be compelled to do something similar to the following (assuming you are using jQuery):</p>
<pre data-v-79a168f2 data-v-79a168f2>$(document).ready(function(){
// Rest of the document in document.ready
// DO NOT USE AS-IS, SEE LAST EXAMPLE

    $('.flip-icon.).click(function(event){
        event.preventDefault();
        var clicked = $(this);
        var flipElement = clicked.find('i');
        if (flipElement.hasClass('icon-plus')) {
            flipElement.removeClass('icon-plus').addClass('icon-minus');
        } else {
            flipElement.removeClass('icon-minus').addClass('icon-plus');
        }
    });
});</pre>
<p data-v-79a168f2 data-v-79a168f2>But what happens if you want to add other events such as, for example, <em data-v-79a168f2 data-v-79a168f2>activating an accordion</em>. You may end up with duplicating events and get some collisions.</p>
<p data-v-79a168f2 data-v-79a168f2><em data-v-79a168f2 data-v-79a168f2>Did you know that the ‚Äòclick‚Äô event is only a string and you can create any event name you may want?</em></p>
<p data-v-79a168f2 data-v-79a168f2>To describe what I am refering to, I have a add an other behavior that will also, in part, require the previous example.</p>
<p data-v-79a168f2 data-v-79a168f2>Imagine we have an accordion managed already grabbing the element‚Äôs <code data-v-79a168f2 data-v-79a168f2>a[data-target]</code> click event handler.</p>
<pre data-v-79a168f2 data-v-79a168f2>$(document).ready(function(){
// Rest of the document in document.ready
// DO NOT USE AS-IS, SEE LAST EXAMPLE

    $('a[data-target]').click(function(event){
        // do the accordion stuff
    });
});</pre>
<p data-v-79a168f2 data-v-79a168f2>But, what if for some reason, our page has to reload some sections and our event handler managing the <code data-v-79a168f2 data-v-79a168f2>a[data-target]</code> click gets lost</p>
<p data-v-79a168f2 data-v-79a168f2>Instead, of creating a click specific event handler (what if we want to change) and be potentially lost with the element to attach event onto.</p>
<p data-v-79a168f2 data-v-79a168f2>You can use <a href="http://api.jquery.com/on/" data-v-79a168f2 data-v-79a168f2>jQuery‚Äôs <code data-v-79a168f2 data-v-79a168f2>on</code> method</a> and attach an event to the <code data-v-79a168f2 data-v-79a168f2>&lt;body></code>, a safe element that every document has.</p>
<p data-v-79a168f2 data-v-79a168f2>Things to note about the <code data-v-79a168f2 data-v-79a168f2>on</code> method:</p>
<ul data-v-79a168f2 data-v-79a168f2>
	<li data-v-79a168f2 data-v-79a168f2>First parameter is an event name, can be ANYTHING (yes, you read it), space separated</li>
	<li data-v-79a168f2 data-v-79a168f2>Second element is on what to listen, can be null</li>
	<li data-v-79a168f2 data-v-79a168f2>a <code data-v-79a168f2 data-v-79a168f2>Function</code> object to handle the event</li>
</ul>
Also, there is nice thing about bubbling.
<p data-v-79a168f2 data-v-79a168f2>When an event happens, the event crawls the DOM up to the body (called ‚Äòcatch‚Äô) then gets back to the triggerer element (called ‚Äòbubbling‚Äô) and firing in that order all event handlers.</p>
<p data-v-79a168f2 data-v-79a168f2>Knowing all of this now, instead of attaching a single event type handler to a specific element, let‚Äôs take advantage of our new knowledge.</p>
<pre data-v-79a168f2 data-v-79a168f2>'use strict';
$(document).ready(function(){
// Rest of your document

    // Look at the 'flip-my-icon-event', we just made-up that one. See below.
    $('body').on('click flip-my-icon-event', '.flip-icon', function(){
/* Look here     *************************                                       */
        // Let's put it also in a self-executing anonymous, to isolate scope
        (function(triggered){

            // Same as earlier.
            var clicked = $(this);
            var flipElement = clicked.find('i');
            if (flipElement.hasClass('icon-plus')) {
                flipElement.removeClass('icon-plus').addClass('icon-minus');
            } else {
                flipElement.removeClass('icon-minus').addClass('icon-plus');
            }
            // End same as earlier

        })($(this)); // this fires the self-executing.
    });

    $('body').on('click', 'a[data-target]', function(event){
        event.preventDefault();

        // do the accordion stuff
        var collapsible = $($(this).attr('data-target'));
        if (typeof collapsible.attr('data-collapsible') === 'undefined')  {
            collapsible
                .collapse()
                .attr('data-collapsible', 'applied')
                .on('show', function(){
                    jQuery(this).parent().removeClass('is-hidden');
                })
                .on('hide', function(){
                    jQuery(this).parent().addClass('is-hidden');
                });
        // End do the accordion stuff

        jQuery(this).trigger('click').trigger('flip-my-icon-event');
/* Look here                         *******************************        */
        }
    });
});</pre>
<p data-v-79a168f2 data-v-79a168f2>The following works, because of the following trigger html pattern, as from the begining:</p>
<pre data-v-79a168f2 data-v-79a168f2><code data-v-79a168f2 data-v-79a168f2>&lt;a href="/some/url/324" class="flip-icon" data-target="#generated-324">&lt;i class="icon-plus">&lt;/i>&lt;/a></code></pre>
<p data-v-79a168f2 data-v-79a168f2>And of the following:</p>
<ul data-v-79a168f2 data-v-79a168f2>
	<li data-v-79a168f2 data-v-79a168f2>We have an icon for <code data-v-79a168f2 data-v-79a168f2>.icon-plus</code> and <code data-v-79a168f2 data-v-79a168f2>.icon-minus</code> class names</li>
	<li data-v-79a168f2 data-v-79a168f2>The <code data-v-79a168f2 data-v-79a168f2>a[data-target]</code> attribute has ALSO a <code data-v-79a168f2 data-v-79a168f2>.flip-icon</code> class name</li>
	<li data-v-79a168f2 data-v-79a168f2>The <code data-v-79a168f2 data-v-79a168f2>a[data-target]</code> triggers our made-up <code data-v-79a168f2 data-v-79a168f2>flip-my-icon-event</code> event to an element that also matches (see the two ‚Äòlook here‚Äô comments)</li>
</ul>
<em data-v-79a168f2 data-v-79a168f2>References</em>
<ul data-v-79a168f2 data-v-79a168f2>
	<li data-v-79a168f2 data-v-79a168f2><a href="https://webplatform.github.io/docs/tutorials/events_in_javascript" data-v-79a168f2 data-v-79a168f2><strong data-v-79a168f2 data-v-79a168f2>WPD</strong> Events in Javascript (WebPlatform.org)</a></li>
	<li data-v-79a168f2 data-v-79a168f2><a href="https://github.com/jquery/jquery/blob/master/src/event.js#L206" data-v-79a168f2 data-v-79a168f2>jQuery <code data-v-79a168f2 data-v-79a168f2>trigger</code> method</a> from the jQuery source</li>
	<li data-v-79a168f2 data-v-79a168f2><a href="https://github.com/jquery/jquery/blob/master/src/event.js#L715" data-v-79a168f2 data-v-79a168f2>jQuery <code data-v-79a168f2 data-v-79a168f2>on</code> method</a> from the jQuery source</li>
	<li data-v-79a168f2 data-v-79a168f2><a href="http://api.jquery.com/on/" data-v-79a168f2 data-v-79a168f2>jQuery documentation <code data-v-79a168f2 data-v-79a168f2>on</code> method</a> * <strong data-v-79a168f2 data-v-79a168f2>Note</strong> direct events handlers such as <code data-v-79a168f2 data-v-79a168f2>live</code>, or <code data-v-79a168f2 data-v-79a168f2>delegate</code> are considered deprecated (as of jQuery 1.7) <a href="http://api.jquery.com/delegate/" data-v-79a168f2 data-v-79a168f2>see delegate API</a> and <a href="http://api.jquery.com/live/" data-v-79a168f2 data-v-79a168f2>live API</a> notes.</li>
</ul></div> <div class="clearfix" data-v-79a168f2></div></div> <div class="text-md grid grid-cols-2 my-10" style="display:none" data-v-4d2003f9 data-v-79a168f2><div class="text-left" data-v-4d2003f9><a href="/blog/2013/02/jai-decide-darreter-de-participer-au-conseil-dadministration-du-w3qc" lang="fr-CA" class="hover:underline item-prev" data-v-4d2003f9>
      J'ai d√©cid√© d'arr√™ter de participer au Conseil d'administration du W3Qc
    </a></div> <div class="text-right" data-v-4d2003f9><a href="/blog/2013/04/enfin-jai-refait-mon-site" lang="fr-CA" class="hover:underline item-next" data-v-4d2003f9>
      Enfin! J'ai refait mon site
    </a></div></div></div></div></div></div></div></div></section></div></main> <div timezone="America/New_York" class="app-footer--component disposition-parent w-full bottom" data-v-7116e49f><footer class="zone__sandwich__bottom container flex items-center justify-between p-10 mx-auto" style="position:relative" data-v-7116e49f><dl class="contact items-item disposition-item" data-v-7116e49f><dt class="mb-4 font-serif text-2xl" data-v-7116e49f><a href="/contact" class="underline" data-v-7116e49f>Contact</a></dt> <dd data-v-7116e49f>Fascinated By The Open Web Platform</dd> <dd aria-errormessage="why-fou-de-la-pouitte" data-v-7116e49f>
        Send your remarks using
        <em data-fou-de-la-pouitte title="Please type this manually" class="underline" data-v-7116e49f><span id="why-fou-de-la-pouitte" class="sr-only" data-v-7116e49f>
            An email address written using CSS, apologies for obfuscating
            this.
          </span></em></dd> <dd class="underline sr-only" data-v-7116e49f><a rel="me" href="https://mastodon.social/@renoirb" data-v-7116e49f>
          @renoirb@mastodon.social
        </a></dd> <dd class="underline sr-only" data-v-7116e49f><a rel="me" href="https://w3c.social/@renoirb" data-v-7116e49f>
          @renoirb@w3c.social
        </a></dd> <dd class="font-mono" data-v-7116e49f>v4.0.0-dev</dd> <span class="inline-flex" data-v-7116e49f><button aria-label="Color Mode" class="hover:text-primary-500 focus:outline-none transition duration-150 ease-in-out rounded-md"><!----> <!----></button></span></dl> <div class="items-item disposition-item" data-v-7116e49f><dl lang="fr-CA" class="see-also" data-v-7116e49f><dt data-v-7116e49f>Voir aussi‚Ä¶</dt> <dd data-v-7116e49f><a href="/ligne-editoriale" data-v-7116e49f> Ligne¬†√©ditoriale </a></dd> <dd data-v-7116e49f><a href="/projects" data-v-7116e49f> Projets </a></dd> <dd data-v-7116e49f><a href="/glossary" lang="en" data-v-7116e49f> Glossary </a></dd> <dd data-v-7116e49f><a href="/code-review" lang="en" data-v-7116e49f>
            Code-Review¬†notes
          </a></dd></dl></div></footer></div></div></div></div><script defer src="/site/_nuxt/static/1729800241/blog/2013/03/creating-and-using-javascript-events-while-combining-events-on-two-separates-behaviors/state.js"></script><script src="/_nuxt/runtime.js" defer></script><script src="/_nuxt/pages/blog.js" defer></script><script src="/_nuxt/pages/blog/_year.js" defer></script><script src="/_nuxt/pages/blog/_year/_month.js" defer></script><script src="/_nuxt/pages/blog/_year/_month/_slug.js" defer></script><script src="/_nuxt/commons/app.js" defer></script><script src="/_nuxt/vendors/app.js" defer></script><script src="/_nuxt/app.js" defer></script><script data-n-head="ssr" type="module" vmid="load-esm-modules-separately-please" data-body="true" defer>
/**
 * #WIP-Mingle-CustomElements-From-ESM-Modules: Added on 2024-09-18 during migration.
 */
import { registerCustomElement } from 'https://renoirb.com/esm-modules/element-utils.mjs'
import NoticeBoxElement from 'https://renoirb.com/esm-modules/notice-box-element.mjs'
try {
  registerCustomElement(window, 'rb-notice-box', NoticeBoxElement)
} catch (e) {
  // #XXX FIX ME because this gets loaded
  console.log('Already loaded', e)
}
        </script>
  </body>
</html>
